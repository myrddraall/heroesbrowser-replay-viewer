{"version":3,"sources":["../heroprotocol/dist/lib/decoder/AbstractDecoder.js","../heroprotocol/dist/lib/decoder/BitPackedBuffer.js","../heroprotocol/dist/lib/decoder/BitPackedDecoder.js","../heroprotocol/dist/lib/decoder/VersionDecoder.js","../heroprotocol/dist/lib/decoder/errors/CorruptedError.js","../heroprotocol/dist/lib/decoder/errors/TruncateError.js","../heroprotocol/dist/lib/decoder/errors/index.js","../heroprotocol/dist/lib/decoder/index.js","../heroprotocol/dist/lib/heroprotocol.js","../heroprotocol/dist/lib/index.js","../heroprotocol/dist/lib/protocols/PythonProtocolConverter.js","../heroprotocol/dist/lib/protocols/decoders.js","../heroprotocol/dist/lib/replay/Replay.js","../heroprotocol/dist/lib/replay/analyzers/BasicReplayAnalyser.js","../heroprotocol/dist/lib/replay/analyzers/ReplayMapAnalyser.js","../heroprotocol/dist/lib/replay/analyzers/ScoreAnalyser.js","../heroprotocol/dist/lib/replay/analyzers/index.js","../heroprotocol/dist/lib/replay/decorators.js","../heroprotocol/dist/lib/replay/index.js","../heroprotocol/dist/lib/replay/proxy/ReplayAnalyserContextCaller.js","../heroprotocol/dist/lib/replay/proxy/ReplayContextCaller.js","../heroprotocol/dist/lib/replay/proxy/ReplayWorker.js","../heroprotocol/dist/lib/replay/proxy/context/WorkerContext.js","../heroprotocol/dist/lib/replay/proxy/context/WorkerContextRegistry.js","../heroprotocol/dist/lib/replay/proxy/index.js","../heroprotocol/dist/lib/replay/proxy/messages/call.js","../heroprotocol/dist/lib/replay/proxy/messages/cmds.js","../heroprotocol/dist/lib/replay/proxy/messages/index.js","../heroprotocol/dist/lib/replay/proxy/messages/init.js","../heroprotocol/dist/lib/replay/proxy/messages/protocol.js","../heroprotocol/dist/lib/replay/proxy/messages/status.js","../heroprotocol/dist/lib/types/events/FilteredEvents.js","../heroprotocol/dist/lib/types/events/IMessageEvents.js","../heroprotocol/dist/lib/types/events/IReplayEvent.js","../heroprotocol/dist/lib/types/events/ITrackerEvents.js","../heroprotocol/dist/lib/types/events/index.js","../heroprotocol/dist/lib/types/index.js","../heroprotocol/dist/lib/types/type.js","../heroprotocol/node_modules/@heroesbrowser/mpq/dist/data/headers.js","../heroprotocol/node_modules/@heroesbrowser/mpq/dist/data/index.js","../heroprotocol/node_modules/@heroesbrowser/mpq/dist/data/tables.js","../heroprotocol/node_modules/@heroesbrowser/mpq/dist/index.js","../heroprotocol/node_modules/@heroesbrowser/mpq/dist/mpq.js","../heroprotocol/node_modules/charenc/charenc.js","../heroprotocol/node_modules/crypt/crypt.js","../heroprotocol/node_modules/keybase-compressjs/main2.js","../heroprotocol/node_modules/keybase-compressjs/outlib/BWT.js","../heroprotocol/node_modules/keybase-compressjs/outlib/BWTC.js","../heroprotocol/node_modules/keybase-compressjs/outlib/BitStream.js","../heroprotocol/node_modules/keybase-compressjs/outlib/Bzip2.js","../heroprotocol/node_modules/keybase-compressjs/outlib/CRC32.js","../heroprotocol/node_modules/keybase-compressjs/outlib/Context1Model.js","../heroprotocol/node_modules/keybase-compressjs/outlib/DefSumModel.js","../heroprotocol/node_modules/keybase-compressjs/outlib/DeflateDistanceModel.js","../heroprotocol/node_modules/keybase-compressjs/outlib/Dmc.js","../heroprotocol/node_modules/keybase-compressjs/outlib/DummyRangeCoder.js","../heroprotocol/node_modules/keybase-compressjs/outlib/FenwickModel.js","../heroprotocol/node_modules/keybase-compressjs/outlib/Huffman.js","../heroprotocol/node_modules/keybase-compressjs/outlib/HuffmanAllocator.js","../heroprotocol/node_modules/keybase-compressjs/outlib/LogDistanceModel.js","../heroprotocol/node_modules/keybase-compressjs/outlib/Lzjb.js","../heroprotocol/node_modules/keybase-compressjs/outlib/LzjbR.js","../heroprotocol/node_modules/keybase-compressjs/outlib/Lzp3.js","../heroprotocol/node_modules/keybase-compressjs/outlib/MTFModel.js","../heroprotocol/node_modules/keybase-compressjs/outlib/NoModel.js","../heroprotocol/node_modules/keybase-compressjs/outlib/PPM.js","../heroprotocol/node_modules/keybase-compressjs/outlib/RangeCoder.js","../heroprotocol/node_modules/keybase-compressjs/outlib/Simple.js","../heroprotocol/node_modules/keybase-compressjs/outlib/Stream.js","../heroprotocol/node_modules/keybase-compressjs/outlib/Util.js","../heroprotocol/node_modules/keybase-compressjs/outlib/freeze.js","../heroprotocol/node_modules/linq/linq.js","../heroprotocol/node_modules/long/src/long.js","../heroprotocol/node_modules/reflect-metadata/Reflect.js","../heroprotocol/node_modules/sha1/sha1.js","./node_modules/moment/locale ^\\.\\/.*$","./src/$_lazy_route_resource lazy","./src/app/app-routing.module.ts","./src/app/app.component.html","./src/app/app.component.scss","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/replay-viewer/components/hero-icon/hero-icon.component.html","./src/app/replay-viewer/components/hero-icon/hero-icon.component.scss","./src/app/replay-viewer/components/hero-icon/hero-icon.component.ts","./src/app/replay-viewer/components/replay-header/replay-header.component.html","./src/app/replay-viewer/components/replay-header/replay-header.component.scss","./src/app/replay-viewer/components/replay-header/replay-header.component.ts","./src/app/replay-viewer/components/replay-nav/nav-item/nav-item.component.html","./src/app/replay-viewer/components/replay-nav/nav-item/nav-item.component.scss","./src/app/replay-viewer/components/replay-nav/nav-item/nav-item.component.ts","./src/app/replay-viewer/components/replay-nav/replay-nav.component.html","./src/app/replay-viewer/components/replay-nav/replay-nav.component.scss","./src/app/replay-viewer/components/replay-nav/replay-nav.component.ts","./src/app/replay-viewer/replay-viewer-routing.module.ts","./src/app/replay-viewer/replay-viewer.component.html","./src/app/replay-viewer/replay-viewer.component.scss","./src/app/replay-viewer/replay-viewer.component.ts","./src/app/replay-viewer/replay-viewer.module.ts","./src/app/replay-viewer/sections/score-screen/score-screen.component.html","./src/app/replay-viewer/sections/score-screen/score-screen.component.scss","./src/app/replay-viewer/sections/score-screen/score-screen.component.ts","./src/app/replay-viewer/services/clip-icon/clip-icon.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":";;;;;;AAAA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;AClCxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;AC5ExD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACjFxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACnLxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACTxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACTxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACRxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACVxD;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,+FAA+F,gBAAgB;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;AC/DxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACTxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB,OAAO;;AAEP;AACA;;;AAGA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;AACA,mCAAmC;;AAEnC;AACA;AACA,OAAO;AACP;;AAEA;AACA,sCAAsC;;AAEtC;AACA;AACA,OAAO;AACP;;AAEA;AACA,sCAAsC;;AAEtC;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC;;AAEpC;AACA,mCAAmC;;AAEnC;AACA,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,uBAAuB,gBAAgB,IAAI,gBAAgB;AAC3D;AACA,KAAK;AACL;AACA;AACA,yBAAyB;AACzB;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA,uBAAuB,gBAAgB,IAAI,gBAAgB,IAAI,GAAG;AAClE,0BAA0B,MAAM,MAAM,aAAa,KAAK,iBAAiB,GAAG,sCAAsC;AAClH,aAAa,YAAY;AACzB;AACA,KAAK;AACL;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA,uBAAuB;AACvB,4BAA4B,WAAW,KAAK,eAAe,IAAI,SAAS,GAAG,sCAAsC;AACjH,aAAa,WAAW;AACxB;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kCAAkC,kCAAkC;AACpE,SAAS;AACT;AACA,uBAAuB,gBAAgB,IAAI,gBAAgB,KAAK,gBAAgB;AAChF;AACA,KAAK;AACL;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA,sBAAsB,gBAAgB;AACtC;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,qBAAqB;AACrB,gDAAgD;AAChD,wBAAwB;AACxB,gDAAgD;AAChD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA,6BAA6B,QAAQ;AACrC;AACA;AACA,iCAAiC,MAAM,wBAAwB,MAAM,GAAG,EAAE,eAAe;AACzF;AACA;AACA,iCAAiC,MAAM;AACvC;AACA,6BAA6B,UAAU;AACvC;AACA,wBAAwB,WAAW;AACnC;AACA,wBAAwB,qCAAqC;AAC7D,0BAA0B,YAAY;AACtC;AACA,SAAS;AACT,6BAA6B,gBAAgB;AAC7C;AACA,sBAAsB,UAAU,KAAK,gBAAgB,MAAM,WAAW;AACtE;AACA;AACA,SAAS;AACT,6BAA6B,mBAAmB;AAChD;AACA,sBAAsB,UAAU,KAAK,gBAAgB,MAAM,WAAW;AACtE;AACA;AACA,SAAS;AACT,6BAA6B,mBAAmB;AAChD;AACA,sBAAsB,UAAU,KAAK,gBAAgB,MAAM,WAAW;AACtE;AACA;AACA,SAAS;AACT,6BAA6B,iBAAiB;AAC9C,6BAA6B,oBAAoB;AACjD,6BAA6B,oBAAoB;AACjD,6BAA6B,aAAa;AAC1C,6BAA6B,cAAc;AAC3C,6BAA6B,eAAe;AAC5C;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACxfxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACPxD;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gEAAgE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,EAAE;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,EAAE;AAChB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;AC5QxD;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,8CAA8C,cAAc;AAC5D;AACA,UAAU,yDAAyD;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uDAAuD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mGAAmG,UAAU;AAC7G;AACA,uCAAuC,MAAM,wBAAwB;AACrE,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;AC/PxD;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,MAAM,GAAG,MAAM;AAC5D;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACjKxD;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa;AAC/L,2BAA2B,wBAAwB;AACnD;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACvFxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACTxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,YAAY;AAC/C,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,YAAY;AACvD;AACA;AACA;AACA,qCAAqC,YAAY;AACjD,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;AChIxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACVxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACnBxD;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,+DAA+D;AAClK;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,sBAAsB;AAChC,QAAQ,iGAAiG;AACzG,QAAQ,eAAe;AACvB,QAAQ,kBAAkB;;AAE1B;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;AC5FxD;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,SAAS;AAC3E;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACnJxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;AC3KxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACjCxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACTxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACnBxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACrBxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACXxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACPxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACXxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACPxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;AChCxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACpCxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACnBxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACZxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACVxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACRxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACRxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACrCxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACRxD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACtBxD;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;;ACRxD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,SAAS;AACpC;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA;AACA;AACA,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,aAAa;;;;;;;;ACrSxD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA,KAAK;;AAEL;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AChCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,cAAc;AACnC;AACA;AACA,KAAK;;AAEL;AACA;AACA,0BAA0B,OAAO;AACjC;AACA;AACA,KAAK;;AAEL;AACA;AACA,wCAAwC,kBAAkB;AAC1D;AACA;AACA,KAAK;;AAEL;AACA;AACA,iCAAiC,uBAAuB;AACxD;AACA;AACA,KAAK;;AAEL;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA,KAAK;;AAEL;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;;;;;;;AC/FD,2CAA2C,gCAAgC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,OAAO,OAAO,UAAU;AAC3C,mBAAmB,OAAO,OAAO,WAAW;AAC5C;AACA;AACA;AACA;AACA,uBAAuB,OAAO,OAAO,aAAa,YAAY;AAC9D,SAAS;AACT,uBAAuB,OAAO,OAAO,aAAa,mBAAmB;AACrE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,mCAAmC;AACnC;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA,yCAAyC,WAAW,gBAAgB;AACpE;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,+BAA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CA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,aAAa;AACvC;AACA;AACA;AACA,4CAA4C,oBAAoB;AAChE,iDAAiD,sBAAsB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,WAAW,OAAO,iBAAiB;AACtD,oBAAoB,OAAO,OAAO,aAAa;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO,OAAO,UAAU;AACzC,iBAAiB,KAAK,OAAO,mBAAmB;AAChD,sBAAsB,OAAO,OAAO,WAAW,iBAAiB;AAChE,wBAAwB,MAAM;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,aAAa;AACvC;AACA;AACA;AACA,4CAA4C,oBAAoB;AAChE,iDAAiD,sBAAsB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA,qBAAqB,KAAK,OAAO,cAAc;AAC/C;AACA,iBAAiB,KAAK,OAAO,iBAAiB;AAC9C;AACA;AACA;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA,8BAA8B,UAAU;AACxC,8BAA8B,SAAS;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;ACvaA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA,6BAA6B,OAAO;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,aAAa;AACb,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA,uBAAuB,KAAK,OAAO;AACnC;AACA;AACA,2BAA2B;AAC3B,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA,iBAAiB;AACjB,kDAAkD;AAClD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,qBAAqB,UAAU;AAC/B;AACA,yBAAyB,gBAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kDAAkD;AACzE;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,qBAAqB;AACrB,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET,oCAAoC;AACpC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA,aAAa,iCAAiC;AAC9C;AACA;AACA,aAAa,iCAAiC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,qDAAqD;AACrD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,wBAAwB;AACxB,qBAAqB,UAAU;AAC/B;AACA;AACA,6BAA6B,OAAO,OAAO,YAAY;AACvD;AACA,iBAAiB;AACjB,6BAA6B,OAAO,OAAO,YAAY,YAAY;AACnE;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;;;;;;;ACpPA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+BAA+B;AAC/B;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA,mBAAmB,OAAO;AAC1B,oBAAoB;AACpB;AACA,qCAAqC,KAAK;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;AC9GA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8BAA8B;AAC9B;AACA,qDAAqD;AACrD;;AAEA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA,gCAAgC;AAChC;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,8CAA8C;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA6B;AAC7B,6BAA6B;;AAE7B;;AAEA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,gBAAgB;AAC7B;;AAEA,gDAAgD;;AAEhD,aAAa,gBAAgB;AAC7B;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA,4BAA4B;AAC5B;AACA,2BAA2B;AAC3B,eAAe,cAAc;AAC7B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,cAAc;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,aAAa;AACjC;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,mCAAmC,wBAAwB;AAC3D;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,gCAAgC,wBAAwB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,wBAAwB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,wBAAwB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wBAAwB;AAC5E;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,UAAU;;AAEtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA,uCAAuC,YAAY;;AAEnD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA,iCAAiC,YAAY,EAAE;AAC/C,+CAA+C,cAAc,EAAE;AAC/D;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA,6BAA6B,YAAY,EAAE;AAC3C;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,2BAA2B;AACtC;AACA;AACA;AACA;AACA,gBAAgB;AAChB,KAAK;AACL,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,OAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,gBAAgB;AAChC;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iBAAiB,OAAO,oBAAoB;AACzD,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC,mCAAmC,UAAU;AAC7C;AACA;AACA,mBAAmB,2DAA2D;AAC9E;AACA;AACA;AACA,kCAAkC,0BAA0B,EAAE;AAC9D;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA,eAAe,gBAAgB,OAAO,UAAU;AAChD;AACA,kBAAkB,gBAAgB;AAClC;AACA,eAAe,gCAAgC;AAC/C;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA,uBAAuB;AACvB;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA,WAAW,MAAM;AACjB;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe,OAAO,aAAa;AAC9C;AACA,gBAAgB,OAAO;AACvB,kBAAkB,YAAY;AAC9B;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,OAAO;AACP,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA;AACA,aAAa,gBAAgB;AAC7B,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,mBAAmB;AACnB;AACA,oBAAoB,kBAAkB;AACtC,yBAAyB,kBAAkB;AAC3C,wBAAwB,kBAAkB;AAC1C,wBAAwB,kBAAkB;AAC1C,QAAQ,kBAAkB;AAC1B;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe,OAAO,aAAa;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,iBAAiB,OAAO,UAAU,EAAE;AAC/C,WAAW,oBAAoB;AAC/B;AACA;AACA,aAAa,iBAAiB,OAAO,gBAAgB,OAAO,EAAE;AAC9D;AACA;AACA;AACA,UAAU,IAAI;AACd;AACA;AACA;AACA;AACA;AACA,WAAW,iBAAiB;AAC5B;AACA,iCAAiC;AACjC;AACA;AACA,gBAAgB,OAAO;AACvB;AACA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,oBAAoB;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;ACh7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB,gBAAgB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,qBAAqB,gBAAgB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,yCAAyC;AACzC,2CAA2C;AAC3C,2CAA2C;AAC3C;AACA,WAAW,iBAAiB;AAC5B;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA,yBAAyB,gDAAgD;AACzE;AACA;AACA;AACA;AACA,kDAAkD,QAAQ,EAAE;AAC5D;AACA;AACA;AACA,sDAAsD,QAAQ;AAC9D;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,wBAAwB;AACnC;AACA;AACA,gCAAgC;AAChC;AACA;AACA,mBAAmB,QAAQ;AAC3B,qBAAqB,oBAAoB;AACzC;AACA,UAAU,aAAa;AACvB;AACA;AACA;AACA,UAAU,gBAAgB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,WAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kCAAkC;AAClC;AACA;AACA,iCAAiC;AACjC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B,0BAA0B,yBAAyB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,OAAO;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAiB;AACjB,qBAAqB;AACrB,yBAAyB;AACzB,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8BAA8B;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,iBAAiB;AAChC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;ACrgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,YAAY,4BAA4B;AAC3E,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uDAAuD,OAAO;AAC9D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA,gEAAgE,OAAO;AACvE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;ACtOA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,WAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,+BAA+B;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,+BAA+B;AAC1C;AACA,WAAW,OAAO;AAClB,YAAY,wBAAwB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,aAAa,sBAAsB,SAAS,SAAS;AACrD,iCAAiC,SAAS;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA,yBAAyB,6BAA6B;AACtD;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,+BAA+B;AAC1C;AACA,WAAW,OAAO;AAClB,YAAY,wBAAwB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,aAAa;AAC9D,2CAA2C,SAAS;AACpD;AACA,SAAS;AACT;AACA;AACA,6CAA6C,aAAa;AAC1D;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;;;;;;;;AC/SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2BAA2B;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA,sDAAsD;AACtD,sBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,SAAS,SAAS;AAC9C,iCAAiC,SAAS;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA,SAAS;AACT,iDAAiD;AACjD;AACA,uBAAuB,YAAY,YAAY;AAC/C;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA,yBAAyB,6BAA6B;AACtD;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,uDAAuD;AACvD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2BAA2B;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,wBAAwB,kBAAkB;AAC1C,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA,iDAAiD,aAAa;AAC9D,2CAA2C,SAAS;AACpD;AACA,SAAS;AACT;AACA;AACA,6CAA6C,aAAa;AAC1D;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;;;;;;;;ACzPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,gBAAgB,gBAAgB;AACjD;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;;AAEA,GAAG,OAAO;AACV;AACA,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sBAAsB;AAC9C;;AAEA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,mBAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sBAAsB;AAC/C;;AAEA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,yBAAyB,yBAAyB;AAClD;AACA,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;;;;;;;;AC5RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mCAAmC,cAAc;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,0BAA0B;AAC5D;AACA,KAAK,OAAO;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA,0BAA0B,4BAA4B;AACtD,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,SAAS;AAChE;AACA,qBAAqB,uCAAuC;AAC5D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,SAAS;AAC5D,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;ACpNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB,qCAAqC;AAC9D;AACA;AACA;AACA,qBAAqB,MAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,MAAM;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;AACA;AACA,kCAAkC,cAAc,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA,+BAA+B,SAAS;AACxC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,OAAO;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,yBAAyB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,MAAM;AAC9B;AACA;AACA;AACA;AACA;AACA,qBAAqB,iCAAiC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,yBAAyB;AACzB,WAAW;AACX,sBAAsB;AACtB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D,eAAe,qBAAqB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iCAAiC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,MAAM;AAC9B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,eAAe;AACzC;AACA;AACA;AACA,2DAA2D;AAC3D,eAAe,qBAAqB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B,iBAAiB,MAAM;AACvB;AACA,mCAAmC,uCAAuC;AAC1E;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,MAAM;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,MAAM;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;;;;;;;AC1VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA,qBAAqB;AACrB,+BAA+B;AAC/B,wBAAwB;AACxB,sBAAsB;AACtB,2BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;AACA,0CAA0C;AAC1C,gDAAgD;AAChD;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,6DAA6D;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,kBAAkB,WAAW;AAC7B;AACA,SAAS,OAAO;AAChB;AACA,kBAAkB,WAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA,kCAAkC;AAClC,6CAA6C;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA,uBAAuB,GAAG;AAC1B;AACA;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,aAAa;AAClC;AACA;AACA;AACA,8BAA8B,YAAY;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;ACnHA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kBAAkB,YAAY;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kBAAkB,OAAO;AACtD;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA,yCAAyC;;AAEzC;AACA;;AAEA;AACA;AACA;;;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,YAAY;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,gBAAgB;AACxD,qCAAqC,iBAAiB;AACtD,oCAAoC,kCAAkC;AACtE,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iCAAiC,kBAAkB;AACnD;AACA;AACA,8BAA8B,qBAAqB;AACnD;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,yBAAyB;AACzB,aAAa;AACb;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,gBAAgB;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,yBAAyB,sBAAsB;AAC/C;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,gBAAgB;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,yBAAyB;AACzB,8BAA8B,MAAM;AACpC,uCAAuC;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB,eAAe,OAAO;AAC/C;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,UAAU;AACjD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,yCAAyC,UAAU;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB;AACxB;AACA;;;;;;;;;;ACtUA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH,wBAAwB,UAAU;AAClC;;AAEA;AACA;;;;;;;;AChBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,2BAA2B,aAAa,EAAE;AAC1C,4BAA4B;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,sCAAsC;AACtC;;AAEA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC,gBAAgB;AACnD;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oCAAoC,gBAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,0BAA0B;;AAE1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,6BAA6B,cAAc,EAAE;AAC7C;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,kCAAkC,EAAE;AACzE;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,0BAA0B,EAAE;AACjE;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC,yBAAyB;AACjE;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,oCAAoC,EAAE;AACnE;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,sBAAsB,EAAE;AACrD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,sBAAsB,EAAE;AACrD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,sBAAsB,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,sBAAsB,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,kCAAkC,EAAE;AACjE;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,yBAAyB,EAAE;AACxD,6BAA6B,kCAAkC,EAAE;AACjE;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,iCAAiC,EAAE;AAChE;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,sBAAsB,EAAE;AACrD,6BAA6B,wCAAwC,EAAE;AACvE;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,sBAAsB,EAAE;AACrD,6BAA6B,wCAAwC,EAAE;AACvE;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;;AAEA;AACA,6BAA6B,mEAAmE,EAAE;AAClG;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;;AAEA,oFAAoF,gBAAgB,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,+EAA+E,aAAa,EAAE;AAC9F;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iCAAiC,qCAAqC,EAAE;AACxE;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iCAAiC,2BAA2B,EAAE;AAC9D,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,UAAU;AAChF;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iCAAiC,qCAAqC,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iCAAiC,2BAA2B,EAAE;AAC9D,aAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,0BAA0B,EAAE;AACnE,uCAAuC,8BAA8B,EAAE;AACvE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C,2BAA2B;AACzE;AACA;AACA,iBAAiB;AACjB;AACA,sDAAsD,sBAAsB;AAC5E;AACA,kDAAkD,qBAAqB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C,2BAA2B;AACzE;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,gCAAgC,EAAE;AAC/D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oEAAoE;;AAEpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,0CAA0C,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kDAAkD,2BAA2B;AAC7E;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iHAAiH;AACjH;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0DAA0D;AAC1D;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oEAAoE,eAAe,EAAE;AACrF,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oEAAoE,eAAe,EAAE;AACrF;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,6BAA6B,2BAA2B,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;;AAEzD;AACA,oCAAoC;AACpC,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,iCAAiC;AACrF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,gEAAgE,wBAAwB,EAAE;AAC1F;;AAEA;AACA;AACA;AACA;AACA,gEAAgE,wBAAwB,EAAE;AAC1F;;AAEA;AACA;AACA,+CAA+C,kDAAkD,EAAE;AACnG;;AAEA;AACA;AACA,+CAA+C,kDAAkD,EAAE;AACnG;;AAEA;AACA;AACA;AACA;AACA,mEAAmE,cAAc,EAAE;AACnF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;;AAEA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B;AACxD;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0DAA0D;;AAE1D;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,2CAA2C,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,eAAe,EAAE;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB,6BAA6B,2BAA2B,EAAE;AAC1D,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6BAA6B,qCAAqC,EAAE;AACpE;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA,8CAA8C,kCAAkC,EAAE;AAClF,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sCAAsC,eAAe;AACrD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,6BAA6B,iCAAiC,EAAE;AAChE;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,sBAAsB,EAAE;AAC1D;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kDAAkD,yCAAyC;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,qCAAqC,EAAE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,yBAAyB,2BAA2B,EAAE;AACtD;;AAEA;AACA;AACA,uCAAuC;AACvC,qCAAqC;AACrC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iDAAiD,kCAAkC;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,qCAAqC,EAAE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,yBAAyB,2BAA2B,EAAE;AACtD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;;AAEb;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,iBAAiB;;AAEjB,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,qCAAqC,EAAE;AAC5E;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gHAAyD;AACzD,2FAA0C,mBAAmB,EAAE;AAAA;AAC/D;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;AC18FD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA,qDAAqD,cAAc;;AAEnE;AACA;AACA,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa;AACb;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA,uBAAuB;;AAEvB;AACA,WAAW,OAAO;AAClB,WAAW,kBAAkB;AAC7B,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,kBAAkB;AAC7B,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA,WAAW,sBAAsB,8CAA8C;AAC/E,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,sBAAsB,8CAA8C;AAC/E,WAAW,SAAS;AACpB,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA,YAAY,WAAW;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,gEAAgE,kBAAkB;AAClF,aAAa;AACb;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2EAA2E,kBAAkB;AAC7F;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,iFAAiF,qBAAqB;AACtG;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;;AAEA;AACA,iFAAiF,qBAAqB;AACtG;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,iFAAiF,oBAAoB;AACrG;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,0FAA0F,2BAA2B;AACrH;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;;AAEA;AACA,0FAA0F,2BAA2B;AACrH;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,oFAAoF,uBAAuB;AAC3G;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,6FAA6F,8BAA8B;AAC3H;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;;AAEA;AACA,6FAA6F,8BAA8B;AAC3H;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yEAAyE,mBAAmB;AAC5F;AACA,WAAW,oBAAoB;AAC/B,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mDAAmD,kBAAkB;AACrE;AACA,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+EAA+E,oBAAoB;AACnG;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4EAA4E,oBAAoB;AAChG;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,mBAAmB;AAC1E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,oEAAoE,kBAAkB;AACtF;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gEAAgE,kBAAkB;AAClF;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;;AAEA;AACA,gEAAgE,kBAAkB;AAClF;AACA,WAAW,oBAAoB;AAC/B,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6FAA6F,qBAAqB;AAClH;AACA,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6GAA6G,sBAAsB;AACnI;AACA,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,wGAAwG,8BAA8B;AACtI;AACA,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA,wGAAwG,8BAA8B;AACtI;AACA,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1yCA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,mDAAmD;AAC3G;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE,6BAA6B,gBAAgB,kBAAkB;AAC/D;AACA;AACA;AACA;AACA,+BAA+B,4CAA4C;AAC3E;AACA,mCAAmC,wBAAwB,kBAAkB,EAAE;AAC/E,mCAAmC,yBAAyB,EAAE,EAAE;AAChE;AACA,uCAAuC,8BAA8B;AACrE,uCAAuC,mBAAmB,EAAE;AAC5D;AACA,uCAAuC,qDAAqD;AAC5F,uCAAuC,iBAAiB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,2CAA2C;AAC3C,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,uBAAuB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0BAA0B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,aAAa;AAChF,qEAAqE,aAAa;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,0BAA0B,EAAE;AAClE;AACA;AACA,iBAAiB;AACjB,oDAAoD,+CAA+C;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,UAAU;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,0DAA0D;AAC5G,oDAAoD,4DAA4D;AAChH,qDAAqD,4DAA4D;AACjH,2DAA2D,uBAAuB;AAClF,6DAA6D,uBAAuB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,uBAAuB,EAAE;AAC/D;AACA;AACA,iBAAiB;AACjB,sDAAsD,6BAA6B;AACnF,sDAAsD,0CAA0C;AAChG,yDAAyD,gCAAgC;AACzF,mDAAmD,mBAAmB;AACtE,kDAAkD,yBAAyB;AAC3E,oDAAoD,2BAA2B;AAC/E,qDAAqD,4BAA4B;AACjF,2DAA2D,oBAAoB;AAC/E,6DAA6D,oBAAoB;AACjF;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,0BAA0B;AACtF;AACA;AACA;AACA;AACA,+BAA+B,UAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,0BAA0B;AAC3B,mC;;;;;;;;AC3mCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,QAAQ;;AAE7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;;;ACjFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wE;;;;;;;ACtQA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,4E;;;;;;;;;;;;;;;;;;ACVyC;AACc;AACG;AAE1D,IAAM,SAAS,GAAW,EACzB,CAAC;AAaF;IAAA;IA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","file":"main.bundle.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BitPackedBuffer_1 = require(\"./BitPackedBuffer\");\nconst errors_1 = require(\"./errors\");\nclass AbstractDecoder {\n    constructor(data, typeIfo) {\n        this._buffer = new BitPackedBuffer_1.BitPackedBuffer(data);\n        this._typeinfos = typeIfo;\n    }\n    toString() {\n        return this._buffer.toString();\n    }\n    instance(typeid) {\n        if (typeid >= this._typeinfos.length) {\n            throw new errors_1.CorruptedError(this.toString());\n        }\n        const typeinfo = this._typeinfos[typeid];\n        return this[typeinfo[0]].apply(this, typeinfo[1]);\n    }\n    byteAlign() {\n        this._buffer.byteAlign();\n    }\n    get isDone() {\n        return this._buffer.isDone;\n    }\n    get usedBits() {\n        return this._buffer.usedBits;\n    }\n    get size() {\n        return this._buffer.size;\n    }\n}\nexports.AbstractDecoder = AbstractDecoder;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlY29kZXIvQWJzdHJhY3REZWNvZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsdURBQW9EO0FBQ3BELHFDQUEwQztBQUUxQztJQUlJLFlBQW1CLElBQVksRUFBRSxPQUFPO1FBQ3BDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxpQ0FBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDO0lBQzlCLENBQUM7SUFFTSxRQUFRO1FBQ1gsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ25DLENBQUM7SUFFTSxRQUFRLENBQUMsTUFBTTtRQUNsQixJQUFJLE1BQU0sSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRTtZQUFFLE1BQU0sSUFBSSx1QkFBYyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1NBQUU7UUFFcEYsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6QyxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFTSxTQUFTO1FBQ1osSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBVyxNQUFNO1FBQ2IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztJQUMvQixDQUFDO0lBRUQsSUFBVyxRQUFRO1FBQ2YsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztJQUNqQyxDQUFDO0lBQ0QsSUFBVyxJQUFJO1FBQ1gsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztJQUM3QixDQUFDO0NBQ0o7QUFsQ0QsMENBa0NDIiwiZmlsZSI6ImRlY29kZXIvQWJzdHJhY3REZWNvZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcclxuaW1wb3J0IHsgQml0UGFja2VkQnVmZmVyIH0gZnJvbSAnLi9CaXRQYWNrZWRCdWZmZXInO1xyXG5pbXBvcnQgeyBDb3JydXB0ZWRFcnJvciB9IGZyb20gJy4vZXJyb3JzJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdERlY29kZXIge1xyXG5cclxuICAgIHByb3RlY3RlZCBfYnVmZmVyOiBCaXRQYWNrZWRCdWZmZXI7XHJcbiAgICBwcm90ZWN0ZWQgX3R5cGVpbmZvczogYW55O1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlciwgdHlwZUlmbykge1xyXG4gICAgICAgIHRoaXMuX2J1ZmZlciA9IG5ldyBCaXRQYWNrZWRCdWZmZXIoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5fdHlwZWluZm9zID0gdHlwZUlmbztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYnVmZmVyLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluc3RhbmNlKHR5cGVpZCkge1xyXG4gICAgICAgIGlmICh0eXBlaWQgPj0gdGhpcy5fdHlwZWluZm9zLmxlbmd0aCkgeyB0aHJvdyBuZXcgQ29ycnVwdGVkRXJyb3IodGhpcy50b1N0cmluZygpKTsgfVxyXG5cclxuICAgICAgICBjb25zdCB0eXBlaW5mbyA9IHRoaXMuX3R5cGVpbmZvc1t0eXBlaWRdO1xyXG4gICAgICAgIHJldHVybiB0aGlzW3R5cGVpbmZvWzBdXS5hcHBseSh0aGlzLCB0eXBlaW5mb1sxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJ5dGVBbGlnbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9idWZmZXIuYnl0ZUFsaWduKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpc0RvbmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1ZmZlci5pc0RvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB1c2VkQml0cygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9idWZmZXIudXNlZEJpdHM7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IHNpemUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYnVmZmVyLnNpemU7XHJcbiAgICB9XHJcbn1cclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/decoder/AbstractDecoder.js\n// module id = ../heroprotocol/dist/lib/decoder/AbstractDecoder.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// tslint:disable:no-bitwise\nconst buffer_1 = require(\"buffer\");\nconst errors_1 = require(\"./errors\");\nclass BitPackedBuffer {\n    constructor(data, endian = 'big') {\n        this._used = 0;\n        this._next = null;\n        this._nextBits = 0;\n        this._data = data || new buffer_1.Buffer(0);\n        this._bigEndian = endian === 'big';\n    }\n    toString() {\n        return 'buffer(' +\n            (this._nextBits && this._next || 0).toString(16) + '/' + this._nextBits +\n            ',[' + this._used + ']=' + ((this._used < this._data.length) ? this._data.readUInt8(this._used).toString(16) : '--') +\n            ')';\n    }\n    get isDone() {\n        return this._nextBits === 0 && this._used >= this._data.length;\n    }\n    get size() {\n        return this._data.length * 8;\n    }\n    get usedBits() {\n        return this._used * 8 - this._nextBits;\n    }\n    byteAlign() {\n        this._nextBits = 0;\n    }\n    readAlignedBytes(bytes) {\n        this.byteAlign();\n        const data = this._data.slice(this._used, this._used + bytes);\n        this._used += bytes;\n        if (data.length !== bytes) {\n            throw new errors_1.TruncateError(this.toString());\n        }\n        return data;\n    }\n    readBits(bits) {\n        let result = 0;\n        let resultbits = 0;\n        while (resultbits !== bits) {\n            if (this._nextBits === 0) {\n                if (this.isDone) {\n                    throw new errors_1.TruncateError(this.toString());\n                }\n                this._next = this._data.readUInt8(this._used);\n                this._used += 1;\n                this._nextBits = 8;\n            }\n            const copybits = Math.min(bits - resultbits, this._nextBits);\n            const copy = this._next & ((1 << copybits) - 1);\n            if (this._bigEndian) {\n                result |= copy << (bits - resultbits - copybits);\n            }\n            else {\n                result |= copy << resultbits;\n            }\n            this._next >>= copybits;\n            this._nextBits -= copybits;\n            resultbits += copybits;\n        }\n        return result;\n    }\n    readUnalignedBytes(bytes) {\n        const buff = new buffer_1.Buffer(bytes);\n        for (let i = 0; i < bytes; i += 1) {\n            buff.writeUInt8(this.readBits(8), i);\n        }\n        return buff;\n    }\n}\nexports.BitPackedBuffer = BitPackedBuffer;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlY29kZXIvQml0UGFja2VkQnVmZmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNEJBQTRCO0FBQzVCLG1DQUFnQztBQUNoQyxxQ0FBeUM7QUFDekM7SUFRSSxZQUFtQixJQUFZLEVBQUUsU0FBMEIsS0FBSztRQUx4RCxVQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsVUFBSyxHQUFHLElBQUksQ0FBQztRQUNiLGNBQVMsR0FBRyxDQUFDLENBQUM7UUFJbEIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksSUFBSSxlQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLEtBQUssS0FBSyxDQUFDO0lBQ3ZDLENBQUM7SUFHTSxRQUFRO1FBQ1gsT0FBTyxTQUFTO1lBQ1osQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUztZQUN2RSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ3BILEdBQUcsQ0FBQztJQUNaLENBQUM7SUFFRCxJQUFXLE1BQU07UUFDYixPQUFPLElBQUksQ0FBQyxTQUFTLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDbkUsQ0FBQztJQUVELElBQVcsSUFBSTtRQUNYLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxJQUFXLFFBQVE7UUFDZixPQUFPLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDM0MsQ0FBQztJQUVNLFNBQVM7UUFDWixJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBRU0sZ0JBQWdCLENBQUMsS0FBYTtRQUNqQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDakIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDO1FBQzlELElBQUksQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDO1FBQ3BCLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxLQUFLLEVBQUU7WUFDdkIsTUFBTSxJQUFJLHNCQUFhLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7U0FDNUM7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRU0sUUFBUSxDQUFDLElBQVk7UUFDeEIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDO1FBRW5CLE9BQU8sVUFBVSxLQUFLLElBQUksRUFBRTtZQUN4QixJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssQ0FBQyxFQUFFO2dCQUN0QixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7b0JBQUUsTUFBTSxJQUFJLHNCQUFhLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7aUJBQUU7Z0JBQzlELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM5QyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztnQkFDaEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7YUFDdEI7WUFFRCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxVQUFVLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzdELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUVoRCxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7Z0JBQ2pCLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsVUFBVSxHQUFHLFFBQVEsQ0FBQyxDQUFDO2FBQ3BEO2lCQUFNO2dCQUNILE1BQU0sSUFBSSxJQUFJLElBQUksVUFBVSxDQUFDO2FBQ2hDO1lBQ0QsSUFBSSxDQUFDLEtBQUssS0FBSyxRQUFRLENBQUM7WUFDeEIsSUFBSSxDQUFDLFNBQVMsSUFBSSxRQUFRLENBQUM7WUFDM0IsVUFBVSxJQUFJLFFBQVEsQ0FBQztTQUMxQjtRQUVELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFFTSxrQkFBa0IsQ0FBQyxLQUFhO1FBQ25DLE1BQU0sSUFBSSxHQUFHLElBQUksZUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9CLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUMvQixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDeEM7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0NBQ0o7QUFsRkQsMENBa0ZDIiwiZmlsZSI6ImRlY29kZXIvQml0UGFja2VkQnVmZmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZVxyXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xyXG5pbXBvcnQgeyBUcnVuY2F0ZUVycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xyXG5leHBvcnQgY2xhc3MgQml0UGFja2VkQnVmZmVyIHtcclxuXHJcbiAgICBwcml2YXRlIF9kYXRhOiBCdWZmZXI7XHJcbiAgICBwcml2YXRlIF91c2VkID0gMDtcclxuICAgIHByaXZhdGUgX25leHQgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfbmV4dEJpdHMgPSAwO1xyXG4gICAgcHJpdmF0ZSBfYmlnRW5kaWFuOiBib29sZWFuO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIsIGVuZGlhbjogJ2JpZycgfCAnc21hbGwnID0gJ2JpZycpIHtcclxuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YSB8fCBuZXcgQnVmZmVyKDApO1xyXG4gICAgICAgIHRoaXMuX2JpZ0VuZGlhbiA9IGVuZGlhbiA9PT0gJ2JpZyc7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gJ2J1ZmZlcignICtcclxuICAgICAgICAgICAgKHRoaXMuX25leHRCaXRzICYmIHRoaXMuX25leHQgfHwgMCkudG9TdHJpbmcoMTYpICsgJy8nICsgdGhpcy5fbmV4dEJpdHMgK1xyXG4gICAgICAgICAgICAnLFsnICsgdGhpcy5fdXNlZCArICddPScgKyAoKHRoaXMuX3VzZWQgPCB0aGlzLl9kYXRhLmxlbmd0aCkgPyB0aGlzLl9kYXRhLnJlYWRVSW50OCh0aGlzLl91c2VkKS50b1N0cmluZygxNikgOiAnLS0nKSArXHJcbiAgICAgICAgICAgICcpJztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlzRG9uZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmV4dEJpdHMgPT09IDAgJiYgdGhpcy5fdXNlZCA+PSB0aGlzLl9kYXRhLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHNpemUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YS5sZW5ndGggKiA4O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdXNlZEJpdHMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlZCAqIDggLSB0aGlzLl9uZXh0Qml0cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYnl0ZUFsaWduKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX25leHRCaXRzID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVhZEFsaWduZWRCeXRlcyhieXRlczogbnVtYmVyKTogQnVmZmVyIHtcclxuICAgICAgICB0aGlzLmJ5dGVBbGlnbigpO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhLnNsaWNlKHRoaXMuX3VzZWQsIHRoaXMuX3VzZWQgKyBieXRlcyk7XHJcbiAgICAgICAgdGhpcy5fdXNlZCArPSBieXRlcztcclxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggIT09IGJ5dGVzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUcnVuY2F0ZUVycm9yKHRoaXMudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWFkQml0cyhiaXRzOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xyXG4gICAgICAgIGxldCByZXN1bHRiaXRzID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKHJlc3VsdGJpdHMgIT09IGJpdHMpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX25leHRCaXRzID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RvbmUpIHsgdGhyb3cgbmV3IFRydW5jYXRlRXJyb3IodGhpcy50b1N0cmluZygpKTsgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbmV4dCA9IHRoaXMuX2RhdGEucmVhZFVJbnQ4KHRoaXMuX3VzZWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXNlZCArPSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbmV4dEJpdHMgPSA4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb3B5Yml0cyA9IE1hdGgubWluKGJpdHMgLSByZXN1bHRiaXRzLCB0aGlzLl9uZXh0Qml0cyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvcHkgPSB0aGlzLl9uZXh0ICYgKCgxIDw8IGNvcHliaXRzKSAtIDEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2JpZ0VuZGlhbikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0IHw9IGNvcHkgPDwgKGJpdHMgLSByZXN1bHRiaXRzIC0gY29weWJpdHMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0IHw9IGNvcHkgPDwgcmVzdWx0Yml0cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9uZXh0ID4+PSBjb3B5Yml0cztcclxuICAgICAgICAgICAgdGhpcy5fbmV4dEJpdHMgLT0gY29weWJpdHM7XHJcbiAgICAgICAgICAgIHJlc3VsdGJpdHMgKz0gY29weWJpdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWFkVW5hbGlnbmVkQnl0ZXMoYnl0ZXM6IG51bWJlcik6IEJ1ZmZlciB7XHJcbiAgICAgICAgY29uc3QgYnVmZiA9IG5ldyBCdWZmZXIoYnl0ZXMpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXM7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBidWZmLndyaXRlVUludDgodGhpcy5yZWFkQml0cyg4KSwgaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBidWZmO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/decoder/BitPackedBuffer.js\n// module id = ../heroprotocol/dist/lib/decoder/BitPackedBuffer.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst errors_1 = require(\"./errors\");\nconst AbstractDecoder_1 = require(\"./AbstractDecoder\");\nclass BitPackedDecoder extends AbstractDecoder_1.AbstractDecoder {\n    constructor(data, typeIfo) {\n        super(data, typeIfo);\n    }\n    _array(bounds, typeid) {\n        const length = this._int(bounds);\n        const ar = [];\n        for (let i = 0; i < length; i += 1) {\n            ar[i] = this.instance(typeid);\n        }\n        return ar;\n    }\n    _bitarray(bounds) {\n        const length = this._int(bounds);\n        return [length, this._buffer.readBits(length)];\n    }\n    _blob(bounds) {\n        const length = this._int(bounds);\n        return this._buffer.readAlignedBytes(length);\n    }\n    _bool() {\n        return this._int([0, 1]) !== 0;\n    }\n    _choice(bounds, fields) {\n        const tag = this._int(bounds);\n        const field = fields[tag];\n        if (!field) {\n            throw new errors_1.CorruptedError(this.toString());\n        }\n        const ret = {};\n        ret[field[0]] = this.instance(field[1]);\n        return ret;\n    }\n    _fourcc() {\n        return this._buffer.readUnalignedBytes(4);\n    }\n    _int(bounds) {\n        const value = bounds[0] + this._buffer.readBits(bounds[1]);\n        return value;\n    }\n    _null() {\n        return null;\n    }\n    _optional(typeid) {\n        const exists = this._bool();\n        return exists ? this.instance(typeid) : null;\n    }\n    _real32() {\n        return this._buffer.readUnalignedBytes(4).readFloatBE(0);\n    }\n    _real64() {\n        return this._buffer.readUnalignedBytes(8).readDoubleBE(0);\n    }\n    _struct(fields) {\n        let result = {};\n        fields.forEach(field => {\n            if (field[0] === '__parent') {\n                const parent = this.instance(field[1]);\n                if (parent && typeof parent === 'object' && !Array.isArray(parent)) {\n                    result = Object.assign(result, parent);\n                }\n                else if (fields.length === 0) {\n                    result = parent;\n                }\n                else {\n                    result[field[0]] = parent;\n                }\n            }\n            else {\n                result[field[0]] = this.instance(field[1]);\n            }\n        });\n        return result;\n    }\n}\nexports.BitPackedDecoder = BitPackedDecoder;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlY29kZXIvQml0UGFja2VkRGVjb2Rlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLHFDQUEwQztBQUMxQyx1REFBb0Q7QUFHcEQsc0JBQThCLFNBQVEsaUNBQWU7SUFFakQsWUFBbUIsSUFBWSxFQUFFLE9BQU87UUFDcEMsS0FBSyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QixDQUFDO0lBRU0sTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNO1FBQ3hCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakMsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDO1FBQ2QsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ2hDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ2pDO1FBQ0QsT0FBTyxFQUFFLENBQUM7SUFDZCxDQUFDO0lBRU0sU0FBUyxDQUFDLE1BQU07UUFDbkIsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqQyxPQUFPLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVNLEtBQUssQ0FBQyxNQUFNO1FBQ2YsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVNLEtBQUs7UUFDUixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVNLE9BQU8sQ0FBQyxNQUFNLEVBQUUsTUFBTTtRQUN6QixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlCLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsS0FBSyxFQUFFO1lBQUUsTUFBTSxJQUFJLHVCQUFjLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7U0FBRTtRQUMxRCxNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDZixHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFTSxPQUFPO1FBQ1YsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFTSxJQUFJLENBQUMsTUFBTTtRQUNkLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRU0sS0FBSztRQUNSLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFTSxTQUFTLENBQUMsTUFBTTtRQUNuQixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDNUIsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUNqRCxDQUFDO0lBRU0sT0FBTztRQUNWLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVNLE9BQU87UUFDVixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlELENBQUM7SUFFTSxPQUFPLENBQUMsTUFBTTtRQUNqQixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNuQixJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxVQUFVLEVBQUU7Z0JBQ3pCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZDLElBQUksTUFBTSxJQUFJLE9BQU8sTUFBTSxLQUFLLFFBQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUU7b0JBQ2hFLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztpQkFDMUM7cUJBQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtvQkFDNUIsTUFBTSxHQUFHLE1BQU0sQ0FBQztpQkFDbkI7cUJBQU07b0JBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQztpQkFDN0I7YUFDSjtpQkFBTTtnQkFDSCxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUM5QztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztDQUdKO0FBcEZELDRDQW9GQyIsImZpbGUiOiJkZWNvZGVyL0JpdFBhY2tlZERlY29kZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xyXG5pbXBvcnQgeyBCaXRQYWNrZWRCdWZmZXIgfSBmcm9tICcuL0JpdFBhY2tlZEJ1ZmZlcic7XHJcbmltcG9ydCB7IENvcnJ1cHRlZEVycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xyXG5pbXBvcnQgeyBBYnN0cmFjdERlY29kZXIgfSBmcm9tICcuL0Fic3RyYWN0RGVjb2Rlcic7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEJpdFBhY2tlZERlY29kZXIgZXh0ZW5kcyBBYnN0cmFjdERlY29kZXIge1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIsIHR5cGVJZm8pIHtcclxuICAgICAgICBzdXBlcihkYXRhLCB0eXBlSWZvKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX2FycmF5KGJvdW5kcywgdHlwZWlkKTogYW55W10ge1xyXG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX2ludChib3VuZHMpO1xyXG4gICAgICAgIGNvbnN0IGFyID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBhcltpXSA9IHRoaXMuaW5zdGFuY2UodHlwZWlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfYml0YXJyYXkoYm91bmRzKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX2ludChib3VuZHMpO1xyXG4gICAgICAgIHJldHVybiBbbGVuZ3RoLCB0aGlzLl9idWZmZXIucmVhZEJpdHMobGVuZ3RoKV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9ibG9iKGJvdW5kcyk6IEJ1ZmZlciB7XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5faW50KGJvdW5kcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1ZmZlci5yZWFkQWxpZ25lZEJ5dGVzKGxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9ib29sKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnQoWzAsIDFdKSAhPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX2Nob2ljZShib3VuZHMsIGZpZWxkcykge1xyXG4gICAgICAgIGNvbnN0IHRhZyA9IHRoaXMuX2ludChib3VuZHMpO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gZmllbGRzW3RhZ107XHJcbiAgICAgICAgaWYgKCFmaWVsZCkgeyB0aHJvdyBuZXcgQ29ycnVwdGVkRXJyb3IodGhpcy50b1N0cmluZygpKTsgfVxyXG4gICAgICAgIGNvbnN0IHJldCA9IHt9O1xyXG4gICAgICAgIHJldFtmaWVsZFswXV0gPSB0aGlzLmluc3RhbmNlKGZpZWxkWzFdKTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfZm91cmNjKCk6IEJ1ZmZlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1ZmZlci5yZWFkVW5hbGlnbmVkQnl0ZXMoNCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9pbnQoYm91bmRzKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGJvdW5kc1swXSArIHRoaXMuX2J1ZmZlci5yZWFkQml0cyhib3VuZHNbMV0pO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX251bGwoKTogbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9vcHRpb25hbCh0eXBlaWQpOiBhbnkgfCBudWxsIHtcclxuICAgICAgICBjb25zdCBleGlzdHMgPSB0aGlzLl9ib29sKCk7XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0cyA/IHRoaXMuaW5zdGFuY2UodHlwZWlkKSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9yZWFsMzIoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYnVmZmVyLnJlYWRVbmFsaWduZWRCeXRlcyg0KS5yZWFkRmxvYXRCRSgwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX3JlYWw2NCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9idWZmZXIucmVhZFVuYWxpZ25lZEJ5dGVzKDgpLnJlYWREb3VibGVCRSgwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX3N0cnVjdChmaWVsZHMpOiBhbnkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSB7fTtcclxuICAgICAgICBmaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZFswXSA9PT0gJ19fcGFyZW50Jykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5pbnN0YW5jZShmaWVsZFsxXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50ICYmIHR5cGVvZiBwYXJlbnQgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHBhcmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBPYmplY3QuYXNzaWduKHJlc3VsdCwgcGFyZW50KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHBhcmVudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2ZpZWxkWzBdXSA9IHBhcmVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtmaWVsZFswXV0gPSB0aGlzLmluc3RhbmNlKGZpZWxkWzFdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/decoder/BitPackedDecoder.js\n// module id = ../heroprotocol/dist/lib/decoder/BitPackedDecoder.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst errors_1 = require(\"./errors\");\nconst AbstractDecoder_1 = require(\"./AbstractDecoder\");\nconst Long = require(\"long\");\nclass VersionDecoder extends AbstractDecoder_1.AbstractDecoder {\n    constructor(data, typeIfo) {\n        super(data, typeIfo);\n    }\n    _expectSkip(expected) {\n        const r = this._buffer.readBits(8);\n        if (r !== expected) {\n            throw new errors_1.CorruptedError(this.toString());\n        }\n        ;\n    }\n    _vint() {\n        let b = this._buffer.readBits(8);\n        const negative = b & 1;\n        let result = (b >> 1) & 0x3f;\n        let bits = 6;\n        while ((b & 0x80) !== 0) {\n            b = this._buffer.readBits(8);\n            // result |= (b & 0x7f) << bits; // Bitwise operators do not work above 32 bits\n            let myLong = new Long;\n            myLong = Long.fromString(result.toString(), false);\n            result = myLong.or((b & 0x7f) * Math.pow(2, bits)).toString();\n            bits += 7;\n        }\n        result = parseInt(result.toString(), 10);\n        return negative ? -result : result;\n    }\n    ;\n    _array(bounds, typeid) {\n        this._expectSkip(0);\n        const length = this._vint();\n        const ar = [];\n        for (let i = 0; i < length; i++) {\n            ar[i] = this.instance(typeid);\n        }\n        return ar;\n    }\n    _bitarray(bounds) {\n        this._expectSkip(1);\n        const length = this._vint();\n        return [length, this._buffer.readAlignedBytes((length + 7) / 8)];\n    }\n    _blob(bounds) {\n        this._expectSkip(2);\n        const length = this._vint();\n        return this._buffer.readAlignedBytes(length);\n    }\n    _bool() {\n        this._expectSkip(6);\n        return this._buffer.readBits(8) !== 0;\n    }\n    _choice(bounds, fields) {\n        this._expectSkip(3);\n        const tag = this._vint();\n        const field = fields[tag];\n        if (!field) {\n            this._skipInstance();\n            return {};\n        }\n        const ret = {};\n        ret[field[0]] = this.instance(field[1]);\n        return ret;\n    }\n    _fourcc() {\n        this._expectSkip(7);\n        return this._buffer.readAlignedBytes(4);\n    }\n    _int() {\n        this._expectSkip(9);\n        return this._vint();\n    }\n    _null() {\n        return null;\n    }\n    _optional(typeid) {\n        this._expectSkip(4);\n        const exists = this._buffer.readBits(8) !== 0;\n        return exists ? this.instance(typeid) : null;\n    }\n    _real32() {\n        this._expectSkip(7);\n        return this._buffer.readAlignedBytes(4).readFloatBE(0);\n    }\n    _real64() {\n        this._expectSkip(8);\n        return this._buffer.readAlignedBytes(8).readDoubleBE(0);\n    }\n    _struct(fields) {\n        function matchTag(tag) {\n            return function (field) {\n                return tag === field[2];\n            };\n        }\n        this._expectSkip(5);\n        let result = {};\n        const length = this._vint();\n        for (let i = 0; i < length; i += 1) {\n            const tag = this._vint();\n            const field = fields.find(matchTag(tag));\n            if (field) {\n                if (field[0] === '__parent') {\n                    const parent = this.instance(field[1]);\n                    if (parent && typeof parent === 'object' && !Array.isArray(parent)) {\n                        result = Object.assign(result, parent);\n                    }\n                    else if (fields.length === 0) {\n                        result = parent;\n                    }\n                    else {\n                        result[field[0]] = parent;\n                    }\n                }\n                else {\n                    result[field[0]] = this.instance(field[1]);\n                }\n            }\n            else {\n                this._skipInstance();\n            }\n        }\n        return result;\n    }\n    _skipInstance() {\n        const skip = this._buffer.readBits(8);\n        let length;\n        let exists;\n        let tag;\n        if (skip === 0) { // array\n            length = this._vint();\n            for (let i = 0; i < length; i++) {\n                this._skipInstance();\n            }\n        }\n        else if (skip === 1) { // bitblob\n            length = this._vint();\n            this._buffer.readAlignedBytes((length + 7) / 8);\n        }\n        else if (skip === 2) { // blob\n            length = this._vint();\n            this._buffer.readAlignedBytes(length);\n        }\n        else if (skip === 3) { // choice\n            tag = this._vint();\n            this._skipInstance();\n        }\n        else if (skip === 4) { // optional\n            exists = this._buffer.readBits(8) !== 0;\n            if (exists) {\n                this._skipInstance();\n            }\n        }\n        else if (skip === 5) { // struct\n            length = this._vint();\n            for (let i = 0; i < length; i += 1) {\n                tag = this._vint();\n                this._skipInstance();\n            }\n        }\n        else if (skip === 6) { // u8\n            this._buffer.readAlignedBytes(1);\n        }\n        else if (skip === 7) { // u32\n            this._buffer.readAlignedBytes(4);\n        }\n        else if (skip === 8) { // u64\n            this._buffer.readAlignedBytes(8);\n        }\n        else if (skip === 9) { // vint\n            this._vint();\n        }\n    }\n}\nexports.VersionDecoder = VersionDecoder;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlY29kZXIvVmVyc2lvbkRlY29kZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFHQSxxQ0FBMEM7QUFDMUMsdURBQW9EO0FBQ3BELDZCQUE2QjtBQUU3QixvQkFBNEIsU0FBUSxpQ0FBZTtJQUcvQyxZQUFtQixJQUFZLEVBQUUsT0FBTztRQUNwQyxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFHTSxXQUFXLENBQUMsUUFBUTtRQUN2QixNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsS0FBSyxRQUFRLEVBQUU7WUFBRSxNQUFNLElBQUksdUJBQWMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQTtTQUFFO1FBQUEsQ0FBQztJQUN0RSxDQUFDO0lBRU0sS0FBSztRQUNSLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLE1BQU0sUUFBUSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQzdCLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztRQUViLE9BQU8sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ3JCLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3QiwrRUFBK0U7WUFDL0UsSUFBSSxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUM7WUFDdEIsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ25ELE1BQU0sR0FBRyxNQUFNLENBQUMsRUFBRSxDQUFDLENB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QUFDLEtBQUssRUFBRSxDQUFDO2dCQUNuQixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7YUFDeEI7U0FDSjthQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRSxFQUFFLEtBQUs7WUFDMUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNwQzthQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRSxFQUFFLE1BQU07WUFDM0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNwQzthQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRSxFQUFFLE1BQU07WUFDM0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNwQzthQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRSxFQUFFLE9BQU87WUFDNUIsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ2hCO0lBQ0wsQ0FBQztDQUNKO0FBL0tELHdDQStLQyIsImZpbGUiOiJkZWNvZGVyL1ZlcnNpb25EZWNvZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZVxyXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xyXG5pbXBvcnQgeyBCaXRQYWNrZWRCdWZmZXIgfSBmcm9tICcuL0JpdFBhY2tlZEJ1ZmZlcic7XHJcbmltcG9ydCB7IENvcnJ1cHRlZEVycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xyXG5pbXBvcnQgeyBBYnN0cmFjdERlY29kZXIgfSBmcm9tICcuL0Fic3RyYWN0RGVjb2Rlcic7XHJcbmltcG9ydCAqIGFzIExvbmcgZnJvbSAnbG9uZyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVmVyc2lvbkRlY29kZXIgZXh0ZW5kcyBBYnN0cmFjdERlY29kZXIge1xyXG5cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoZGF0YTogQnVmZmVyLCB0eXBlSWZvKSB7XHJcbiAgICAgICAgc3VwZXIoZGF0YSwgdHlwZUlmbyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBfZXhwZWN0U2tpcChleHBlY3RlZCkge1xyXG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLl9idWZmZXIucmVhZEJpdHMoOCk7XHJcbiAgICAgICAgaWYgKHIgIT09IGV4cGVjdGVkKSB7IHRocm93IG5ldyBDb3JydXB0ZWRFcnJvcih0aGlzLnRvU3RyaW5nKCkpIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF92aW50KCkge1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5fYnVmZmVyLnJlYWRCaXRzKDgpO1xyXG4gICAgICAgIGNvbnN0IG5lZ2F0aXZlID0gYiAmIDE7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IChiID4+IDEpICYgMHgzZjtcclxuICAgICAgICBsZXQgYml0cyA9IDY7XHJcblxyXG4gICAgICAgIHdoaWxlICgoYiAmIDB4ODApICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGIgPSB0aGlzLl9idWZmZXIucmVhZEJpdHMoOCk7XHJcbiAgICAgICAgICAgIC8vIHJlc3VsdCB8PSAoYiAmIDB4N2YpIDw8IGJpdHM7IC8vIEJpdHdpc2Ugb3BlcmF0b3JzIGRvIG5vdCB3b3JrIGFib3ZlIDMyIGJpdHNcclxuICAgICAgICAgICAgbGV0IG15TG9uZyA9IG5ldyBMb25nO1xyXG4gICAgICAgICAgICBteUxvbmcgPSBMb25nLmZyb21TdHJpbmcocmVzdWx0LnRvU3RyaW5nKCksIGZhbHNlKTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gbXlMb25nLm9yKChiICYgMHg3ZikgKiBNYXRoLnBvdygyLCBiaXRzKSkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgYml0cyArPSA3O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXN1bHQgPSBwYXJzZUludChyZXN1bHQudG9TdHJpbmcoKSwgMTApO1xyXG4gICAgICAgIHJldHVybiBuZWdhdGl2ZSA/IC1yZXN1bHQgOiByZXN1bHQ7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBfYXJyYXkoYm91bmRzLCB0eXBlaWQpOiBhbnlbXSB7XHJcbiAgICAgICAgdGhpcy5fZXhwZWN0U2tpcCgwKTtcclxuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLl92aW50KCk7XHJcbiAgICAgICAgY29uc3QgYXIgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFyW2ldID0gdGhpcy5pbnN0YW5jZSh0eXBlaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9iaXRhcnJheShib3VuZHMpOiB7IDA6IG51bWJlciwgMTogQnVmZmVyIH0ge1xyXG4gICAgICAgIHRoaXMuX2V4cGVjdFNraXAoMSk7XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5fdmludCgpO1xyXG4gICAgICAgIHJldHVybiBbbGVuZ3RoLCB0aGlzLl9idWZmZXIucmVhZEFsaWduZWRCeXRlcygobGVuZ3RoICsgNykgLyA4KV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9ibG9iKGJvdW5kcyk6IEJ1ZmZlciB7XHJcbiAgICAgICAgdGhpcy5fZXhwZWN0U2tpcCgyKTtcclxuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLl92aW50KCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1ZmZlci5yZWFkQWxpZ25lZEJ5dGVzKGxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9ib29sKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHRoaXMuX2V4cGVjdFNraXAoNik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1ZmZlci5yZWFkQml0cyg4KSAhPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX2Nob2ljZShib3VuZHMsIGZpZWxkcykge1xyXG4gICAgICAgIHRoaXMuX2V4cGVjdFNraXAoMyk7XHJcbiAgICAgICAgY29uc3QgdGFnID0gdGhpcy5fdmludCgpO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gZmllbGRzW3RhZ107XHJcbiAgICAgICAgaWYgKCFmaWVsZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9za2lwSW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZXQgPSB7fTtcclxuICAgICAgICByZXRbZmllbGRbMF1dID0gdGhpcy5pbnN0YW5jZShmaWVsZFsxXSk7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX2ZvdXJjYygpOiBCdWZmZXIge1xyXG4gICAgICAgIHRoaXMuX2V4cGVjdFNraXAoNyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1ZmZlci5yZWFkQWxpZ25lZEJ5dGVzKDQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfaW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgdGhpcy5fZXhwZWN0U2tpcCg5KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmludCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfbnVsbCgpOiBudWxsIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX29wdGlvbmFsKHR5cGVpZCk6IGFueSB7XHJcbiAgICAgICAgdGhpcy5fZXhwZWN0U2tpcCg0KTtcclxuICAgICAgICBjb25zdCBleGlzdHMgPSB0aGlzLl9idWZmZXIucmVhZEJpdHMoOCkgIT09IDA7XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0cyA/IHRoaXMuaW5zdGFuY2UodHlwZWlkKSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9yZWFsMzIoKTogbnVtYmVyIHtcclxuICAgICAgICB0aGlzLl9leHBlY3RTa2lwKDcpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9idWZmZXIucmVhZEFsaWduZWRCeXRlcyg0KS5yZWFkRmxvYXRCRSgwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX3JlYWw2NCgpOiBudW1iZXIge1xyXG4gICAgICAgIHRoaXMuX2V4cGVjdFNraXAoOCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1ZmZlci5yZWFkQWxpZ25lZEJ5dGVzKDgpLnJlYWREb3VibGVCRSgwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX3N0cnVjdChmaWVsZHMpOiBhbnkge1xyXG4gICAgICAgIGZ1bmN0aW9uIG1hdGNoVGFnKHRhZykge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFnID09PSBmaWVsZFsyXTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZXhwZWN0U2tpcCg1KTtcclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX3ZpbnQoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCB0YWcgPSB0aGlzLl92aW50KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gZmllbGRzLmZpbmQobWF0Y2hUYWcodGFnKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmllbGQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZFswXSA9PT0gJ19fcGFyZW50Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuaW5zdGFuY2UoZmllbGRbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQgJiYgdHlwZW9mIHBhcmVudCA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkocGFyZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBPYmplY3QuYXNzaWduKHJlc3VsdCwgcGFyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtmaWVsZFswXV0gPSBwYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbZmllbGRbMF1dID0gdGhpcy5pbnN0YW5jZShmaWVsZFsxXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9za2lwSW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfc2tpcEluc3RhbmNlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHNraXAgPSB0aGlzLl9idWZmZXIucmVhZEJpdHMoOCk7XHJcbiAgICAgICAgbGV0IGxlbmd0aDogbnVtYmVyO1xyXG4gICAgICAgIGxldCBleGlzdHM6IGJvb2xlYW47XHJcbiAgICAgICAgbGV0IHRhZztcclxuXHJcbiAgICAgICAgaWYgKHNraXAgPT09IDApIHsgICAgICAgIC8vIGFycmF5XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMuX3ZpbnQoKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2tpcEluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHNraXAgPT09IDEpIHsgLy8gYml0YmxvYlxyXG4gICAgICAgICAgICBsZW5ndGggPSB0aGlzLl92aW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlci5yZWFkQWxpZ25lZEJ5dGVzKChsZW5ndGggKyA3KSAvIDgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpcCA9PT0gMikgeyAvLyBibG9iXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMuX3ZpbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyLnJlYWRBbGlnbmVkQnl0ZXMobGVuZ3RoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNraXAgPT09IDMpIHsgLy8gY2hvaWNlXHJcbiAgICAgICAgICAgIHRhZyA9IHRoaXMuX3ZpbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5fc2tpcEluc3RhbmNlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChza2lwID09PSA0KSB7IC8vIG9wdGlvbmFsXHJcbiAgICAgICAgICAgIGV4aXN0cyA9IHRoaXMuX2J1ZmZlci5yZWFkQml0cyg4KSAhPT0gMDtcclxuICAgICAgICAgICAgaWYgKGV4aXN0cykgeyB0aGlzLl9za2lwSW5zdGFuY2UoKTsgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpcCA9PT0gNSkgeyAvLyBzdHJ1Y3RcclxuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5fdmludCgpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0YWcgPSB0aGlzLl92aW50KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9za2lwSW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpcCA9PT0gNikgeyAvLyB1OFxyXG4gICAgICAgICAgICB0aGlzLl9idWZmZXIucmVhZEFsaWduZWRCeXRlcygxKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNraXAgPT09IDcpIHsgLy8gdTMyXHJcbiAgICAgICAgICAgIHRoaXMuX2J1ZmZlci5yZWFkQWxpZ25lZEJ5dGVzKDQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpcCA9PT0gOCkgeyAvLyB1NjRcclxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyLnJlYWRBbGlnbmVkQnl0ZXMoOCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChza2lwID09PSA5KSB7IC8vIHZpbnRcclxuICAgICAgICAgICAgdGhpcy5fdmludCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/decoder/VersionDecoder.js\n// module id = ../heroprotocol/dist/lib/decoder/VersionDecoder.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass CorruptedError extends Error {\n    constructor(message = 'Corrupted Error') {\n        super(message);\n    }\n}\nexports.CorruptedError = CorruptedError;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlY29kZXIvZXJyb3JzL0NvcnJ1cHRlZEVycm9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsb0JBQTRCLFNBQVEsS0FBSztJQUNyQyxZQUFtQixPQUFPLEdBQUcsaUJBQWlCO1FBQzFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNuQixDQUFDO0NBQ0o7QUFKRCx3Q0FJQyIsImZpbGUiOiJkZWNvZGVyL2Vycm9ycy9Db3JydXB0ZWRFcnJvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDb3JydXB0ZWRFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJ0NvcnJ1cHRlZCBFcnJvcicpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIH1cclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/decoder/errors/CorruptedError.js\n// module id = ../heroprotocol/dist/lib/decoder/errors/CorruptedError.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass TruncateError extends Error {\n    constructor(message = 'Truncate Error') {\n        super(message);\n    }\n}\nexports.TruncateError = TruncateError;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlY29kZXIvZXJyb3JzL1RydW5jYXRlRXJyb3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtQkFBMkIsU0FBUSxLQUFLO0lBQ3BDLFlBQW1CLE9BQU8sR0FBRyxnQkFBZ0I7UUFDekMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ25CLENBQUM7Q0FDSjtBQUpELHNDQUlDIiwiZmlsZSI6ImRlY29kZXIvZXJyb3JzL1RydW5jYXRlRXJyb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVHJ1bmNhdGVFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJ1RydW5jYXRlIEVycm9yJykge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/decoder/errors/TruncateError.js\n// module id = ../heroprotocol/dist/lib/decoder/errors/TruncateError.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./CorruptedError\"));\n__export(require(\"./TruncateError\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlY29kZXIvZXJyb3JzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsc0NBQWlDO0FBQ2pDLHFDQUFnQyIsImZpbGUiOiJkZWNvZGVyL2Vycm9ycy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vQ29ycnVwdGVkRXJyb3InO1xyXG5leHBvcnQgKiBmcm9tICcuL1RydW5jYXRlRXJyb3InO1xyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/decoder/errors/index.js\n// module id = ../heroprotocol/dist/lib/decoder/errors/index.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./errors\"));\n__export(require(\"./BitPackedBuffer\"));\n__export(require(\"./BitPackedDecoder\"));\n__export(require(\"./VersionDecoder\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlY29kZXIvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw4QkFBeUI7QUFDekIsdUNBQWtDO0FBQ2xDLHdDQUFtQztBQUNuQyxzQ0FBaUMiLCJmaWxlIjoiZGVjb2Rlci9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZXJyb3JzJztcclxuZXhwb3J0ICogZnJvbSAnLi9CaXRQYWNrZWRCdWZmZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL0JpdFBhY2tlZERlY29kZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL1ZlcnNpb25EZWNvZGVyJztcclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/decoder/index.js\n// module id = ../heroprotocol/dist/lib/decoder/index.js\n// module chunks = main","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PythonProtocolConverter_1 = require(\"./protocols/PythonProtocolConverter\");\nclass HeroProtocol {\n    static loadProtocol(protocolVersion) {\n        const path = `https://raw.githubusercontent.com/Blizzard/heroprotocol/master/protocol${protocolVersion}.py`;\n        return new Promise((resolve, reject) => {\n            if (HeroProtocol._protocolCode.has(protocolVersion)) {\n                resolve(HeroProtocol._protocolCode.get(protocolVersion));\n            }\n            else {\n                const request = new XMLHttpRequest();\n                request.open('GET', path, true);\n                request.onload = () => {\n                    const p = HeroProtocol.convertProtocolFromPython(protocolVersion, request.responseText);\n                    HeroProtocol._protocolCode.set(protocolVersion, p);\n                    resolve(p);\n                };\n                request.onabort = (event) => {\n                    reject(event);\n                };\n                request.onerror = (event) => {\n                    reject(event);\n                };\n                request.send();\n            }\n        });\n    }\n    static getProtocol(protocolVersion) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (HeroProtocol.hasProtocol(protocolVersion)) {\n                return HeroProtocol._protocols.get(protocolVersion);\n            }\n            const code = yield HeroProtocol.loadProtocol(protocolVersion);\n            return HeroProtocol.compile(protocolVersion, code);\n        });\n    }\n    static compile(protocolVersion, code) {\n        const protocol = PythonProtocolConverter_1.PythonProtocolConverter.compile(code);\n        HeroProtocol._protocols.set(protocolVersion, protocol);\n        return protocol;\n    }\n    static hasProtocol(protocolVersion) {\n        return HeroProtocol._protocols.has(protocolVersion);\n    }\n    static convertProtocolFromPython(version, pyCode) {\n        const converter = new PythonProtocolConverter_1.PythonProtocolConverter(version, pyCode);\n        return converter.getCode();\n    }\n}\nHeroProtocol.env = 'development';\nHeroProtocol._protocols = new Map();\nHeroProtocol._protocolCode = new Map();\nexports.HeroProtocol = HeroProtocol;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,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LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUhlcm9Qcm90b2NvbCB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyBQeXRob25Qcm90b2NvbENvbnZlcnRlciB9IGZyb20gJy4vcHJvdG9jb2xzL1B5dGhvblByb3RvY29sQ29udmVydGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIZXJvUHJvdG9jb2wge1xyXG4gICAgcHVibGljIHN0YXRpYyBlbnYgPSAnZGV2ZWxvcG1lbnQnO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX3Byb3RvY29sczogTWFwPG51bWJlciwgSUhlcm9Qcm90b2NvbD4gPSBuZXcgTWFwPG51bWJlciwgSUhlcm9Qcm90b2NvbD4oKTtcclxuICAgIHByaXZhdGUgc3RhdGljIF9wcm90b2NvbENvZGU6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwPG51bWJlciwgc3RyaW5nPigpO1xyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGxvYWRQcm90b2NvbChwcm90b2NvbFZlcnNpb246IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgY29uc3QgcGF0aCA9IGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQmxpenphcmQvaGVyb3Byb3RvY29sL21hc3Rlci9wcm90b2NvbCR7cHJvdG9jb2xWZXJzaW9ufS5weWA7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKEhlcm9Qcm90b2NvbC5fcHJvdG9jb2xDb2RlLmhhcyhwcm90b2NvbFZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKEhlcm9Qcm90b2NvbC5fcHJvdG9jb2xDb2RlLmdldChwcm90b2NvbFZlcnNpb24pKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgcGF0aCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gSGVyb1Byb3RvY29sLmNvbnZlcnRQcm90b2NvbEZyb21QeXRob24ocHJvdG9jb2xWZXJzaW9uLCByZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgSGVyb1Byb3RvY29sLl9wcm90b2NvbENvZGUuc2V0KHByb3RvY29sVmVyc2lvbiwgcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9uYWJvcnQgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0UHJvdG9jb2wocHJvdG9jb2xWZXJzaW9uOiBudW1iZXIpOiBQcm9taXNlPElIZXJvUHJvdG9jb2w+IHtcclxuICAgICAgICBpZiAoSGVyb1Byb3RvY29sLmhhc1Byb3RvY29sKHByb3RvY29sVmVyc2lvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEhlcm9Qcm90b2NvbC5fcHJvdG9jb2xzLmdldChwcm90b2NvbFZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb2RlID0gYXdhaXQgSGVyb1Byb3RvY29sLmxvYWRQcm90b2NvbChwcm90b2NvbFZlcnNpb24pO1xyXG4gICAgICAgIHJldHVybiBIZXJvUHJvdG9jb2wuY29tcGlsZShwcm90b2NvbFZlcnNpb24sIGNvZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY29tcGlsZShwcm90b2NvbFZlcnNpb246IG51bWJlciwgY29kZTogc3RyaW5nKTogSUhlcm9Qcm90b2NvbCB7XHJcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBQeXRob25Qcm90b2NvbENvbnZlcnRlci5jb21waWxlKGNvZGUpO1xyXG4gICAgICAgIEhlcm9Qcm90b2NvbC5fcHJvdG9jb2xzLnNldChwcm90b2NvbFZlcnNpb24sIHByb3RvY29sKTtcclxuICAgICAgICByZXR1cm4gcHJvdG9jb2w7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBoYXNQcm90b2NvbChwcm90b2NvbFZlcnNpb246IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBIZXJvUHJvdG9jb2wuX3Byb3RvY29scy5oYXMocHJvdG9jb2xWZXJzaW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjb252ZXJ0UHJvdG9jb2xGcm9tUHl0aG9uKHZlcnNpb246IG51bWJlciwgcHlDb2RlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGNvbnZlcnRlciA9IG5ldyBQeXRob25Qcm90b2NvbENvbnZlcnRlcih2ZXJzaW9uLCBweUNvZGUpO1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0ZXIuZ2V0Q29kZSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/heroprotocol.js\n// module id = ../heroprotocol/dist/lib/heroprotocol.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./replay\"));\n__export(require(\"./types\"));\n__export(require(\"./heroprotocol\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsOEJBQXlCO0FBQ3pCLDZCQUF3QjtBQUN4QixvQ0FBK0IiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL3JlcGxheSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xyXG5leHBvcnQgKiBmcm9tICcuL2hlcm9wcm90b2NvbCc7XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/index.js\n// module id = ../heroprotocol/dist/lib/index.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst decoders = require(\"./decoders\");\nconst _template = `\r\n    \"use strict\";\r\n\r\n    const progress = {\r\n        current: -1,\r\n        total: -1\r\n    }\r\n    exports.progress = progress;\r\n\r\n    exports.version = \\${version};\r\n    \\${patch}\r\n\r\n    const BitPackedDecoder = decoders.BitPackedDecoder;\r\n    const VersionDecoder = decoders.VersionDecoder;\r\n\r\n\r\n    // Decoding instructions for each protocol type.\r\n    const typeinfos = [\r\n    \\${typeinfos}\r\n    ];\r\n\r\n    // Map from protocol NNet.Game.*Event eventid to [typeid, name]\r\n    const game_event_types = {\r\n    \\${gameeventsTypes}\r\n    };\r\n\r\n    // The typeid of the NNet.Game.EEventId enum.\r\n    const game_eventid_typeid = \\${gameeventsTypeid};\r\n\r\n    // Map from protocol NNet.Game.*Message eventid to [typeid, name]\r\n    const message_event_types = {\r\n    \\${messageeventsTypes}\r\n    };\r\n\r\n    // The typeid of the NNet.Game.EMessageId enum.\r\n    const message_eventid_typeid = \\${messageeventsTypeid};\r\n\r\n    // Map from protocol NNet.Replay.Tracker.*Event eventid to [typeid, name]\r\n    const tracker_event_types = {\r\n    \\${trackereventstypes}\r\n    };\r\n\r\n    // The typeid of the NNet.Replay.Tracker.EEventId enum.\r\n    const tracker_eventid_typeid = \\${trackereventsTypeid};\r\n\r\n    // The typeid of NNet.SVarUint32 (the type used to encode gameloop deltas).\r\n    const svaruint32_typeid = 7;\r\n\r\n    // The typeid of NNet.Replay.SGameUserId (the type used to encode player ids).\r\n    const replay_userid_typeid = 8;\r\n\r\n    // The typeid of NNet.Replay.SHeader (the type used to store replay game version and length).\r\n    const replay_header_typeid = \\${headerTypeid};\r\n\r\n    // The typeid of NNet.Game.SDetails (the type used to store overall replay details).\r\n    const game_details_typeid = \\${detailsTypeid};\r\n\r\n    // The typeid of NNet.Replay.SInitData (the type used to store the inital lobby).\r\n    const replay_initdata_typeid = \\${initdataTypeid};\r\n\r\n    // not sure if correct port\r\n    function _varuint32Value(value) {\r\n    // Returns the numeric value from a SVarUint32 instance.\r\n    return value[Object.keys(value)[0]];\r\n    }\r\n\r\n    function* _decode_event_stream(decoder, eventidTypeid, eventTypes, decodeUserId) {\r\n    // Decodes events prefixed with a gameloop and possibly userid\r\n    var gameloop = 0;\r\n    while (!decoder.isDone) {\r\n        \r\n        var startBits = decoder.usedBits;\r\n\r\n        // decode the gameloop delta before each event\r\n        var delta = _varuint32Value(decoder.instance(svaruint32_typeid));\r\n        gameloop += delta;\r\n\r\n        // decode the userid before each event\r\n        var userid = (decodeUserId === true) ? decoder.instance(replay_userid_typeid) : undefined;\r\n\r\n        // decode the event id\r\n        var eventid = decoder.instance(eventidTypeid);\r\n        var eventType = eventTypes[eventid] || [null, null];\r\n        var typeid = eventType[0];\r\n        var typename = eventType[1];\r\n        if (typeid === null) throw new decoders.CorruptedError('eventid(' + eventid + ') at ' + decoder.toString());\r\n\r\n        // decode the event struct instance\r\n        var event = decoder.instance(typeid);\r\n        event._event = typename;\r\n        event._eventid = eventid;\r\n\r\n        // insert gameloop and userid\r\n        event._gameloop = gameloop;\r\n        if (decodeUserId) event._userid = userid;\r\n\r\n        // the next event is byte aligned\r\n        decoder.byteAlign();\r\n\r\n        // insert bits used in stream\r\n        event._bits = decoder.usedBits - startBits;\r\n        progress.current = decoder.usedBits;\r\n        yield event;\r\n    }\r\n    }\r\n\r\n    exports.decodeReplayGameEvents = function* (contents) {\r\n    // Decodes and yields each game event from the contents byte string.\r\n    const decoder = new BitPackedDecoder(contents, typeinfos);\r\n    progress.current = 0;\r\n    progress.total = decoder.size;\r\n    for (let event of _decode_event_stream(decoder, game_eventid_typeid, game_event_types, true))\r\n        yield event;\r\n    };\r\n\r\n    exports.decodeReplayMessageEvents = function* (contents) {\r\n        // Decodes and yields each message event from the contents byte string.\r\n        const decoder = new BitPackedDecoder(contents, typeinfos);\r\n        progress.current = 0;\r\n        progress.total = decoder.size;\r\n        for (let event of _decode_event_stream(decoder, message_eventid_typeid, message_event_types, true))\r\n            yield event;\r\n    };\r\n\r\n    exports.decodeReplayTrackerEvents = function* (contents) {\r\n    // Decodes and yields each tracker event from the contents byte string.\r\n    const decoder = new VersionDecoder(contents, typeinfos);\r\n    progress.current = 0;\r\n    progress.total = decoder.size;\r\n    for (let event of _decode_event_stream(decoder, tracker_eventid_typeid, tracker_event_types, false))\r\n        yield event;\r\n    };\r\n\r\n    exports.decodeReplayHeader = function(contents) {\r\n    // Decodes and return the replay header from the contents byte string.\r\n    const decoder = new VersionDecoder(contents, typeinfos);\r\n    return decoder.instance(replay_header_typeid);\r\n    };\r\n\r\n    exports.decodeReplayDetails = function(contents) {\r\n    // Decodes and returns the game details from the contents byte string.\r\n    const decoder = new VersionDecoder(contents, typeinfos);\r\n    return decoder.instance(game_details_typeid);\r\n    };\r\n\r\n    exports.decodeReplayInitdata = function(contents) {\r\n    // Decodes and return the replay init data from the contents byte string.\r\n    const decoder = new BitPackedDecoder(contents, typeinfos);\r\n    return decoder.instance(replay_initdata_typeid);\r\n    };\r\n\r\n    exports.decodeReplayAttributesEvents = function (contents) {\r\n    // Decodes and yields each attribute from the contents byte string.\r\n    const buffer = new decoders.BitPackedBuffer(contents, 'little');\r\n    progress.current = 0;\r\n    progress.total = buffer.size;\r\n    const attributes = {};\r\n\r\n    if (!buffer.isDone) {\r\n        attributes.source = buffer.readBits(8);\r\n        attributes.mapNameSpace = buffer.readBits(32);\r\n        var count = buffer.readBits(32);\r\n        attributes.scopes = {};\r\n\r\n        while (!buffer.isDone) {\r\n        var value = {};\r\n        value.namespace = buffer.readBits(32);\r\n        var attrid = value.attrid = buffer.readBits(32);\r\n        var scope = buffer.readBits(8);\r\n        value.value = buffer.readAlignedBytes(4).reverse();\r\n        while (value.value[0] === 0) value.value = value.value.slice(1);\r\n        while (value.value[value.value.length - 1] === 0) value.value = value.value.slice(0, -1);\r\n        if (!attributes.scopes[scope])\r\n            attributes.scopes[scope] = {};\r\n        if (!attributes.scopes[scope][attrid])\r\n            attributes.scopes[scope][attrid] = [];\r\n        attributes.scopes[scope][attrid].push(value);\r\n        progress.current = buffer.usedBits;\r\n        }\r\n    }\r\n\r\n    return attributes;\r\n    };\r\n\r\n    exports.unitTag = function(unitTagIndex, unitTagRecycle) {\r\n    return (unitTagIndex << 18) + unitTagRecycle;\r\n    };\r\n\r\n    exports.unitTagIndex = function(unitTag) {\r\n    return (unitTag >> 18) & 0x00003FFF;\r\n    };\r\n\r\n    exports.unitTagRecycle = function(unitTag) {\r\n    return unitTag & 0x0003FFFF;\r\n    };\r\n`;\nconst types = {\n    tuple: function (str) {\n        return str.match(/(-?\\w+)/g);\n    },\n    tuples: function (str) {\n        return str.match(/(\\(.*?\\))/g);\n    },\n    _int: {\n        decode: function (str) {\n            const ret = {};\n            const res = types.tuple(str);\n            ret['bounds'] = [res[0], res[1]];\n            return ret;\n        },\n        encode: function (infos) {\n            return `[${infos.bounds[0]}, ${infos.bounds[1]}]`;\n        }\n    },\n    _choice: {\n        decode: function (str) {\n            const ret = { bounds: [], choices: [] };\n            const res = types.tuples(str);\n            Object.assign(ret, types._int.decode(res[0]));\n            for (let i = 1; i < res.length; i += 1) {\n                const tuple = types.tuple(res[i]);\n                ret.choices.push({\n                    label: tuple[0],\n                    typeIndex: tuple[1]\n                });\n            }\n            return ret;\n        },\n        encode: function (infos) {\n            return `[${infos.bounds[0]}, ${infos.bounds[1]}], { ${infos.choices.map((choice, index, ar) => {\n                return `${index}: ['${choice.label}', ${choice.typeIndex}]${(index === ar.length - 1) ? '' : ', '}`;\n            }).join('')}}`;\n        }\n    },\n    _struct: {\n        decode: function (str) {\n            const ret = { items: [] };\n            const tuples = types.tuples(str);\n            if (tuples) {\n                tuples.forEach(tuple => {\n                    tuple = types.tuple(tuple);\n                    ret.items.push({\n                        label: tuple[0],\n                        typeIndex: tuple[1],\n                        tag: tuple[2]\n                    });\n                });\n            }\n            return ret;\n        },\n        encode: function (infos) {\n            return `[${infos.items.map((item, index, ar) => {\n                return `['${item.label}', ${item.typeIndex}, ${item.tag}]${(index === ar.length - 1) ? '' : ', '}`;\n            }).join('')}]`;\n        }\n    },\n    _blob: {\n        decode: function (str) {\n            return types._int.decode(str);\n        },\n        encode: function (infos) {\n            return types._int.encode(infos);\n        }\n    },\n    _bool: {\n        decode: function (str) {\n            return {};\n        },\n        encode: function (infos) {\n            return '';\n        }\n    },\n    _array: {\n        decode: function (str) {\n            return Object.assign({ typeIndex: str.match(/\\d+$/)[0] }, types._int.decode(str));\n        },\n        encode: function (infos) {\n            return `[${infos.bounds[0]}, ${infos.bounds[1]}], ${infos.typeIndex}`;\n        }\n    },\n    _optional: {\n        decode: function (str) {\n            return { typeIndex: Number(str) };\n        },\n        encode: function (infos) {\n            return `${infos.typeIndex}`;\n        }\n    },\n    _fourcc: {\n        decode: function (str) {\n            return {};\n        },\n        encode: function (infos) {\n            return '';\n        }\n    },\n    _bitarray: {\n        decode: function (str) {\n            return types._int.decode(str);\n        },\n        encode: function (infos) {\n            return types._int.encode(infos);\n        }\n    },\n    _null: {\n        decode: function (str) {\n            return {};\n        },\n        encode: function (infos) {\n            return '';\n        }\n    }\n};\nconst tokens = {\n    newline: '\\n',\n    indent: '  ',\n    typeinfosStart: 'typeinfos = [',\n    typeinfosEnd: ']',\n    gameeventsStart: 'game_event_types = {',\n    gameeventsEnd: '}',\n    messageeventsStart: 'message_event_types = {',\n    messageeventsEnd: '}',\n    trackereventsStart: 'tracker_event_types = {',\n    trackereventsEnd: '}',\n    gameeventsTypeid: 'game_eventid_typeid =',\n    messageeventsTypeid: 'message_eventid_typeid =',\n    trackereventsTypeid: 'tracker_eventid_typeid =',\n    headerTypeid: 'replay_header_typeid =',\n    detailsTypeid: 'game_details_typeid =',\n    initdataTypeid: 'replay_initdata_typeid ='\n};\nconst _data = {\n    realms: [undefined, 'live'],\n    regions: [\n        undefined,\n        undefined,\n        'Europe'\n    ],\n    heroes: [],\n    mounts: [],\n    maps: [],\n    builds: []\n};\nclass PythonProtocolConverter {\n    constructor(version, pyCode) {\n        this.version = version;\n        this.pyCode = pyCode;\n    }\n    static compile(protocolCode) {\n        const start = new Date().getTime();\n        const protocol = {};\n        const fn = Function('exports', 'decoders', protocolCode);\n        fn(protocol, decoders);\n        console.log('Protocol Compile Time: ', new Date().getTime() - start);\n        return protocol;\n    }\n    convert() {\n        return PythonProtocolConverter.compile(this.getCode());\n    }\n    getCode() {\n        this.parse(this.pyCode);\n        return this.write();\n    }\n    parse(raw) {\n        const start = new Date().getTime();\n        const lines = raw.split(tokens.newline);\n        let line = 0, str;\n        this.typeinfos = [];\n        this.gameeventsTypes = [];\n        this.messageeventsTypes = [];\n        this.trackereventstypes = [];\n        while (line < lines.length) {\n            str = lines[line].trim();\n            if (str === tokens.typeinfosStart) {\n                line += 1;\n                str = lines[line].trim();\n                do {\n                    this.typeinfos.push(this.parseTypeinfos(str));\n                    line += 1;\n                    str = lines[line].trim();\n                } while (str !== tokens.typeinfosEnd);\n            }\n            else if (tokens.gameeventsStart === str) {\n                line += 1;\n                str = lines[line].trim();\n                do {\n                    this.gameeventsTypes.push(this.parseEvent(str));\n                    line += 1;\n                    str = lines[line].trim();\n                } while (tokens.gameeventsEnd !== str);\n            }\n            else if (tokens.messageeventsStart === str) {\n                line += 1;\n                str = lines[line].trim();\n                do {\n                    this.messageeventsTypes.push(this.parseEvent(str));\n                    line += 1;\n                    str = lines[line].trim();\n                } while (tokens.messageeventsEnd !== str);\n            }\n            else if (tokens.trackereventsStart === str) {\n                line += 1;\n                str = lines[line].trim();\n                do {\n                    this.trackereventstypes.push(this.parseEvent(str));\n                    line += 1;\n                    str = lines[line].trim();\n                } while (tokens.trackereventsEnd !== str);\n            }\n            else if (str.startsWith(tokens.gameeventsTypeid)) {\n                this.gameeventsTypeid = str.match(/\\d+/)[0];\n            }\n            else if (str.startsWith(tokens.messageeventsTypeid)) {\n                this.messageeventsTypeid = str.match(/\\d+/)[0];\n            }\n            else if (str.startsWith(tokens.trackereventsTypeid)) {\n                this.trackereventsTypeid = str.match(/\\d+/)[0];\n            }\n            else if (str.startsWith(tokens.headerTypeid)) {\n                this.headerTypeid = str.match(/\\d+/)[0];\n            }\n            else if (str.startsWith(tokens.detailsTypeid)) {\n                this.detailsTypeid = str.match(/\\d+/)[0];\n            }\n            else if (str.startsWith(tokens.initdataTypeid)) {\n                this.initdataTypeid = str.match(/\\d+/)[0];\n            }\n            line += 1;\n        }\n        console.log('Protocol Parse Time: ', new Date().getTime() - start);\n    }\n    parseEvent(str) {\n        const res = str.match(/^(\\d+):\\s\\((\\d+),\\s\\'(.*)\\'/);\n        return {\n            key: res[1],\n            typeIndex: res[2],\n            name: res[3]\n        };\n    }\n    parseTypeinfos(str) {\n        const typeRegex = /^\\('(.*?)',\\[(.*)\\]\\),\\s*#(\\d+)$/;\n        const infos = { str: str };\n        const res = typeRegex.exec(str);\n        infos.type = res[1];\n        Object.assign(infos, types[infos.type].decode(res[2]));\n        infos.index = res[3];\n        return infos;\n    }\n    write() {\n        const start = new Date().getTime();\n        const buildInfos = _data.builds[this.version];\n        let out = _template;\n        // unnessiary\n        out = out.replace('${date}', new Date().toUTCString());\n        // unnessiary\n        out = out.replace('${version}', this.version);\n        if (buildInfos) {\n            const patch = buildInfos.live ? buildInfos.live.patch : buildInfos.ptr.patch;\n            out = out.replace('${patch}', `exports.patch = \\'${patch}\\';${tokens.newline}`);\n        }\n        else {\n            out = out.replace('${patch}', '');\n        }\n        out = out.replace('${typeinfos}', this.typeinfos.map((infos, index, ar) => {\n            let str = tokens.indent;\n            str += `['${infos.type}', [`;\n            str += types[infos.type].encode(infos);\n            str += `]]${index === (ar.length - 1) ? '' : ','}`;\n            str += `  //${infos.index}`;\n            return str;\n        }).join(tokens.newline));\n        out = out.replace('${gameeventsTypes}', this.gameeventsTypes.map((event, index, ar) => {\n            let str = tokens.indent;\n            str += `${event.key}: [${event.typeIndex}, \\'${event.name}\\']`;\n            str += index === ar.length - 1 ? '' : ',';\n            return str;\n        }).join(tokens.newline));\n        out = out.replace('${messageeventsTypes}', this.messageeventsTypes.map((event, index, ar) => {\n            let str = tokens.indent;\n            str += `${event.key}: [${event.typeIndex}, \\'${event.name}\\']`;\n            str += index === ar.length - 1 ? '' : ',';\n            return str;\n        }).join(tokens.newline));\n        out = out.replace('${trackereventstypes}', this.trackereventstypes.map((event, index, ar) => {\n            let str = tokens.indent + tokens.indent;\n            str += `${event.key}: [${event.typeIndex}, \\'${event.name}\\']`;\n            str += index === ar.length - 1 ? '' : ',';\n            return str;\n        }).join(tokens.newline));\n        out = out.replace('${gameeventsTypeid}', this.gameeventsTypeid);\n        out = out.replace('${messageeventsTypeid}', this.messageeventsTypeid);\n        out = out.replace('${trackereventsTypeid}', this.trackereventsTypeid);\n        out = out.replace('${headerTypeid}', this.headerTypeid);\n        out = out.replace('${detailsTypeid}', this.detailsTypeid);\n        out = out.replace('${initdataTypeid}', this.initdataTypeid);\n        console.log('Protocol Write Time: ', new Date().getTime() - start);\n        return out;\n    }\n}\nexports.PythonProtocolConverter = PythonProtocolConverter;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb3RvY29scy9QeXRob25Qcm90b2NvbENvbnZlcnRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHVDQUF1QztBQUV2QyxNQUFNLFNBQVMsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBbU1qQixDQUFDO0FBR0YsTUFBTSxLQUFLLEdBQUc7SUFDVixLQUFLLEVBQUUsVUFBVSxHQUFHO1FBQ2hCLE9BQU8sR0FBRyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBQ0QsTUFBTSxFQUFFLFVBQVUsR0FBRztRQUNqQixPQUFPLEdBQUcsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUNELElBQUksRUFBRTtRQUNGLE1BQU0sRUFBRSxVQUFVLEdBQUc7WUFDakIsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDO1lBQ2YsTUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM3QixHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakMsT0FBTyxHQUFHLENBQUM7UUFDZixDQUFDO1FBQ0QsTUFBTSxFQUFFLFVBQVUsS0FBSztZQUNuQixPQUFPLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDdEQsQ0FBQztLQUNKO0lBQ0QsT0FB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LEdBQUcsS0FBSyxDQUFDLENBQUM7UUFDbkUsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0NBRUo7QUF4TEQsMERBd0xDIiwiZmlsZSI6InByb3RvY29scy9QeXRob25Qcm90b2NvbENvbnZlcnRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgKiBhcyBkZWNvZGVycyBmcm9tICcuL2RlY29kZXJzJztcclxuaW1wb3J0IHsgSUhlcm9Qcm90b2NvbCB9IGZyb20gJy4uL3R5cGVzJztcclxuY29uc3QgX3RlbXBsYXRlID0gYFxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSB7XHJcbiAgICAgICAgY3VycmVudDogLTEsXHJcbiAgICAgICAgdG90YWw6IC0xXHJcbiAgICB9XHJcbiAgICBleHBvcnRzLnByb2dyZXNzID0gcHJvZ3Jlc3M7XHJcblxyXG4gICAgZXhwb3J0cy52ZXJzaW9uID0gXFwke3ZlcnNpb259O1xyXG4gICAgXFwke3BhdGNofVxyXG5cclxuICAgIGNvbnN0IEJpdFBhY2tlZERlY29kZXIgPSBkZWNvZGVycy5CaXRQYWNrZWREZWNvZGVyO1xyXG4gICAgY29uc3QgVmVyc2lvbkRlY29kZXIgPSBkZWNvZGVycy5WZXJzaW9uRGVjb2RlcjtcclxuXHJcblxyXG4gICAgLy8gRGVjb2RpbmcgaW5zdHJ1Y3Rpb25zIGZvciBlYWNoIHByb3RvY29sIHR5cGUuXHJcbiAgICBjb25zdCB0eXBlaW5mb3MgPSBbXHJcbiAgICBcXCR7dHlwZWluZm9zfVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyBNYXAgZnJvbSBwcm90b2NvbCBOTmV0LkdhbWUuKkV2ZW50IGV2ZW50aWQgdG8gW3R5cGVpZCwgbmFtZV1cclxuICAgIGNvbnN0IGdhbWVfZXZlbnRfdHlwZXMgPSB7XHJcbiAgICBcXCR7Z2FtZWV2ZW50c1R5cGVzfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBUaGUgdHlwZWlkIG9mIHRoZSBOTmV0LkdhbWUuRUV2ZW50SWQgZW51bS5cclxuICAgIGNvbnN0IGdhbWVfZXZlbnRpZF90eXBlaWQgPSBcXCR7Z2FtZWV2ZW50c1R5cGVpZH07XHJcblxyXG4gICAgLy8gTWFwIGZyb20gcHJvdG9jb2wgTk5ldC5HYW1lLipNZXNzYWdlIGV2ZW50aWQgdG8gW3R5cGVpZCwgbmFtZV1cclxuICAgIGNvbnN0IG1lc3NhZ2VfZXZlbnRfdHlwZXMgPSB7XHJcbiAgICBcXCR7bWVzc2FnZWV2ZW50c1R5cGVzfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBUaGUgdHlwZWlkIG9mIHRoZSBOTmV0LkdhbWUuRU1lc3NhZ2VJZCBlbnVtLlxyXG4gICAgY29uc3QgbWVzc2FnZV9ldmVudGlkX3R5cGVpZCA9IFxcJHttZXNzYWdlZXZlbnRzVHlwZWlkfTtcclxuXHJcbiAgICAvLyBNYXAgZnJvbSBwcm90b2NvbCBOTmV0LlJlcGxheS5UcmFja2VyLipFdmVudCBldmVudGlkIHRvIFt0eXBlaWQsIG5hbWVdXHJcbiAgICBjb25zdCB0cmFja2VyX2V2ZW50X3R5cGVzID0ge1xyXG4gICAgXFwke3RyYWNrZXJldmVudHN0eXBlc31cclxuICAgIH07XHJcblxyXG4gICAgLy8gVGhlIHR5cGVpZCBvZiB0aGUgTk5ldC5SZXBsYXkuVHJhY2tlci5FRXZlbnRJZCBlbnVtLlxyXG4gICAgY29uc3QgdHJhY2tlcl9ldmVudGlkX3R5cGVpZCA9IFxcJHt0cmFja2VyZXZlbnRzVHlwZWlkfTtcclxuXHJcbiAgICAvLyBUaGUgdHlwZWlkIG9mIE5OZXQuU1ZhclVpbnQzMiAodGhlIHR5cGUgdXNlZCB0byBlbmNvZGUgZ2FtZWxvb3AgZGVsdGFzKS5cclxuICAgIGNvbnN0IHN2YXJ1aW50MzJfdHlwZWlkID0gNztcclxuXHJcbiAgICAvLyBUaGUgdHlwZWlkIG9mIE5OZXQuUmVwbGF5LlNHYW1lVXNlcklkICh0aGUgdHlwZSB1c2VkIHRvIGVuY29kZSBwbGF5ZXIgaWRzKS5cclxuICAgIGNvbnN0IHJlcGxheV91c2VyaWRfdHlwZWlkID0gODtcclxuXHJcbiAgICAvLyBUaGUgdHlwZWlkIG9mIE5OZXQuUmVwbGF5LlNIZWFkZXIgKHRoZSB0eXBlIHVzZWQgdG8gc3RvcmUgcmVwbGF5IGdhbWUgdmVyc2lvbiBhbmQgbGVuZ3RoKS5cclxuICAgIGNvbnN0IHJlcGxheV9oZWFkZXJfdHlwZWlkID0gXFwke2hlYWRlclR5cGVpZH07XHJcblxyXG4gICAgLy8gVGhlIHR5cGVpZCBvZiBOTmV0LkdhbWUuU0RldGFpbHMgKHRoZSB0eXBlIHVzZWQgdG8gc3RvcmUgb3ZlcmFsbCByZXBsYXkgZGV0YWlscykuXHJcbiAgICBjb25zdCBnYW1lX2RldGFpbHNfdHlwZWlkID0gXFwke2RldGFpbHNUeXBlaWR9O1xyXG5cclxuICAgIC8vIFRoZSB0eXBlaWQgb2YgTk5ldC5SZXBsYXkuU0luaXREYXRhICh0aGUgdHlwZSB1c2VkIHRvIHN0b3JlIHRoZSBpbml0YWwgbG9iYnkpLlxyXG4gICAgY29uc3QgcmVwbGF5X2luaXRkYXRhX3R5cGVpZCA9IFxcJHtpbml0ZGF0YVR5cGVpZH07XHJcblxyXG4gICAgLy8gbm90IHN1cmUgaWYgY29ycmVjdCBwb3J0XHJcbiAgICBmdW5jdGlvbiBfdmFydWludDMyVmFsdWUodmFsdWUpIHtcclxuICAgIC8vIFJldHVybnMgdGhlIG51bWVyaWMgdmFsdWUgZnJvbSBhIFNWYXJVaW50MzIgaW5zdGFuY2UuXHJcbiAgICByZXR1cm4gdmFsdWVbT2JqZWN0LmtleXModmFsdWUpWzBdXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiogX2RlY29kZV9ldmVudF9zdHJlYW0oZGVjb2RlciwgZXZlbnRpZFR5cGVpZCwgZXZlbnRUeXBlcywgZGVjb2RlVXNlcklkKSB7XHJcbiAgICAvLyBEZWNvZGVzIGV2ZW50cyBwcmVmaXhlZCB3aXRoIGEgZ2FtZWxvb3AgYW5kIHBvc3NpYmx5IHVzZXJpZFxyXG4gICAgdmFyIGdhbWVsb29wID0gMDtcclxuICAgIHdoaWxlICghZGVjb2Rlci5pc0RvbmUpIHtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgc3RhcnRCaXRzID0gZGVjb2Rlci51c2VkQml0cztcclxuXHJcbiAgICAgICAgLy8gZGVjb2RlIHRoZSBnYW1lbG9vcCBkZWx0YSBiZWZvcmUgZWFjaCBldmVudFxyXG4gICAgICAgIHZhciBkZWx0YSA9IF92YXJ1aW50MzJWYWx1ZShkZWNvZGVyLmluc3RhbmNlKHN2YXJ1aW50MzJfdHlwZWlkKSk7XHJcbiAgICAgICAgZ2FtZWxvb3AgKz0gZGVsdGE7XHJcblxyXG4gICAgICAgIC8vIGRlY29kZSB0aGUgdXNlcmlkIGJlZm9yZSBlYWNoIGV2ZW50XHJcbiAgICAgICAgdmFyIHVzZXJpZCA9IChkZWNvZGVVc2VySWQgPT09IHRydWUpID8gZGVjb2Rlci5pbnN0YW5jZShyZXBsYXlfdXNlcmlkX3R5cGVpZCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIC8vIGRlY29kZSB0aGUgZXZlbnQgaWRcclxuICAgICAgICB2YXIgZXZlbnRpZCA9IGRlY29kZXIuaW5zdGFuY2UoZXZlbnRpZFR5cGVpZCk7XHJcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IGV2ZW50VHlwZXNbZXZlbnRpZF0gfHwgW251bGwsIG51bGxdO1xyXG4gICAgICAgIHZhciB0eXBlaWQgPSBldmVudFR5cGVbMF07XHJcbiAgICAgICAgdmFyIHR5cGVuYW1lID0gZXZlbnRUeXBlWzFdO1xyXG4gICAgICAgIGlmICh0eXBlaWQgPT09IG51bGwpIHRocm93IG5ldyBkZWNvZGVycy5Db3JydXB0ZWRFcnJvcignZXZlbnRpZCgnICsgZXZlbnRpZCArICcpIGF0ICcgKyBkZWNvZGVyLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICAvLyBkZWNvZGUgdGhlIGV2ZW50IHN0cnVjdCBpbnN0YW5jZVxyXG4gICAgICAgIHZhciBldmVudCA9IGRlY29kZXIuaW5zdGFuY2UodHlwZWlkKTtcclxuICAgICAgICBldmVudC5fZXZlbnQgPSB0eXBlbmFtZTtcclxuICAgICAgICBldmVudC5fZXZlbnRpZCA9IGV2ZW50aWQ7XHJcblxyXG4gICAgICAgIC8vIGluc2VydCBnYW1lbG9vcCBhbmQgdXNlcmlkXHJcbiAgICAgICAgZXZlbnQuX2dhbWVsb29wID0gZ2FtZWxvb3A7XHJcbiAgICAgICAgaWYgKGRlY29kZVVzZXJJZCkgZXZlbnQuX3VzZXJpZCA9IHVzZXJpZDtcclxuXHJcbiAgICAgICAgLy8gdGhlIG5leHQgZXZlbnQgaXMgYnl0ZSBhbGlnbmVkXHJcbiAgICAgICAgZGVjb2Rlci5ieXRlQWxpZ24oKTtcclxuXHJcbiAgICAgICAgLy8gaW5zZXJ0IGJpdHMgdXNlZCBpbiBzdHJlYW1cclxuICAgICAgICBldmVudC5fYml0cyA9IGRlY29kZXIudXNlZEJpdHMgLSBzdGFydEJpdHM7XHJcbiAgICAgICAgcHJvZ3Jlc3MuY3VycmVudCA9IGRlY29kZXIudXNlZEJpdHM7XHJcbiAgICAgICAgeWllbGQgZXZlbnQ7XHJcbiAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0cy5kZWNvZGVSZXBsYXlHYW1lRXZlbnRzID0gZnVuY3Rpb24qIChjb250ZW50cykge1xyXG4gICAgLy8gRGVjb2RlcyBhbmQgeWllbGRzIGVhY2ggZ2FtZSBldmVudCBmcm9tIHRoZSBjb250ZW50cyBieXRlIHN0cmluZy5cclxuICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgQml0UGFja2VkRGVjb2Rlcihjb250ZW50cywgdHlwZWluZm9zKTtcclxuICAgIHByb2dyZXNzLmN1cnJlbnQgPSAwO1xyXG4gICAgcHJvZ3Jlc3MudG90YWwgPSBkZWNvZGVyLnNpemU7XHJcbiAgICBmb3IgKGxldCBldmVudCBvZiBfZGVjb2RlX2V2ZW50X3N0cmVhbShkZWNvZGVyLCBnYW1lX2V2ZW50aWRfdHlwZWlkLCBnYW1lX2V2ZW50X3R5cGVzLCB0cnVlKSlcclxuICAgICAgICB5aWVsZCBldmVudDtcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0cy5kZWNvZGVSZXBsYXlNZXNzYWdlRXZlbnRzID0gZnVuY3Rpb24qIChjb250ZW50cykge1xyXG4gICAgICAgIC8vIERlY29kZXMgYW5kIHlpZWxkcyBlYWNoIG1lc3NhZ2UgZXZlbnQgZnJvbSB0aGUgY29udGVudHMgYnl0ZSBzdHJpbmcuXHJcbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBCaXRQYWNrZWREZWNvZGVyKGNvbnRlbnRzLCB0eXBlaW5mb3MpO1xyXG4gICAgICAgIHByb2dyZXNzLmN1cnJlbnQgPSAwO1xyXG4gICAgICAgIHByb2dyZXNzLnRvdGFsID0gZGVjb2Rlci5zaXplO1xyXG4gICAgICAgIGZvciAobGV0IGV2ZW50IG9mIF9kZWNvZGVfZXZlbnRfc3RyZWFtKGRlY29kZXIsIG1lc3NhZ2VfZXZlbnRpZF90eXBlaWQsIG1lc3NhZ2VfZXZlbnRfdHlwZXMsIHRydWUpKVxyXG4gICAgICAgICAgICB5aWVsZCBldmVudDtcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0cy5kZWNvZGVSZXBsYXlUcmFja2VyRXZlbnRzID0gZnVuY3Rpb24qIChjb250ZW50cykge1xyXG4gICAgLy8gRGVjb2RlcyBhbmQgeWllbGRzIGVhY2ggdHJhY2tlciBldmVudCBmcm9tIHRoZSBjb250ZW50cyBieXRlIHN0cmluZy5cclxuICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVmVyc2lvbkRlY29kZXIoY29udGVudHMsIHR5cGVpbmZvcyk7XHJcbiAgICBwcm9ncmVzcy5jdXJyZW50ID0gMDtcclxuICAgIHByb2dyZXNzLnRvdGFsID0gZGVjb2Rlci5zaXplO1xyXG4gICAgZm9yIChsZXQgZXZlbnQgb2YgX2RlY29kZV9ldmVudF9zdHJlYW0oZGVjb2RlciwgdHJhY2tlcl9ldmVudGlkX3R5cGVpZCwgdHJhY2tlcl9ldmVudF90eXBlcywgZmFsc2UpKVxyXG4gICAgICAgIHlpZWxkIGV2ZW50O1xyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnRzLmRlY29kZVJlcGxheUhlYWRlciA9IGZ1bmN0aW9uKGNvbnRlbnRzKSB7XHJcbiAgICAvLyBEZWNvZGVzIGFuZCByZXR1cm4gdGhlIHJlcGxheSBoZWFkZXIgZnJvbSB0aGUgY29udGVudHMgYnl0ZSBzdHJpbmcuXHJcbiAgICBjb25zdCBkZWNvZGVyID0gbmV3IFZlcnNpb25EZWNvZGVyKGNvbnRlbnRzLCB0eXBlaW5mb3MpO1xyXG4gICAgcmV0dXJuIGRlY29kZXIuaW5zdGFuY2UocmVwbGF5X2hlYWRlcl90eXBlaWQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnRzLmRlY29kZVJlcGxheURldGFpbHMgPSBmdW5jdGlvbihjb250ZW50cykge1xyXG4gICAgLy8gRGVjb2RlcyBhbmQgcmV0dXJucyB0aGUgZ2FtZSBkZXRhaWxzIGZyb20gdGhlIGNvbnRlbnRzIGJ5dGUgc3RyaW5nLlxyXG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBWZXJzaW9uRGVjb2Rlcihjb250ZW50cywgdHlwZWluZm9zKTtcclxuICAgIHJldHVybiBkZWNvZGVyLmluc3RhbmNlKGdhbWVfZGV0YWlsc190eXBlaWQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnRzLmRlY29kZVJlcGxheUluaXRkYXRhID0gZnVuY3Rpb24oY29udGVudHMpIHtcclxuICAgIC8vIERlY29kZXMgYW5kIHJldHVybiB0aGUgcmVwbGF5IGluaXQgZGF0YSBmcm9tIHRoZSBjb250ZW50cyBieXRlIHN0cmluZy5cclxuICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgQml0UGFja2VkRGVjb2Rlcihjb250ZW50cywgdHlwZWluZm9zKTtcclxuICAgIHJldHVybiBkZWNvZGVyLmluc3RhbmNlKHJlcGxheV9pbml0ZGF0YV90eXBlaWQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnRzLmRlY29kZVJlcGxheUF0dHJpYnV0ZXNFdmVudHMgPSBmdW5jdGlvbiAoY29udGVudHMpIHtcclxuICAgIC8vIERlY29kZXMgYW5kIHlpZWxkcyBlYWNoIGF0dHJpYnV0ZSBmcm9tIHRoZSBjb250ZW50cyBieXRlIHN0cmluZy5cclxuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBkZWNvZGVycy5CaXRQYWNrZWRCdWZmZXIoY29udGVudHMsICdsaXR0bGUnKTtcclxuICAgIHByb2dyZXNzLmN1cnJlbnQgPSAwO1xyXG4gICAgcHJvZ3Jlc3MudG90YWwgPSBidWZmZXIuc2l6ZTtcclxuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7fTtcclxuXHJcbiAgICBpZiAoIWJ1ZmZlci5pc0RvbmUpIHtcclxuICAgICAgICBhdHRyaWJ1dGVzLnNvdXJjZSA9IGJ1ZmZlci5yZWFkQml0cyg4KTtcclxuICAgICAgICBhdHRyaWJ1dGVzLm1hcE5hbWVTcGFjZSA9IGJ1ZmZlci5yZWFkQml0cygzMik7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gYnVmZmVyLnJlYWRCaXRzKDMyKTtcclxuICAgICAgICBhdHRyaWJ1dGVzLnNjb3BlcyA9IHt9O1xyXG5cclxuICAgICAgICB3aGlsZSAoIWJ1ZmZlci5pc0RvbmUpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB7fTtcclxuICAgICAgICB2YWx1ZS5uYW1lc3BhY2UgPSBidWZmZXIucmVhZEJpdHMoMzIpO1xyXG4gICAgICAgIHZhciBhdHRyaWQgPSB2YWx1ZS5hdHRyaWQgPSBidWZmZXIucmVhZEJpdHMoMzIpO1xyXG4gICAgICAgIHZhciBzY29wZSA9IGJ1ZmZlci5yZWFkQml0cyg4KTtcclxuICAgICAgICB2YWx1ZS52YWx1ZSA9IGJ1ZmZlci5yZWFkQWxpZ25lZEJ5dGVzKDQpLnJldmVyc2UoKTtcclxuICAgICAgICB3aGlsZSAodmFsdWUudmFsdWVbMF0gPT09IDApIHZhbHVlLnZhbHVlID0gdmFsdWUudmFsdWUuc2xpY2UoMSk7XHJcbiAgICAgICAgd2hpbGUgKHZhbHVlLnZhbHVlW3ZhbHVlLnZhbHVlLmxlbmd0aCAtIDFdID09PSAwKSB2YWx1ZS52YWx1ZSA9IHZhbHVlLnZhbHVlLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICBpZiAoIWF0dHJpYnV0ZXMuc2NvcGVzW3Njb3BlXSlcclxuICAgICAgICAgICAgYXR0cmlidXRlcy5zY29wZXNbc2NvcGVdID0ge307XHJcbiAgICAgICAgaWYgKCFhdHRyaWJ1dGVzLnNjb3Blc1tzY29wZV1bYXR0cmlkXSlcclxuICAgICAgICAgICAgYXR0cmlidXRlcy5zY29wZXNbc2NvcGVdW2F0dHJpZF0gPSBbXTtcclxuICAgICAgICBhdHRyaWJ1dGVzLnNjb3Blc1tzY29wZV1bYXR0cmlkXS5wdXNoKHZhbHVlKTtcclxuICAgICAgICBwcm9ncmVzcy5jdXJyZW50ID0gYnVmZmVyLnVzZWRCaXRzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXR0cmlidXRlcztcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0cy51bml0VGFnID0gZnVuY3Rpb24odW5pdFRhZ0luZGV4LCB1bml0VGFnUmVjeWNsZSkge1xyXG4gICAgcmV0dXJuICh1bml0VGFnSW5kZXggPDwgMTgpICsgdW5pdFRhZ1JlY3ljbGU7XHJcbiAgICB9O1xyXG5cclxuICAgIGV4cG9ydHMudW5pdFRhZ0luZGV4ID0gZnVuY3Rpb24odW5pdFRhZykge1xyXG4gICAgcmV0dXJuICh1bml0VGFnID4+IDE4KSAmIDB4MDAwMDNGRkY7XHJcbiAgICB9O1xyXG5cclxuICAgIGV4cG9ydHMudW5pdFRhZ1JlY3ljbGUgPSBmdW5jdGlvbih1bml0VGFnKSB7XHJcbiAgICByZXR1cm4gdW5pdFRhZyAmIDB4MDAwM0ZGRkY7XHJcbiAgICB9O1xyXG5gO1xyXG5cclxuXHJcbmNvbnN0IHR5cGVzID0ge1xyXG4gICAgdHVwbGU6IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICByZXR1cm4gc3RyLm1hdGNoKC8oLT9cXHcrKS9nKTtcclxuICAgIH0sXHJcbiAgICB0dXBsZXM6IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICByZXR1cm4gc3RyLm1hdGNoKC8oXFwoLio/XFwpKS9nKTtcclxuICAgIH0sXHJcbiAgICBfaW50OiB7XHJcbiAgICAgICAgZGVjb2RlOiBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHt9O1xyXG4gICAgICAgICAgICBjb25zdCByZXMgPSB0eXBlcy50dXBsZShzdHIpO1xyXG4gICAgICAgICAgICByZXRbJ2JvdW5kcyddID0gW3Jlc1swXSwgcmVzWzFdXTtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVuY29kZTogZnVuY3Rpb24gKGluZm9zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgWyR7aW5mb3MuYm91bmRzWzBdfSwgJHtpbmZvcy5ib3VuZHNbMV19XWA7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF9jaG9pY2U6IHtcclxuICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgY29uc3QgcmV0ID0geyBib3VuZHM6IFtdLCBjaG9pY2VzOiBbXSB9O1xyXG4gICAgICAgICAgICBjb25zdCByZXMgPSB0eXBlcy50dXBsZXMoc3RyKTtcclxuXHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmV0LCB0eXBlcy5faW50LmRlY29kZShyZXNbMF0pKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCByZXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR1cGxlID0gdHlwZXMudHVwbGUocmVzW2ldKTtcclxuICAgICAgICAgICAgICAgIHJldC5jaG9pY2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0dXBsZVswXSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlSW5kZXg6IHR1cGxlWzFdXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW5jb2RlOiBmdW5jdGlvbiAoaW5mb3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGBbJHtpbmZvcy5ib3VuZHNbMF19LCAke2luZm9zLmJvdW5kc1sxXX1dLCB7ICR7aW5mb3MuY2hvaWNlcy5tYXAoKGNob2ljZSwgaW5kZXgsIGFyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7aW5kZXh9OiBbJyR7Y2hvaWNlLmxhYmVsfScsICR7Y2hvaWNlLnR5cGVJbmRleH1dJHsoaW5kZXggPT09IGFyLmxlbmd0aCAtIDEpID8gJycgOiAnLCAnfWA7XHJcbiAgICAgICAgICAgIH0pLmpvaW4oJycpfX1gO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBfc3RydWN0OiB7XHJcbiAgICAgICAgZGVjb2RlOiBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHsgaXRlbXM6IFtdIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHR1cGxlcyA9IHR5cGVzLnR1cGxlcyhzdHIpO1xyXG4gICAgICAgICAgICBpZiAodHVwbGVzKSB7XHJcbiAgICAgICAgICAgICAgICB0dXBsZXMuZm9yRWFjaCh0dXBsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHVwbGUgPSB0eXBlcy50dXBsZSh0dXBsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0Lml0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdHVwbGVbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVJbmRleDogdHVwbGVbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogdHVwbGVbMl1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uIChpbmZvcykge1xyXG4gICAgICAgICAgICByZXR1cm4gYFske2luZm9zLml0ZW1zLm1hcCgoaXRlbSwgaW5kZXgsIGFyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYFsnJHtpdGVtLmxhYmVsfScsICR7aXRlbS50eXBlSW5kZXh9LCAke2l0ZW0udGFnfV0keyhpbmRleCA9PT0gYXIubGVuZ3RoIC0gMSkgPyAnJyA6ICcsICd9YDtcclxuICAgICAgICAgICAgfSkuam9pbignJyl9XWA7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF9ibG9iOiB7XHJcbiAgICAgICAgZGVjb2RlOiBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlcy5faW50LmRlY29kZShzdHIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW5jb2RlOiBmdW5jdGlvbiAoaW5mb3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVzLl9pbnQuZW5jb2RlKGluZm9zKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX2Jvb2w6IHtcclxuICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW5jb2RlOiBmdW5jdGlvbiAoaW5mb3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBfYXJyYXk6IHtcclxuICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oXHJcbiAgICAgICAgICAgICAgICB7IHR5cGVJbmRleDogc3RyLm1hdGNoKC9cXGQrJC8pWzBdIH0sXHJcbiAgICAgICAgICAgICAgICB0eXBlcy5faW50LmRlY29kZShzdHIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uIChpbmZvcykge1xyXG4gICAgICAgICAgICByZXR1cm4gYFske2luZm9zLmJvdW5kc1swXX0sICR7aW5mb3MuYm91bmRzWzFdfV0sICR7aW5mb3MudHlwZUluZGV4fWA7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF9vcHRpb25hbDoge1xyXG4gICAgICAgIGRlY29kZTogZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgICAgICByZXR1cm4geyB0eXBlSW5kZXg6IE51bWJlcihzdHIpIH07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uIChpbmZvcykge1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7aW5mb3MudHlwZUluZGV4fWA7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF9mb3VyY2M6IHtcclxuICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW5jb2RlOiBmdW5jdGlvbiAoaW5mb3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBfYml0YXJyYXk6IHtcclxuICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVzLl9pbnQuZGVjb2RlKHN0cik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uIChpbmZvcykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZXMuX2ludC5lbmNvZGUoaW5mb3MpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBfbnVsbDoge1xyXG4gICAgICAgIGRlY29kZTogZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uIChpbmZvcykge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgdG9rZW5zID0ge1xyXG4gICAgbmV3bGluZTogJ1xcbicsXHJcbiAgICBpbmRlbnQ6ICcgICcsXHJcbiAgICB0eXBlaW5mb3NTdGFydDogJ3R5cGVpbmZvcyA9IFsnLFxyXG4gICAgdHlwZWluZm9zRW5kOiAnXScsXHJcbiAgICBnYW1lZXZlbnRzU3RhcnQ6ICdnYW1lX2V2ZW50X3R5cGVzID0geycsXHJcbiAgICBnYW1lZXZlbnRzRW5kOiAnfScsXHJcbiAgICBtZXNzYWdlZXZlbnRzU3RhcnQ6ICdtZXNzYWdlX2V2ZW50X3R5cGVzID0geycsXHJcbiAgICBtZXNzYWdlZXZlbnRzRW5kOiAnfScsXHJcbiAgICB0cmFja2VyZXZlbnRzU3RhcnQ6ICd0cmFja2VyX2V2ZW50X3R5cGVzID0geycsXHJcbiAgICB0cmFja2VyZXZlbnRzRW5kOiAnfScsXHJcbiAgICBnYW1lZXZlbnRzVHlwZWlkOiAnZ2FtZV9ldmVudGlkX3R5cGVpZCA9JyxcclxuICAgIG1lc3NhZ2VldmVudHNUeXBlaWQ6ICdtZXNzYWdlX2V2ZW50aWRfdHlwZWlkID0nLFxyXG4gICAgdHJhY2tlcmV2ZW50c1R5cGVpZDogJ3RyYWNrZXJfZXZlbnRpZF90eXBlaWQgPScsXHJcbiAgICBoZWFkZXJUeXBlaWQ6ICdyZXBsYXlfaGVhZGVyX3R5cGVpZCA9JyxcclxuICAgIGRldGFpbHNUeXBlaWQ6ICdnYW1lX2RldGFpbHNfdHlwZWlkID0nLFxyXG4gICAgaW5pdGRhdGFUeXBlaWQ6ICdyZXBsYXlfaW5pdGRhdGFfdHlwZWlkID0nXHJcbn07XHJcblxyXG5jb25zdCBfZGF0YSA9IHtcclxuICAgIHJlYWxtczogW3VuZGVmaW5lZCwgJ2xpdmUnXSxcclxuICAgIHJlZ2lvbnM6IFtcclxuICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICdFdXJvcGUnXHJcbiAgICBdLFxyXG4gICAgaGVyb2VzOiBbXSxcclxuICAgIG1vdW50czogW10sXHJcbiAgICBtYXBzOiBbXSxcclxuICAgIGJ1aWxkczogW11cclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQeXRob25Qcm90b2NvbENvbnZlcnRlciB7XHJcbiAgICBwcml2YXRlIHB5Q29kZTogc3RyaW5nO1xyXG5cclxuICAgIHByaXZhdGUgdHlwZWluZm9zOiBhbnlbXTtcclxuICAgIHByaXZhdGUgZ2FtZWV2ZW50c1R5cGVzOiBhbnlbXTtcclxuICAgIHByaXZhdGUgbWVzc2FnZWV2ZW50c1R5cGVzOiBhbnlbXTtcclxuICAgIHByaXZhdGUgdHJhY2tlcmV2ZW50c3R5cGVzOiBhbnlbXTtcclxuXHJcbiAgICBwcml2YXRlIGdhbWVldmVudHNUeXBlaWQ7XHJcbiAgICBwcml2YXRlIG1lc3NhZ2VldmVudHNUeXBlaWQ7XHJcbiAgICBwcml2YXRlIHRyYWNrZXJldmVudHNUeXBlaWQ7XHJcbiAgICBwcml2YXRlIGhlYWRlclR5cGVpZDtcclxuICAgIHByaXZhdGUgZGV0YWlsc1R5cGVpZDtcclxuICAgIHByaXZhdGUgaW5pdGRhdGFUeXBlaWQ7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjb21waWxlKHByb3RvY29sQ29kZTogc3RyaW5nKTogSUhlcm9Qcm90b2NvbCB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICBjb25zdCBwcm90b2NvbDogSUhlcm9Qcm90b2NvbCA9IDxJSGVyb1Byb3RvY29sPnt9O1xyXG4gICAgICAgIGNvbnN0IGZuID0gRnVuY3Rpb24oJ2V4cG9ydHMnLCAnZGVjb2RlcnMnLCBwcm90b2NvbENvZGUpO1xyXG4gICAgICAgIGZuKHByb3RvY29sLCBkZWNvZGVycyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb3RvY29sIENvbXBpbGUgVGltZTogJywgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydCk7XHJcbiAgICAgICAgcmV0dXJuIHByb3RvY29sO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIHZlcnNpb246IG51bWJlciwgcHlDb2RlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnB5Q29kZSA9IHB5Q29kZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29udmVydCgpOiBJSGVyb1Byb3RvY29sIHtcclxuICAgICAgICByZXR1cm4gUHl0aG9uUHJvdG9jb2xDb252ZXJ0ZXIuY29tcGlsZSh0aGlzLmdldENvZGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvZGUoKTogc3RyaW5nIHtcclxuICAgICAgICB0aGlzLnBhcnNlKHRoaXMucHlDb2RlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy53cml0ZSgpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZShyYXc6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSByYXcuc3BsaXQodG9rZW5zLm5ld2xpbmUpO1xyXG4gICAgICAgIGxldCBsaW5lID0gMCwgc3RyO1xyXG4gICAgICAgIHRoaXMudHlwZWluZm9zID0gW107XHJcbiAgICAgICAgdGhpcy5nYW1lZXZlbnRzVHlwZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VldmVudHNUeXBlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMudHJhY2tlcmV2ZW50c3R5cGVzID0gW107XHJcbiAgICAgICAgd2hpbGUgKGxpbmUgPCBsaW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc3RyID0gbGluZXNbbGluZV0udHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoc3RyID09PSB0b2tlbnMudHlwZWluZm9zU3RhcnQpIHtcclxuICAgICAgICAgICAgICAgIGxpbmUgKz0gMTtcclxuICAgICAgICAgICAgICAgIHN0ciA9IGxpbmVzW2xpbmVdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGVpbmZvcy5wdXNoKHRoaXMucGFyc2VUeXBlaW5mb3Moc3RyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ciA9IGxpbmVzW2xpbmVdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKHN0ciAhPT0gdG9rZW5zLnR5cGVpbmZvc0VuZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodG9rZW5zLmdhbWVldmVudHNTdGFydCA9PT0gc3RyKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lICs9IDE7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBsaW5lc1tsaW5lXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lZXZlbnRzVHlwZXMucHVzaCh0aGlzLnBhcnNlRXZlbnQoc3RyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ciA9IGxpbmVzW2xpbmVdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKHRva2Vucy5nYW1lZXZlbnRzRW5kICE9PSBzdHIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRva2Vucy5tZXNzYWdlZXZlbnRzU3RhcnQgPT09IHN0cikge1xyXG4gICAgICAgICAgICAgICAgbGluZSArPSAxO1xyXG4gICAgICAgICAgICAgICAgc3RyID0gbGluZXNbbGluZV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZWV2ZW50c1R5cGVzLnB1c2godGhpcy5wYXJzZUV2ZW50KHN0cikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgPSBsaW5lc1tsaW5lXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICB9IHdoaWxlICh0b2tlbnMubWVzc2FnZWV2ZW50c0VuZCAhPT0gc3RyKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0b2tlbnMudHJhY2tlcmV2ZW50c1N0YXJ0ID09PSBzdHIpIHtcclxuICAgICAgICAgICAgICAgIGxpbmUgKz0gMTtcclxuICAgICAgICAgICAgICAgIHN0ciA9IGxpbmVzW2xpbmVdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZXJldmVudHN0eXBlcy5wdXNoKHRoaXMucGFyc2VFdmVudChzdHIpKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gbGluZXNbbGluZV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgfSB3aGlsZSAodG9rZW5zLnRyYWNrZXJldmVudHNFbmQgIT09IHN0cik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RyLnN0YXJ0c1dpdGgodG9rZW5zLmdhbWVldmVudHNUeXBlaWQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVldmVudHNUeXBlaWQgPSBzdHIubWF0Y2goL1xcZCsvKVswXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdHIuc3RhcnRzV2l0aCh0b2tlbnMubWVzc2FnZWV2ZW50c1R5cGVpZCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZWV2ZW50c1R5cGVpZCA9IHN0ci5tYXRjaCgvXFxkKy8pWzBdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ci5zdGFydHNXaXRoKHRva2Vucy50cmFja2VyZXZlbnRzVHlwZWlkKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VyZXZlbnRzVHlwZWlkID0gc3RyLm1hdGNoKC9cXGQrLylbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RyLnN0YXJ0c1dpdGgodG9rZW5zLmhlYWRlclR5cGVpZCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyVHlwZWlkID0gc3RyLm1hdGNoKC9cXGQrLylbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RyLnN0YXJ0c1dpdGgodG9rZW5zLmRldGFpbHNUeXBlaWQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGFpbHNUeXBlaWQgPSBzdHIubWF0Y2goL1xcZCsvKVswXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdHIuc3RhcnRzV2l0aCh0b2tlbnMuaW5pdGRhdGFUeXBlaWQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRkYXRhVHlwZWlkID0gc3RyLm1hdGNoKC9cXGQrLylbMF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxpbmUgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb3RvY29sIFBhcnNlIFRpbWU6ICcsIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VFdmVudChzdHI6IHN0cmluZyk6IHsga2V5OiBzdHJpbmcsIHR5cGVJbmRleDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfSB7XHJcbiAgICAgICAgY29uc3QgcmVzID0gc3RyLm1hdGNoKC9eKFxcZCspOlxcc1xcKChcXGQrKSxcXHNcXCcoLiopXFwnLyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAga2V5OiByZXNbMV0sXHJcbiAgICAgICAgICAgIHR5cGVJbmRleDogcmVzWzJdLFxyXG4gICAgICAgICAgICBuYW1lOiByZXNbM11cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VUeXBlaW5mb3Moc3RyOiBzdHJpbmcpOiB7IHN0cjogc3RyaW5nLCB0eXBlPzogc3RyaW5nLCBpbmRleD86IHN0cmluZyB9IHtcclxuICAgICAgICBjb25zdCB0eXBlUmVnZXggPSAvXlxcKCcoLio/KScsXFxbKC4qKVxcXVxcKSxcXHMqIyhcXGQrKSQvO1xyXG4gICAgICAgIGNvbnN0IGluZm9zOiB7IHN0cjogc3RyaW5nLCB0eXBlPzogc3RyaW5nLCBpbmRleD86IHN0cmluZyB9ID0geyBzdHI6IHN0ciB9O1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHR5cGVSZWdleC5leGVjKHN0cik7XHJcbiAgICAgICAgaW5mb3MudHlwZSA9IHJlc1sxXTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKGluZm9zLCB0eXBlc1tpbmZvcy50eXBlXS5kZWNvZGUocmVzWzJdKSk7XHJcbiAgICAgICAgaW5mb3MuaW5kZXggPSByZXNbM107XHJcbiAgICAgICAgcmV0dXJuIGluZm9zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgd3JpdGUoKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgIGNvbnN0IGJ1aWxkSW5mb3MgPSBfZGF0YS5idWlsZHNbdGhpcy52ZXJzaW9uXTtcclxuXHJcbiAgICAgICAgbGV0IG91dDogc3RyaW5nID0gX3RlbXBsYXRlO1xyXG4gICAgICAgIC8vIHVubmVzc2lhcnlcclxuICAgICAgICBvdXQgPSBvdXQucmVwbGFjZSgnJHtkYXRlfScsIG5ldyBEYXRlKCkudG9VVENTdHJpbmcoKSk7XHJcbiAgICAgICAgLy8gdW5uZXNzaWFyeVxyXG4gICAgICAgIG91dCA9IG91dC5yZXBsYWNlKDxhbnk+JyR7dmVyc2lvbn0nLCA8YW55PnRoaXMudmVyc2lvbik7XHJcblxyXG4gICAgICAgIGlmIChidWlsZEluZm9zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gYnVpbGRJbmZvcy5saXZlID8gYnVpbGRJbmZvcy5saXZlLnBhdGNoIDogYnVpbGRJbmZvcy5wdHIucGF0Y2g7XHJcbiAgICAgICAgICAgIG91dCA9IG91dC5yZXBsYWNlKCcke3BhdGNofScsIGBleHBvcnRzLnBhdGNoID0gXFwnJHtwYXRjaH1cXCc7JHt0b2tlbnMubmV3bGluZX1gKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvdXQgPSBvdXQucmVwbGFjZSgnJHtwYXRjaH0nLCAnJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvdXQgPSBvdXQucmVwbGFjZSgnJHt0eXBlaW5mb3N9JywgdGhpcy50eXBlaW5mb3MubWFwKChpbmZvcywgaW5kZXgsIGFyKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzdHIgPSB0b2tlbnMuaW5kZW50O1xyXG5cclxuICAgICAgICAgICAgc3RyICs9IGBbJyR7aW5mb3MudHlwZX0nLCBbYDtcclxuICAgICAgICAgICAgc3RyICs9IHR5cGVzW2luZm9zLnR5cGVdLmVuY29kZShpbmZvcyk7XHJcbiAgICAgICAgICAgIHN0ciArPSBgXV0ke2luZGV4ID09PSAoYXIubGVuZ3RoIC0gMSkgPyAnJyA6ICcsJ31gO1xyXG4gICAgICAgICAgICBzdHIgKz0gYCAgLy8ke2luZm9zLmluZGV4fWA7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgIH0pLmpvaW4odG9rZW5zLm5ld2xpbmUpKTtcclxuXHJcbiAgICAgICAgb3V0ID0gb3V0LnJlcGxhY2UoJyR7Z2FtZWV2ZW50c1R5cGVzfScsIHRoaXMuZ2FtZWV2ZW50c1R5cGVzLm1hcCgoZXZlbnQsIGluZGV4LCBhcikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc3RyID0gdG9rZW5zLmluZGVudDtcclxuXHJcbiAgICAgICAgICAgIHN0ciArPSBgJHtldmVudC5rZXl9OiBbJHtldmVudC50eXBlSW5kZXh9LCBcXCcke2V2ZW50Lm5hbWV9XFwnXWA7XHJcbiAgICAgICAgICAgIHN0ciArPSBpbmRleCA9PT0gYXIubGVuZ3RoIC0gMSA/ICcnIDogJywnO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICB9KS5qb2luKHRva2Vucy5uZXdsaW5lKSk7XHJcblxyXG4gICAgICAgIG91dCA9IG91dC5yZXBsYWNlKCcke21lc3NhZ2VldmVudHNUeXBlc30nLCB0aGlzLm1lc3NhZ2VldmVudHNUeXBlcy5tYXAoKGV2ZW50LCBpbmRleCwgYXIpID0+IHtcclxuICAgICAgICAgICAgbGV0IHN0ciA9IHRva2Vucy5pbmRlbnQ7XHJcblxyXG4gICAgICAgICAgICBzdHIgKz0gYCR7ZXZlbnQua2V5fTogWyR7ZXZlbnQudHlwZUluZGV4fSwgXFwnJHtldmVudC5uYW1lfVxcJ11gO1xyXG4gICAgICAgICAgICBzdHIgKz0gaW5kZXggPT09IGFyLmxlbmd0aCAtIDEgPyAnJyA6ICcsJztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgfSkuam9pbih0b2tlbnMubmV3bGluZSkpO1xyXG5cclxuICAgICAgICBvdXQgPSBvdXQucmVwbGFjZSgnJHt0cmFja2VyZXZlbnRzdHlwZXN9JywgdGhpcy50cmFja2VyZXZlbnRzdHlwZXMubWFwKChldmVudCwgaW5kZXgsIGFyKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzdHIgPSB0b2tlbnMuaW5kZW50ICsgdG9rZW5zLmluZGVudDtcclxuXHJcbiAgICAgICAgICAgIHN0ciArPSBgJHtldmVudC5rZXl9OiBbJHtldmVudC50eXBlSW5kZXh9LCBcXCcke2V2ZW50Lm5hbWV9XFwnXWA7XHJcbiAgICAgICAgICAgIHN0ciArPSBpbmRleCA9PT0gYXIubGVuZ3RoIC0gMSA/ICcnIDogJywnO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICB9KS5qb2luKHRva2Vucy5uZXdsaW5lKSk7XHJcblxyXG4gICAgICAgIG91dCA9IG91dC5yZXBsYWNlKCcke2dhbWVldmVudHNUeXBlaWR9JywgdGhpcy5nYW1lZXZlbnRzVHlwZWlkKTtcclxuICAgICAgICBvdXQgPSBvdXQucmVwbGFjZSgnJHttZXNzYWdlZXZlbnRzVHlwZWlkfScsIHRoaXMubWVzc2FnZWV2ZW50c1R5cGVpZCk7XHJcbiAgICAgICAgb3V0ID0gb3V0LnJlcGxhY2UoJyR7dHJhY2tlcmV2ZW50c1R5cGVpZH0nLCB0aGlzLnRyYWNrZXJldmVudHNUeXBlaWQpO1xyXG4gICAgICAgIG91dCA9IG91dC5yZXBsYWNlKCcke2hlYWRlclR5cGVpZH0nLCB0aGlzLmhlYWRlclR5cGVpZCk7XHJcbiAgICAgICAgb3V0ID0gb3V0LnJlcGxhY2UoJyR7ZGV0YWlsc1R5cGVpZH0nLCB0aGlzLmRldGFpbHNUeXBlaWQpO1xyXG4gICAgICAgIG91dCA9IG91dC5yZXBsYWNlKCcke2luaXRkYXRhVHlwZWlkfScsIHRoaXMuaW5pdGRhdGFUeXBlaWQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdQcm90b2NvbCBXcml0ZSBUaW1lOiAnLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0KTtcclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/protocols/PythonProtocolConverter.js\n// module id = ../heroprotocol/dist/lib/protocols/PythonProtocolConverter.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst decoder_1 = require(\"../decoder\");\nexports.BitPackedBuffer = decoder_1.BitPackedBuffer;\nexports.VersionDecoder = decoder_1.VersionDecoder;\nexports.BitPackedDecoder = decoder_1.BitPackedDecoder;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb3RvY29scy9kZWNvZGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHdDQUE2RTtBQUV4RSwwQkFGRyx5QkFBZSxDQUVIO0FBQ2YseUJBSG9CLHdCQUFjLENBR3BCO0FBQ2QsMkJBSm9DLDBCQUFnQixDQUlwQyIsImZpbGUiOiJwcm90b2NvbHMvZGVjb2RlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0JpdFBhY2tlZEJ1ZmZlciwgVmVyc2lvbkRlY29kZXIsIEJpdFBhY2tlZERlY29kZXJ9IGZyb20gJy4uL2RlY29kZXInO1xyXG5leHBvcnQge1xyXG4gICAgIEJpdFBhY2tlZEJ1ZmZlcixcclxuICAgICBWZXJzaW9uRGVjb2RlcixcclxuICAgICBCaXRQYWNrZWREZWNvZGVyXHJcbn1cclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/protocols/decoders.js\n// module id = ../heroprotocol/dist/lib/protocols/decoders.js\n// module chunks = main","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst buffer_1 = require(\"buffer\");\nconst mpq_1 = require(\"@heroesbrowser/mpq\");\nconst heroprotocol_1 = require(\"../heroprotocol\");\nconst types_1 = require(\"../types\");\nconst decorators_1 = require(\"./decorators\");\nconst BehaviorSubject_1 = require(\"rxjs/BehaviorSubject\");\nfunction parseStrings(data) {\n    if (!data) {\n        return data;\n    }\n    else if (data instanceof buffer_1.Buffer) {\n        return data.toString();\n    }\n    else if (Array.isArray(data)) {\n        return data.map(item => parseStrings(item));\n    }\n    else if (typeof data === 'object') {\n        // tslint:disable-next-line:forin\n        for (const key in data) {\n            data[key] = parseStrings(data[key]);\n        }\n    }\n    return data;\n}\n;\nvar ReplayFiles;\n(function (ReplayFiles) {\n    ReplayFiles[\"DETAILS\"] = \"replay.details\";\n    ReplayFiles[\"INITDATA\"] = \"replay.initdata\";\n    ReplayFiles[\"GAME_EVENTS\"] = \"replay.game.events\";\n    ReplayFiles[\"MESSAGE_EVENTS\"] = \"replay.message.events\";\n    ReplayFiles[\"TRACKER_EVENTS\"] = \"replay.tracker.events\";\n    ReplayFiles[\"ATTRIBUTES_EVENTS\"] = \"replay.attributes.events\";\n})(ReplayFiles = exports.ReplayFiles || (exports.ReplayFiles = {}));\nconst decoderMap = {\n    [ReplayFiles.DETAILS]: 'decodeReplayDetails',\n    [ReplayFiles.INITDATA]: 'decodeReplayInitdata',\n    [ReplayFiles.GAME_EVENTS]: 'decodeReplayGameEvents',\n    [ReplayFiles.MESSAGE_EVENTS]: 'decodeReplayMessageEvents',\n    [ReplayFiles.TRACKER_EVENTS]: 'decodeReplayTrackerEvents',\n    [ReplayFiles.ATTRIBUTES_EVENTS]: 'decodeReplayAttributesEvents',\n};\nlet Replay = class Replay {\n    constructor(mpqData) {\n        this._data = new Map();\n        this._statusSubject = new BehaviorSubject_1.BehaviorSubject(undefined);\n        this._stateSubject = new BehaviorSubject_1.BehaviorSubject(undefined);\n        this._lastProgressTime = 0;\n        this.loadProtocol = (protocolVersion) => __awaiter(this, void 0, void 0, function* () {\n            return yield heroprotocol_1.HeroProtocol.loadProtocol(protocolVersion);\n        });\n        this._mpq = new mpq_1.MPQArchive(mpqData);\n        this.manageStatus();\n    }\n    get status() {\n        return this._statusSubject;\n    }\n    get protocol() {\n        if (this._protocol) {\n            return this.asPromise(this._protocol);\n        }\n        return this.parseHeader().then(() => {\n            return this.asPromise(this._protocol);\n        });\n    }\n    get header() {\n        if (this._header) {\n            this.asPromise(this._header);\n        }\n        return this.parseHeader();\n    }\n    get details() {\n        return this.data(ReplayFiles.DETAILS);\n    }\n    get initData() {\n        return this.data(ReplayFiles.INITDATA);\n    }\n    get gameEvents() {\n        return this.events(ReplayFiles.GAME_EVENTS);\n    }\n    get messageEvents() {\n        return this.events(ReplayFiles.MESSAGE_EVENTS);\n    }\n    get trackerEvents() {\n        return this.events(ReplayFiles.TRACKER_EVENTS);\n    }\n    get attributeEvents() {\n        return this.data(ReplayFiles.ATTRIBUTES_EVENTS);\n    }\n    manageStatus() {\n        /* let progressSub = this._progressSubject.pipe(debounceTime(100)).subscribe((next) => {\n             this._statusSubject.next(next);\n         });*/\n        const stateSub = this._stateSubject.subscribe((next) => {\n            //progressSub.unsubscribe();\n            // this._progressSubject = new BehaviorSubject<IReplayStatusMessage>(undefined);\n            this._statusSubject.next(next);\n            /* progressSub = this._progressSubject.pipe(debounceTime(100)).subscribe((nextProgress) => {\n                 this._statusSubject.next(nextProgress);\n             });*/\n        });\n    }\n    updateStatus(status, current = 0, total = -1) {\n        const msg = {\n            type: 'replay-status',\n            status,\n            current,\n            total\n        };\n        if (total === -1) {\n            if (this._lastProgress) {\n                this._stateSubject.next(this._lastProgress);\n                this._lastProgress = undefined;\n            }\n            this._stateSubject.next(msg);\n        }\n        else {\n            const now = new Date().getTime();\n            const delta = now - this._lastProgressTime;\n            if (delta > 10) {\n                this._stateSubject.next(msg);\n                this._lastProgressTime = now;\n            }\n            else {\n                this._lastProgress = msg;\n            }\n            /*if (!this._progressSubject) {\n                this._progressSubject = new BehaviorSubject(undefined);\n                this._progressSub = this._progressSubject.pipe(debounceTime(10)).subscribe((nextProgress) => {\n                    this._statusSubject.next(nextProgress);\n                });\n            }*/\n            //this._progressSubject.next(msg);\n        }\n    }\n    parseHeader() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.updateStatus('parseHeader');\n            const headProtocol = yield this.getProtocol(29406);\n            const rawHeader = parseStrings(headProtocol.decodeReplayHeader(this._mpq.header.userDataHeader.content));\n            this._protocolPromise = this.getProtocol(rawHeader.m_version.m_baseBuild);\n            this._protocol = yield this._protocolPromise;\n            this._header = parseStrings(this._protocol.decodeReplayHeader(this._mpq.header.userDataHeader.content));\n            this.updateStatus('parseHeader', -1);\n            return this._header;\n        });\n    }\n    getProtocol(protocolVersion) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.updateStatus('getProtocol');\n            if (heroprotocol_1.HeroProtocol.hasProtocol(protocolVersion)) {\n                return heroprotocol_1.HeroProtocol.getProtocol(protocolVersion);\n            }\n            const code = yield this.loadProtocol(protocolVersion);\n            const protocol = heroprotocol_1.HeroProtocol.compile(protocolVersion, code);\n            this.updateStatus('getProtocol', -1);\n            return protocol;\n        });\n    }\n    parse(type) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const protocol = yield this.protocol;\n            const data = parseStrings(protocol[decoderMap[type]](this._mpq.readFile(type)));\n            this._data.set(type, data);\n            return data;\n        });\n    }\n    parseEvents(type) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const protocol = yield this.protocol;\n            const eventGen = protocol[decoderMap[type]](this._mpq.readFile(type));\n            const events = [];\n            this.updateStatus('parse-event-' + type, 0, protocol.progress.total);\n            for (const event of eventGen) {\n                if (types_1.FilteredEvents.indexOf(event._event) === -1) {\n                    events.push(parseStrings(event));\n                }\n                this.updateStatus('parse-event-' + type, protocol.progress.current, protocol.progress.total);\n            }\n            this._data.set(type, events);\n            this.updateStatus('parse-event-' + type, -1);\n            return events;\n        });\n    }\n    data(type) {\n        if (this._data.has(type)) {\n            return this.asPromise(this._data.get(type));\n        }\n        return this.parse(type);\n    }\n    events(type) {\n        if (this._data.has(type)) {\n            return this.asPromise(this._data.get(type));\n        }\n        return this.parseEvents(type);\n    }\n    asPromise(value) {\n        return new Promise((res, rej) => {\n            res(value);\n        });\n    }\n    dispose() {\n        this._mpq = undefined;\n        this._data = undefined;\n        this._header = undefined;\n        this._protocol = undefined;\n    }\n};\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], Replay.prototype, \"header\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], Replay.prototype, \"details\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], Replay.prototype, \"initData\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], Replay.prototype, \"gameEvents\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], Replay.prototype, \"messageEvents\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], Replay.prototype, \"trackerEvents\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], Replay.prototype, \"attributeEvents\", null);\nReplay = __decorate([\n    decorators_1.ReplayWorkerContext('008DCF70-B7E4-42DF-A3F9-4D2ADE13E718'),\n    __metadata(\"design:paramtypes\", [ArrayBuffer])\n], Replay);\nexports.Replay = Replay;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,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O0lBREMsd0JBQVcsRUFBRTs7OzJDQUdiO0FBR0Q7SUFEQyx3QkFBVyxFQUFFOzs7MkNBR2I7QUFHRDtJQURDLHdCQUFXLEVBQUU7Ozs2Q0FHYjtBQTNEUSxNQUFNO0lBRGxCLGdDQUFtQixDQUFDLHNDQUFzQyxDQUFDO3FDQThENUIsV0FBVztHQTdEOUIsTUFBTSxDQXFNbEI7QUFyTVksd0JBQU0iLCJmaWxlIjoicmVwbGF5L1JlcGxheS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlcic7XHJcbmltcG9ydCB7IE1QUUFyY2hpdmUgfSBmcm9tICdAaGVyb2VzYnJvd3Nlci9tcHEnO1xyXG5pbXBvcnQgeyBIZXJvUHJvdG9jb2wgfSBmcm9tICcuLi9oZXJvcHJvdG9jb2wnO1xyXG5pbXBvcnQge1xyXG4gICAgSUhlcm9Qcm90b2NvbCxcclxuICAgIElSZXBsYXlIZWFkZXIsIElSZXBsYXlEZXRhaWxzLFxyXG4gICAgSVJlcGxheUluaXREYXRhLFxyXG4gICAgRmlsdGVyZWRFdmVudHMsIElSZXBsYXlFdmVudCwgSVJlcGxheVRyYWNrZXJFdmVudFxyXG59IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgUnVuT25Xb3JrZXIsIFJlcGxheVdvcmtlckNvbnRleHQgfSBmcm9tICcuL2RlY29yYXRvcnMnO1xyXG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzL0JlaGF2aW9yU3ViamVjdCc7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMvU3Vic2NyaXB0aW9uJztcclxuaW1wb3J0IHsgSVJlcGxheVN0YXR1c01lc3NhZ2UgfSBmcm9tICcuL3Byb3h5L21lc3NhZ2VzJztcclxuaW1wb3J0IHsgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMvZGVib3VuY2VUaW1lJztcclxuaW1wb3J0IHsgdGltZXIgfSBmcm9tICdyeGpzL09ic2VydmFibGUvdGltZXInO1xyXG5cclxuZnVuY3Rpb24gcGFyc2VTdHJpbmdzPFQ+KGRhdGEpIHtcclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgQnVmZmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG4gICAgICAgIHJldHVybiBkYXRhLm1hcChpdGVtID0+IHBhcnNlU3RyaW5ncyhpdGVtKSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpmb3JpblxyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcclxuICAgICAgICAgICAgZGF0YVtrZXldID0gcGFyc2VTdHJpbmdzKGRhdGFba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGVudW0gUmVwbGF5RmlsZXMge1xyXG4gICAgREVUQUlMUyA9ICdyZXBsYXkuZGV0YWlscycsXHJcbiAgICBJTklUREFUQSA9ICdyZXBsYXkuaW5pdGRhdGEnLFxyXG4gICAgR0FNRV9FVkVOVFMgPSAncmVwbGF5LmdhbWUuZXZlbnRzJyxcclxuICAgIE1FU1NBR0VfRVZFTlRTID0gJ3JlcGxheS5tZXNzYWdlLmV2ZW50cycsXHJcbiAgICBUUkFDS0VSX0VWRU5UUyA9ICdyZXBsYXkudHJhY2tlci5ldmVudHMnLFxyXG4gICAgQVRUUklCVVRFU19FVkVOVFMgPSAncmVwbGF5LmF0dHJpYnV0ZXMuZXZlbnRzJyxcclxuXHJcbn1cclxuXHJcbmNvbnN0IGRlY29kZXJNYXAgPSB7XHJcbiAgICBbUmVwbGF5RmlsZXMuREVUQUlMU106ICdkZWNvZGVSZXBsYXlEZXRhaWxzJyxcclxuICAgIFtSZXBsYXlGaWxlcy5JTklUREFUQV06ICdkZWNvZGVSZXBsYXlJbml0ZGF0YScsXHJcbiAgICBbUmVwbGF5RmlsZXMuR0FNRV9FVkVOVFNdOiAnZGVjb2RlUmVwbGF5R2FtZUV2ZW50cycsXHJcbiAgICBbUmVwbGF5RmlsZXMuTUVTU0FHRV9FVkVOVFNdOiAnZGVjb2RlUmVwbGF5TWVzc2FnZUV2ZW50cycsXHJcbiAgICBbUmVwbGF5RmlsZXMuVFJBQ0tFUl9FVkVOVFNdOiAnZGVjb2RlUmVwbGF5VHJhY2tlckV2ZW50cycsXHJcbiAgICBbUmVwbGF5RmlsZXMuQVRUUklCVVRFU19FVkVOVFNdOiAnZGVjb2RlUmVwbGF5QXR0cmlidXRlc0V2ZW50cycsXHJcbn07XHJcblxyXG5AUmVwbGF5V29ya2VyQ29udGV4dCgnMDA4RENGNzAtQjdFNC00MkRGLUEzRjktNEQyQURFMTNFNzE4JylcclxuZXhwb3J0IGNsYXNzIFJlcGxheSB7XHJcbiAgICBwcml2YXRlIF9tcHE6IE1QUUFyY2hpdmU7XHJcbiAgICBwcml2YXRlIF9wcm90b2NvbFByb21pc2U6IFByb21pc2U8SUhlcm9Qcm90b2NvbD47XHJcbiAgICBwcml2YXRlIF9wcm90b2NvbDogSUhlcm9Qcm90b2NvbDtcclxuICAgIHByaXZhdGUgX2hlYWRlcjogSVJlcGxheUhlYWRlcjtcclxuICAgIHByaXZhdGUgX2RhdGE6IE1hcDxSZXBsYXlGaWxlcywgYW55PiA9IG5ldyBNYXA8UmVwbGF5RmlsZXMsIGFueT4oKTtcclxuICAgIHByaXZhdGUgX3N0YXR1c1N1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxJUmVwbGF5U3RhdHVzTWVzc2FnZT4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHVuZGVmaW5lZCk7XHJcbiAgICBwcml2YXRlIF9zdGF0ZVN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxJUmVwbGF5U3RhdHVzTWVzc2FnZT4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHVuZGVmaW5lZCk7XHJcbiAgICBwcml2YXRlIF9wcm9ncmVzc1N1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxJUmVwbGF5U3RhdHVzTWVzc2FnZT47XHJcbiAgICBwcml2YXRlIF9wcm9ncmVzc1N1YjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgc3RhdHVzKCk6IEJlaGF2aW9yU3ViamVjdDxJUmVwbGF5U3RhdHVzTWVzc2FnZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNTdWJqZWN0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBwcm90b2NvbCgpOiBQcm9taXNlPElIZXJvUHJvdG9jb2w+IHtcclxuICAgICAgICBpZiAodGhpcy5fcHJvdG9jb2wpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXNQcm9taXNlKHRoaXMuX3Byb3RvY29sKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VIZWFkZXIoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXNQcm9taXNlKHRoaXMuX3Byb3RvY29sKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGdldCBoZWFkZXIoKTogUHJvbWlzZTxJUmVwbGF5SGVhZGVyPiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYWRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmFzUHJvbWlzZSh0aGlzLl9oZWFkZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUhlYWRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIEBSdW5PbldvcmtlcigpXHJcbiAgICBwdWJsaWMgZ2V0IGRldGFpbHMoKTogUHJvbWlzZTxJUmVwbGF5RGV0YWlscz4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGE8SVJlcGxheURldGFpbHM+KFJlcGxheUZpbGVzLkRFVEFJTFMpO1xyXG4gICAgfVxyXG5cclxuICAgIEBSdW5PbldvcmtlcigpXHJcbiAgICBwdWJsaWMgZ2V0IGluaXREYXRhKCk6IFByb21pc2U8SVJlcGxheUluaXREYXRhPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTxJUmVwbGF5SW5pdERhdGE+KFJlcGxheUZpbGVzLklOSVREQVRBKTtcclxuICAgIH1cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGdldCBnYW1lRXZlbnRzKCk6IFByb21pc2U8SVJlcGxheURldGFpbHNbXT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50czxJUmVwbGF5RGV0YWlscz4oUmVwbGF5RmlsZXMuR0FNRV9FVkVOVFMpO1xyXG4gICAgfVxyXG5cclxuICAgIEBSdW5PbldvcmtlcigpXHJcbiAgICBwdWJsaWMgZ2V0IG1lc3NhZ2VFdmVudHMoKTogUHJvbWlzZTxJUmVwbGF5RGV0YWlsc1tdPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzPElSZXBsYXlEZXRhaWxzPihSZXBsYXlGaWxlcy5NRVNTQUdFX0VWRU5UUyk7XHJcbiAgICB9XHJcblxyXG4gICAgQFJ1bk9uV29ya2VyKClcclxuICAgIHB1YmxpYyBnZXQgdHJhY2tlckV2ZW50cygpOiBQcm9taXNlPElSZXBsYXlUcmFja2VyRXZlbnRbXT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50czxJUmVwbGF5VHJhY2tlckV2ZW50PihSZXBsYXlGaWxlcy5UUkFDS0VSX0VWRU5UUyk7XHJcbiAgICB9XHJcblxyXG4gICAgQFJ1bk9uV29ya2VyKClcclxuICAgIHB1YmxpYyBnZXQgYXR0cmlidXRlRXZlbnRzKCk6IFByb21pc2U8SVJlcGxheURldGFpbHM+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhPElSZXBsYXlEZXRhaWxzPihSZXBsYXlGaWxlcy5BVFRSSUJVVEVTX0VWRU5UUyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKG1wcURhdGE6IEFycmF5QnVmZmVyKSB7XHJcbiAgICAgICAgdGhpcy5fbXBxID0gbmV3IE1QUUFyY2hpdmUobXBxRGF0YSk7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VTdGF0dXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1hbmFnZVN0YXR1cygpIHtcclxuICAgICAgICAvKiBsZXQgcHJvZ3Jlc3NTdWIgPSB0aGlzLl9wcm9ncmVzc1N1YmplY3QucGlwZShkZWJvdW5jZVRpbWUoMTAwKSkuc3Vic2NyaWJlKChuZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICB0aGlzLl9zdGF0dXNTdWJqZWN0Lm5leHQobmV4dCk7XHJcbiAgICAgICAgIH0pOyovXHJcblxyXG4gICAgICAgIGNvbnN0IHN0YXRlU3ViID0gdGhpcy5fc3RhdGVTdWJqZWN0LnN1YnNjcmliZSgobmV4dCkgPT4ge1xyXG4gICAgICAgICAgICAvL3Byb2dyZXNzU3ViLnVuc3Vic2NyaWJlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGlzLl9wcm9ncmVzc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PElSZXBsYXlTdGF0dXNNZXNzYWdlPih1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXNTdWJqZWN0Lm5leHQobmV4dCk7XHJcbiAgICAgICAgICAgIC8qIHByb2dyZXNzU3ViID0gdGhpcy5fcHJvZ3Jlc3NTdWJqZWN0LnBpcGUoZGVib3VuY2VUaW1lKDEwMCkpLnN1YnNjcmliZSgobmV4dFByb2dyZXNzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzU3ViamVjdC5uZXh0KG5leHRQcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2xhc3RQcm9ncmVzc1RpbWUgPSAwO1xyXG4gICAgcHJpdmF0ZSBfbGFzdFByb2dyZXNzOiBJUmVwbGF5U3RhdHVzTWVzc2FnZTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlU3RhdHVzKHN0YXR1czogc3RyaW5nLCBjdXJyZW50ID0gMCwgdG90YWwgPSAtMSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG1zZzogSVJlcGxheVN0YXR1c01lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdyZXBsYXktc3RhdHVzJyxcclxuICAgICAgICAgICAgc3RhdHVzLFxyXG4gICAgICAgICAgICBjdXJyZW50LFxyXG4gICAgICAgICAgICB0b3RhbFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0b3RhbCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xhc3RQcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdGVTdWJqZWN0Lm5leHQodGhpcy5fbGFzdFByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZVN1YmplY3QubmV4dChtc2cpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IG5vdyAtIHRoaXMuX2xhc3RQcm9ncmVzc1RpbWU7XHJcbiAgICAgICAgICAgIGlmIChkZWx0YSA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0ZVN1YmplY3QubmV4dChtc2cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzVGltZSA9IG5vdztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IG1zZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKmlmICghdGhpcy5fcHJvZ3Jlc3NTdWJqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmVzc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmVzc1N1YiA9IHRoaXMuX3Byb2dyZXNzU3ViamVjdC5waXBlKGRlYm91bmNlVGltZSgxMCkpLnN1YnNjcmliZSgobmV4dFByb2dyZXNzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzU3ViamVjdC5uZXh0KG5leHRQcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgIC8vdGhpcy5fcHJvZ3Jlc3NTdWJqZWN0Lm5leHQobXNnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcGFyc2VIZWFkZXIoKTogUHJvbWlzZTxJUmVwbGF5SGVhZGVyPiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0dXMoJ3BhcnNlSGVhZGVyJyk7XHJcbiAgICAgICAgY29uc3QgaGVhZFByb3RvY29sID0gYXdhaXQgdGhpcy5nZXRQcm90b2NvbCgyOTQwNik7XHJcbiAgICAgICAgY29uc3QgcmF3SGVhZGVyID0gcGFyc2VTdHJpbmdzKGhlYWRQcm90b2NvbC5kZWNvZGVSZXBsYXlIZWFkZXIodGhpcy5fbXBxLmhlYWRlci51c2VyRGF0YUhlYWRlci5jb250ZW50KSk7XHJcbiAgICAgICAgdGhpcy5fcHJvdG9jb2xQcm9taXNlID0gdGhpcy5nZXRQcm90b2NvbChyYXdIZWFkZXIubV92ZXJzaW9uLm1fYmFzZUJ1aWxkKTtcclxuICAgICAgICB0aGlzLl9wcm90b2NvbCA9IGF3YWl0IHRoaXMuX3Byb3RvY29sUHJvbWlzZTtcclxuICAgICAgICB0aGlzLl9oZWFkZXIgPSBwYXJzZVN0cmluZ3ModGhpcy5fcHJvdG9jb2wuZGVjb2RlUmVwbGF5SGVhZGVyKHRoaXMuX21wcS5oZWFkZXIudXNlckRhdGFIZWFkZXIuY29udGVudCkpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCdwYXJzZUhlYWRlcicsIC0xKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faGVhZGVyO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgbG9hZFByb3RvY29sID0gYXN5bmMgKHByb3RvY29sVmVyc2lvbjogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgSGVyb1Byb3RvY29sLmxvYWRQcm90b2NvbChwcm90b2NvbFZlcnNpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0UHJvdG9jb2wocHJvdG9jb2xWZXJzaW9uOiBudW1iZXIpOiBQcm9taXNlPElIZXJvUHJvdG9jb2w+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1cygnZ2V0UHJvdG9jb2wnKTtcclxuICAgICAgICBpZiAoSGVyb1Byb3RvY29sLmhhc1Byb3RvY29sKHByb3RvY29sVmVyc2lvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEhlcm9Qcm90b2NvbC5nZXRQcm90b2NvbChwcm90b2NvbFZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb2RlID0gYXdhaXQgdGhpcy5sb2FkUHJvdG9jb2wocHJvdG9jb2xWZXJzaW9uKTtcclxuICAgICAgICBjb25zdCBwcm90b2NvbCA9IEhlcm9Qcm90b2NvbC5jb21waWxlKHByb3RvY29sVmVyc2lvbiwgY29kZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0dXMoJ2dldFByb3RvY29sJywgLTEpO1xyXG4gICAgICAgIHJldHVybiBwcm90b2NvbDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHBhcnNlPFQ+KHR5cGU6IFJlcGxheUZpbGVzKTogUHJvbWlzZTxUPiB7XHJcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBhd2FpdCB0aGlzLnByb3RvY29sO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBwYXJzZVN0cmluZ3MocHJvdG9jb2xbZGVjb2Rlck1hcFt0eXBlXV0odGhpcy5fbXBxLnJlYWRGaWxlKHR5cGUpKSk7XHJcbiAgICAgICAgdGhpcy5fZGF0YS5zZXQodHlwZSwgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBwYXJzZUV2ZW50czxUPih0eXBlOiBSZXBsYXlGaWxlcyk6IFByb21pc2U8VFtdPiB7XHJcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBhd2FpdCB0aGlzLnByb3RvY29sO1xyXG4gICAgICAgIGNvbnN0IGV2ZW50R2VuID0gcHJvdG9jb2xbZGVjb2Rlck1hcFt0eXBlXV0odGhpcy5fbXBxLnJlYWRGaWxlKHR5cGUpKTtcclxuICAgICAgICBjb25zdCBldmVudHM6IFRbXSA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1cygncGFyc2UtZXZlbnQtJyArIHR5cGUsIDAsIHByb3RvY29sLnByb2dyZXNzLnRvdGFsKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGV2ZW50R2VuKSB7XHJcbiAgICAgICAgICAgIGlmIChGaWx0ZXJlZEV2ZW50cy5pbmRleE9mKGV2ZW50Ll9ldmVudCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudHMucHVzaChwYXJzZVN0cmluZ3MoZXZlbnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1cygncGFyc2UtZXZlbnQtJyArIHR5cGUsIHByb3RvY29sLnByb2dyZXNzLmN1cnJlbnQsIHByb3RvY29sLnByb2dyZXNzLnRvdGFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGF0YS5zZXQodHlwZSwgZXZlbnRzKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1cygncGFyc2UtZXZlbnQtJyArIHR5cGUsIC0xKTtcclxuICAgICAgICByZXR1cm4gZXZlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGF0YTxUPih0eXBlOiBSZXBsYXlGaWxlcyk6IFByb21pc2U8VD4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9kYXRhLmhhcyh0eXBlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hc1Byb21pc2U8VD4odGhpcy5fZGF0YS5nZXQodHlwZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZTxUPih0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGV2ZW50czxUPih0eXBlOiBSZXBsYXlGaWxlcyk6IFByb21pc2U8VFtdPiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RhdGEuaGFzKHR5cGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFzUHJvbWlzZTxUW10+KHRoaXMuX2RhdGEuZ2V0KHR5cGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFdmVudHM8VD4odHlwZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgYXNQcm9taXNlPFQ+KHZhbHVlOiBUKTogUHJvbWlzZTxUPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICAgICAgICByZXModmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX21wcSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9kYXRhID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9wcm90b2NvbCA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/Replay.js\n// module id = ../heroprotocol/dist/lib/replay/Replay.js\n// module chunks = main","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Replay_1 = require(\"../Replay\");\n//import { IReplayTrackerEvent, isSUnitBornEvent, ISUnitBornEvent } from '../types';\nconst linq = require(\"linq\");\nconst sha1 = require(\"sha1\");\nconst decorators_1 = require(\"../decorators\");\n// tslint:disable:no-bitwise\nvar GameType;\n(function (GameType) {\n    GameType[GameType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    GameType[GameType[\"FLAG_SOLO_QUEUE\"] = 1] = \"FLAG_SOLO_QUEUE\";\n    GameType[GameType[\"FLAG_COOP\"] = 2] = \"FLAG_COOP\";\n    GameType[GameType[\"FLAG_PVP\"] = 4] = \"FLAG_PVP\";\n    GameType[GameType[\"FLAG_DRAFT\"] = 8] = \"FLAG_DRAFT\";\n    GameType[GameType[\"FLAG_RANKED\"] = 16] = \"FLAG_RANKED\";\n    GameType[GameType[\"MODE_PRACTICE\"] = 32] = \"MODE_PRACTICE\";\n    GameType[GameType[\"MODE_AI\"] = 64] = \"MODE_AI\";\n    GameType[GameType[\"MODE_BRAWL\"] = 128] = \"MODE_BRAWL\";\n    GameType[GameType[\"MODE_QM\"] = 256] = \"MODE_QM\";\n    GameType[GameType[\"MODE_UR\"] = 512] = \"MODE_UR\";\n    GameType[GameType[\"MODE_HL\"] = 1024] = \"MODE_HL\";\n    GameType[GameType[\"MODE_TL\"] = 2048] = \"MODE_TL\";\n    GameType[GameType[\"MODE_CUSTOM\"] = 4096] = \"MODE_CUSTOM\";\n    GameType[GameType[\"PRACTICE\"] = 33] = \"PRACTICE\";\n    GameType[GameType[\"SOLO_AI\"] = 65] = \"SOLO_AI\";\n    GameType[GameType[\"COOP_AI\"] = 66] = \"COOP_AI\";\n    GameType[GameType[\"CUSTOM\"] = 4100] = \"CUSTOM\";\n    GameType[GameType[\"CUSTOM_DRAFT\"] = 4108] = \"CUSTOM_DRAFT\";\n    GameType[GameType[\"BRAWL\"] = 132] = \"BRAWL\";\n    GameType[GameType[\"QUICK_MATCH\"] = 260] = \"QUICK_MATCH\";\n    GameType[GameType[\"UNRANKED_DRAFT\"] = 524] = \"UNRANKED_DRAFT\";\n    GameType[GameType[\"HERO_LEAGUE\"] = 1053] = \"HERO_LEAGUE\";\n    GameType[GameType[\"TEAM_LEAGUE\"] = 2076] = \"TEAM_LEAGUE\";\n})(GameType = exports.GameType || (exports.GameType = {}));\nlet BasicReplayAnalyser = class BasicReplayAnalyser {\n    constructor(replay) {\n        this.replay = replay;\n    }\n    get fingerPrint() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            let fp = '';\n            const head = yield this.replay.header;\n            const init = yield this.replay.initData;\n            fp = head.m_elapsedGameLoops.toString(16);\n            fp += '|' + init.m_syncLobbyState.m_gameDescription.m_randomValue;\n            fp += '|' + init.m_syncLobbyState.m_gameDescription.m_gameOptions.m_ammId;\n            fp += '|' + linq.from(init.m_syncLobbyState.m_lobbyState.m_slots)\n                .toJoinedString('#', elm => elm.m_hero + '~' + elm.m_teamId + '~' + elm.m_toonHandle);\n            return sha1(fp);\n        }))();\n    }\n    get gameDurationTicks() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const head = yield this.replay.header;\n            return head.m_elapsedGameLoops;\n        }))();\n    }\n    get gameDuration() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            return (yield this.gameDurationTicks) / 16;\n        }))();\n    }\n    get version() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const head = yield this.replay.header;\n            return {\n                protocol: head.m_version.m_baseBuild,\n                build: head.m_version.m_build,\n                major: head.m_version.m_major,\n                minor: head.m_version.m_minor,\n                revision: head.m_version.m_revision\n            };\n        }))();\n    }\n    get gameType() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const init = yield this.replay.initData;\n            const gameDesc = init.m_syncLobbyState.m_gameDescription;\n            console.log(gameDesc.m_gameOptions);\n            switch (gameDesc.m_gameOptions.m_ammId) {\n                case 50021:\n                case 50021:\n                    return GameType.MODE_AI;\n                case 50001:\n                    return GameType.QUICK_MATCH;\n                case 50031:\n                    return GameType.BRAWL;\n                case 50051:\n                    return GameType.UNRANKED_DRAFT;\n                case 50061:\n                    return GameType.HERO_LEAGUE;\n                case 50071:\n                    return GameType.TEAM_LEAGUE;\n                default:\n                    if (!gameDesc.m_gameOptions.m_competitive && !gameDesc.m_gameOptions.m_cooperative) {\n                        if (gameDesc.m_gameOptions.m_heroDuplicatesAllowed) {\n                            return GameType.CUSTOM;\n                        }\n                        else {\n                            return GameType.CUSTOM_DRAFT;\n                        }\n                    }\n                    return GameType.UNKNOWN;\n            }\n        }))();\n    }\n    isGameType(type) {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const gameType = yield this.gameType;\n            return (gameType & type) === type;\n        }))();\n    }\n    get mapName() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const head = yield this.replay.header;\n            const init = yield this.replay.initData;\n            const details = yield this.replay.details;\n            console.log(head);\n            console.log(init);\n            console.log(details);\n            return details.m_title;\n        }))();\n    }\n    get winningTeam() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const details = yield this.replay.details;\n            return details.m_playerList[0].m_teamId === 0 && details.m_playerList[0].m_result === 1 ? 0 : 1;\n        }))();\n    }\n    get timeZone() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const details = yield this.replay.details;\n            return details.m_timeLocalOffset / 10000000 / 60 / 60;\n        }))();\n    }\n    get playedOn() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const details = yield this.replay.details;\n            return new Date(details.m_timeUTC / 10000 - 11644473600000);\n        }))();\n    }\n    get playerList() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const init = yield this.replay.initData;\n            const details = yield this.replay.details;\n            const slots = linq.from(init.m_syncLobbyState.m_userInitialData).select((slot, i) => ({ slot, i }));\n            const us = slots.join(linq.from(init.m_syncLobbyState.m_lobbyState.m_slots), d => d.i, s => s.m_userId, (d, s) => {\n                return Object.assign({}, s, { m_name: d.slot.m_name });\n            });\n            const pl = linq.from(details.m_playerList);\n            const playerList = us.groupJoin(pl, s => s.m_workingSetSlotId, p => p.m_workingSetSlotId, (s, p) => ({\n                slot: s,\n                player: p.firstOrDefault()\n            })).select(p => ({\n                id: p.slot.m_toonHandle,\n                name: p.slot.m_name,\n                team: p.player ? p.player.m_teamId : null,\n                hero: p.player ? p.player.m_hero : null,\n                won: p.player ? p.player.m_result === 1 : null,\n                observer: p.slot.m_observe === 1\n            }));\n            return playerList.toArray();\n        }))();\n    }\n    get replayDescription() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            return {\n                fingerPrint: yield this.fingerPrint,\n                gameType: yield this.gameType,\n                version: yield this.version,\n                gameDurationTicks: yield this.gameDurationTicks,\n                gameDuration: yield this.gameDuration,\n                mapName: yield this.mapName,\n                timeZone: yield this.timeZone,\n                playedOn: yield this.playedOn,\n                winningTeam: yield this.winningTeam,\n                players: yield this.playerList\n            };\n        }))();\n    }\n};\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"fingerPrint\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"gameDurationTicks\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"version\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"gameType\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"mapName\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"winningTeam\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"timeZone\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"playedOn\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"playerList\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], BasicReplayAnalyser.prototype, \"replayDescription\", null);\nBasicReplayAnalyser = __decorate([\n    decorators_1.ReplayAnalyserContext('1B90BC76-8CE8-495C-A978-ABFD78DBB72A'),\n    __metadata(\"design:paramtypes\", [Replay_1.Replay])\n], BasicReplayAnalyser);\nexports.BasicReplayAnalyser = BasicReplayAnalyser;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9hbmFseXplcnMvQmFzaWNSZXBsYXlBbmFseXNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0NBQW1DO0FBQ25DLG9GQUFvRjtBQUNwRiw2QkFBNkI7QUFDN0IsNkJBQTZCO0FBRTdCLDhDQUFtRTtBQUNuRSw0QkFBNEI7QUFHNUIsSUFBWSxRQTBCWDtBQTFCRCxXQUFZLFFBQVE7SUFDaEIsNkNBQVcsQ0FBQTtJQUNYLDZEQUFtQixDQUFBO0lBQ25CLGlEQUFrQixDQUFBO0lBQ2xCLCtDQUFpQixDQUFBO0lBQ2pCLG1EQUFtQixDQUFBO0lBQ25CLHNEQUFvQixDQUFBO0lBQ3BCLDBEQUFzQixDQUFBO0lBQ3RCLDhDQUFnQixDQUFBO0lBQ2hCLHFEQUFtQixDQUFBO0lBQ25CLCtDQUFnQixDQUFBO0lBQ2hCLCtDQUFnQixDQUFBO0lBQ2hCLGdEQUFpQixDQUFBO0lBQ2pCLGdEQUFpQixDQUFBO0lBQ2pCLHdEQUFxQixDQUFBO0lBRXJCLGdEQUEwQyxDQUFBO0lBQzFDLDhDQUFtQyxDQUFBO0lBQ25DLDhDQUE2QixDQUFBO0lBQzdCLDhDQUErQixDQUFBO0lBQy9CLDBEQUFrRCxDQUFBO0lBQ2xELDJDQUE2QixDQUFBO0lBQzdCLHVEQUFnQyxDQUFBO0lBQ2hDLDZEQUFnRCxDQUFBO0lBQ2hELHdEQUE2RSxDQUFBO0lBQzdFLHdEQUEyRCxDQUFBO0FBQy9ELENBQUMsRUExQlcsUUFBUSxHQUFSLGdCQUFRLEtBQVIsZ0JBQVEsUUEwQm5CO0FBeUJELElBQWEsbUJBQW1CLEdBQWhDO0lBR0ksWUFBMkIsTUFBYztRQUFkLFdBQU0sR0FBTixNQUFNLENBQVE7SUFBSSxDQUFDO0lBSTlDLElBQVcsV0FBVztRQUNsQixPQUFPLENBQUMsR0FBMEIsRUFBRTtZQUNoQyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUM7WUFDWixNQUFNLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxD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LENBQUMsRUFBRSxDQUFDO0lBQ1QsQ0FBQztDQThESixDQUFBO0FBdk9HO0lBREMsd0JBQVcsRUFBRTs7O3NEQWFiO0FBR0Q7SUFEQyx3QkFBVyxFQUFFOzs7NERBTWI7QUFTRDtJQURDLHdCQUFXLEVBQUU7OztrREFZYjtBQUdEO0lBREMsd0JBQVcsRUFBRTs7O21EQWdDYjtBQVdEO0lBREMsd0JBQVcsRUFBRTs7O2tEQVdiO0FBR0Q7SUFEQyx3QkFBVyxFQUFFOzs7c0RBTWI7QUFHRDtJQURDLHdCQUFXLEVBQUU7OzttREFNYjtBQUdEO0lBREMsd0JBQVcsRUFBRTs7O21EQU1iO0FBR0Q7SUFEQyx3QkFBVyxFQUFFOzs7cURBOEJiO0FBR0Q7SUFEQyx3QkFBVyxFQUFFOzs7NERBZ0JiO0FBaExRLG1CQUFtQjtJQUQvQixrQ0FBcUIsQ0FBQyxzQ0FBc0MsQ0FBQztxQ0FJdkIsZUFBTTtHQUhoQyxtQkFBbUIsQ0E4Ty9CO0FBOU9ZLGtEQUFtQiIsImZpbGUiOiJyZXBsYXkvYW5hbHl6ZXJzL0Jhc2ljUmVwbGF5QW5hbHlzZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXBsYXkgfSBmcm9tICcuLi9SZXBsYXknO1xyXG4vL2ltcG9ydCB7IElSZXBsYXlUcmFja2VyRXZlbnQsIGlzU1VuaXRCb3JuRXZlbnQsIElTVW5pdEJvcm5FdmVudCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0ICogYXMgbGlucSBmcm9tICdsaW5xJztcclxuaW1wb3J0ICogYXMgc2hhMSBmcm9tICdzaGExJztcclxuaW1wb3J0IHsgSVJlcGxheURldGFpbHNQbGF5ZXIgfSBmcm9tICcuLi8uLi90eXBlcyc7XHJcbmltcG9ydCB7IFJlcGxheUFuYWx5c2VyQ29udGV4dCwgUnVuT25Xb3JrZXIgfSBmcm9tICcuLi9kZWNvcmF0b3JzJztcclxuLy8gdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZVxyXG5cclxuXHJcbmV4cG9ydCBlbnVtIEdhbWVUeXBlIHtcclxuICAgIFVOS05PV04gPSAwLFxyXG4gICAgRkxBR19TT0xPX1FVRVVFID0gMSxcclxuICAgIEZMQUdfQ09PUCA9IDEgPDwgMSxcclxuICAgIEZMQUdfUFZQID0gMSA8PCAyLFxyXG4gICAgRkxBR19EUkFGVCA9IDEgPDwgMyxcclxuICAgIEZMQUdfUkFOS0VEID0gMSA8PCA0LFxyXG4gICAgTU9ERV9QUkFDVElDRSA9IDEgPDwgNSxcclxuICAgIE1PREVfQUkgPSAxIDw8IDYsXHJcbiAgICBNT0RFX0JSQVdMID0gMSA8PCA3LFxyXG4gICAgTU9ERV9RTSA9IDEgPDwgOCxcclxuICAgIE1PREVfVVIgPSAxIDw8IDksXHJcbiAgICBNT0RFX0hMID0gMSA8PCAxMCxcclxuICAgIE1PREVfVEwgPSAxIDw8IDExLFxyXG4gICAgTU9ERV9DVVNUT00gPSAxIDw8IDEyLFxyXG5cclxuICAgIFBSQUNUSUNFID0gTU9ERV9QUkFDVElDRSB8IEZMQUdfU09MT19RVUVVRSxcclxuICAgIFNPTE9fQUkgPSBNT0RFX0FJIHwgRkxBR19TT0xPX1FVRVVFLFxyXG4gICAgQ09PUF9BSSA9IE1PREVfQUkgfCBGTEFHX0NPT1AsXHJcbiAgICBDVVNUT00gPSBNT0RFX0NVU1RPTSB8IEZMQUdfUFZQLFxyXG4gICAgQ1VTVE9NX0RSQUZUID0gTU9ERV9DVVNUT00gfCBGTEFHX1BWUCB8IEZMQUdfRFJBRlQsXHJcbiAgICBCUkFXTCA9IE1PREVfQlJBV0wgfCBGTEFHX1BWUCxcclxuICAgIFFVSUNLX01BVENIID0gTU9ERV9RTSB8IEZMQUdfUFZQLFxyXG4gICAgVU5SQU5LRURfRFJBRlQgPSBNT0RFX1VSIHwgRkxBR19QVlAgfCBGTEFHX0RSQUZULFxyXG4gICAgSEVST19MRUFHVUUgPSBNT0RFX0hMIHwgRkxBR19QVlAgfCBGTEFHX0RSQUZUIHwgRkxBR19SQU5LRUQgfCBGTEFHX1NPTE9fUVVFVUUsXHJcbiAgICBURUFNX0xFQUdVRSA9IE1PREVfVEwgfCBGTEFHX1BWUCB8IEZMQUdfRFJBRlQgfCBGTEFHX1JBTktFRFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlcGxheURlc2NyaXB0aW9uIHtcclxuICAgIGZpbmdlclByaW50OiBzdHJpbmc7XHJcbiAgICBtYXBOYW1lOiBzdHJpbmc7XHJcbiAgICBnYW1lRHVyYXRpb25UaWNrczogbnVtYmVyO1xyXG4gICAgZ2FtZUR1cmF0aW9uOiBudW1iZXI7XHJcbiAgICB2ZXJzaW9uOiB7IG1ham9yOiBudW1iZXIsIG1pbm9yOiBudW1iZXIsIHJldmlzaW9uOiBudW1iZXIsIGJ1aWxkOiBudW1iZXIsIHByb3RvY29sOiBudW1iZXIgfTtcclxuICAgIGdhbWVUeXBlOiBHYW1lVHlwZTtcclxuICAgIHRpbWVab25lOiBudW1iZXI7XHJcbiAgICBwbGF5ZWRPbjogRGF0ZTtcclxuICAgIHdpbm5pbmdUZWFtOiBudW1iZXI7XHJcbiAgICBwbGF5ZXJzOiBCYXNpY1BsYXllckRhdGFbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCYXNpY1BsYXllckRhdGEge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGhlcm86IHN0cmluZztcclxuICAgIHRlYW06IG51bWJlcjtcclxuICAgIHdvbjogYm9vbGVhbjtcclxuICAgIG9ic2VydmVyOiBib29sZWFuO1xyXG59XHJcblxyXG5AUmVwbGF5QW5hbHlzZXJDb250ZXh0KCcxQjkwQkM3Ni04Q0U4LTQ5NUMtQTk3OC1BQkZENzhEQkI3MkEnKVxyXG5leHBvcnQgY2xhc3MgQmFzaWNSZXBsYXlBbmFseXNlciB7XHJcblxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlcGxheTogUmVwbGF5KSB7IH1cclxuXHJcblxyXG4gICAgQFJ1bk9uV29ya2VyKClcclxuICAgIHB1YmxpYyBnZXQgZmluZ2VyUHJpbnQoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICByZXR1cm4gKGFzeW5jICgpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xyXG4gICAgICAgICAgICBsZXQgZnAgPSAnJztcclxuICAgICAgICAgICAgY29uc3QgaGVhZCA9IGF3YWl0IHRoaXMucmVwbGF5LmhlYWRlcjtcclxuICAgICAgICAgICAgY29uc3QgaW5pdCA9IGF3YWl0IHRoaXMucmVwbGF5LmluaXREYXRhO1xyXG4gICAgICAgICAgICBmcCA9IGhlYWQubV9lbGFwc2VkR2FtZUxvb3BzLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgZnAgKz0gJ3wnICsgaW5pdC5tX3N5bmNMb2JieVN0YXRlLm1fZ2FtZURlc2NyaXB0aW9uLm1fcmFuZG9tVmFsdWU7XHJcbiAgICAgICAgICAgIGZwICs9ICd8JyArIGluaXQubV9zeW5jTG9iYnlTdGF0ZS5tX2dhbWVEZXNjcmlwdGlvbi5tX2dhbWVPcHRpb25zLm1fYW1tSWQ7XHJcbiAgICAgICAgICAgIGZwICs9ICd8JyArIGxpbnEuZnJvbShpbml0Lm1fc3luY0xvYmJ5U3RhdGUubV9sb2JieVN0YXRlLm1fc2xvdHMpXHJcbiAgICAgICAgICAgICAgICAudG9Kb2luZWRTdHJpbmcoJyMnLCBlbG0gPT4gZWxtLm1faGVybyArICd+JyArIGVsbS5tX3RlYW1JZCArICd+JyArIGVsbS5tX3Rvb25IYW5kbGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2hhMShmcCk7XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGdldCBnYW1lRHVyYXRpb25UaWNrcygpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgICAgIHJldHVybiAoYXN5bmMgKCk6IFByb21pc2U8bnVtYmVyPiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWQgPSBhd2FpdCB0aGlzLnJlcGxheS5oZWFkZXI7XHJcbiAgICAgICAgICAgIHJldHVybiBoZWFkLm1fZWxhcHNlZEdhbWVMb29wcztcclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZ2FtZUR1cmF0aW9uKCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxudW1iZXI+ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLmdhbWVEdXJhdGlvblRpY2tzKSAvIDE2O1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQFJ1bk9uV29ya2VyKClcclxuICAgIHB1YmxpYyBnZXQgdmVyc2lvbigpOiBQcm9taXNlPHsgbWFqb3I6IG51bWJlciwgbWlub3I6IG51bWJlciwgcmV2aXNpb246IG51bWJlciwgYnVpbGQ6IG51bWJlciwgcHJvdG9jb2w6IG51bWJlciB9PiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGVhZCA9IGF3YWl0IHRoaXMucmVwbGF5LmhlYWRlcjtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHByb3RvY29sOiBoZWFkLm1fdmVyc2lvbi5tX2Jhc2VCdWlsZCxcclxuICAgICAgICAgICAgICAgIGJ1aWxkOiBoZWFkLm1fdmVyc2lvbi5tX2J1aWxkLFxyXG4gICAgICAgICAgICAgICAgbWFqb3I6IGhlYWQubV92ZXJzaW9uLm1fbWFqb3IsXHJcbiAgICAgICAgICAgICAgICBtaW5vcjogaGVhZC5tX3ZlcnNpb24ubV9taW5vcixcclxuICAgICAgICAgICAgICAgIHJldmlzaW9uOiBoZWFkLm1fdmVyc2lvbi5tX3JldmlzaW9uXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGdldCBnYW1lVHlwZSgpOiBQcm9taXNlPEdhbWVUeXBlPiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxHYW1lVHlwZT4gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbml0ID0gYXdhaXQgdGhpcy5yZXBsYXkuaW5pdERhdGE7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBnYW1lRGVzYyA9IGluaXQubV9zeW5jTG9iYnlTdGF0ZS5tX2dhbWVEZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZ2FtZURlc2MubV9nYW1lT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZ2FtZURlc2MubV9nYW1lT3B0aW9ucy5tX2FtbUlkKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDUwMDIxOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA1MDAyMTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2FtZVR5cGUuTU9ERV9BSTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTAwMDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdhbWVUeXBlLlFVSUNLX01BVENIO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1MDAzMTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2FtZVR5cGUuQlJBV0w7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDUwMDUxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBHYW1lVHlwZS5VTlJBTktFRF9EUkFGVDtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTAwNjE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdhbWVUeXBlLkhFUk9fTEVBR1VFO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1MDA3MTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2FtZVR5cGUuVEVBTV9MRUFHVUU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2FtZURlc2MubV9nYW1lT3B0aW9ucy5tX2NvbXBldGl0aXZlICYmICFnYW1lRGVzYy5tX2dhbWVPcHRpb25zLm1fY29vcGVyYXRpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVEZXNjLm1fZ2FtZU9wdGlvbnMubV9oZXJvRHVwbGljYXRlc0FsbG93ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBHYW1lVHlwZS5DVVNUT007XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2FtZVR5cGUuQ1VTVE9NX0RSQUZUO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBHYW1lVHlwZS5VTktOT1dOO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNHYW1lVHlwZSh0eXBlOiBHYW1lVHlwZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiAoYXN5bmMgKCk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBnYW1lVHlwZSA9IGF3YWl0IHRoaXMuZ2FtZVR5cGU7XHJcbiAgICAgICAgICAgIHJldHVybiAoZ2FtZVR5cGUgJiB0eXBlKSA9PT0gdHlwZTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGdldCBtYXBOYW1lKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGVhZCA9IGF3YWl0IHRoaXMucmVwbGF5LmhlYWRlcjtcclxuICAgICAgICAgICAgY29uc3QgaW5pdCA9IGF3YWl0IHRoaXMucmVwbGF5LmluaXREYXRhO1xyXG4gICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gYXdhaXQgdGhpcy5yZXBsYXkuZGV0YWlscztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaGVhZCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGluaXQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkZXRhaWxzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRldGFpbHMubV90aXRsZTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG5cclxuICAgIEBSdW5PbldvcmtlcigpXHJcbiAgICBwdWJsaWMgZ2V0IHdpbm5pbmdUZWFtKCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxudW1iZXI+ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGV0YWlscyA9IGF3YWl0IHRoaXMucmVwbGF5LmRldGFpbHM7XHJcbiAgICAgICAgICAgIHJldHVybiBkZXRhaWxzLm1fcGxheWVyTGlzdFswXS5tX3RlYW1JZCA9PT0gMCAmJiBkZXRhaWxzLm1fcGxheWVyTGlzdFswXS5tX3Jlc3VsdCA9PT0gMSA/IDAgOiAxO1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQFJ1bk9uV29ya2VyKClcclxuICAgIHB1YmxpYyBnZXQgdGltZVpvbmUoKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgICAgICByZXR1cm4gKGFzeW5jICgpOiBQcm9taXNlPG51bWJlcj4gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gYXdhaXQgdGhpcy5yZXBsYXkuZGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIGRldGFpbHMubV90aW1lTG9jYWxPZmZzZXQgLyAxMDAwMDAwMCAvIDYwIC8gNjA7XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGdldCBwbGF5ZWRPbigpOiBQcm9taXNlPERhdGU+IHtcclxuICAgICAgICByZXR1cm4gKGFzeW5jICgpOiBQcm9taXNlPERhdGU+ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGV0YWlscyA9IGF3YWl0IHRoaXMucmVwbGF5LmRldGFpbHM7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkZXRhaWxzLm1fdGltZVVUQyAvIDEwMDAwIC0gMTE2NDQ0NzM2MDAwMDApO1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQFJ1bk9uV29ya2VyKClcclxuICAgIHB1YmxpYyBnZXQgcGxheWVyTGlzdCgpOiBQcm9taXNlPEJhc2ljUGxheWVyRGF0YVtdPiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxCYXNpY1BsYXllckRhdGFbXT4gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbml0ID0gYXdhaXQgdGhpcy5yZXBsYXkuaW5pdERhdGE7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gYXdhaXQgdGhpcy5yZXBsYXkuZGV0YWlscztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNsb3RzID0gbGlucS5mcm9tKGluaXQubV9zeW5jTG9iYnlTdGF0ZS5tX3VzZXJJbml0aWFsRGF0YSkuc2VsZWN0KChzbG90LCBpKSA9PiAoeyBzbG90LCBpIH0pKTtcclxuICAgICAgICAgICAgY29uc3QgdXMgPSBzbG90cy5qb2luKGxpbnEuZnJvbShpbml0Lm1fc3luY0xvYmJ5U3RhdGUubV9sb2JieVN0YXRlLm1fc2xvdHMpLCBkID0+IGQuaSwgcyA9PiBzLm1fdXNlcklkLCAoZCwgcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHMsIHsgbV9uYW1lOiBkLnNsb3QubV9uYW1lIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBwbCA9IGxpbnEuZnJvbShkZXRhaWxzLm1fcGxheWVyTGlzdCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwbGF5ZXJMaXN0ID0gdXMuZ3JvdXBKb2luKFxyXG4gICAgICAgICAgICAgICAgcGwsIHMgPT4gcy5tX3dvcmtpbmdTZXRTbG90SWQsIHAgPT4gcC5tX3dvcmtpbmdTZXRTbG90SWQsIChzLCBwOiBhbnlcclxuICAgICAgICAgICAgICAgICkgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICBzbG90OiBzLFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcjogPElSZXBsYXlEZXRhaWxzUGxheWVyPnAuZmlyc3RPckRlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgfSkpLnNlbGVjdChwID0+ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHAuc2xvdC5tX3Rvb25IYW5kbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcC5zbG90Lm1fbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICB0ZWFtOiBwLnBsYXllciA/IHAucGxheWVyLm1fdGVhbUlkIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBoZXJvOiBwLnBsYXllciA/IHAucGxheWVyLm1faGVybyA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgd29uOiBwLnBsYXllciA/IHAucGxheWVyLm1fcmVzdWx0ID09PSAxIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcjogcC5zbG90Lm1fb2JzZXJ2ZSA9PT0gMVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBsYXllckxpc3QudG9BcnJheSgpO1xyXG5cclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG5cclxuICAgIEBSdW5PbldvcmtlcigpXHJcbiAgICBwdWJsaWMgZ2V0IHJlcGxheURlc2NyaXB0aW9uKCk6IFByb21pc2U8UmVwbGF5RGVzY3JpcHRpb24+IHtcclxuICAgICAgICByZXR1cm4gKGFzeW5jICgpOiBQcm9taXNlPFJlcGxheURlc2NyaXB0aW9uPiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaW5nZXJQcmludDogYXdhaXQgdGhpcy5maW5nZXJQcmludCxcclxuICAgICAgICAgICAgICAgIGdhbWVUeXBlOiBhd2FpdCB0aGlzLmdhbWVUeXBlLFxyXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogYXdhaXQgdGhpcy52ZXJzaW9uLFxyXG4gICAgICAgICAgICAgICAgZ2FtZUR1cmF0aW9uVGlja3M6IGF3YWl0IHRoaXMuZ2FtZUR1cmF0aW9uVGlja3MsXHJcbiAgICAgICAgICAgICAgICBnYW1lRHVyYXRpb246IGF3YWl0IHRoaXMuZ2FtZUR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgbWFwTmFtZTogYXdhaXQgdGhpcy5tYXBOYW1lLFxyXG4gICAgICAgICAgICAgICAgdGltZVpvbmU6IGF3YWl0IHRoaXMudGltZVpvbmUsXHJcbiAgICAgICAgICAgICAgICBwbGF5ZWRPbjogYXdhaXQgdGhpcy5wbGF5ZWRPbixcclxuICAgICAgICAgICAgICAgIHdpbm5pbmdUZWFtOiBhd2FpdCB0aGlzLndpbm5pbmdUZWFtLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyczogYXdhaXQgdGhpcy5wbGF5ZXJMaXN0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgICAgIHByaXZhdGUgX3RyYWNrZXJRdWVyaWFibGU6IGxpbnEuSUVudW1lcmFibGU8SVJlcGxheVRyYWNrZXJFdmVudD47XHJcbiAgICAgICAgcHJpdmF0ZSBfdHJhY2tlclF1ZXJpYWJsZVByb21pc2U6IFByb21pc2U8bGlucS5JRW51bWVyYWJsZTxJUmVwbGF5VHJhY2tlckV2ZW50Pj47XHJcbiAgICBcclxuICAgICAgICBwcml2YXRlIF91bml0VHlwZUJ5VGFnOiB7IFt0YWc6IG51bWJlcl06IHN0cmluZyB9ID0ge307XHJcbiAgICBcclxuICAgICAgICBwdWJsaWMgZ2V0IHRyYWNrZXJRdWVyaWFibGUoKTogUHJvbWlzZTxsaW5xLklFbnVtZXJhYmxlPElSZXBsYXlUcmFja2VyRXZlbnQ+PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl90cmFja2VyUXVlcmlhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hc1Byb21pc2U8bGlucS5JRW51bWVyYWJsZTxJUmVwbGF5VHJhY2tlckV2ZW50Pj4odGhpcy5fdHJhY2tlclF1ZXJpYWJsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHJhY2tlclF1ZXJpYWJsZSgpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVwbGF5OiBSZXBsYXkpIHtcclxuICAgIFxyXG4gICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICBwdWJsaWMgYXN5bmMgZ2V0VW5pdFR5cGVzKCkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm90b2NvbCA9IGF3YWl0IHRoaXMucmVwbGF5LnByb3RvY29sO1xyXG4gICAgICAgICAgICBsZXQgcSA9IDxsaW5xLklFbnVtZXJhYmxlPElTVW5pdEJvcm5FdmVudD4+KGF3YWl0IHRoaXMudHJhY2tlclF1ZXJpYWJsZSk7XHJcbiAgICAgICAgICAgIHEgPSBxLndoZXJlKGUgPT4gaXNTVW5pdEJvcm5FdmVudChlKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHEudG9PYmplY3QoZSA9PiBwcm90b2NvbC51bml0VGFnKGUubV91bml0VGFnSW5kZXgsIGUubV91bml0VGFnUmVjeWNsZSksIGUgPT4gZS5tX3VuaXRUeXBlTmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcHVibGljIGFzeW5jIGdldE1pbmlvblNwYXducyh0ZWFtPzogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3RvY29sID0gYXdhaXQgdGhpcy5yZXBsYXkucHJvdG9jb2w7XHJcbiAgICAgICAgICAgIGxldCBxID0gPGxpbnEuSUVudW1lcmFibGU8SVNVbml0Qm9ybkV2ZW50Pj4oYXdhaXQgdGhpcy50cmFja2VyUXVlcmlhYmxlKVxyXG4gICAgICAgICAgICAgICAgLndoZXJlKFxyXG4gICAgICAgICAgICAgICAgZSA9PiBpc1NVbml0Qm9ybkV2ZW50KGUpICYmIChlLm1fY29udHJvbFBsYXllcklkID09PSAxMSB8fCBlLm1fY29udHJvbFBsYXllcklkID09PSAxMikgJiYgZS5tX3VuaXRUeXBlTmFtZS5lbmRzV2l0aCgnTWluaW9uJylcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmICh0ZWFtID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBxID0gcS53aGVyZShlID0+IGUubV9jb250cm9sUGxheWVySWQgPT09IDExKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0ZWFtID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICBxID0gcS53aGVyZShlID0+IGUubV9jb250cm9sUGxheWVySWQgPT09IDEyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBxLnNlbGVjdChlID0+ICh7XHJcbiAgICAgICAgICAgICAgICB0YWc6IHByb3RvY29sLnVuaXRUYWcoZS5tX3VuaXRUYWdJbmRleCwgZS5tX3VuaXRUYWdSZWN5Y2xlKSxcclxuICAgICAgICAgICAgICAgIHVuaXRUeXBlOiBlLm1fdW5pdFR5cGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgdGltZTogZS5fZ2FtZWxvb3AgLyAxNixcclxuICAgICAgICAgICAgICAgIHg6IGUubV94LFxyXG4gICAgICAgICAgICAgICAgeTogZS5tX3lcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50b0FycmF5KCk7Ly8uZ3JvdXBCeShlID0+IGUudGFnLCBlID0+IGUpLnRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIHByaXZhdGUgYXN5bmMgZ2V0VHJhY2tlclF1ZXJpYWJsZSgpOiBQcm9taXNlPGxpbnEuSUVudW1lcmFibGU8SVJlcGxheVRyYWNrZXJFdmVudD4+IHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnRzID0gYXdhaXQgdGhpcy5yZXBsYXkudHJhY2tlckV2ZW50cztcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYWNrZXJRdWVyaWFibGUgPSBsaW5xLmZyb20oZXZlbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJpdmF0ZSBhc1Byb21pc2U8VD4odmFsdWU6IFQpOiBQcm9taXNlPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzKHZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICovXHJcbn1cclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/analyzers/BasicReplayAnalyser.js\n// module id = ../heroprotocol/dist/lib/replay/analyzers/BasicReplayAnalyser.js\n// module chunks = main","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Replay_1 = require(\"../Replay\");\nconst types_1 = require(\"../../types\");\nconst linq = require(\"linq\");\nconst decorators_1 = require(\"../decorators\");\nlet ReplayMapAnalyser = class ReplayMapAnalyser {\n    constructor(replay) {\n        this.replay = replay;\n    }\n    get trackerQueriable() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const events = yield this.replay.trackerEvents;\n            console.log(events);\n            return linq.from(events);\n        }))();\n    }\n    get mapName() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const details = yield this.replay.details;\n            return details.m_title;\n        }))();\n    }\n    get mapSize() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const init = yield this.replay.initData;\n            console.log('init', init);\n            return {\n                x: init.m_syncLobbyState.m_gameDescription.m_mapSizeX,\n                y: init.m_syncLobbyState.m_gameDescription.m_mapSizeY\n            };\n        }))();\n    }\n    get mapDescriptor() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            return {\n                name: yield this.mapName,\n                size: yield this.mapSize\n            };\n        }))();\n    }\n    getMinionSpawns(team) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const protocol = yield this.replay.protocol;\n            let q = (yield this.trackerQueriable)\n                .where(e => types_1.isSUnitBornEvent(e) && (e.m_controlPlayerId === 11 || e.m_controlPlayerId === 12) && e.m_unitTypeName.endsWith('Minion'));\n            if (team === 1) {\n                q = q.where(e => e.m_controlPlayerId === 11);\n            }\n            else if (team === 2) {\n                q = q.where(e => e.m_controlPlayerId === 12);\n            }\n            const result = q.select(e => ({\n                tag: protocol.unitTag(e.m_unitTagIndex, e.m_unitTagRecycle),\n                unitType: e.m_unitTypeName,\n                time: e._gameloop / 16,\n                team: e.m_controlPlayerId === 11 ? 1 : 2,\n                x: e.m_x,\n                y: e.m_y\n            })).toArray();\n            return result;\n        });\n    }\n    getMercSpawns() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const protocol = yield this.replay.protocol;\n            let q = (yield this.trackerQueriable)\n                .where(e => types_1.isSUnitBornEvent(e)\n                && (e.m_unitTypeName.startsWith('King') || e.m_unitTypeName.startsWith('Town') || e.m_unitTypeName.startsWith('Underworld')));\n            const result = q.select(e => ({\n                tag: protocol.unitTag(e.m_unitTagIndex, e.m_unitTagRecycle),\n                unitType: e.m_unitTypeName,\n                time: e._gameloop / 16,\n                x: e.m_x,\n                y: e.m_y\n            }));\n            console.log('MIN X', result.min(e => e.x));\n            console.log('MAX X', result.max(e => e.x));\n            console.log('MIN Y', result.min(e => e.y));\n            console.log('MAX Y', result.max(e => e.y));\n            return result.toArray();\n        });\n    }\n    getMinionSpawnHeatmap(team) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const protocol = yield this.replay.protocol;\n            let q = (yield this.trackerQueriable)\n                .where(e => types_1.isSUnitBornEvent(e) //&& (e.m_controlPlayerId === 11 || e.m_controlPlayerId === 12) // && e.m_unitTypeName.endsWith('Minion')\n            );\n            if (team === 1) {\n                q = q.where(e => e.m_controlPlayerId === 11);\n            }\n            else if (team === 2) {\n                q = q.where(e => e.m_controlPlayerId === 12);\n            }\n            const result = q.groupBy(i => `${i.m_x},${i.m_y}`)\n                .select(g => ({\n                value: g.count(),\n                x: g.first().m_x,\n                y: g.first().m_y\n            }));\n            return result.toArray();\n        });\n    }\n};\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], ReplayMapAnalyser.prototype, \"mapName\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], ReplayMapAnalyser.prototype, \"mapSize\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], ReplayMapAnalyser.prototype, \"mapDescriptor\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Number]),\n    __metadata(\"design:returntype\", Promise)\n], ReplayMapAnalyser.prototype, \"getMinionSpawns\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], ReplayMapAnalyser.prototype, \"getMercSpawns\", null);\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Number]),\n    __metadata(\"design:returntype\", Promise)\n], ReplayMapAnalyser.prototype, \"getMinionSpawnHeatmap\", null);\nReplayMapAnalyser = __decorate([\n    decorators_1.ReplayAnalyserContext('D90DC9EF-B016-47F1-984B-B9BA099869E6'),\n    __metadata(\"design:paramtypes\", [Replay_1.Replay])\n], ReplayMapAnalyser);\nexports.ReplayMapAnalyser = ReplayMapAnalyser;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9hbmFseXplcnMvUmVwbGF5TWFwQW5hbHlzZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHNDQUFtQztBQUNuQyx1Q0FBcUY7QUFDckYsNkJBQTZCO0FBRzdCLDhDQUFtRTtBQWNuRSxJQUFhLGlCQUFpQixHQUE5QjtJQUdJLFlBQTJCLE1BQWM7UUFBZCxXQUFNLEdBQU4sTUFBTSxDQUFRO0lBQUksQ0FBQztJQUc5QyxJQUFZLGdCQUFnQjtRQUN4QixPQUFPLENBQUMsR0FBeUQsRUFBRTtZQUMvRCxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO1lBQy9DLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDcEIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdCLENBQUMsQ0FBQSxDQUFDLEVBQUUsQ0FBQztJQUNULENBQUM7SUFHRCxJQUFXLE9BQU87UUFDZCxPQUFPLENBQUMsR0FBMEIsRUFBRTtZQUNoQyxNQUFNLE9BQU8sR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1lBQzFDLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUMzQixDQUFDLENBQUEsQ0FBQyxFQUFFLENBQUM7SUFDVCxDQUFDO0lBSUQsSUFBVyxPQUFPO1FBQ2QsT0FBTyxDQUFDLEdBQTBCLEVBQUU7WUFDaEMsTUFBTSxJQUFJLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztZQUN4QyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMxQixPQUFPO2dCQUNILENBQUMsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUMsVUFBVTtnQkFDckQsQ0FBQyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFV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aEQ7aUJBQU0sSUFBSSxJQUFJLEtBQUssQ0FBQyxFQUFFO2dCQUNuQixDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsS0FBSyxFQUFFLENBQUMsQ0FBQzthQUNoRDtZQUVELE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO2lCQUNqRCxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNWLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFO2dCQUNoQixDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUc7Z0JBQ2hCLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRzthQUNuQixDQUFDLENBQUMsQ0FBQztZQUVKLE9BQU8sTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzVCLENBQUM7S0FBQTtDQUNKLENBQUE7QUFuR0c7SUFEQyx3QkFBVyxFQUFFOzs7Z0RBTWI7QUFJRDtJQURDLHdCQUFXLEVBQUU7OztnREFVYjtBQUdEO0lBREMsd0JBQVcsRUFBRTs7O3NEQVFiO0FBR0Q7SUFEQyx3QkFBVyxFQUFFOzs7O3dEQXFCYjtBQUdEO0lBREMsd0JBQVcsRUFBRTs7OztzREFzQmI7QUFHRDtJQURDLHdCQUFXLEVBQUU7Ozs7OERBcUJiO0FBakhRLGlCQUFpQjtJQUQ3QixrQ0FBcUIsQ0FBQyxzQ0FBc0MsQ0FBQztxQ0FJdkIsZUFBTTtHQUhoQyxpQkFBaUIsQ0FrSDdCO0FBbEhZLDhDQUFpQiIsImZpbGUiOiJyZXBsYXkvYW5hbHl6ZXJzL1JlcGxheU1hcEFuYWx5c2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVwbGF5IH0gZnJvbSAnLi4vUmVwbGF5JztcclxuaW1wb3J0IHsgSVJlcGxheVRyYWNrZXJFdmVudCwgaXNTVW5pdEJvcm5FdmVudCwgSVNVbml0Qm9ybkV2ZW50IH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgKiBhcyBsaW5xIGZyb20gJ2xpbnEnO1xyXG5pbXBvcnQgKiBhcyBzaGExIGZyb20gJ3NoYTEnO1xyXG5pbXBvcnQgeyBJUmVwbGF5RGV0YWlsc1BsYXllciB9IGZyb20gJy4uLy4uL3R5cGVzJztcclxuaW1wb3J0IHsgUmVwbGF5QW5hbHlzZXJDb250ZXh0LCBSdW5PbldvcmtlciB9IGZyb20gJy4uL2RlY29yYXRvcnMnO1xyXG4vLyB0c2xpbnQ6ZGlzYWJsZTpuby1iaXR3aXNlXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElNYXBEZXNjcmlwdG9yIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHNpemU6IElQb2ludDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUG9pbnQge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG59XHJcblxyXG5AUmVwbGF5QW5hbHlzZXJDb250ZXh0KCdEOTBEQzlFRi1CMDE2LTQ3RjEtOTg0Qi1COUJBMDk5ODY5RTYnKVxyXG5leHBvcnQgY2xhc3MgUmVwbGF5TWFwQW5hbHlzZXIge1xyXG5cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSByZXBsYXk6IFJlcGxheSkgeyB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgZ2V0IHRyYWNrZXJRdWVyaWFibGUoKTogUHJvbWlzZTxsaW5xLklFbnVtZXJhYmxlPElSZXBsYXlUcmFja2VyRXZlbnQ+PiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxsaW5xLklFbnVtZXJhYmxlPElSZXBsYXlUcmFja2VyRXZlbnQ+PiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IHRoaXMucmVwbGF5LnRyYWNrZXJFdmVudHM7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBsaW5xLmZyb20oZXZlbnRzKTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG5cclxuICAgIEBSdW5PbldvcmtlcigpXHJcbiAgICBwdWJsaWMgZ2V0IG1hcE5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICByZXR1cm4gKGFzeW5jICgpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gYXdhaXQgdGhpcy5yZXBsYXkuZGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIGRldGFpbHMubV90aXRsZTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGdldCBtYXBTaXplKCk6IFByb21pc2U8SVBvaW50PiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxJUG9pbnQ+ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5pdCA9IGF3YWl0IHRoaXMucmVwbGF5LmluaXREYXRhO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdCcsIGluaXQpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgeDogaW5pdC5tX3N5bmNMb2JieVN0YXRlLm1fZ2FtZURlc2NyaXB0aW9uLm1fbWFwU2l6ZVgsXHJcbiAgICAgICAgICAgICAgICB5OiBpbml0Lm1fc3luY0xvYmJ5U3RhdGUubV9nYW1lRGVzY3JpcHRpb24ubV9tYXBTaXplWVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQFJ1bk9uV29ya2VyKClcclxuICAgIHB1YmxpYyBnZXQgbWFwRGVzY3JpcHRvcigpOiBQcm9taXNlPElNYXBEZXNjcmlwdG9yPiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxJTWFwRGVzY3JpcHRvcj4gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogYXdhaXQgdGhpcy5tYXBOYW1lLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogYXdhaXQgdGhpcy5tYXBTaXplXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGFzeW5jIGdldE1pbmlvblNwYXducyh0ZWFtPzogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBhd2FpdCB0aGlzLnJlcGxheS5wcm90b2NvbDtcclxuICAgICAgICBsZXQgcSA9IDxsaW5xLklFbnVtZXJhYmxlPElTVW5pdEJvcm5FdmVudD4+KGF3YWl0IHRoaXMudHJhY2tlclF1ZXJpYWJsZSlcclxuICAgICAgICAgICAgLndoZXJlKFxyXG4gICAgICAgICAgICBlID0+IGlzU1VuaXRCb3JuRXZlbnQoZSkgJiYgKGUubV9jb250cm9sUGxheWVySWQgPT09IDExIHx8IGUubV9jb250cm9sUGxheWVySWQgPT09IDEyKSAmJiBlLm1fdW5pdFR5cGVOYW1lLmVuZHNXaXRoKCdNaW5pb24nKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIGlmICh0ZWFtID09PSAxKSB7XHJcbiAgICAgICAgICAgIHEgPSBxLndoZXJlKGUgPT4gZS5tX2NvbnRyb2xQbGF5ZXJJZCA9PT0gMTEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGVhbSA9PT0gMikge1xyXG4gICAgICAgICAgICBxID0gcS53aGVyZShlID0+IGUubV9jb250cm9sUGxheWVySWQgPT09IDEyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcS5zZWxlY3QoZSA9PiAoe1xyXG4gICAgICAgICAgICB0YWc6IHByb3RvY29sLnVuaXRUYWcoZS5tX3VuaXRUYWdJbmRleCwgZS5tX3VuaXRUYWdSZWN5Y2xlKSxcclxuICAgICAgICAgICAgdW5pdFR5cGU6IGUubV91bml0VHlwZU5hbWUsXHJcbiAgICAgICAgICAgIHRpbWU6IGUuX2dhbWVsb29wIC8gMTYsXHJcbiAgICAgICAgICAgIHRlYW06IGUubV9jb250cm9sUGxheWVySWQgPT09IDExID8gMSA6IDIsXHJcbiAgICAgICAgICAgIHg6IGUubV94LFxyXG4gICAgICAgICAgICB5OiBlLm1feVxyXG4gICAgICAgIH0pKS50b0FycmF5KCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGFzeW5jIGdldE1lcmNTcGF3bnMoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBhd2FpdCB0aGlzLnJlcGxheS5wcm90b2NvbDtcclxuICAgICAgICBsZXQgcSA9IDxsaW5xLklFbnVtZXJhYmxlPElTVW5pdEJvcm5FdmVudD4+KGF3YWl0IHRoaXMudHJhY2tlclF1ZXJpYWJsZSlcclxuICAgICAgICAgICAgLndoZXJlKFxyXG4gICAgICAgICAgICBlID0+IGlzU1VuaXRCb3JuRXZlbnQoZSlcclxuICAgICAgICAgICAgICAgICAmJiAoZS5tX3VuaXRUeXBlTmFtZS5zdGFydHNXaXRoKCdLaW5nJykgfHwgZS5tX3VuaXRUeXBlTmFtZS5zdGFydHNXaXRoKCdUb3duJykgfHwgZS5tX3VuaXRUeXBlTmFtZS5zdGFydHNXaXRoKCdVbmRlcndvcmxkJykpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHEuc2VsZWN0KGUgPT4gKHtcclxuICAgICAgICAgICAgdGFnOiBwcm90b2NvbC51bml0VGFnKGUubV91bml0VGFnSW5kZXgsIGUubV91bml0VGFnUmVjeWNsZSksXHJcbiAgICAgICAgICAgIHVuaXRUeXBlOiBlLm1fdW5pdFR5cGVOYW1lLFxyXG4gICAgICAgICAgICB0aW1lOiBlLl9nYW1lbG9vcCAvIDE2LFxyXG4gICAgICAgICAgICB4OiBlLm1feCxcclxuICAgICAgICAgICAgeTogZS5tX3lcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ01JTiBYJywgcmVzdWx0Lm1pbihlID0+IGUueCkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdNQVggWCcsIHJlc3VsdC5tYXgoZSA9PiBlLngpKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnTUlOIFknLCByZXN1bHQubWluKGUgPT4gZS55KSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ01BWCBZJywgcmVzdWx0Lm1heChlID0+IGUueSkpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0LnRvQXJyYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGFzeW5jIGdldE1pbmlvblNwYXduSGVhdG1hcCh0ZWFtPzogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBhd2FpdCB0aGlzLnJlcGxheS5wcm90b2NvbDtcclxuICAgICAgICBsZXQgcSA9IDxsaW5xLklFbnVtZXJhYmxlPElTVW5pdEJvcm5FdmVudD4+KGF3YWl0IHRoaXMudHJhY2tlclF1ZXJpYWJsZSlcclxuICAgICAgICAgICAgLndoZXJlKFxyXG4gICAgICAgICAgICBlID0+IGlzU1VuaXRCb3JuRXZlbnQoZSkgLy8mJiAoZS5tX2NvbnRyb2xQbGF5ZXJJZCA9PT0gMTEgfHwgZS5tX2NvbnRyb2xQbGF5ZXJJZCA9PT0gMTIpIC8vICYmIGUubV91bml0VHlwZU5hbWUuZW5kc1dpdGgoJ01pbmlvbicpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgaWYgKHRlYW0gPT09IDEpIHtcclxuICAgICAgICAgICAgcSA9IHEud2hlcmUoZSA9PiBlLm1fY29udHJvbFBsYXllcklkID09PSAxMSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0ZWFtID09PSAyKSB7XHJcbiAgICAgICAgICAgIHEgPSBxLndoZXJlKGUgPT4gZS5tX2NvbnRyb2xQbGF5ZXJJZCA9PT0gMTIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcS5ncm91cEJ5KGkgPT4gYCR7aS5tX3h9LCR7aS5tX3l9YClcclxuICAgICAgICAuc2VsZWN0KGcgPT4gKHtcclxuICAgICAgICAgICAgdmFsdWU6IGcuY291bnQoKSxcclxuICAgICAgICAgICAgeDogZy5maXJzdCgpLm1feCxcclxuICAgICAgICAgICAgeTogZy5maXJzdCgpLm1feVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC50b0FycmF5KCk7XHJcbiAgICB9XHJcbn1cclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/analyzers/ReplayMapAnalyser.js\n// module id = ../heroprotocol/dist/lib/replay/analyzers/ReplayMapAnalyser.js\n// module chunks = main","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst decorators_1 = require(\"../decorators\");\nconst Replay_1 = require(\"../Replay\");\nconst types_1 = require(\"../../types\");\nconst linq = require(\"linq\");\nlet ScoreAnalyser = class ScoreAnalyser {\n    constructor(replay) {\n        this.replay = replay;\n    }\n    get trackerQueriable() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const events = yield this.replay.trackerEvents;\n            console.log(events);\n            return linq.from(events);\n        }))();\n    }\n    get scoreScreenData() {\n        return (() => __awaiter(this, void 0, void 0, function* () {\n            const trackerQueriable = yield this.trackerQueriable;\n            const results = trackerQueriable.where(e => types_1.isSScoreResultEvent(e)).last();\n            console.log('!!!!>>>', results);\n            const scoreStats = [\n                \"Takedowns\",\n                \"Deaths\",\n                \"SoloKill\",\n                \"Assists\",\n                \"ExperienceContribution\",\n                \"Healing\",\n                \"SiegeDamage\",\n                \"HeroDamage\",\n                \"DamageTaken\"\n            ];\n            const stats = linq.from(results.m_instanceList)\n                .where(e => scoreStats.indexOf(e.m_name) !== -1)\n                .toArray();\n            const awards = linq.from(results.m_instanceList)\n                .where(e => e.m_name.startsWith('EndOfMatchAward'))\n                .toArray();\n            const playerStats = [{ Awards: [] }, { Awards: [] }, { Awards: [] }, { Awards: [] }, { Awards: [] }, { Awards: [] }, { Awards: [] }, { Awards: [] }, { Awards: [] }, { Awards: [] }];\n            for (let i = 0; i < playerStats.length; i++) {\n                const pstats = playerStats[i];\n                for (let j = 0; j < stats.length; j++) {\n                    const stat = stats[j];\n                    pstats[stat.m_name] = stat.m_values[i][0].m_value;\n                }\n                for (let j = 0; j < awards.length; j++) {\n                    const award = awards[j];\n                    const awardName = award.m_name.substring(0, award.m_name.length - 7).substring(15);\n                    const value = award.m_values[i][0].m_value === 1;\n                    if (value) {\n                        pstats.Awards.push(awardName);\n                    }\n                }\n            }\n            return playerStats;\n        }))();\n    }\n};\n__decorate([\n    decorators_1.RunOnWorker(),\n    __metadata(\"design:type\", Promise),\n    __metadata(\"design:paramtypes\", [])\n], ScoreAnalyser.prototype, \"scoreScreenData\", null);\nScoreAnalyser = __decorate([\n    decorators_1.ReplayAnalyserContext('0B9EBC25-CB1F-47CC-B287-D806D58E2C55'),\n    __metadata(\"design:paramtypes\", [Replay_1.Replay])\n], ScoreAnalyser);\nexports.ScoreAnalyser = ScoreAnalyser;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9hbmFseXplcnMvU2NvcmVBbmFseXNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsOENBQW1FO0FBQ25FLHNDQUFtQztBQUNuQyx1Q0FBMkY7QUFDM0YsNkJBQTZCO0FBZ0I3QixJQUFhLGFBQWEsR0FBMUI7SUFDSSxZQUEyQixNQUFjO1FBQWQsV0FBTSxHQUFOLE1BQU0sQ0FBUTtJQUFJLENBQUM7SUFFOUMsSUFBWSxnQkFBZ0I7UUFDeEIsT0FBTyxDQUFDLEdBQXlELEVBQUU7WUFDL0QsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztZQUMvQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3BCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM3QixDQUFDLENBQUEsQ0FBQyxFQUFFLENBQUM7SUFDVCxDQUFDO0lBSUQsSUFBVyxlQUFlO1FBQ3RCLE9BQU8sQ0FBQyxHQUF1QixFQUFFO1lBQzdCLE1BQU0sZ0JBQWdCLEdBQUcsTUFBTSxJQUFJLENBQUMsZ0JBQWdCLENBQUM7WUFDckQsTUFBTSxPQUFPLEdBQTRCLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDcEcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUE7WUFDL0IsTUFBTSxVQUFVLEdBQUc7Z0JBQ2YsV0FBVztnQkFDWCxRQUFRO2dCQUNSLFVBQVU7Z0JBQ1YsU0FBUztnQkFDVCx3QkFBd0I7Z0JBQ3hCLFNBQVM7Z0JBQ1QsYUFBYTtnQkFDYixZQUFZO2dCQUNaLGFBQWE7YUFDaEIsQ0FBQztZQUNGLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQztpQkFDMUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7aUJBQy9DLE9BQU8sRUFBRSxDQUFDO1lBRWYsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDO2lCQUMzQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO2lCQUNsRCxPQUFPLEVBQUUsQ0FBQztZQUVmLE1BQU0sV0FBVyxHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNyTCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDekMsTUFBTSxNQUFNLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM5QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDbkMsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN0QixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO2lCQUNyRDtnQkFDRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDcEMsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN4QixNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUNuRixNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sS0FBSyxDQUFDLENBQUM7b0JBQ2pELElBQUksS0FBSyxFQUFFO3dCQUNQLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO3FCQUNqQztpQkFDSjthQUNKO1lBRUQsT0FBTyxXQUFXLENBQUM7UUFDdkIsQ0FBQyxDQUFBLENBQUMsRUFBRSxDQUFDO0lBQ1QsQ0FBQztDQUNKLENBQUE7QUE1Q0c7SUFEQyx3QkFBVyxFQUFFOzs7b0RBNENiO0FBeERRLGFBQWE7SUFEekIsa0NBQXFCLENBQUMsc0NBQXNDLENBQUM7cUNBRXZCLGVBQU07R0FEaEMsYUFBYSxDQXlEekI7QUF6RFksc0NBQWEiLCJmaWxlIjoicmVwbGF5L2FuYWx5emVycy9TY29yZUFuYWx5c2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCB7IFJlcGxheUFuYWx5c2VyQ29udGV4dCwgUnVuT25Xb3JrZXIgfSBmcm9tICcuLi9kZWNvcmF0b3JzJztcclxuaW1wb3J0IHsgUmVwbGF5IH0gZnJvbSAnLi4vUmVwbGF5JztcclxuaW1wb3J0IHsgSVJlcGxheVRyYWNrZXJFdmVudCwgaXNTU2NvcmVSZXN1bHRFdmVudCwgSVNTY29yZVJlc3VsdEV2ZW50IH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgKiBhcyBsaW5xIGZyb20gJ2xpbnEnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGxheWVyU2NvcmVzIHtcclxuICAgIFwiVGFrZWRvd25zXCI6IG51bWJlcjtcclxuICAgIFwiRGVhdGhzXCI6IG51bWJlcjtcclxuICAgIFwiU29sb0tpbGxcIjogbnVtYmVyO1xyXG4gICAgXCJBc3Npc3RzXCI6IG51bWJlcjtcclxuICAgIFwiRXhwZXJpZW5jZUNvbnRyaWJ1dGlvblwiOiBudW1iZXI7XHJcbiAgICBcIkhlYWxpbmdcIjogbnVtYmVyO1xyXG4gICAgXCJTaWVnZURhbWFnZVwiOiBudW1iZXI7XHJcbiAgICBcIkhlcm9EYW1hZ2VcIjogbnVtYmVyO1xyXG4gICAgXCJEYW1hZ2VUYWtlblwiOiBudW1iZXI7XHJcbiAgICBcIkF3YXJkc1wiOiBzdHJpbmdbXTtcclxufVxyXG5cclxuQFJlcGxheUFuYWx5c2VyQ29udGV4dCgnMEI5RUJDMjUtQ0IxRi00N0NDLUIyODctRDgwNkQ1OEUyQzU1JylcclxuZXhwb3J0IGNsYXNzIFNjb3JlQW5hbHlzZXIge1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVwbGF5OiBSZXBsYXkpIHsgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0IHRyYWNrZXJRdWVyaWFibGUoKTogUHJvbWlzZTxsaW5xLklFbnVtZXJhYmxlPElSZXBsYXlUcmFja2VyRXZlbnQ+PiB7XHJcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKTogUHJvbWlzZTxsaW5xLklFbnVtZXJhYmxlPElSZXBsYXlUcmFja2VyRXZlbnQ+PiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IHRoaXMucmVwbGF5LnRyYWNrZXJFdmVudHM7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBsaW5xLmZyb20oZXZlbnRzKTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBAUnVuT25Xb3JrZXIoKVxyXG4gICAgcHVibGljIGdldCBzY29yZVNjcmVlbkRhdGEoKTogUHJvbWlzZTxJUGxheWVyU2NvcmVzW10+IHtcclxuICAgICAgICByZXR1cm4gKGFzeW5jICgpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0cmFja2VyUXVlcmlhYmxlID0gYXdhaXQgdGhpcy50cmFja2VyUXVlcmlhYmxlO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gPElTU2NvcmVSZXN1bHRFdmVudD48YW55PnRyYWNrZXJRdWVyaWFibGUud2hlcmUoZSA9PiBpc1NTY29yZVJlc3VsdEV2ZW50KGUpKS5sYXN0KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCchISEhPj4+JywgcmVzdWx0cylcclxuICAgICAgICAgICAgY29uc3Qgc2NvcmVTdGF0cyA9IFtcclxuICAgICAgICAgICAgICAgIFwiVGFrZWRvd25zXCIsXHJcbiAgICAgICAgICAgICAgICBcIkRlYXRoc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJTb2xvS2lsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJBc3Npc3RzXCIsXHJcbiAgICAgICAgICAgICAgICBcIkV4cGVyaWVuY2VDb250cmlidXRpb25cIixcclxuICAgICAgICAgICAgICAgIFwiSGVhbGluZ1wiLFxyXG4gICAgICAgICAgICAgICAgXCJTaWVnZURhbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJIZXJvRGFtYWdlXCIsXHJcbiAgICAgICAgICAgICAgICBcIkRhbWFnZVRha2VuXCJcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBsaW5xLmZyb20ocmVzdWx0cy5tX2luc3RhbmNlTGlzdClcclxuICAgICAgICAgICAgICAgIC53aGVyZShlID0+IHNjb3JlU3RhdHMuaW5kZXhPZihlLm1fbmFtZSkgIT09IC0xKVxyXG4gICAgICAgICAgICAgICAgLnRvQXJyYXkoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGF3YXJkcyA9IGxpbnEuZnJvbShyZXN1bHRzLm1faW5zdGFuY2VMaXN0KVxyXG4gICAgICAgICAgICAgICAgLndoZXJlKGUgPT4gZS5tX25hbWUuc3RhcnRzV2l0aCgnRW5kT2ZNYXRjaEF3YXJkJykpXHJcbiAgICAgICAgICAgICAgICAudG9BcnJheSgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcGxheWVyU3RhdHMgPSBbeyBBd2FyZHM6IFtdIH0sIHsgQXdhcmRzOiBbXSB9LCB7IEF3YXJkczogW10gfSwgeyBBd2FyZHM6IFtdIH0sIHsgQXdhcmRzOiBbXSB9LCB7IEF3YXJkczogW10gfSwgeyBBd2FyZHM6IFtdIH0sIHsgQXdhcmRzOiBbXSB9LCB7IEF3YXJkczogW10gfSwgeyBBd2FyZHM6IFtdIH1dO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYXllclN0YXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwc3RhdHMgPSBwbGF5ZXJTdGF0c1tpXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3RhdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0ID0gc3RhdHNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgcHN0YXRzW3N0YXQubV9uYW1lXSA9IHN0YXQubV92YWx1ZXNbaV1bMF0ubV92YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYXdhcmRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXdhcmQgPSBhd2FyZHNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXdhcmROYW1lID0gYXdhcmQubV9uYW1lLnN1YnN0cmluZygwLCBhd2FyZC5tX25hbWUubGVuZ3RoIC0gNykuc3Vic3RyaW5nKDE1KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YXJkLm1fdmFsdWVzW2ldWzBdLm1fdmFsdWUgPT09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBzdGF0cy5Bd2FyZHMucHVzaChhd2FyZE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBsYXllclN0YXRzO1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/analyzers/ScoreAnalyser.js\n// module id = ../heroprotocol/dist/lib/replay/analyzers/ScoreAnalyser.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./BasicReplayAnalyser\"));\n__export(require(\"./ReplayMapAnalyser\"));\n__export(require(\"./ScoreAnalyser\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9hbmFseXplcnMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSwyQ0FBc0M7QUFDdEMseUNBQW9DO0FBQ3BDLHFDQUFnQyIsImZpbGUiOiJyZXBsYXkvYW5hbHl6ZXJzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9CYXNpY1JlcGxheUFuYWx5c2VyJztcclxuZXhwb3J0ICogZnJvbSAnLi9SZXBsYXlNYXBBbmFseXNlcic7XHJcbmV4cG9ydCAqIGZyb20gJy4vU2NvcmVBbmFseXNlcic7XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/analyzers/index.js\n// module id = ../heroprotocol/dist/lib/replay/analyzers/index.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"reflect-metadata\");\nconst WorkerContextRegistry_1 = require(\"./proxy/context/WorkerContextRegistry\");\nconst ReplayContextCaller_1 = require(\"./proxy/ReplayContextCaller\");\nconst ReplayAnalyserContextCaller_1 = require(\"./proxy/ReplayAnalyserContextCaller\");\nfunction isRunningInWorker() {\n    return typeof importScripts === 'function' && navigator.constructor.name === 'WorkerNavigator';\n}\nfunction addProtoIfRequired(obj, protoToAdd) {\n    let proto = obj['__proto__'];\n    while (proto) {\n        const nextProto = proto['__proto__'];\n        if (nextProto) {\n            if (nextProto === protoToAdd) {\n                return;\n            }\n            if (nextProto.constructor === Object) {\n                proto['__proto__'] = protoToAdd;\n                return;\n            }\n        }\n        proto = nextProto;\n    }\n}\nfunction WorkerContextCaller(guid, proxyType) {\n    return (target) => {\n        if (isRunningInWorker()) {\n            Reflect.defineMetadata('workerContext:typeId', guid, target);\n            WorkerContextRegistry_1.WorkerContextRegistry.registerContextCaller(target);\n            return;\n        }\n        const original = target;\n        const f = function (...args) {\n            const self = new proxyType(...args);\n            Object.getOwnPropertyNames(original.prototype).forEach(name => {\n                const sdesc = Object.getOwnPropertyDescriptor(self, name);\n                let sFunc = false;\n                if (!sdesc) {\n                    try {\n                        sFunc = typeof self[name] === 'function';\n                    }\n                    catch (e) {\n                        sFunc = true;\n                    }\n                }\n                if (name !== 'constructor' && !sdesc && !sFunc) {\n                    const desc = Object.getOwnPropertyDescriptor(original.prototype, name);\n                    Object.defineProperty(self, name, desc);\n                }\n            });\n            Reflect.defineMetadata('workerContext:typeId', guid, self.constructor);\n            WorkerContextRegistry_1.WorkerContextRegistry.registerContextCaller(self.constructor);\n            return self;\n        };\n        f.prototype = original.prototype;\n        return f;\n    };\n}\nexports.WorkerContextCaller = WorkerContextCaller;\nfunction ReplayWorkerContext(guid) {\n    return WorkerContextCaller(guid, ReplayContextCaller_1.ReplayContextCaller);\n}\nexports.ReplayWorkerContext = ReplayWorkerContext;\nfunction ReplayAnalyserContext(guid) {\n    return WorkerContextCaller(guid, ReplayAnalyserContextCaller_1.ReplayAnalyserContextCaller);\n}\nexports.ReplayAnalyserContext = ReplayAnalyserContext;\nfunction wrapProxiedMethod(methodId, cacheResult) {\n    const fn = function (...args) {\n        return this.workerContext.callMethod(this, methodId, args, cacheResult);\n    };\n    return fn;\n}\nfunction wrapProxiedGetter(propertyId, cacheResult) {\n    const pId = propertyId;\n    const fn = function () {\n        return this.workerContext.getProperty(this, pId, cacheResult);\n    };\n    return fn;\n}\nfunction buildWorkerPoxyMethod(target, methodNum, propertyKey, descriptor) {\n    const type = Reflect.getMetadata('design:returnType', target, propertyKey);\n    /*if (!(type === Promise || type.prototype instanceof Promise)) {\n        throw new Error(`Method \"${propertyKey}\" must return a promise.`);\n    }*/\n    return {\n        enumerable: descriptor.enumerable,\n        writable: descriptor.writable,\n        value: wrapProxiedMethod(methodNum, true)\n    };\n}\nfunction buildWorkerPoxyGetterProperty(target, methodNum, propertyKey, descriptor) {\n    if (descriptor.set) {\n        throw Error(`Cannot wrap setter \"${propertyKey}\". Only readonly properties are supported.`);\n    }\n    const type = Reflect.getMetadata('design:type', target, propertyKey);\n    /*if (!(type === Promise || type.prototype instanceof Promise)) {\n        throw new Error(`Property \"${propertyKey}\" must return a promise.`);\n    }*/\n    const desc = {\n        get: wrapProxiedGetter(methodNum, true)\n    };\n    return desc;\n}\nlet callAddress = -1;\nfunction RunOnWorker() {\n    return (target, propertyKey, descriptor) => {\n        let proxyMap = Reflect.getOwnMetadata('woker:proxyMethods', target.constructor);\n        if (!proxyMap) {\n            proxyMap = {};\n            Reflect.defineMetadata('woker:proxyMethods', proxyMap, target.constructor);\n        }\n        const mCount = ++callAddress;\n        proxyMap[mCount] = propertyKey;\n        if (isRunningInWorker()) {\n            return;\n        }\n        if (typeof (descriptor.value) === 'function') {\n            return buildWorkerPoxyMethod(target, mCount, propertyKey, descriptor);\n        }\n        else {\n            return buildWorkerPoxyGetterProperty(target, mCount, propertyKey, descriptor);\n        }\n    };\n}\nexports.RunOnWorker = RunOnWorker;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,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Q0FtQkMiLCJmaWxlIjoicmVwbGF5L2RlY29yYXRvcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJkZWNsYXJlIHZhciBpbXBvcnRTY3JpcHRzO1xyXG5pbXBvcnQgJ3JlZmxlY3QtbWV0YWRhdGEnO1xyXG5pbXBvcnQgeyBXb3JrZXJDb250ZXh0UmVnaXN0cnkgfSBmcm9tICcuL3Byb3h5L2NvbnRleHQvV29ya2VyQ29udGV4dFJlZ2lzdHJ5JztcclxuaW1wb3J0IHsgSVdvcmtlckNvbnRleHRIb3N0IH0gZnJvbSAnLi9wcm94eS9jb250ZXh0L0lXb3JrZXJDb250ZXh0SG9zdCc7XHJcbmltcG9ydCB7IFJlcGxheUNvbnRleHRDYWxsZXIgfSBmcm9tICcuL3Byb3h5L1JlcGxheUNvbnRleHRDYWxsZXInO1xyXG5pbXBvcnQgeyBSZXBsYXlBbmFseXNlckNvbnRleHRDYWxsZXIgfSBmcm9tICcuL3Byb3h5L1JlcGxheUFuYWx5c2VyQ29udGV4dENhbGxlcic7XHJcbmltcG9ydCB7IFR5cGUgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5mdW5jdGlvbiBpc1J1bm5pbmdJbldvcmtlcigpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0eXBlb2YgaW1wb3J0U2NyaXB0cyA9PT0gJ2Z1bmN0aW9uJyAmJiBuYXZpZ2F0b3IuY29uc3RydWN0b3IubmFtZSA9PT0gJ1dvcmtlck5hdmlnYXRvcic7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFByb3RvSWZSZXF1aXJlZChvYmo6IGFueSwgcHJvdG9Ub0FkZDogYW55KSB7XHJcbiAgICBsZXQgcHJvdG8gPSBvYmpbJ19fcHJvdG9fXyddO1xyXG4gICAgd2hpbGUgKHByb3RvKSB7XHJcbiAgICAgICAgY29uc3QgbmV4dFByb3RvID0gcHJvdG9bJ19fcHJvdG9fXyddO1xyXG4gICAgICAgIGlmIChuZXh0UHJvdG8pIHtcclxuICAgICAgICAgICAgaWYgKG5leHRQcm90byA9PT0gcHJvdG9Ub0FkZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChuZXh0UHJvdG8uY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgcHJvdG9bJ19fcHJvdG9fXyddID0gcHJvdG9Ub0FkZDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwcm90byA9IG5leHRQcm90bztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFdvcmtlckNvbnRleHRDYWxsZXIoZ3VpZDogc3RyaW5nLCBwcm94eVR5cGU6IFR5cGU8SVdvcmtlckNvbnRleHRIb3N0Pik6IENsYXNzRGVjb3JhdG9yIHtcclxuICAgIHJldHVybiA8VEZ1bmN0aW9uIGV4dGVuZHMgRnVuY3Rpb24+KHRhcmdldDogVEZ1bmN0aW9uKTogVEZ1bmN0aW9uIHwgdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKGlzUnVubmluZ0luV29ya2VyKCkpIHtcclxuICAgICAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YSgnd29ya2VyQ29udGV4dDp0eXBlSWQnLCBndWlkLCB0YXJnZXQpO1xyXG4gICAgICAgICAgICBXb3JrZXJDb250ZXh0UmVnaXN0cnkucmVnaXN0ZXJDb250ZXh0Q2FsbGVyKDxhbnk+dGFyZ2V0KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvcmlnaW5hbDogYW55ID0gdGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IGY6IGFueSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZWxmID0gbmV3IHByb3h5VHlwZSguLi5hcmdzKTtcclxuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob3JpZ2luYWwucHJvdG90eXBlKS5mb3JFYWNoKG5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Rlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNlbGYsIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgc0Z1bmMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmKCFzZGVzYyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzRnVuYyA9IHR5cGVvZiBzZWxmW25hbWVdID09PSAnZnVuY3Rpb24nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc0Z1bmMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKG5hbWUgIT09ICdjb25zdHJ1Y3RvcicgJiYgIXNkZXNjICYmICFzRnVuYyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob3JpZ2luYWwucHJvdG90eXBlLCBuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgbmFtZSwgZGVzYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKCd3b3JrZXJDb250ZXh0OnR5cGVJZCcsIGd1aWQsIHNlbGYuY29uc3RydWN0b3IpO1xyXG4gICAgICAgICAgICBXb3JrZXJDb250ZXh0UmVnaXN0cnkucmVnaXN0ZXJDb250ZXh0Q2FsbGVyKDxUeXBlPGFueT4+c2VsZi5jb25zdHJ1Y3Rvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZi5wcm90b3R5cGUgPSBvcmlnaW5hbC5wcm90b3R5cGU7XHJcbiAgICAgICAgcmV0dXJuIGY7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUmVwbGF5V29ya2VyQ29udGV4dChndWlkOiBzdHJpbmcpOiBDbGFzc0RlY29yYXRvciB7XHJcbiAgICByZXR1cm4gV29ya2VyQ29udGV4dENhbGxlcihndWlkLCBSZXBsYXlDb250ZXh0Q2FsbGVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFJlcGxheUFuYWx5c2VyQ29udGV4dChndWlkOiBzdHJpbmcpOiBDbGFzc0RlY29yYXRvciB7XHJcbiAgICByZXR1cm4gV29ya2VyQ29udGV4dENhbGxlcihndWlkLCBSZXBsYXlBbmFseXNlckNvbnRleHRDYWxsZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3cmFwUHJveGllZE1ldGhvZDxUPihtZXRob2RJZDogbnVtYmVyLCBjYWNoZVJlc3VsdDogYm9vbGVhbik6ICgpID0+IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCBmbiA9IGZ1bmN0aW9uICh0aGlzOiBJV29ya2VyQ29udGV4dEhvc3QsIC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud29ya2VyQ29udGV4dC5jYWxsTWV0aG9kKHRoaXMsIG1ldGhvZElkLCBhcmdzLCBjYWNoZVJlc3VsdCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZuO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3cmFwUHJveGllZEdldHRlcihwcm9wZXJ0eUlkOiBudW1iZXIsIGNhY2hlUmVzdWx0OiBib29sZWFuKTogKCkgPT4gUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHBJZCA9IHByb3BlcnR5SWQ7XHJcbiAgICBjb25zdCBmbiA9IGZ1bmN0aW9uICh0aGlzOiBJV29ya2VyQ29udGV4dEhvc3QpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndvcmtlckNvbnRleHQuZ2V0UHJvcGVydHkodGhpcywgcElkLCBjYWNoZVJlc3VsdCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZuO1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZFdvcmtlclBveHlNZXRob2Q8VD4oXHJcbiAgICB0YXJnZXQ6IE9iamVjdCxcclxuICAgIG1ldGhvZE51bTogbnVtYmVyLFxyXG4gICAgcHJvcGVydHlLZXk6IHN0cmluZyB8IHN5bWJvbCxcclxuICAgIGRlc2NyaXB0b3I6IFR5cGVkUHJvcGVydHlEZXNjcmlwdG9yPFQ+XHJcbik6IFR5cGVkUHJvcGVydHlEZXNjcmlwdG9yPFQ+IHtcclxuICAgIGNvbnN0IHR5cGUgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdkZXNpZ246cmV0dXJuVHlwZScsIHRhcmdldCwgcHJvcGVydHlLZXkpO1xyXG4gICAgLyppZiAoISh0eXBlID09PSBQcm9taXNlIHx8IHR5cGUucHJvdG90eXBlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1ldGhvZCBcIiR7cHJvcGVydHlLZXl9XCIgbXVzdCByZXR1cm4gYSBwcm9taXNlLmApO1xyXG4gICAgfSovXHJcblxyXG4gICAgcmV0dXJuIDxUeXBlZFByb3BlcnR5RGVzY3JpcHRvcjxUPj57XHJcbiAgICAgICAgZW51bWVyYWJsZTogZGVzY3JpcHRvci5lbnVtZXJhYmxlLFxyXG4gICAgICAgIHdyaXRhYmxlOiBkZXNjcmlwdG9yLndyaXRhYmxlLFxyXG4gICAgICAgIHZhbHVlOiA8YW55PndyYXBQcm94aWVkTWV0aG9kKG1ldGhvZE51bSwgdHJ1ZSlcclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkV29ya2VyUG94eUdldHRlclByb3BlcnR5PFQ+KFxyXG4gICAgdGFyZ2V0OiBPYmplY3QsXHJcbiAgICBtZXRob2ROdW06IG51bWJlcixcclxuICAgIHByb3BlcnR5S2V5OiBzdHJpbmcgfCBzeW1ib2wsXHJcbiAgICBkZXNjcmlwdG9yOiBUeXBlZFByb3BlcnR5RGVzY3JpcHRvcjxUPlxyXG4pOiBUeXBlZFByb3BlcnR5RGVzY3JpcHRvcjxUPiB7XHJcbiAgICBpZiAoZGVzY3JpcHRvci5zZXQpIHtcclxuICAgICAgICB0aHJvdyBFcnJvcihgQ2Fubm90IHdyYXAgc2V0dGVyIFwiJHtwcm9wZXJ0eUtleX1cIi4gT25seSByZWFkb25seSBwcm9wZXJ0aWVzIGFyZSBzdXBwb3J0ZWQuYCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdHlwZSA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoJ2Rlc2lnbjp0eXBlJywgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XHJcbiAgICAvKmlmICghKHR5cGUgPT09IFByb21pc2UgfHwgdHlwZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvcGVydHkgXCIke3Byb3BlcnR5S2V5fVwiIG11c3QgcmV0dXJuIGEgcHJvbWlzZS5gKTtcclxuICAgIH0qL1xyXG4gICAgY29uc3QgZGVzYyA9IDxUeXBlZFByb3BlcnR5RGVzY3JpcHRvcjxUPj57XHJcbiAgICAgICAgZ2V0OiA8YW55PndyYXBQcm94aWVkR2V0dGVyKG1ldGhvZE51bSwgdHJ1ZSlcclxuICAgIH07XHJcbiAgICByZXR1cm4gZGVzYztcclxufVxyXG5cclxubGV0IGNhbGxBZGRyZXNzID0gLTE7XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFJ1bk9uV29ya2VyPFQ+KCk6IE1ldGhvZERlY29yYXRvciB7XHJcbiAgICByZXR1cm4gPFQ+KHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nIHwgc3ltYm9sLCBkZXNjcmlwdG9yOiBUeXBlZFByb3BlcnR5RGVzY3JpcHRvcjxUPik6IFR5cGVkUHJvcGVydHlEZXNjcmlwdG9yPFQ+IHwgdm9pZCA9PiB7XHJcbiAgICAgICAgbGV0IHByb3h5TWFwID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YSgnd29rZXI6cHJveHlNZXRob2RzJywgdGFyZ2V0LmNvbnN0cnVjdG9yKTtcclxuICAgICAgICBpZiAoIXByb3h5TWFwKSB7XHJcbiAgICAgICAgICAgIHByb3h5TWFwID0ge307XHJcbiAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoJ3dva2VyOnByb3h5TWV0aG9kcycsIHByb3h5TWFwLCB0YXJnZXQuY29uc3RydWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtQ291bnQgPSArK2NhbGxBZGRyZXNzO1xyXG4gICAgICAgIHByb3h5TWFwW21Db3VudF0gPSBwcm9wZXJ0eUtleTtcclxuICAgICAgICBpZiAoaXNSdW5uaW5nSW5Xb3JrZXIoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIChkZXNjcmlwdG9yLnZhbHVlKSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYnVpbGRXb3JrZXJQb3h5TWV0aG9kKHRhcmdldCwgbUNvdW50LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkV29ya2VyUG94eUdldHRlclByb3BlcnR5KHRhcmdldCwgbUNvdW50LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/decorators.js\n// module id = ../heroprotocol/dist/lib/replay/decorators.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./analyzers\"));\n__export(require(\"./Replay\"));\n__export(require(\"./decorators\"));\n__export(require(\"./proxy\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLGlDQUE0QjtBQUM1Qiw4QkFBeUI7QUFDekIsa0NBQTZCO0FBQzdCLDZCQUF3QiIsImZpbGUiOiJyZXBsYXkvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2FuYWx5emVycyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vUmVwbGF5JztcclxuZXhwb3J0ICogZnJvbSAnLi9kZWNvcmF0b3JzJztcclxuZXhwb3J0ICogZnJvbSAnLi9wcm94eSc7XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/index.js\n// module id = ../heroprotocol/dist/lib/replay/index.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ReplayAnalyserContextCaller {\n    get workerContext() {\n        return this._replay ? this._replay.workerContext : undefined;\n    }\n    constructor(replay) {\n        this._replay = replay;\n        this.workerContext.addCallContext(this);\n    }\n    dispose() {\n        if (this._replay) {\n            this.workerContext.removeCallContext(this);\n            this._replay = undefined;\n        }\n    }\n}\nexports.ReplayAnalyserContextCaller = ReplayAnalyserContextCaller;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9SZXBsYXlBbmFseXNlckNvbnRleHRDYWxsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQTtJQUdJLElBQVcsYUFBYTtRQUNwQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDakUsQ0FBQztJQUVELFlBQW1CLE1BQTJCO1FBQzFDLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFTSxPQUFPO1FBQ1YsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMzQyxJQUFJLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQztTQUM1QjtJQUNMLENBQUM7Q0FFSjtBQW5CRCxrRUFtQkMiLCJmaWxlIjoicmVwbGF5L3Byb3h5L1JlcGxheUFuYWx5c2VyQ29udGV4dENhbGxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgeyBJV29ya2VyQ29udGV4dEhvc3QgfSBmcm9tICcuL2NvbnRleHQvSVdvcmtlckNvbnRleHRIb3N0JztcclxuaW1wb3J0IHsgSVdvcmtlckNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQvSVdvcmtlckNvbnRleHQnO1xyXG5pbXBvcnQgeyBSZXBsYXlDb250ZXh0Q2FsbGVyIH0gZnJvbSAnLi9SZXBsYXlDb250ZXh0Q2FsbGVyJztcclxuZXhwb3J0IGNsYXNzIFJlcGxheUFuYWx5c2VyQ29udGV4dENhbGxlciBpbXBsZW1lbnRzIElXb3JrZXJDb250ZXh0SG9zdCB7XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVwbGF5OiBSZXBsYXlDb250ZXh0Q2FsbGVyO1xyXG4gICAgcHVibGljIGdldCB3b3JrZXJDb250ZXh0KCk6IElXb3JrZXJDb250ZXh0IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVwbGF5ID8gdGhpcy5fcmVwbGF5LndvcmtlckNvbnRleHQgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHJlcGxheTogUmVwbGF5Q29udGV4dENhbGxlcikge1xyXG4gICAgICAgIHRoaXMuX3JlcGxheSA9IHJlcGxheTtcclxuICAgICAgICB0aGlzLndvcmtlckNvbnRleHQuYWRkQ2FsbENvbnRleHQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3JlcGxheSkge1xyXG4gICAgICAgICAgICB0aGlzLndvcmtlckNvbnRleHQucmVtb3ZlQ2FsbENvbnRleHQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcGxheSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/ReplayAnalyserContextCaller.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/ReplayAnalyserContextCaller.js\n// module chunks = main","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst WorkerContext_1 = require(\"./context/WorkerContext\");\nconst messages_1 = require(\"./messages\");\nconst heroprotocol_1 = require(\"../../heroprotocol\");\nconst Subject_1 = require(\"rxjs/Subject\");\nconst operators_1 = require(\"rxjs/operators\");\nclass ReplayContextCaller {\n    constructor(mpqData) {\n        this._statusSubject = new Subject_1.Subject();\n        this._workerContext = new WorkerContext_1.WorkerContext(`./assets/webworker/replay-worker${heroprotocol_1.HeroProtocol.env === 'production' ? '.min' : ''}.js`, mpqData, [mpqData]);\n        this._workerContext.addCallContext(this);\n        this._statusSubjectSubscription = this._workerContext.channelMessages.pipe(operators_1.filter(msg => messages_1.isReplayStatusMessage(msg))).subscribe(((statusMessage) => {\n            this._statusSubject.next(statusMessage);\n        }));\n        this._protocolLoaderSubscription = this._workerContext.channelMessages.pipe(operators_1.filter(msg => messages_1.isLoadProtocolMessage(msg))).subscribe(((protocolMessage) => __awaiter(this, void 0, void 0, function* () {\n            console.log('ILoadProtocolMessage', protocolMessage);\n            const code = yield heroprotocol_1.HeroProtocol.loadProtocol(protocolMessage.version);\n            this.workerContext.send({\n                type: 'load-protocol-result',\n                version: protocolMessage.version,\n                code: code\n            });\n        })));\n    }\n    get workerContext() {\n        return this._workerContext;\n    }\n    get status() {\n        return this._statusSubject.asObservable();\n    }\n    get protocol() {\n        throw new Error('Protocol can only be accessed in the web worker context');\n    }\n    dispose() {\n        if (this._workerContext) {\n            this._statusSubjectSubscription.unsubscribe();\n            this._statusSubjectSubscription = undefined;\n            this._statusSubject = undefined;\n            this.workerContext.dispose();\n            this._workerContext = undefined;\n        }\n    }\n}\nexports.ReplayContextCaller = ReplayContextCaller;\n/*import { AbstractWorkerProxy } from './AbstractWorkerProxy';\nimport { isLoadProtocolMessage, ILoadProtocolResultMessage, isReplayStatusMessage, IReplayStatusMessage } from './messages';\nimport { HeroProtocol } from '../../';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n\r\nexport class ReplayProxy extends AbstractWorkerProxy {\n\r\n    private _statusSubject: BehaviorSubject<IReplayStatusMessage> = new BehaviorSubject(undefined);\n\r\n    public constructor(mpqData?: ArrayBuffer) {\n        super(new Worker('./assets/worker/worker.js'), mpqData, [mpqData]);\n    }\n\r\n    public get status(): BehaviorSubject<IReplayStatusMessage> {\n        return this._statusSubject;\n    }\n\r\n    public get protocol(): Promise<any> {\n        throw new Error('Protocol can only be accessed in the web worker context');\n    }\n\r\n    protected async handleWorkerMessage(data: any) {\n        if (isLoadProtocolMessage(data)) {\n            const code = await HeroProtocol.loadProtocol(data.version);\n            this.send(<ILoadProtocolResultMessage>{\n                type: 'load-protocol-result',\n                version: data.version,\n                code: code\n            });\n        } else if (isReplayStatusMessage(data)) {\n            console.log(data);\n            this._statusSubject.next(data);\n        } else {\n            super.handleWorkerMessage(data);\n        }\n    }\n}\n*/\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9SZXBsYXlDb250ZXh0Q2FsbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFHQSwyREFBd0Q7QUFDeEQseUNBR29CO0FBQ3BCLHFEQUFrRDtBQUNsRCwwQ0FBdUM7QUFHdkMsOENBQXdDO0FBRXhDO0lBb0JJLFlBQW1CLE9BQXFCO1FBakJoQyxtQkFBYyxHQUFrQyxJQUFJLGlCQUFPLEVBQUUsQ0FBQztRQWtCbEUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLDZCQUFhLENBQUMsbUNBQW1DLDJCQUFZLENBQUMsR0FBRyxLQUFLLFlBQVksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ3JKLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQywwQkFBMEIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQ3RFLGtCQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxnQ0FBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxhQUFtQyxFQUFFLEVBQUU7WUFDMUYsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNSLElBQUksQ0FBQywyQkFBMkIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQ3ZFLGtCQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxnQ0FBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBTyxlQUFxQyxFQUFFLEVBQUU7WUFDbEcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRSxlQUFlLENBQUMsQ0FBQztZQUNyRCxNQUFNLElBQUksR0FBRyxNQUFNLDJCQUFZLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN0RSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBNkI7Z0JBQ2hELElBQUksRUFBRSxzQkFBc0I7Z0JBQzVCLE9BQU8sRUFBRSxlQUFlLENBQUMsT0FBTztnQkFDaEMsSUFBSSxFQUFFLElBQUk7YUFDYixDQUFDLENBQUM7UUFDUCxDQUFDLENBQUEsQ0FBQyxDQUFDLENBQUM7SUFDWixDQUFDO0lBN0JELElBQVcsYUFBYTtRQUNwQixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDL0IsQ0FBQztJQUVELElBQVcsTUFBTTtRQUNiLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUM5QyxDQUFDO0lBRUQsSUFBVyxRQUFRO1FBQ2YsTUFBTSxJQUFJLEtBQUssQ0FBQyx5REFBeUQsQ0FBQyxDQUFDO0lBQy9FLENBQUM7SUFxQk0sT0FBTztRQUNWLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNyQixJQUFJLENBQUMsMEJBQTBCLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDOUMsSUFBSSxDQUFDLDBCQUEwQixHQUFHLFNBQVMsQ0FBQztZQUM1QyxJQUFJLENBQUMsY0FBYyxHQUFHLFNBQVMsQ0FBQztZQUNoQyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzdCLElBQUksQ0FBQyxjQUFjLEdBQUcsU0FBUyxDQUFDO1NBQ25DO0lBQ0wsQ0FBQztDQUNKO0FBaERELGtEQWdEQztBQUdEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBcUNFIiwiZmlsZSI6InJlcGxheS9wcm94eS9SZXBsYXlDb250ZXh0Q2FsbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCB7IElXb3JrZXJDb250ZXh0SG9zdCB9IGZyb20gJy4vY29udGV4dC9JV29ya2VyQ29udGV4dEhvc3QnO1xyXG5pbXBvcnQgeyBJV29ya2VyQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC9JV29ya2VyQ29udGV4dCc7XHJcbmltcG9ydCB7IFdvcmtlckNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQvV29ya2VyQ29udGV4dCc7XHJcbmltcG9ydCB7XHJcbiAgICBJUmVwbGF5U3RhdHVzTWVzc2FnZSwgaXNSZXBsYXlTdGF0dXNNZXNzYWdlLFxyXG4gICAgSUxvYWRQcm90b2NvbE1lc3NhZ2UsIGlzTG9hZFByb3RvY29sTWVzc2FnZSwgSUxvYWRQcm90b2NvbFJlc3VsdE1lc3NhZ2VcclxufSBmcm9tICcuL21lc3NhZ2VzJztcclxuaW1wb3J0IHsgSGVyb1Byb3RvY29sIH0gZnJvbSAnLi4vLi4vaGVyb3Byb3RvY29sJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMvU3ViamVjdCc7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMvU3Vic2NyaXB0aW9uJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZXBsYXlDb250ZXh0Q2FsbGVyIGltcGxlbWVudHMgSVdvcmtlckNvbnRleHRIb3N0IHtcclxuXHJcbiAgICBwcml2YXRlIF93b3JrZXJDb250ZXh0OiBJV29ya2VyQ29udGV4dDtcclxuICAgIHByaXZhdGUgX3N0YXR1c1N1YmplY3Q6IFN1YmplY3Q8SVJlcGxheVN0YXR1c01lc3NhZ2U+ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHByaXZhdGUgX3N0YXR1c1N1YmplY3RTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICBwcml2YXRlIF9wcm90b2NvbExvYWRlclN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgd29ya2VyQ29udGV4dCgpOiBJV29ya2VyQ29udGV4dCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dvcmtlckNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzdGF0dXMoKTogT2JzZXJ2YWJsZTxJUmVwbGF5U3RhdHVzTWVzc2FnZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcHJvdG9jb2woKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb3RvY29sIGNhbiBvbmx5IGJlIGFjY2Vzc2VkIGluIHRoZSB3ZWIgd29ya2VyIGNvbnRleHQnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IobXBxRGF0YT86IEFycmF5QnVmZmVyKSB7XHJcbiAgICAgICAgdGhpcy5fd29ya2VyQ29udGV4dCA9IG5ldyBXb3JrZXJDb250ZXh0KGAuL2Fzc2V0cy93ZWJ3b3JrZXIvcmVwbGF5LXdvcmtlciR7SGVyb1Byb3RvY29sLmVudiA9PT0gJ3Byb2R1Y3Rpb24nID8gJy5taW4nIDogJyd9LmpzYCwgbXBxRGF0YSwgW21wcURhdGFdKTtcclxuICAgICAgICB0aGlzLl93b3JrZXJDb250ZXh0LmFkZENhbGxDb250ZXh0KHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX3N0YXR1c1N1YmplY3RTdWJzY3JpcHRpb24gPSB0aGlzLl93b3JrZXJDb250ZXh0LmNoYW5uZWxNZXNzYWdlcy5waXBlKFxyXG4gICAgICAgICAgICBmaWx0ZXIobXNnID0+IGlzUmVwbGF5U3RhdHVzTWVzc2FnZShtc2cpKSkuc3Vic2NyaWJlKCgoc3RhdHVzTWVzc2FnZTogSVJlcGxheVN0YXR1c01lc3NhZ2UpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1c1N1YmplY3QubmV4dChzdGF0dXNNZXNzYWdlKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIHRoaXMuX3Byb3RvY29sTG9hZGVyU3Vic2NyaXB0aW9uID0gdGhpcy5fd29ya2VyQ29udGV4dC5jaGFubmVsTWVzc2FnZXMucGlwZShcclxuICAgICAgICAgICAgZmlsdGVyKG1zZyA9PiBpc0xvYWRQcm90b2NvbE1lc3NhZ2UobXNnKSkpLnN1YnNjcmliZSgoYXN5bmMgKHByb3RvY29sTWVzc2FnZTogSUxvYWRQcm90b2NvbE1lc3NhZ2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJTG9hZFByb3RvY29sTWVzc2FnZScsIHByb3RvY29sTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2RlID0gYXdhaXQgSGVyb1Byb3RvY29sLmxvYWRQcm90b2NvbChwcm90b2NvbE1lc3NhZ2UudmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtlckNvbnRleHQuc2VuZCg8SUxvYWRQcm90b2NvbFJlc3VsdE1lc3NhZ2U+e1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdsb2FkLXByb3RvY29sLXJlc3VsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogcHJvdG9jb2xNZXNzYWdlLnZlcnNpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogY29kZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5fd29ya2VyQ29udGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXNTdWJqZWN0U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1c1N1YmplY3RTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1c1N1YmplY3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMud29ya2VyQ29udGV4dC5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3dvcmtlckNvbnRleHQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyppbXBvcnQgeyBBYnN0cmFjdFdvcmtlclByb3h5IH0gZnJvbSAnLi9BYnN0cmFjdFdvcmtlclByb3h5JztcclxuaW1wb3J0IHsgaXNMb2FkUHJvdG9jb2xNZXNzYWdlLCBJTG9hZFByb3RvY29sUmVzdWx0TWVzc2FnZSwgaXNSZXBsYXlTdGF0dXNNZXNzYWdlLCBJUmVwbGF5U3RhdHVzTWVzc2FnZSB9IGZyb20gJy4vbWVzc2FnZXMnO1xyXG5pbXBvcnQgeyBIZXJvUHJvdG9jb2wgfSBmcm9tICcuLi8uLi8nO1xyXG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzL0JlaGF2aW9yU3ViamVjdCc7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVwbGF5UHJveHkgZXh0ZW5kcyBBYnN0cmFjdFdvcmtlclByb3h5IHtcclxuXHJcbiAgICBwcml2YXRlIF9zdGF0dXNTdWJqZWN0OiBCZWhhdmlvclN1YmplY3Q8SVJlcGxheVN0YXR1c01lc3NhZ2U+ID0gbmV3IEJlaGF2aW9yU3ViamVjdCh1bmRlZmluZWQpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihtcHFEYXRhPzogQXJyYXlCdWZmZXIpIHtcclxuICAgICAgICBzdXBlcihuZXcgV29ya2VyKCcuL2Fzc2V0cy93b3JrZXIvd29ya2VyLmpzJyksIG1wcURhdGEsIFttcHFEYXRhXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzdGF0dXMoKTogQmVoYXZpb3JTdWJqZWN0PElSZXBsYXlTdGF0dXNNZXNzYWdlPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c1N1YmplY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBwcm90b2NvbCgpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvdG9jb2wgY2FuIG9ubHkgYmUgYWNjZXNzZWQgaW4gdGhlIHdlYiB3b3JrZXIgY29udGV4dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBoYW5kbGVXb3JrZXJNZXNzYWdlKGRhdGE6IGFueSkge1xyXG4gICAgICAgIGlmIChpc0xvYWRQcm90b2NvbE1lc3NhZ2UoZGF0YSkpIHtcclxuICAgICAgICAgICAgY29uc3QgY29kZSA9IGF3YWl0IEhlcm9Qcm90b2NvbC5sb2FkUHJvdG9jb2woZGF0YS52ZXJzaW9uKTtcclxuICAgICAgICAgICAgdGhpcy5zZW5kKDxJTG9hZFByb3RvY29sUmVzdWx0TWVzc2FnZT57XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnbG9hZC1wcm90b2NvbC1yZXN1bHQnLFxyXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogZGF0YS52ZXJzaW9uLFxyXG4gICAgICAgICAgICAgICAgY29kZTogY29kZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzUmVwbGF5U3RhdHVzTWVzc2FnZShkYXRhKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdHVzU3ViamVjdC5uZXh0KGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmhhbmRsZVdvcmtlck1lc3NhZ2UoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiovXHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/ReplayContextCaller.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/ReplayContextCaller.js\n// module chunks = main","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"./messages\");\nconst WorkerContextRegistry_1 = require(\"./context/WorkerContextRegistry\");\nrequire(\"reflect-metadata\");\nrequire(\"rxjs/operators/debounce\");\nconst Replay_1 = require(\"../Replay\");\nclass ReplayWorker {\n    constructor(initCmd) {\n        this._protocolPromisies = {};\n        this._loadedContexts = new Map();\n        this._messagePort = initCmd.port;\n        this._messagePort.onmessage = (event) => __awaiter(this, void 0, void 0, function* () {\n            if (messages_1.isWorkerCallMessage(event.data)) {\n                try {\n                    this.send(yield this.handleWorkerCallMessage(event.data));\n                }\n                catch (e) {\n                    const errMsg = {\n                        type: 'worker-call-result',\n                        callId: event.data.callId,\n                        error: true,\n                        result: {\n                            name: e.name,\n                            message: e.message,\n                            stack: e.stack\n                        }\n                    };\n                }\n            }\n            else if (messages_1.isLoadProtocolResultMessage(event.data)) {\n                this.handleProtocolResult(event.data);\n            }\n        });\n        this._replay = new Replay_1.Replay(initCmd.data);\n        const replayContextId = WorkerContextRegistry_1.WorkerContextRegistry.getContextCallerId(this._replay);\n        this._loadedContexts.set(replayContextId, this._replay);\n        this._replay.status.subscribe((status) => {\n            if (status) {\n                this.send(status);\n            }\n        });\n        const oldLoad = this._replay.loadProtocol;\n        this._replay.loadProtocol = (version) => {\n            if (this._protocolPromisies[version]) {\n                return this._protocolPromisies[version].promise;\n            }\n            const promise = new Promise((resolve, reject) => {\n                this._protocolPromisies[version] = {\n                    resolve,\n                    reject,\n                    promise: undefined\n                };\n            });\n            this._protocolPromisies[version].promise = promise;\n            this.send({\n                type: 'load-protocol',\n                version: version\n            });\n            return promise;\n        };\n    }\n    send(data, transfer = []) {\n        this._messagePort.postMessage(data, transfer);\n    }\n    handleProtocolResult(data) {\n        const promise = this._protocolPromisies[data.version];\n        promise.resolve(data.code);\n    }\n    handleWorkerCallMessage(msg) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (messages_1.isWorkerPropertyCall(msg.data)) {\n                return yield this.handleWorkerPropertyCall(msg.callId, msg.data);\n            }\n            else if (messages_1.isWorkerMethodCall(msg.data)) {\n                return yield this.handleWorkerMethodCall(msg.callId, msg.data);\n            }\n            else {\n                throw new Error(`Unhandled Worker Call Message \"${msg.type}\"`);\n            }\n        });\n    }\n    handleWorkerPropertyCall(callId, call) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const context = this.getContextInstance(call.context);\n            const value = yield context[this.getPropertyName(context, call.propertyId)];\n            const result = {\n                type: 'worker-call-result',\n                callId,\n                result: value\n            };\n            return result;\n        });\n    }\n    handleWorkerMethodCall(callId, call) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const context = this.getContextInstance(call.context);\n            const fn = context[this.getPropertyName(context, call.methodId)];\n            const value = yield fn.apply(context, call.args || []);\n            const result = {\n                type: 'worker-call-result',\n                callId,\n                result: value\n            };\n            return result;\n        });\n    }\n    /*private async handleWorkerCmd(cmd: IWorkerCommand): Promise<IWorkerCommandResult> {\n        const context = this.getContextInstance(cmd.context);\n        let result: IWorkerCommandResult;\n        if (isWorkerGetPropertyCommand(cmd)) {\n            const value = await context[this.getPropertyName(context, cmd.id)];\n            result = {\n                type: 'command-result',\n                messageId: cmd.messageId,\n                result: value\n            };\n        } else if (isWorkerCallMethodCommand(cmd)) {\n            const fn: Function = context[this.getPropertyName(context, cmd.id)];\n            return await fn.apply(context, cmd.args);\n        }\n        return result;\n    }*/\n    getContextInstance(contextId) {\n        if (this._loadedContexts.has(contextId)) {\n            return this._loadedContexts.get(contextId);\n        }\n        const contextType = WorkerContextRegistry_1.WorkerContextRegistry.getContextCallerById(contextId);\n        const contextInst = new contextType(this._replay);\n        this._loadedContexts.set(contextId, contextInst);\n        return contextInst;\n    }\n    getPropertyName(context, id) {\n        const proxyMap = Reflect.getOwnMetadata('woker:proxyMethods', context.constructor);\n        return proxyMap[id];\n    }\n}\nexports.ReplayWorker = ReplayWorker;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9SZXBsYXlXb3JrZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHlDQWFvQjtBQUNwQiwyRUFBd0U7QUFDeEUsNEJBQTBCO0FBRzFCLG1DQUFpQztBQUVqQyxzQ0FBbUM7QUFDbkM7SUFPSSxZQUFZLE9BQTJCO1FBSi9CLHVCQUFrQixHQUE2RixFQUFFLENBQUM7UUFFbEgsb0JBQWUsR0FBcUIsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUdsRCxJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDakMsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEdBQUcsQ0FBTyxLQUFLLEVBQUUsRUFBRTtZQUMxQyxJQUFJLDhCQUFtQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDakMsSUFBSTtvQkFDQSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2lCQUM3RDtnQkFBQyxPQUFPLENBQUMsRUFBRTtvQkFDUixNQUFNLE1BQU0sR0FBNkI7d0JBQ3JDLElBQUksRUFBRSxvQkFBb0I7d0JBQzFCLE1BQU0sRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU07d0JBQ3pCLEtBQUssRUFBRSxJQUFJO3dCQUNYLE1BQU0sRUFBRTs0QkFDSixJQUFJLEVBQVUsQ0FBRSxDQUFDLElBQUk7NEJBQ3JCLE9BQU8sRUFBVSxDQUFFLENBQUMsT0FBTzs0QkFDM0IsS0FBSyxFQUFVLENBQUUsQ0FBQyxLQUFLO3lCQUMxQjtxQkFDSixDQUFDO2lCQUNMO2FBQ0o7aUJBQU0sSUFBSSxzQ0FBMkIsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ2hELElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDekM7UUFDTCxDQUFDLENBQUEsQ0FBQztRQUNGLElB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Q0FBQztJQUN2QixDQUFDO0lBRU8sZUFBZSxDQUFDLE9BQWUsRUFBRSxFQUFVO1FBQy9DLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsb0JBQW9CLEVBQUUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ25GLE9BQU8sUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3hCLENBQUM7Q0FFSjtBQXhJRCxvQ0F3SUMiLCJmaWxlIjoicmVwbGF5L3Byb3h5L1JlcGxheVdvcmtlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBJSW5pdGlhbGl6ZUNvbW1hbmQsXHJcbiAgICBJV29ya2VyQ2FsbE1lc3NhZ2UsIGlzV29ya2VyQ2FsbE1lc3NhZ2UsXHJcbiAgICBpc1dvcmtlclByb3BlcnR5Q2FsbCwgSVdvcmtlclByb3BlcnR5Q2FsbCxcclxuICAgIGlzV29ya2VyTWV0aG9kQ2FsbCwgSVdvcmtlck1ldGhvZENhbGwsXHJcbiAgICBJV29ya2VyQ2FsbFJlc3VsdE1lc3NhZ2UsXHJcblxyXG4gICAgSVdvcmtlckNvbW1hbmQsIGlzV29ya2VyQ29tbWFuZCxcclxuICAgIElXb3JrZXJDb21tYW5kUmVzdWx0LCBpc1dvcmtlckNvbW1hbmRSZXN1bHQsXHJcbiAgICBpc1dvcmtlckNhbGxNZXRob2RDb21tYW5kLCBJV29ya2VyQ2FsbE1ldGhvZENvbW1hbmQsXHJcbiAgICBpc1dvcmtlckdldFByb3BlcnR5Q29tbWFuZCwgSVdvcmtlckdldFByb3BlcnR5Q29tbWFuZCxcclxuICAgIElMb2FkUHJvdG9jb2xNZXNzYWdlLCBpc0xvYWRQcm90b2NvbFJlc3VsdE1lc3NhZ2UsIElMb2FkUHJvdG9jb2xSZXN1bHRNZXNzYWdlXHJcblxyXG59IGZyb20gJy4vbWVzc2FnZXMnO1xyXG5pbXBvcnQgeyBXb3JrZXJDb250ZXh0UmVnaXN0cnkgfSBmcm9tICcuL2NvbnRleHQvV29ya2VyQ29udGV4dFJlZ2lzdHJ5JztcclxuaW1wb3J0ICdyZWZsZWN0LW1ldGFkYXRhJztcclxuaW1wb3J0IHsgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMvZGVib3VuY2VUaW1lJztcclxuaW1wb3J0IHsgdGltZXIgfSBmcm9tICdyeGpzL09ic2VydmFibGUvdGltZXInO1xyXG5pbXBvcnQgJ3J4anMvb3BlcmF0b3JzL2RlYm91bmNlJztcclxuXHJcbmltcG9ydCB7IFJlcGxheSB9IGZyb20gJy4uL1JlcGxheSc7XHJcbmV4cG9ydCBjbGFzcyBSZXBsYXlXb3JrZXIge1xyXG4gICAgcHJpdmF0ZSBfcmVwbGF5OiBSZXBsYXk7XHJcbiAgICBwcml2YXRlIF9tZXNzYWdlUG9ydDogTWVzc2FnZVBvcnQ7XHJcbiAgICBwcml2YXRlIF9wcm90b2NvbFByb21pc2llczogeyBbdmVyc2lvbjogbnVtYmVyXTogeyByZXNvbHZlOiBGdW5jdGlvbiwgcmVqZWN0OiBGdW5jdGlvbiwgcHJvbWlzZTogUHJvbWlzZTxzdHJpbmc+IH0gfSA9IHt9O1xyXG5cclxuICAgIHByaXZhdGUgX2xvYWRlZENvbnRleHRzOiBNYXA8c3RyaW5nLCBhbnk+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGluaXRDbWQ6IElJbml0aWFsaXplQ29tbWFuZCkge1xyXG4gICAgICAgIHRoaXMuX21lc3NhZ2VQb3J0ID0gaW5pdENtZC5wb3J0O1xyXG4gICAgICAgIHRoaXMuX21lc3NhZ2VQb3J0Lm9ubWVzc2FnZSA9IGFzeW5jIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNXb3JrZXJDYWxsTWVzc2FnZShldmVudC5kYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQoYXdhaXQgdGhpcy5oYW5kbGVXb3JrZXJDYWxsTWVzc2FnZShldmVudC5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyTXNnOiBJV29ya2VyQ2FsbFJlc3VsdE1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3b3JrZXItY2FsbC1yZXN1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IGV2ZW50LmRhdGEuY2FsbElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAoPEVycm9yPmUpLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAoPEVycm9yPmUpLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjazogKDxFcnJvcj5lKS5zdGFja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0xvYWRQcm90b2NvbFJlc3VsdE1lc3NhZ2UoZXZlbnQuZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUHJvdG9jb2xSZXN1bHQoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX3JlcGxheSA9IG5ldyBSZXBsYXkoaW5pdENtZC5kYXRhKTtcclxuICAgICAgICBjb25zdCByZXBsYXlDb250ZXh0SWQgPSBXb3JrZXJDb250ZXh0UmVnaXN0cnkuZ2V0Q29udGV4dENhbGxlcklkKHRoaXMuX3JlcGxheSk7XHJcbiAgICAgICAgdGhpcy5fbG9hZGVkQ29udGV4dHMuc2V0KHJlcGxheUNvbnRleHRJZCwgdGhpcy5fcmVwbGF5KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVwbGF5LnN0YXR1cy5zdWJzY3JpYmUoKHN0YXR1cykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQoc3RhdHVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG9sZExvYWQgPSB0aGlzLl9yZXBsYXkubG9hZFByb3RvY29sO1xyXG4gICAgICAgIHRoaXMuX3JlcGxheS5sb2FkUHJvdG9jb2wgPSAodmVyc2lvbjogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Byb3RvY29sUHJvbWlzaWVzW3ZlcnNpb25dKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvdG9jb2xQcm9taXNpZXNbdmVyc2lvbl0ucHJvbWlzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvdG9jb2xQcm9taXNpZXNbdmVyc2lvbl0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZTogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvdG9jb2xQcm9taXNpZXNbdmVyc2lvbl0ucHJvbWlzZSA9IHByb21pc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZCg8SUxvYWRQcm90b2NvbE1lc3NhZ2U+e1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2xvYWQtcHJvdG9jb2wnLFxyXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogdmVyc2lvblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzZW5kKGRhdGE6IGFueSwgdHJhbnNmZXI6IGFueVtdID0gW10pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9tZXNzYWdlUG9ydC5wb3N0TWVzc2FnZShkYXRhLCB0cmFuc2Zlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVQcm90b2NvbFJlc3VsdChkYXRhOiBJTG9hZFByb3RvY29sUmVzdWx0TWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9wcm90b2NvbFByb21pc2llc1tkYXRhLnZlcnNpb25dO1xyXG4gICAgICAgIHByb21pc2UucmVzb2x2ZShkYXRhLmNvZGUpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVdvcmtlckNhbGxNZXNzYWdlKG1zZzogSVdvcmtlckNhbGxNZXNzYWdlKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBpZiAoaXNXb3JrZXJQcm9wZXJ0eUNhbGwobXNnLmRhdGEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmhhbmRsZVdvcmtlclByb3BlcnR5Q2FsbChtc2cuY2FsbElkLCBtc2cuZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc1dvcmtlck1ldGhvZENhbGwobXNnLmRhdGEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmhhbmRsZVdvcmtlck1ldGhvZENhbGwobXNnLmNhbGxJZCwgbXNnLmRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5oYW5kbGVkIFdvcmtlciBDYWxsIE1lc3NhZ2UgXCIke21zZy50eXBlfVwiYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlV29ya2VyUHJvcGVydHlDYWxsKGNhbGxJZDogbnVtYmVyLCBjYWxsOiBJV29ya2VyUHJvcGVydHlDYWxsKSB7XHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuZ2V0Q29udGV4dEluc3RhbmNlKGNhbGwuY29udGV4dCk7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBjb250ZXh0W3RoaXMuZ2V0UHJvcGVydHlOYW1lKGNvbnRleHQsIGNhbGwucHJvcGVydHlJZCldO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdDogSVdvcmtlckNhbGxSZXN1bHRNZXNzYWdlID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd29ya2VyLWNhbGwtcmVzdWx0JyxcclxuICAgICAgICAgICAgY2FsbElkLFxyXG4gICAgICAgICAgICByZXN1bHQ6IHZhbHVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlV29ya2VyTWV0aG9kQ2FsbChjYWxsSWQ6IG51bWJlciwgY2FsbDogSVdvcmtlck1ldGhvZENhbGwpIHtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0SW5zdGFuY2UoY2FsbC5jb250ZXh0KTtcclxuICAgICAgICBjb25zdCBmbjogRnVuY3Rpb24gPSBjb250ZXh0W3RoaXMuZ2V0UHJvcGVydHlOYW1lKGNvbnRleHQsIGNhbGwubWV0aG9kSWQpXTtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IGZuLmFwcGx5KGNvbnRleHQsIGNhbGwuYXJncyB8fCBbXSk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0OiBJV29ya2VyQ2FsbFJlc3VsdE1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3b3JrZXItY2FsbC1yZXN1bHQnLFxyXG4gICAgICAgICAgICBjYWxsSWQsXHJcbiAgICAgICAgICAgIHJlc3VsdDogdmFsdWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLypwcml2YXRlIGFzeW5jIGhhbmRsZVdvcmtlckNtZChjbWQ6IElXb3JrZXJDb21tYW5kKTogUHJvbWlzZTxJV29ya2VyQ29tbWFuZFJlc3VsdD4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmdldENvbnRleHRJbnN0YW5jZShjbWQuY29udGV4dCk7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogSVdvcmtlckNvbW1hbmRSZXN1bHQ7XHJcbiAgICAgICAgaWYgKGlzV29ya2VyR2V0UHJvcGVydHlDb21tYW5kKGNtZCkpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBjb250ZXh0W3RoaXMuZ2V0UHJvcGVydHlOYW1lKGNvbnRleHQsIGNtZC5pZCldO1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnY29tbWFuZC1yZXN1bHQnLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUlkOiBjbWQubWVzc2FnZUlkLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0OiB2YWx1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNXb3JrZXJDYWxsTWV0aG9kQ29tbWFuZChjbWQpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZuOiBGdW5jdGlvbiA9IGNvbnRleHRbdGhpcy5nZXRQcm9wZXJ0eU5hbWUoY29udGV4dCwgY21kLmlkKV07XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbi5hcHBseShjb250ZXh0LCBjbWQuYXJncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9Ki9cclxuXHJcbiAgICBwcml2YXRlIGdldENvbnRleHRJbnN0YW5jZShjb250ZXh0SWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLl9sb2FkZWRDb250ZXh0cy5oYXMoY29udGV4dElkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZGVkQ29udGV4dHMuZ2V0KGNvbnRleHRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbnRleHRUeXBlID0gV29ya2VyQ29udGV4dFJlZ2lzdHJ5LmdldENvbnRleHRDYWxsZXJCeUlkKGNvbnRleHRJZCk7XHJcbiAgICAgICAgY29uc3QgY29udGV4dEluc3QgPSBuZXcgY29udGV4dFR5cGUodGhpcy5fcmVwbGF5KTtcclxuICAgICAgICB0aGlzLl9sb2FkZWRDb250ZXh0cy5zZXQoY29udGV4dElkLCBjb250ZXh0SW5zdCk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHRJbnN0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UHJvcGVydHlOYW1lKGNvbnRleHQ6IE9iamVjdCwgaWQ6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHByb3h5TWFwID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YSgnd29rZXI6cHJveHlNZXRob2RzJywgY29udGV4dC5jb25zdHJ1Y3Rvcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3h5TWFwW2lkXTtcclxuICAgIH1cclxuXHJcbn1cclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/ReplayWorker.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/ReplayWorker.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messages_1 = require(\"../messages\");\nconst WorkerContextRegistry_1 = require(\"./WorkerContextRegistry\");\nconst Subject_1 = require(\"rxjs/Subject\");\nconst sha1 = require(\"sha1\");\nclass WorkerContext {\n    constructor(workerPath, initData, initTransfer = []) {\n        this.workerPath = workerPath;\n        this._initMessageQueue = [];\n        this._workerMessages = new Subject_1.Subject();\n        this._channelMessages = new Subject_1.Subject();\n        this._callId = 0;\n        this._resultCache = new Map();\n        this._callPromises = {};\n        this._pendingCachePromises = {};\n        this._contextCallers = new Set();\n        this._worker = new Worker(workerPath);\n        this.initialize(initData, initTransfer);\n    }\n    get workerMessages() {\n        return this._workerMessages.asObservable();\n    }\n    get channelMessages() {\n        return this._channelMessages.asObservable();\n    }\n    initialize(initData, initTransfer) {\n        this._worker.onmessage = (event) => {\n            if (event.data === 'WORKER_INITIALIZED') {\n                this._initialized = true;\n                for (let i = 0; i < this._initMessageQueue.length; i++) {\n                    const arg = this._initMessageQueue[i];\n                    this.send(arg[0], arg[1]);\n                }\n            }\n            else {\n                this._workerMessages.next(event.data);\n            }\n        };\n        const messageChannel = new MessageChannel();\n        this._port = messageChannel.port1;\n        this._port.onmessage = (event) => {\n            if (!this.handleChannelMessage(event.data)) {\n                this._channelMessages.next(event.data);\n            }\n        };\n        const initCommand = {\n            type: 'initialize',\n            port: messageChannel.port2,\n            data: initData\n        };\n        this._worker.postMessage(initCommand, [messageChannel.port2, ...initTransfer]);\n    }\n    handleChannelMessage(msg) {\n        if (messages_1.isWorkerCallResultMessage(msg)) {\n            this.handleWorkerCallResult(msg);\n            return true;\n        }\n        return false;\n    }\n    computeCacheKey(...args) {\n        const dataStr = JSON.stringify(args, (key, value) => {\n            return value;\n        });\n        return sha1(dataStr);\n    }\n    hasCache(key) {\n        return this._resultCache.has(key);\n    }\n    getCache(key) {\n        return this._resultCache.get(key);\n    }\n    setCache(key, value) {\n        this._resultCache.set(key, value);\n    }\n    handleWorkerCallResult(data) {\n        const promise = this._callPromises[data.callId];\n        delete this._callPromises[data.callId];\n        if (promise.cacheKey) {\n            delete this._pendingCachePromises[promise.cacheKey];\n        }\n        if (data.error) {\n            promise.reject(data.result);\n        }\n        else {\n            if (promise.cacheKey) {\n                this.setCache(promise.cacheKey, data.result);\n            }\n            promise.resolve(data.result);\n        }\n    }\n    send(data, transfer) {\n        if (!this._initialized) {\n            this._initMessageQueue.push([data, transfer]);\n        }\n        else {\n            this._port.postMessage(data, transfer);\n        }\n    }\n    call(data, cacheResult = true, transfer) {\n        const callId = this._callId++;\n        const cacheKey = cacheResult ? this.computeCacheKey(data) : undefined;\n        if (cacheResult && this.hasCache(cacheKey)) {\n            return new Promise((res) => {\n                res(this.getCache(cacheKey));\n            });\n        }\n        if (cacheResult && this._pendingCachePromises[cacheKey]) {\n            return this._pendingCachePromises[cacheKey];\n        }\n        const promise = new Promise((resolve, reject) => {\n            this._callPromises[callId] = {\n                resolve,\n                reject,\n                cacheKey\n            };\n            this.send({\n                type: 'worker-call',\n                callId,\n                data\n            });\n        });\n        if (cacheResult) {\n            this._pendingCachePromises[cacheKey] = promise;\n        }\n        return promise;\n    }\n    getProperty(context, propertyId, cacheResult) {\n        const call = {\n            type: 'get-property',\n            context: WorkerContextRegistry_1.WorkerContextRegistry.getContextCallerId(context),\n            propertyId\n        };\n        return this.call(call, cacheResult);\n    }\n    callMethod(context, methodId, args, cacheResult, transfer) {\n        const call = {\n            type: 'call-method',\n            context: WorkerContextRegistry_1.WorkerContextRegistry.getContextCallerId(context),\n            methodId,\n            args\n        };\n        return this.call(call, cacheResult, transfer);\n    }\n    addCallContext(context) {\n        this._contextCallers.add(context);\n    }\n    removeCallContext(context) {\n        this._contextCallers.delete(context);\n    }\n    tryDispose() {\n        if (this._contextCallers.size > 0) {\n            return false;\n        }\n        this.dispose();\n        return true;\n    }\n    dispose() {\n        if (this._worker) {\n            this._worker.terminate();\n            this._worker = undefined;\n            this._initialized = false;\n            this._port = undefined;\n            this._initMessageQueue = undefined;\n            this._callPromises = undefined;\n            this._pendingCachePromises = undefined;\n        }\n    }\n}\nexports.WorkerContext = WorkerContext;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9jb250ZXh0L1dvcmtlckNvbnRleHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFHQSwwQ0FJcUI7QUFDckIsbUVBQWdFO0FBRWhFLDBDQUF1QztBQUd2Qyw2QkFBNkI7QUFFN0I7SUEyQkksWUFBMkIsVUFBa0IsRUFBRSxRQUFjLEVBQUUsZUFBc0IsRUFBRTtRQUE1RCxlQUFVLEdBQVYsVUFBVSxDQUFRO1FBcEJyQyxzQkFBaUIsR0FBc0IsRUFBRSxDQUFDO1FBQzFDLG9CQUFlLEdBQWlCLElBQUksaUJBQU8sRUFBRSxDQUFDO1FBQzlDLHFCQUFnQixHQUFpQixJQUFJLGlCQUFPLEVBQUUsQ0FBQztRQUUvQyxZQUFPLEdBQUcsQ0FBQyxDQUFDO1FBQ1osaUJBQVksR0FBcUIsSUFBSSxHQUFHLEVBQWUsQ0FBQztRQUN4RCxrQkFBYSxHQUErRSxFQUFFLENBQUM7UUFDL0YsMEJBQXFCLEdBQW9DLEVBQUUsQ0FBQztRQUc1RCxvQkFBZSxHQUE0QixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBV3pELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDdEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQVhELElBQVcsY0FBYztRQUNyQixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDL0MsQ0FBQztJQUVELElBQVcsZUFBZTtRQUN0QixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUNoRCxDQUFDO0lBT08sVUFBVSxDQUFDLFFBQWEsRUFBRSxZQUFtQjtRQUNqRCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQy9CLElBQUksS0FBSyxDQUFDLElBQUksS0FBSyxvQkFBb0IsRUFBRTtnQkFDckMsSUFBSSxDQUFDLFlBQVks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LEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBQ00saUJBQWlCLENBQUMsT0FBMkI7UUFDaEQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVNLFVBQVU7UUFDYixJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRTtZQUMvQixPQUFPLEtBQUssQ0FBQztTQUNoQjtRQUNELElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNmLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFTSxPQUFPO1FBQ1YsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUN6QixJQUFJLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQztZQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztZQUMxQixJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztZQUN2QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsU0FBUyxDQUFDO1lBQ25DLElBQUksQ0FBQyxhQUFhLEdBQUcsU0FBUyxDQUFDO1lBQy9CLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxTQUFTLENBQUM7U0FDMUM7SUFDTCxDQUFDO0NBQ0o7QUFsTUQsc0NBa01DIiwiZmlsZSI6InJlcGxheS9wcm94eS9jb250ZXh0L1dvcmtlckNvbnRleHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW1wb3J0IHsgSVdvcmtlckNvbnRleHQgfSBmcm9tICcuL0lXb3JrZXJDb250ZXh0JztcclxuaW1wb3J0IHsgSVdvcmtlckNvbnRleHRIb3N0IH0gZnJvbSAnLi9JV29ya2VyQ29udGV4dEhvc3QnO1xyXG5pbXBvcnQge1xyXG4gICAgSUluaXRpYWxpemVDb21tYW5kLCBJV29ya2VyQ2FsbE1lc3NhZ2UsXHJcbiAgICBpc1dvcmtlckNhbGxSZXN1bHRNZXNzYWdlLCBJV29ya2VyQ2FsbFJlc3VsdE1lc3NhZ2UsXHJcbiAgICBJV29ya2VyUHJvcGVydHlDYWxsLCBJV29ya2VyTWV0aG9kQ2FsbFxyXG59IGZyb20gJy4uL21lc3NhZ2VzJztcclxuaW1wb3J0IHsgV29ya2VyQ29udGV4dFJlZ2lzdHJ5IH0gZnJvbSAnLi9Xb3JrZXJDb250ZXh0UmVnaXN0cnknO1xyXG5cclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMvU3ViamVjdCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL09ic2VydmFibGUnO1xyXG5cclxuaW1wb3J0ICogYXMgc2hhMSBmcm9tICdzaGExJztcclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JrZXJDb250ZXh0IGltcGxlbWVudHMgSVdvcmtlckNvbnRleHQge1xyXG5cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF93b3JrZXI6IFdvcmtlcjtcclxuICAgIHByaXZhdGUgX3BvcnQ6IE1lc3NhZ2VQb3J0O1xyXG4gICAgcHJpdmF0ZSBfaW5pdE1lc3NhZ2VRdWV1ZTogQXJyYXk8QXJyYXk8YW55Pj4gPSBbXTtcclxuICAgIHByaXZhdGUgX3dvcmtlck1lc3NhZ2VzOiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgcHJpdmF0ZSBfY2hhbm5lbE1lc3NhZ2VzOiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdCgpO1xyXG5cclxuICAgIHByaXZhdGUgX2NhbGxJZCA9IDA7XHJcbiAgICBwcml2YXRlIF9yZXN1bHRDYWNoZTogTWFwPHN0cmluZywgYW55PiA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XHJcbiAgICBwcml2YXRlIF9jYWxsUHJvbWlzZXM6IHsgW19tZXNzYWdlSWQ6IG51bWJlcl06IHsgcmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSwgY2FjaGVLZXk/OiBzdHJpbmcgfSB9ID0ge307XHJcbiAgICBwcml2YXRlIF9wZW5kaW5nQ2FjaGVQcm9taXNlczogeyBba2V5OiBzdHJpbmddOiBQcm9taXNlPGFueT4gfSA9IHt9O1xyXG5cclxuXHJcbiAgICBwcml2YXRlIF9jb250ZXh0Q2FsbGVyczogU2V0PElXb3JrZXJDb250ZXh0SG9zdD4gPSBuZXcgU2V0KCk7XHJcblxyXG4gICAgcHVibGljIGdldCB3b3JrZXJNZXNzYWdlcygpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93b3JrZXJNZXNzYWdlcy5hc09ic2VydmFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGNoYW5uZWxNZXNzYWdlcygpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jaGFubmVsTWVzc2FnZXMuYXNPYnNlcnZhYmxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgd29ya2VyUGF0aDogc3RyaW5nLCBpbml0RGF0YT86IGFueSwgaW5pdFRyYW5zZmVyOiBhbnlbXSA9IFtdKSB7XHJcbiAgICAgICAgdGhpcy5fd29ya2VyID0gbmV3IFdvcmtlcih3b3JrZXJQYXRoKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUoaW5pdERhdGEsIGluaXRUcmFuc2Zlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplKGluaXREYXRhOiBhbnksIGluaXRUcmFuc2ZlcjogYW55W10pIHtcclxuICAgICAgICB0aGlzLl93b3JrZXIub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5kYXRhID09PSAnV09SS0VSX0lOSVRJQUxJWkVEJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9pbml0TWVzc2FnZVF1ZXVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJnID0gdGhpcy5faW5pdE1lc3NhZ2VRdWV1ZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQoYXJnWzBdLCBhcmdbMV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd29ya2VyTWVzc2FnZXMubmV4dChldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XHJcbiAgICAgICAgdGhpcy5fcG9ydCA9IG1lc3NhZ2VDaGFubmVsLnBvcnQxO1xyXG5cclxuICAgICAgICB0aGlzLl9wb3J0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxlQ2hhbm5lbE1lc3NhZ2UoZXZlbnQuZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5uZWxNZXNzYWdlcy5uZXh0KGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5pdENvbW1hbmQ6IElJbml0aWFsaXplQ29tbWFuZCA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ2luaXRpYWxpemUnLFxyXG4gICAgICAgICAgICBwb3J0OiBtZXNzYWdlQ2hhbm5lbC5wb3J0MixcclxuICAgICAgICAgICAgZGF0YTogaW5pdERhdGFcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl93b3JrZXIucG9zdE1lc3NhZ2UoaW5pdENvbW1hbmQsIFttZXNzYWdlQ2hhbm5lbC5wb3J0MiwgLi4uaW5pdFRyYW5zZmVyXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVDaGFubmVsTWVzc2FnZShtc2c6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChpc1dvcmtlckNhbGxSZXN1bHRNZXNzYWdlKG1zZykpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVXb3JrZXJDYWxsUmVzdWx0KG1zZyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wdXRlQ2FjaGVLZXkoLi4uYXJncyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KGFyZ3MsIChrZXksIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc2hhMShkYXRhU3RyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhc0NhY2hlKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdENhY2hlLmhhcyhrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q2FjaGUoa2V5OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRDYWNoZS5nZXQoa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldENhY2hlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0Q2FjaGUuc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlV29ya2VyQ2FsbFJlc3VsdChkYXRhOiBJV29ya2VyQ2FsbFJlc3VsdE1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5fY2FsbFByb21pc2VzW2RhdGEuY2FsbElkXTtcclxuICAgICAgICBkZWxldGUgdGhpcy5fY2FsbFByb21pc2VzW2RhdGEuY2FsbElkXTtcclxuXHJcbiAgICAgICAgaWYgKHByb21pc2UuY2FjaGVLZXkpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3BlbmRpbmdDYWNoZVByb21pc2VzW3Byb21pc2UuY2FjaGVLZXldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgcHJvbWlzZS5yZWplY3QoZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9taXNlLmNhY2hlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldENhY2hlKHByb21pc2UuY2FjaGVLZXksIGRhdGEucmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm9taXNlLnJlc29sdmUoZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VuZChkYXRhOiBhbnksIHRyYW5zZmVyPzogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRNZXNzYWdlUXVldWUucHVzaChbZGF0YSwgdHJhbnNmZXJdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9wb3J0LnBvc3RNZXNzYWdlKGRhdGEsIHRyYW5zZmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNhbGw8VFJlc3VsdD4oZGF0YTogYW55LCBjYWNoZVJlc3VsdCA9IHRydWUsIHRyYW5zZmVyPzogYW55W10pOiBQcm9taXNlPFRSZXN1bHQ+IHtcclxuICAgICAgICBjb25zdCBjYWxsSWQgPSB0aGlzLl9jYWxsSWQrKztcclxuICAgICAgICBjb25zdCBjYWNoZUtleSA9IGNhY2hlUmVzdWx0ID8gdGhpcy5jb21wdXRlQ2FjaGVLZXkoZGF0YSkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmIChjYWNoZVJlc3VsdCAmJiB0aGlzLmhhc0NhY2hlKGNhY2hlS2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzKHRoaXMuZ2V0Q2FjaGUoY2FjaGVLZXkpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2FjaGVSZXN1bHQgJiYgdGhpcy5fcGVuZGluZ0NhY2hlUHJvbWlzZXNbY2FjaGVLZXldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wZW5kaW5nQ2FjaGVQcm9taXNlc1tjYWNoZUtleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2U8VFJlc3VsdD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsUHJvbWlzZXNbY2FsbElkXSA9IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUsXHJcbiAgICAgICAgICAgICAgICByZWplY3QsXHJcbiAgICAgICAgICAgICAgICBjYWNoZUtleVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbmQoPElXb3JrZXJDYWxsTWVzc2FnZT57XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnd29ya2VyLWNhbGwnLFxyXG4gICAgICAgICAgICAgICAgY2FsbElkLFxyXG4gICAgICAgICAgICAgICAgZGF0YVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoY2FjaGVSZXN1bHQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ0NhY2hlUHJvbWlzZXNbY2FjaGVLZXldID0gcHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFByb3BlcnR5PFRSZXN1bHQ+KGNvbnRleHQ6IElXb3JrZXJDb250ZXh0SG9zdCwgcHJvcGVydHlJZDogbnVtYmVyLCBjYWNoZVJlc3VsdD86IGJvb2xlYW4pOiBQcm9taXNlPFRSZXN1bHQ+IHtcclxuICAgICAgICBjb25zdCBjYWxsOiBJV29ya2VyUHJvcGVydHlDYWxsID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnZ2V0LXByb3BlcnR5JyxcclxuICAgICAgICAgICAgY29udGV4dDogV29ya2VyQ29udGV4dFJlZ2lzdHJ5LmdldENvbnRleHRDYWxsZXJJZChjb250ZXh0KSxcclxuICAgICAgICAgICAgcHJvcGVydHlJZFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbChjYWxsLCBjYWNoZVJlc3VsdCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2FsbE1ldGhvZDxUUmVzdWx0PihcclxuICAgICAgICBjb250ZXh0OiBJV29ya2VyQ29udGV4dEhvc3QsIG1ldGhvZElkOiBudW1iZXIsIGFyZ3M/OiBhbnlbXSwgY2FjaGVSZXN1bHQ/OiBib29sZWFuLCB0cmFuc2Zlcj86IGFueVtdXHJcbiAgICApOiBQcm9taXNlPFRSZXN1bHQ+IHtcclxuICAgICAgICBjb25zdCBjYWxsOiBJV29ya2VyTWV0aG9kQ2FsbCA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ2NhbGwtbWV0aG9kJyxcclxuICAgICAgICAgICAgY29udGV4dDogV29ya2VyQ29udGV4dFJlZ2lzdHJ5LmdldENvbnRleHRDYWxsZXJJZChjb250ZXh0KSxcclxuICAgICAgICAgICAgbWV0aG9kSWQsXHJcbiAgICAgICAgICAgIGFyZ3NcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwoY2FsbCwgY2FjaGVSZXN1bHQsIHRyYW5zZmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQ2FsbENvbnRleHQoY29udGV4dDogSVdvcmtlckNvbnRleHRIb3N0KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dENhbGxlcnMuYWRkKGNvbnRleHQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlbW92ZUNhbGxDb250ZXh0KGNvbnRleHQ6IElXb3JrZXJDb250ZXh0SG9zdCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2NvbnRleHRDYWxsZXJzLmRlbGV0ZShjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdHJ5RGlzcG9zZSgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5fY29udGV4dENhbGxlcnMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5fd29ya2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dvcmtlci50ZXJtaW5hdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fd29ya2VyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9wb3J0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLl9pbml0TWVzc2FnZVF1ZXVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsUHJvbWlzZXMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdDYWNoZVByb21pc2VzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/context/WorkerContext.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/context/WorkerContext.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst types_1 = require(\"../../../types\");\nrequire(\"reflect-metadata\");\nclass WorkerContextRegistry {\n    static registerContextCaller(type) {\n        const id = Reflect.getOwnMetadata('workerContext:typeId', type);\n        if (WorkerContextRegistry._contextCallers.has(id)) {\n            const regType = WorkerContextRegistry._contextCallers.get(id);\n            if (regType !== type) {\n                throw new Error('Duplicate TypeId');\n            }\n        }\n        else {\n            WorkerContextRegistry._contextCallers.set(id, type);\n        }\n    }\n    static getContextCallerId(type) {\n        if (!types_1.isType(type)) {\n            type = type.constructor;\n        }\n        const id = Reflect.getOwnMetadata('workerContext:typeId', type);\n        if (WorkerContextRegistry._contextCallers.has(id)) {\n            return id;\n        }\n    }\n    static getContextCallerById(id) {\n        return WorkerContextRegistry._contextCallers.get(id);\n    }\n}\nWorkerContextRegistry._contextCallers = new Map();\nexports.WorkerContextRegistry = WorkerContextRegistry;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9jb250ZXh0L1dvcmtlckNvbnRleHRSZWdpc3RyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDBDQUE4QztBQUc5Qyw0QkFBMEI7QUFFMUI7SUFJVyxNQUFNLENBQUMscUJBQXFCLENBQUMsSUFBOEI7UUFDOUQsTUFBTSxFQUFFLEdBQVcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN4RSxJQUFJLHFCQUFxQixDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDL0MsTUFBTSxPQUFPLEdBQUcscUJBQXFCLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM5RCxJQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7Z0JBQ2xCLE1BQU0sSUFBSSxLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQzthQUN2QztTQUNKO2FBQU07WUFDSCxxQkFBcUIsQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztTQUN2RDtJQUNMLENBQUM7SUFFTSxNQUFNLENBQUMsa0JBQWtCLENBQUMsSUFBbUQ7UUFDaEYsSUFBSSxDQUFDLGNBQU0sQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNmLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1NBQzNCO1FBQ0QsTUFBTSxFQUFFLEdBQVcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN4RSxJQUFJLHFCQUFxQixDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDL0MsT0FBTyxFQUFFLENBQUM7U0FDYjtJQUNMLENBQUM7SUFFTSxNQUFNLENBQUMsb0JBQW9CLENBQUMsRUFBVTtRQUN6QyxPQUFPLHFCQUFxQixDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDekQsQ0FBQzs7QUEzQmMscUNBQWUsR0FBMEMsSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUR0RixzREE4QkMiLCJmaWxlIjoicmVwbGF5L3Byb3h5L2NvbnRleHQvV29ya2VyQ29udGV4dFJlZ2lzdHJ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHlwZSwgaXNUeXBlIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xyXG5cclxuaW1wb3J0IHsgSVdvcmtlckNhbGxDb250ZXh0IH0gZnJvbSAnLi9JV29ya2VyQ2FsbENvbnRleHQnO1xyXG5pbXBvcnQgJ3JlZmxlY3QtbWV0YWRhdGEnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFdvcmtlckNvbnRleHRSZWdpc3RyeSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBfY29udGV4dENhbGxlcnM6IE1hcDxzdHJpbmcsIFR5cGU8SVdvcmtlckNhbGxDb250ZXh0Pj4gPSBuZXcgTWFwKCk7XHJcblxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJDb250ZXh0Q2FsbGVyKHR5cGU6IFR5cGU8SVdvcmtlckNhbGxDb250ZXh0Pik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGlkOiBzdHJpbmcgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKCd3b3JrZXJDb250ZXh0OnR5cGVJZCcsIHR5cGUpO1xyXG4gICAgICAgIGlmIChXb3JrZXJDb250ZXh0UmVnaXN0cnkuX2NvbnRleHRDYWxsZXJzLmhhcyhpZCkpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVnVHlwZSA9IFdvcmtlckNvbnRleHRSZWdpc3RyeS5fY29udGV4dENhbGxlcnMuZ2V0KGlkKTtcclxuICAgICAgICAgICAgaWYgKHJlZ1R5cGUgIT09IHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRHVwbGljYXRlIFR5cGVJZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgV29ya2VyQ29udGV4dFJlZ2lzdHJ5Ll9jb250ZXh0Q2FsbGVycy5zZXQoaWQsIHR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvbnRleHRDYWxsZXJJZCh0eXBlOiBJV29ya2VyQ2FsbENvbnRleHQgfCBUeXBlPElXb3JrZXJDYWxsQ29udGV4dD4pOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghaXNUeXBlKHR5cGUpKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLmNvbnN0cnVjdG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpZDogc3RyaW5nID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YSgnd29ya2VyQ29udGV4dDp0eXBlSWQnLCB0eXBlKTtcclxuICAgICAgICBpZiAoV29ya2VyQ29udGV4dFJlZ2lzdHJ5Ll9jb250ZXh0Q2FsbGVycy5oYXMoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb250ZXh0Q2FsbGVyQnlJZChpZDogc3RyaW5nKTogVHlwZTxJV29ya2VyQ2FsbENvbnRleHQ+IHtcclxuICAgICAgICByZXR1cm4gV29ya2VyQ29udGV4dFJlZ2lzdHJ5Ll9jb250ZXh0Q2FsbGVycy5nZXQoaWQpO1xyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/context/WorkerContextRegistry.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/context/WorkerContextRegistry.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./messages\"));\n__export(require(\"./ReplayContextCaller\"));\n__export(require(\"./ReplayWorker\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLGdDQUEyQjtBQUMzQiwyQ0FBc0M7QUFDdEMsb0NBQStCIiwiZmlsZSI6InJlcGxheS9wcm94eS9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vbWVzc2FnZXMnO1xyXG5leHBvcnQgKiBmcm9tICcuL1JlcGxheUNvbnRleHRDYWxsZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL1JlcGxheVdvcmtlcic7XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/index.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/index.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isWorkerCallMessage(obj) {\n    return !!obj && obj.type === 'worker-call' && typeof obj.callId === 'number' && 'data' in obj;\n}\nexports.isWorkerCallMessage = isWorkerCallMessage;\nfunction isWorkerCallResultMessage(obj) {\n    return !!obj && obj.type === 'worker-call-result' && typeof obj.callId === 'number';\n}\nexports.isWorkerCallResultMessage = isWorkerCallResultMessage;\nfunction isWorkerPropertyCall(obj) {\n    return !!obj && obj.type === 'get-property' && typeof obj.context === 'string' && typeof obj.propertyId === 'number';\n}\nexports.isWorkerPropertyCall = isWorkerPropertyCall;\nfunction isWorkerMethodCall(obj) {\n    return !!obj && obj.type === 'call-method' && typeof obj.context === 'string' && typeof obj.methodId === 'number';\n}\nexports.isWorkerMethodCall = isWorkerMethodCall;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9tZXNzYWdlcy9jYWxsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBTUEsNkJBQW9DLEdBQVE7SUFDeEMsT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssYUFBYSxJQUFJLE9BQU8sR0FBRyxDQUFDLE1BQU0sS0FBSyxRQUFRLElBQUksTUFBTSxJQUFJLEdBQUcsQ0FBQztBQUNsRyxDQUFDO0FBRkQsa0RBRUM7QUFVRCxtQ0FBMEMsR0FBUTtJQUM5QyxPQUFPLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxvQkFBb0IsSUFBSSxPQUFPLEdBQUcsQ0FBQyxNQUFNLEtBQUssUUFBUSxDQUFDO0FBQ3hGLENBQUM7QUFGRCw4REFFQztBQVNELDhCQUFxQyxHQUFRO0lBQ3pDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLGNBQWMsSUFBSSxPQUFPLEdBQUcsQ0FBQyxPQUFPLEtBQUssUUFBUSxJQUFJLE9BQU8sR0FBRyxDQUFDLFVBQVUsS0FBSyxRQUFRLENBQUM7QUFDekgsQ0FBQztBQUZELG9EQUVDO0FBU0QsNEJBQW1DLEdBQVE7SUFDdkMsT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssYUFBYSxJQUFJLE9BQU8sR0FBRyxDQUFDLE9BQU8sS0FBSyxRQUFRLElBQUksT0FBTyxHQUFHLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQztBQUN0SCxDQUFDO0FBRkQsZ0RBRUMiLCJmaWxlIjoicmVwbGF5L3Byb3h5L21lc3NhZ2VzL2NhbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIElXb3JrZXJDYWxsTWVzc2FnZSB7XHJcbiAgICB0eXBlOiAnd29ya2VyLWNhbGwnO1xyXG4gICAgY2FsbElkOiBudW1iZXI7XHJcbiAgICBkYXRhOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1dvcmtlckNhbGxNZXNzYWdlKG9iajogYW55KTogb2JqIGlzIElXb3JrZXJDYWxsTWVzc2FnZSB7XHJcbiAgICByZXR1cm4gISFvYmogJiYgb2JqLnR5cGUgPT09ICd3b3JrZXItY2FsbCcgJiYgdHlwZW9mIG9iai5jYWxsSWQgPT09ICdudW1iZXInICYmICdkYXRhJyBpbiBvYmo7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElXb3JrZXJDYWxsUmVzdWx0TWVzc2FnZSB7XHJcbiAgICB0eXBlOiAnd29ya2VyLWNhbGwtcmVzdWx0JztcclxuICAgIGNhbGxJZDogbnVtYmVyO1xyXG4gICAgZXJyb3I/OiBib29sZWFuO1xyXG4gICAgcmVzdWx0PzogYW55O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNXb3JrZXJDYWxsUmVzdWx0TWVzc2FnZShvYmo6IGFueSk6IG9iaiBpcyBJV29ya2VyQ2FsbFJlc3VsdE1lc3NhZ2Uge1xyXG4gICAgcmV0dXJuICEhb2JqICYmIG9iai50eXBlID09PSAnd29ya2VyLWNhbGwtcmVzdWx0JyAmJiB0eXBlb2Ygb2JqLmNhbGxJZCA9PT0gJ251bWJlcic7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElXb3JrZXJQcm9wZXJ0eUNhbGwge1xyXG4gICAgdHlwZTogJ2dldC1wcm9wZXJ0eSc7XHJcbiAgICBjb250ZXh0OiBzdHJpbmc7XHJcbiAgICBwcm9wZXJ0eUlkOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1dvcmtlclByb3BlcnR5Q2FsbChvYmo6IGFueSk6IG9iaiBpcyBJV29ya2VyUHJvcGVydHlDYWxsIHtcclxuICAgIHJldHVybiAhIW9iaiAmJiBvYmoudHlwZSA9PT0gJ2dldC1wcm9wZXJ0eScgJiYgdHlwZW9mIG9iai5jb250ZXh0ID09PSAnc3RyaW5nJyAmJiB0eXBlb2Ygb2JqLnByb3BlcnR5SWQgPT09ICdudW1iZXInO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElXb3JrZXJNZXRob2RDYWxsIHtcclxuICAgIHR5cGU6ICdjYWxsLW1ldGhvZCc7XHJcbiAgICBjb250ZXh0OiBzdHJpbmc7XHJcbiAgICBtZXRob2RJZDogbnVtYmVyO1xyXG4gICAgYXJncz86IGFueVtdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNXb3JrZXJNZXRob2RDYWxsKG9iajogYW55KTogb2JqIGlzIElXb3JrZXJNZXRob2RDYWxsIHtcclxuICAgIHJldHVybiAhIW9iaiAmJiBvYmoudHlwZSA9PT0gJ2NhbGwtbWV0aG9kJyAmJiB0eXBlb2Ygb2JqLmNvbnRleHQgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBvYmoubWV0aG9kSWQgPT09ICdudW1iZXInO1xyXG59XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/messages/call.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/messages/call.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isWorkerCommand(obj) {\n    return 'type' in obj && 'messageId' in obj\n        && typeof obj.messageId === 'number'\n        && typeof obj.context === 'string' && typeof obj.id === 'number';\n}\nexports.isWorkerCommand = isWorkerCommand;\nfunction isWorkerGetPropertyCommand(obj) {\n    return isWorkerCommand(obj) && obj.type === 'property';\n}\nexports.isWorkerGetPropertyCommand = isWorkerGetPropertyCommand;\nfunction isWorkerCallMethodCommand(obj) {\n    return isWorkerCommand(obj) && obj.type === 'method';\n}\nexports.isWorkerCallMethodCommand = isWorkerCallMethodCommand;\nfunction isWorkerCommandResult(obj) {\n    return obj.type === 'command-result' && typeof obj.messageId === 'number';\n}\nexports.isWorkerCommandResult = isWorkerCommandResult;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9tZXNzYWdlcy9jbWRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBT0EseUJBQWdDLEdBQVE7SUFDcEMsT0FBTyxNQUFNLElBQUksR0FBRyxJQUFJLFdBQVcsSUFBSSxHQUFHO1dBQ25DLE9BQU8sR0FBRyxDQUFDLFNBQVMsS0FBSyxRQUFRO1dBQ2pDLE9BQU8sR0FBRyxDQUFDLE9BQU8sS0FBSyxRQUFRLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRSxLQUFLLFFBQVEsQ0FBQztBQUN6RSxDQUFDO0FBSkQsMENBSUM7QUFPRCxvQ0FBMkMsR0FBUTtJQUMvQyxPQUFPLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLFVBQVUsQ0FBQztBQUMzRCxDQUFDO0FBRkQsZ0VBRUM7QUFRRCxtQ0FBMEMsR0FBUTtJQUM5QyxPQUFPLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLFFBQVEsQ0FBQztBQUN6RCxDQUFDO0FBRkQsOERBRUM7QUFVRCwrQkFBc0MsR0FBUTtJQUMxQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLEtBQUssZ0JBQWdCLElBQUksT0FBTyxHQUFHLENBQUMsU0FBUyxLQUFLLFFBQVEsQ0FBQztBQUM5RSxDQUFDO0FBRkQsc0RBRUMiLCJmaWxlIjoicmVwbGF5L3Byb3h5L21lc3NhZ2VzL2NtZHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIElXb3JrZXJDb21tYW5kIHtcclxuICAgIHR5cGU6ICdtZXRob2QnIHwgJ3Byb3BlcnR5JztcclxuICAgIG1lc3NhZ2VJZDogbnVtYmVyO1xyXG4gICAgY29udGV4dDogc3RyaW5nO1xyXG4gICAgaWQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzV29ya2VyQ29tbWFuZChvYmo6IGFueSk6IG9iaiBpcyBJV29ya2VyQ29tbWFuZCB7XHJcbiAgICByZXR1cm4gJ3R5cGUnIGluIG9iaiAmJiAnbWVzc2FnZUlkJyBpbiBvYmpcclxuICAgICAgICAmJiB0eXBlb2Ygb2JqLm1lc3NhZ2VJZCA9PT0gJ251bWJlcidcclxuICAgICAgICAmJiB0eXBlb2Ygb2JqLmNvbnRleHQgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBvYmouaWQgPT09ICdudW1iZXInO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJV29ya2VyR2V0UHJvcGVydHlDb21tYW5kIGV4dGVuZHMgSVdvcmtlckNvbW1hbmQge1xyXG4gICAgdHlwZTogJ3Byb3BlcnR5JztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzV29ya2VyR2V0UHJvcGVydHlDb21tYW5kKG9iajogYW55KTogb2JqIGlzIElXb3JrZXJHZXRQcm9wZXJ0eUNvbW1hbmQge1xyXG4gICAgcmV0dXJuIGlzV29ya2VyQ29tbWFuZChvYmopICYmIG9iai50eXBlID09PSAncHJvcGVydHknO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJV29ya2VyQ2FsbE1ldGhvZENvbW1hbmQgZXh0ZW5kcyBJV29ya2VyQ29tbWFuZCB7XHJcbiAgICB0eXBlOiAnbWV0aG9kJztcclxuICAgIGFyZ3M6IGFueVtdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNXb3JrZXJDYWxsTWV0aG9kQ29tbWFuZChvYmo6IGFueSk6IG9iaiBpcyBJV29ya2VyQ2FsbE1ldGhvZENvbW1hbmQge1xyXG4gICAgcmV0dXJuIGlzV29ya2VyQ29tbWFuZChvYmopICYmIG9iai50eXBlID09PSAnbWV0aG9kJztcclxufVxyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVdvcmtlckNvbW1hbmRSZXN1bHQge1xyXG4gICAgdHlwZTogJ2NvbW1hbmQtcmVzdWx0JztcclxuICAgIG1lc3NhZ2VJZDogbnVtYmVyO1xyXG4gICAgZXJyb3I/OiB0cnVlO1xyXG4gICAgcmVzdWx0OiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1dvcmtlckNvbW1hbmRSZXN1bHQob2JqOiBhbnkpOiBvYmogaXMgSVdvcmtlckNvbW1hbmRSZXN1bHQge1xyXG4gICAgcmV0dXJuIG9iai50eXBlID09PSAnY29tbWFuZC1yZXN1bHQnICYmIHR5cGVvZiBvYmoubWVzc2FnZUlkID09PSAnbnVtYmVyJztcclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/messages/cmds.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/messages/cmds.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./init\"));\n__export(require(\"./protocol\"));\n__export(require(\"./cmds\"));\n__export(require(\"./status\"));\n__export(require(\"./call\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9tZXNzYWdlcy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLDRCQUF1QjtBQUN2QixnQ0FBMkI7QUFDM0IsNEJBQXVCO0FBQ3ZCLDhCQUF5QjtBQUN6Qiw0QkFBdUIiLCJmaWxlIjoicmVwbGF5L3Byb3h5L21lc3NhZ2VzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9pbml0JztcclxuZXhwb3J0ICogZnJvbSAnLi9wcm90b2NvbCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vY21kcyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vc3RhdHVzJztcclxuZXhwb3J0ICogZnJvbSAnLi9jYWxsJztcclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/messages/index.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/messages/index.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isInitializeCommand(obj) {\n    return obj.type === 'initialize' && obj.data instanceof ArrayBuffer && obj.port instanceof MessagePort;\n}\nexports.isInitializeCommand = isInitializeCommand;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9tZXNzYWdlcy9pbml0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBTUEsNkJBQW9DLEdBQVE7SUFDeEMsT0FBTyxHQUFHLENBQUMsSUFBSSxLQUFLLFlBQVksSUFBSSxHQUFHLENBQUMsSUFBSSxZQUFZLFdBQVcsSUFBSSxHQUFHLENBQUMsSUFBSSxZQUFZLFdBQVcsQ0FBQztBQUMzRyxDQUFDO0FBRkQsa0RBRUMiLCJmaWxlIjoicmVwbGF5L3Byb3h5L21lc3NhZ2VzL2luaXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIElJbml0aWFsaXplQ29tbWFuZCB7XHJcbiAgICB0eXBlOiAnaW5pdGlhbGl6ZSc7XHJcbiAgICBwb3J0OiBNZXNzYWdlUG9ydDtcclxuICAgIGRhdGE6IEFycmF5QnVmZmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNJbml0aWFsaXplQ29tbWFuZChvYmo6IGFueSk6IG9iaiBpcyBJSW5pdGlhbGl6ZUNvbW1hbmQge1xyXG4gICAgcmV0dXJuIG9iai50eXBlID09PSAnaW5pdGlhbGl6ZScgJiYgb2JqLmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciAmJiBvYmoucG9ydCBpbnN0YW5jZW9mIE1lc3NhZ2VQb3J0O1xyXG59XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/messages/init.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/messages/init.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isLoadProtocolMessage(obj) {\n    return obj.type === 'load-protocol';\n}\nexports.isLoadProtocolMessage = isLoadProtocolMessage;\nfunction isLoadProtocolResultMessage(obj) {\n    return obj.type === 'load-protocol-result';\n}\nexports.isLoadProtocolResultMessage = isLoadProtocolResultMessage;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9tZXNzYWdlcy9wcm90b2NvbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU1BLCtCQUFzQyxHQUFRO0lBQzFDLE9BQU8sR0FBRyxDQUFDLElBQUksS0FBSyxlQUFlLENBQUM7QUFDeEMsQ0FBQztBQUZELHNEQUVDO0FBU0QscUNBQTRDLEdBQVE7SUFDaEQsT0FBTyxHQUFHLENBQUMsSUFBSSxLQUFLLHNCQUFzQixDQUFDO0FBQy9DLENBQUM7QUFGRCxrRUFFQyIsImZpbGUiOiJyZXBsYXkvcHJveHkvbWVzc2FnZXMvcHJvdG9jb2wuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGludGVyZmFjZSBJTG9hZFByb3RvY29sTWVzc2FnZSB7XHJcbiAgICB0eXBlOiAnbG9hZC1wcm90b2NvbCc7XHJcbiAgICB2ZXJzaW9uOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0xvYWRQcm90b2NvbE1lc3NhZ2Uob2JqOiBhbnkpOiBvYmogaXMgSUxvYWRQcm90b2NvbE1lc3NhZ2Uge1xyXG4gICAgcmV0dXJuIG9iai50eXBlID09PSAnbG9hZC1wcm90b2NvbCc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElMb2FkUHJvdG9jb2xSZXN1bHRNZXNzYWdlIHtcclxuICAgIHR5cGU6ICdsb2FkLXByb3RvY29sLXJlc3VsdCc7XHJcbiAgICB2ZXJzaW9uOiBudW1iZXI7XHJcbiAgICBjb2RlOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0xvYWRQcm90b2NvbFJlc3VsdE1lc3NhZ2Uob2JqOiBhbnkpOiBvYmogaXMgSUxvYWRQcm90b2NvbFJlc3VsdE1lc3NhZ2Uge1xyXG4gICAgcmV0dXJuIG9iai50eXBlID09PSAnbG9hZC1wcm90b2NvbC1yZXN1bHQnO1xyXG59XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/messages/protocol.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/messages/protocol.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isReplayStatusMessage(obj) {\n    return obj.type === 'replay-status' && typeof obj.status === 'string';\n}\nexports.isReplayStatusMessage = isReplayStatusMessage;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxheS9wcm94eS9tZXNzYWdlcy9zdGF0dXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFPQSwrQkFBc0MsR0FBUTtJQUMxQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLEtBQUssZUFBZSxJQUFJLE9BQU8sR0FBRyxDQUFDLE1BQU0sS0FBSyxRQUFRLENBQUM7QUFDMUUsQ0FBQztBQUZELHNEQUVDIiwiZmlsZSI6InJlcGxheS9wcm94eS9tZXNzYWdlcy9zdGF0dXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIElSZXBsYXlTdGF0dXNNZXNzYWdlIHtcclxuICAgIHR5cGU6ICdyZXBsYXktc3RhdHVzJztcclxuICAgIHN0YXR1czogc3RyaW5nO1xyXG4gICAgY3VycmVudD86IG51bWJlcjtcclxuICAgIHRvdGFsPzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNSZXBsYXlTdGF0dXNNZXNzYWdlKG9iajogYW55KTogb2JqIGlzIElSZXBsYXlTdGF0dXNNZXNzYWdlIHtcclxuICAgIHJldHVybiBvYmoudHlwZSA9PT0gJ3JlcGxheS1zdGF0dXMnICYmIHR5cGVvZiBvYmouc3RhdHVzID09PSAnc3RyaW5nJztcclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/replay/proxy/messages/status.js\n// module id = ../heroprotocol/dist/lib/replay/proxy/messages/status.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FilteredEvents = [\n    'NNet.Game.SLoadingProgressMessage',\n    'NNet.Replay.Tracker.SPlayerStatsEvent',\n    'NNet.Replay.Tracker.SUnitPositionsEvent',\n    'NNet.Game.SUserFinishedLoadingSyncEvent',\n    'NNet.Game.STriggerSoundLengthSyncEvent',\n    'NNet.Game.STriggerMouseMovedEvent',\n    'NNet.Game.SCameraUpdateEvent',\n    'NNet.Game.STriggerSoundOffsetEvent',\n    'NNet.Game.SSelectionDeltaEvent',\n    'NNet.Game.SControlGroupUpdateEvent',\n    'NNet.Game.SCommandManagerStateEvent',\n    'NNet.Game.SCmdUpdateTargetPointEvent',\n    'NNet.Game.SCmdEvent',\n    'NNet.Game.SCmdUpdateTargetUnitEvent',\n    'NNet.Game.STriggerSoundtrackDoneEvent',\n    'NNet.Game.STriggerDialogControlEvent',\n    'NNet.Game.STriggerTransmissionCompleteEvent',\n    'NNet.Game.STriggerTransmissionOffsetEvent',\n    'NNet.Game.STriggerCutsceneEndSceneFiredEvent',\n    'NNet.Game.STriggerTargetModeUpdateEvent',\n    'NNet.Game.SCommandManagerResetEvent',\n    // 'NNet.Game.SHeroTalentTreeSelectedEvent',\n    'NNet.Game.STriggerKeyPressedEvent',\n    'NNet.Game.SUnitClickEvent',\n    //'NNet.Game.SUserOptionsEvent',\n    // tmp\n    'NNet.Game.STriggerPingEvent',\n];\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR5cGVzL2V2ZW50cy9GaWx0ZXJlZEV2ZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFhLFFBQUEsY0FBYyxHQUFhO0lBQ3BDLG1DQUFtQztJQUNuQyx1Q0FBdUM7SUFDdkMseUNBQXlDO0lBRXpDLHlDQUF5QztJQUN6Qyx3Q0FBd0M7SUFDeEMsbUNBQW1DO0lBQ25DLDhCQUE4QjtJQUM5QixvQ0FBb0M7SUFDcEMsZ0NBQWdDO0lBQ2hDLG9DQUFvQztJQUNwQyxxQ0FBcUM7SUFDckMsc0NBQXNDO0lBQ3RDLHFCQUFxQjtJQUNyQixxQ0FBcUM7SUFDckMsdUNBQXVDO0lBQ3ZDLHNDQUFzQztJQUN0Qyw2Q0FBNkM7SUFDN0MsMkNBQTJDO0lBQzNDLDhDQUE4QztJQUM5Qyx5Q0FBeUM7SUFDekMscUNBQXFDO0lBQ3RDLDRDQUE0QztJQUM1QyxtQ0FBbUM7SUFDbkMsMkJBQTJCO0lBQzFCLGdDQUFnQztJQUVoQyxNQUFNO0lBQ04sNkJBQTZCO0NBV2hDLENBQUMiLCJmaWxlIjoidHlwZXMvZXZlbnRzL0ZpbHRlcmVkRXZlbnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEZpbHRlcmVkRXZlbnRzOiBzdHJpbmdbXSA9IFtcclxuICAgICdOTmV0LkdhbWUuU0xvYWRpbmdQcm9ncmVzc01lc3NhZ2UnLFxyXG4gICAgJ05OZXQuUmVwbGF5LlRyYWNrZXIuU1BsYXllclN0YXRzRXZlbnQnLFxyXG4gICAgJ05OZXQuUmVwbGF5LlRyYWNrZXIuU1VuaXRQb3NpdGlvbnNFdmVudCcsXHJcblxyXG4gICAgJ05OZXQuR2FtZS5TVXNlckZpbmlzaGVkTG9hZGluZ1N5bmNFdmVudCcsXHJcbiAgICAnTk5ldC5HYW1lLlNUcmlnZ2VyU291bmRMZW5ndGhTeW5jRXZlbnQnLFxyXG4gICAgJ05OZXQuR2FtZS5TVHJpZ2dlck1vdXNlTW92ZWRFdmVudCcsXHJcbiAgICAnTk5ldC5HYW1lLlNDYW1lcmFVcGRhdGVFdmVudCcsXHJcbiAgICAnTk5ldC5HYW1lLlNUcmlnZ2VyU291bmRPZmZzZXRFdmVudCcsXHJcbiAgICAnTk5ldC5HYW1lLlNTZWxlY3Rpb25EZWx0YUV2ZW50JyxcclxuICAgICdOTmV0LkdhbWUuU0NvbnRyb2xHcm91cFVwZGF0ZUV2ZW50JyxcclxuICAgICdOTmV0LkdhbWUuU0NvbW1hbmRNYW5hZ2VyU3RhdGVFdmVudCcsXHJcbiAgICAnTk5ldC5HYW1lLlNDbWRVcGRhdGVUYXJnZXRQb2ludEV2ZW50JyxcclxuICAgICdOTmV0LkdhbWUuU0NtZEV2ZW50JyxcclxuICAgICdOTmV0LkdhbWUuU0NtZFVwZGF0ZVRhcmdldFVuaXRFdmVudCcsXHJcbiAgICAnTk5ldC5HYW1lLlNUcmlnZ2VyU291bmR0cmFja0RvbmVFdmVudCcsXHJcbiAgICAnTk5ldC5HYW1lLlNUcmlnZ2VyRGlhbG9nQ29udHJvbEV2ZW50JyxcclxuICAgICdOTmV0LkdhbWUuU1RyaWdnZXJUcmFuc21pc3Npb25Db21wbGV0ZUV2ZW50JyxcclxuICAgICdOTmV0LkdhbWUuU1RyaWdnZXJUcmFuc21pc3Npb25PZmZzZXRFdmVudCcsXHJcbiAgICAnTk5ldC5HYW1lLlNUcmlnZ2VyQ3V0c2NlbmVFbmRTY2VuZUZpcmVkRXZlbnQnLFxyXG4gICAgJ05OZXQuR2FtZS5TVHJpZ2dlclRhcmdldE1vZGVVcGRhdGVFdmVudCcsXHJcbiAgICAnTk5ldC5HYW1lLlNDb21tYW5kTWFuYWdlclJlc2V0RXZlbnQnLFxyXG4gICAvLyAnTk5ldC5HYW1lLlNIZXJvVGFsZW50VHJlZVNlbGVjdGVkRXZlbnQnLFxyXG4gICAnTk5ldC5HYW1lLlNUcmlnZ2VyS2V5UHJlc3NlZEV2ZW50JyxcclxuICAgJ05OZXQuR2FtZS5TVW5pdENsaWNrRXZlbnQnLFxyXG4gICAgLy8nTk5ldC5HYW1lLlNVc2VyT3B0aW9uc0V2ZW50JyxcclxuXHJcbiAgICAvLyB0bXBcclxuICAgICdOTmV0LkdhbWUuU1RyaWdnZXJQaW5nRXZlbnQnLFxyXG4gICAvLyAnTk5ldC5SZXBsYXkuVHJhY2tlci5TVW5pdEJvcm5FdmVudCcsXHJcbiAgIC8vICdOTmV0LlJlcGxheS5UcmFja2VyLlNVbml0RGllZEV2ZW50JyxcclxuICAgLy8gJ05OZXQuUmVwbGF5LlRyYWNrZXIuU1VuaXRPd25lckNoYW5nZUV2ZW50JyxcclxuICAgLy8gJ05OZXQuUmVwbGF5LlRyYWNrZXIuU1VuaXRUeXBlQ2hhbmdlRXZlbnQnLFxyXG4gICAvLyAnTk5ldC5SZXBsYXkuVHJhY2tlci5TSGVyb0Jhbm5lZEV2ZW50JyxcclxuICAvLyAgJ05OZXQuUmVwbGF5LlRyYWNrZXIuU0hlcm9QaWNrZWRFdmVudCcsXHJcbiAgIC8vICdOTmV0LlJlcGxheS5UcmFja2VyLlNTdGF0R2FtZUV2ZW50JyxcclxuLy8gLy8gICAnTk5ldC5SZXBsYXkuVHJhY2tlci5TVW5pdFJldml2ZWRFdmVudCcsXHJcbi8vICAgICdOTmV0LlJlcGxheS5UcmFja2VyLlNVcGdyYWRlRXZlbnQnLFxyXG4gLy8gICAnTk5ldC5SZXBsYXkuVHJhY2tlci5TUGxheWVyU2V0dXBFdmVudCdcclxuXTtcclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/types/events/FilteredEvents.js\n// module id = ../heroprotocol/dist/lib/types/events/FilteredEvents.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// tslint:disable:no-empty-interface\nconst IReplayEvent_1 = require(\"./IReplayEvent\");\nexports.MessageEventTypes = [\n    'NNet.Game.SLoadingProgressMessage',\n    'NNet.Game.SPingMessage',\n    'NNet.Game.SChatMessage',\n    'NNet.Game.SPlayerAnnounceMessage',\n    'NNet.Game.SReconnectNotifyMessage'\n];\nfunction isIReplayMessageEvent(obj) {\n    return IReplayEvent_1.isIReplayGameEventBase(obj) && exports.MessageEventTypes.indexOf(obj._event) !== -1;\n}\nexports.isIReplayMessageEvent = isIReplayMessageEvent;\nfunction isISLoadingProgressMessage(obj) {\n    return IReplayEvent_1.isIReplayGameEventBase(obj) && obj._event === 'NNet.Game.SLoadingProgressMessage';\n}\nexports.isISLoadingProgressMessage = isISLoadingProgressMessage;\nfunction isISPingMessage(obj) {\n    return IReplayEvent_1.isIReplayGameEventBase(obj) && obj._event === 'NNet.Game.SPingMessage';\n}\nexports.isISPingMessage = isISPingMessage;\nfunction isISChatMessage(obj) {\n    return IReplayEvent_1.isIReplayGameEventBase(obj) && obj._event === 'NNet.Game.SChatMessage';\n}\nexports.isISChatMessage = isISChatMessage;\nfunction isISPlayerAnnounceMessage(obj) {\n    return IReplayEvent_1.isIReplayGameEventBase(obj) && obj._event === 'NNet.Game.SPlayerAnnounceMessage';\n}\nexports.isISPlayerAnnounceMessage = isISPlayerAnnounceMessage;\nfunction isISReconnectNotifyMessage(obj) {\n    return IReplayEvent_1.isIReplayGameEventBase(obj) && obj._event === 'NNet.Game.SReconnectNotifyMessage';\n}\nexports.isISReconnectNotifyMessage = isISReconnectNotifyMessage;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR5cGVzL2V2ZW50cy9JTWVzc2FnZUV2ZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG9DQUFvQztBQUNwQyxpREFBOEU7QUFHakUsUUFBQSxpQkFBaUIsR0FBYTtJQUN2QyxtQ0FBbUM7SUFDbkMsd0JBQXdCO0lBQ3hCLHdCQUF3QjtJQUN4QixrQ0FBa0M7SUFDbEMsbUNBQW1DO0NBQ3RDLENBQUM7QUFNRiwrQkFBc0MsR0FBUTtJQUMxQyxPQUFPLHFDQUFzQixDQUFDLEdBQUcsQ0FBQyxJQUFJLHlCQUFpQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDdkYsQ0FBQztBQUZELHNEQUVDO0FBT0Qsb0NBQTJDLEdBQVE7SUFDL0MsT0FBTyxxQ0FBc0IsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLG1DQUFtQyxDQUFDO0FBQzdGLENBQUM7QUFGRCxnRUFFQztBQVFELHlCQUFnQyxHQUFRO0lBQ3BDLE9BQU8scUNBQXNCLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyx3QkFBd0IsQ0FBQztBQUNsRixDQUFDO0FBRkQsMENBRUM7QUFRRCx5QkFBZ0MsR0FBUTtJQUNwQyxPQUFPLHFDQUFzQixDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEtBQUssd0JBQXdCLENBQUM7QUFDbEYsQ0FBQztBQUZELDBDQUVDO0FBVUQsbUNBQTBDLEdBQVE7SUFDOUMsT0FBTyxxQ0FBc0IsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLGtDQUFrQyxDQUFDO0FBQzVGLENBQUM7QUFGRCw4REFFQztBQVFELG9DQUEyQyxHQUFRO0lBQy9DLE9BQU8scUNBQXNCLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxtQ0FBbUMsQ0FBQztBQUM3RixDQUFDO0FBRkQsZ0VBRUMiLCJmaWxlIjoidHlwZXMvZXZlbnRzL0lNZXNzYWdlRXZlbnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGU6bm8tZW1wdHktaW50ZXJmYWNlXHJcbmltcG9ydCB7IElSZXBsYXlHYW1lRXZlbnRCYXNlLCBpc0lSZXBsYXlHYW1lRXZlbnRCYXNlIH0gZnJvbSAnLi9JUmVwbGF5RXZlbnQnO1xyXG5pbXBvcnQgeyBJQWJpbGl0eSB9IGZyb20gJy4uL0lCYXNlVHlwZXMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IE1lc3NhZ2VFdmVudFR5cGVzOiBzdHJpbmdbXSA9IFtcclxuICAgICdOTmV0LkdhbWUuU0xvYWRpbmdQcm9ncmVzc01lc3NhZ2UnLFxyXG4gICAgJ05OZXQuR2FtZS5TUGluZ01lc3NhZ2UnLFxyXG4gICAgJ05OZXQuR2FtZS5TQ2hhdE1lc3NhZ2UnLFxyXG4gICAgJ05OZXQuR2FtZS5TUGxheWVyQW5ub3VuY2VNZXNzYWdlJyxcclxuICAgICdOTmV0LkdhbWUuU1JlY29ubmVjdE5vdGlmeU1lc3NhZ2UnXHJcbl07XHJcblxyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlcGxheU1lc3NhZ2VFdmVudCBleHRlbmRzIElSZXBsYXlHYW1lRXZlbnRCYXNlIHsgfVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzSVJlcGxheU1lc3NhZ2VFdmVudChvYmo6IGFueSk6IG9iaiBpcyBJUmVwbGF5TWVzc2FnZUV2ZW50IHtcclxuICAgIHJldHVybiBpc0lSZXBsYXlHYW1lRXZlbnRCYXNlKG9iaikgJiYgTWVzc2FnZUV2ZW50VHlwZXMuaW5kZXhPZihvYmouX2V2ZW50KSAhPT0gLTE7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNMb2FkaW5nUHJvZ3Jlc3NNZXNzYWdlIGV4dGVuZHMgSVJlcGxheU1lc3NhZ2VFdmVudCB7XHJcbiAgICByZWFkb25seSBfZXZlbnQ6ICdOTmV0LkdhbWUuU0xvYWRpbmdQcm9ncmVzc01lc3NhZ2UnO1xyXG4gICAgcmVhZG9ubHkgbV9wcm9ncmVzczogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNJU0xvYWRpbmdQcm9ncmVzc01lc3NhZ2Uob2JqOiBhbnkpOiBvYmogaXMgSVNMb2FkaW5nUHJvZ3Jlc3NNZXNzYWdlIHtcclxuICAgIHJldHVybiBpc0lSZXBsYXlHYW1lRXZlbnRCYXNlKG9iaikgJiYgb2JqLl9ldmVudCA9PT0gJ05OZXQuR2FtZS5TTG9hZGluZ1Byb2dyZXNzTWVzc2FnZSc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNQaW5nTWVzc2FnZSBleHRlbmRzIElSZXBsYXlNZXNzYWdlRXZlbnQge1xyXG4gICAgcmVhZG9ubHkgX2V2ZW50OiAnTk5ldC5HYW1lLlNQaW5nTWVzc2FnZSc7XHJcbiAgICByZWFkb25seSBtX3JlY2lwaWVudDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbV9wb2ludDogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNJU1BpbmdNZXNzYWdlKG9iajogYW55KTogb2JqIGlzIElTUGluZ01lc3NhZ2Uge1xyXG4gICAgcmV0dXJuIGlzSVJlcGxheUdhbWVFdmVudEJhc2Uob2JqKSAmJiBvYmouX2V2ZW50ID09PSAnTk5ldC5HYW1lLlNQaW5nTWVzc2FnZSc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNDaGF0TWVzc2FnZSBleHRlbmRzIElSZXBsYXlNZXNzYWdlRXZlbnQge1xyXG4gICAgcmVhZG9ubHkgX2V2ZW50OiAnTk5ldC5HYW1lLlNDaGF0TWVzc2FnZSc7XHJcbiAgICByZWFkb25seSBtX3JlY2lwaWVudDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbV9zdHJpbmc6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzSVNDaGF0TWVzc2FnZShvYmo6IGFueSk6IG9iaiBpcyBJU0NoYXRNZXNzYWdlIHtcclxuICAgIHJldHVybiBpc0lSZXBsYXlHYW1lRXZlbnRCYXNlKG9iaikgJiYgb2JqLl9ldmVudCA9PT0gJ05OZXQuR2FtZS5TQ2hhdE1lc3NhZ2UnO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTUGxheWVyQW5ub3VuY2VNZXNzYWdlIGV4dGVuZHMgSVJlcGxheU1lc3NhZ2VFdmVudCB7XHJcbiAgICByZWFkb25seSBfZXZlbnQ6ICdOTmV0LkdhbWUuU1BsYXllckFubm91bmNlTWVzc2FnZSc7XHJcbiAgICByZWFkb25seSBtX2Fubm91bmNlTGluazogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbV9hbm5vdW5jZW1lbnQ6IHsgQWJpbGl0eTogSUFiaWxpdHkgfTtcclxuICAgIHJlYWRvbmx5IG1fb3RoZXJVbml0VGFnOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtX3VuaXRUYWc6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzSVNQbGF5ZXJBbm5vdW5jZU1lc3NhZ2Uob2JqOiBhbnkpOiBvYmogaXMgSVNQbGF5ZXJBbm5vdW5jZU1lc3NhZ2Uge1xyXG4gICAgcmV0dXJuIGlzSVJlcGxheUdhbWVFdmVudEJhc2Uob2JqKSAmJiBvYmouX2V2ZW50ID09PSAnTk5ldC5HYW1lLlNQbGF5ZXJBbm5vdW5jZU1lc3NhZ2UnO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU1JlY29ubmVjdE5vdGlmeU1lc3NhZ2UgZXh0ZW5kcyBJUmVwbGF5TWVzc2FnZUV2ZW50IHtcclxuICAgIHJlYWRvbmx5IF9ldmVudDogJ05OZXQuR2FtZS5TUmVjb25uZWN0Tm90aWZ5TWVzc2FnZSc7XHJcbiAgICByZWFkb25seSBtX3N0YXR1czogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNJU1JlY29ubmVjdE5vdGlmeU1lc3NhZ2Uob2JqOiBhbnkpOiBvYmogaXMgSVNSZWNvbm5lY3ROb3RpZnlNZXNzYWdlIHtcclxuICAgIHJldHVybiBpc0lSZXBsYXlHYW1lRXZlbnRCYXNlKG9iaikgJiYgb2JqLl9ldmVudCA9PT0gJ05OZXQuR2FtZS5TUmVjb25uZWN0Tm90aWZ5TWVzc2FnZSc7XHJcbn0iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/types/events/IMessageEvents.js\n// module id = ../heroprotocol/dist/lib/types/events/IMessageEvents.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isIReplayEvent(obj) {\n    return '_event' in obj && obj._event.indexOf('NNet.') === 0;\n}\nexports.isIReplayEvent = isIReplayEvent;\nfunction isIReplayUserEvent(obj) {\n    return isIReplayEvent(obj) && '_userid' in obj;\n}\nexports.isIReplayUserEvent = isIReplayUserEvent;\nfunction isIReplayGameEventBase(obj) {\n    return isIReplayEvent(obj) && obj._event.indexOf('NNet.Game.') === 0;\n}\nexports.isIReplayGameEventBase = isIReplayGameEventBase;\nfunction isIReplayTrackerEvent(obj) {\n    return isIReplayEvent(obj) && obj._event.indexOf('NNet.Replay.Tracker.') === 0;\n}\nexports.isIReplayTrackerEvent = isIReplayTrackerEvent;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR5cGVzL2V2ZW50cy9JUmVwbGF5RXZlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFRQSx3QkFBK0IsR0FBUTtJQUNuQyxPQUFPLFFBQVEsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2hFLENBQUM7QUFGRCx3Q0FFQztBQU9ELDRCQUFtQyxHQUFRO0lBQ3ZDLE9BQU8sY0FBYyxDQUFDLEdBQUcsQ0FBQyxJQUFJLFNBQVMsSUFBSSxHQUFHLENBQUM7QUFDbkQsQ0FBQztBQUZELGdEQUVDO0FBS0QsZ0NBQXVDLEdBQVE7SUFDM0MsT0FBTyxjQUFjLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3pFLENBQUM7QUFGRCx3REFFQztBQUlELCtCQUFzQyxHQUFRO0lBQzFDLE9BQU8sY0FBYyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ25GLENBQUM7QUFGRCxzREFFQyIsImZpbGUiOiJ0eXBlcy9ldmVudHMvSVJlcGxheUV2ZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGU6bm8tZW1wdHktaW50ZXJmYWNlXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlcGxheUV2ZW50IHtcclxuICAgIHJlYWRvbmx5IF9ldmVudDogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgX2V2ZW50aWQ6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IF9nYW1lbG9vcDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgX2JpdHM6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzSVJlcGxheUV2ZW50KG9iajogYW55KTogb2JqIGlzIElSZXBsYXlFdmVudCB7XHJcbiAgICByZXR1cm4gJ19ldmVudCcgaW4gb2JqICYmIG9iai5fZXZlbnQuaW5kZXhPZignTk5ldC4nKSA9PT0gMDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUmVwbGF5VXNlckV2ZW50IGV4dGVuZHMgSVJlcGxheUV2ZW50IHtcclxuICAgIHJlYWRvbmx5IF91c2VyaWQ6IHsgbV91c2VySWQ6IG51bWJlciB9O1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzSVJlcGxheVVzZXJFdmVudChvYmo6IGFueSk6IG9iaiBpcyBJUmVwbGF5VXNlckV2ZW50IHtcclxuICAgIHJldHVybiBpc0lSZXBsYXlFdmVudChvYmopICYmICdfdXNlcmlkJyBpbiBvYmo7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZXBsYXlHYW1lRXZlbnRCYXNlIGV4dGVuZHMgSVJlcGxheVVzZXJFdmVudCB7IH1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0lSZXBsYXlHYW1lRXZlbnRCYXNlKG9iajogYW55KTogb2JqIGlzIElSZXBsYXlHYW1lRXZlbnRCYXNlIHtcclxuICAgIHJldHVybiBpc0lSZXBsYXlFdmVudChvYmopICYmIG9iai5fZXZlbnQuaW5kZXhPZignTk5ldC5HYW1lLicpID09PSAwO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElSZXBsYXlUcmFja2VyRXZlbnQgZXh0ZW5kcyBJUmVwbGF5RXZlbnQgeyB9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNJUmVwbGF5VHJhY2tlckV2ZW50KG9iajogYW55KTogb2JqIGlzIElSZXBsYXlUcmFja2VyRXZlbnQge1xyXG4gICAgcmV0dXJuIGlzSVJlcGxheUV2ZW50KG9iaikgJiYgb2JqLl9ldmVudC5pbmRleE9mKCdOTmV0LlJlcGxheS5UcmFja2VyLicpID09PSAwO1xyXG59XHJcblxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/types/events/IReplayEvent.js\n// module id = ../heroprotocol/dist/lib/types/events/IReplayEvent.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst IReplayEvent_1 = require(\"./IReplayEvent\");\nfunction isSUnitBornEvent(obj) {\n    return IReplayEvent_1.isIReplayTrackerEvent(obj) && obj._event === 'NNet.Replay.Tracker.SUnitBornEvent';\n}\nexports.isSUnitBornEvent = isSUnitBornEvent;\nfunction isSScoreResultEvent(obj) {\n    return IReplayEvent_1.isIReplayTrackerEvent(obj) && obj._event === 'NNet.Replay.Tracker.SScoreResultEvent';\n}\nexports.isSScoreResultEvent = isSScoreResultEvent;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR5cGVzL2V2ZW50cy9JVHJhY2tlckV2ZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUE0RTtBQWE1RSwwQkFBaUMsR0FBUTtJQUNyQyxPQUFPLG9DQUFxQixDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEtBQUssb0NBQW9DLENBQUM7QUFDN0YsQ0FBQztBQUZELDRDQUVDO0FBaUJELDZCQUFvQyxHQUFRO0lBQ3hDLE9BQU8sb0NBQXFCLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyx1Q0FBdUMsQ0FBQztBQUNoRyxDQUFDO0FBRkQsa0RBRUMiLCJmaWxlIjoidHlwZXMvZXZlbnRzL0lUcmFja2VyRXZlbnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSVJlcGxheVRyYWNrZXJFdmVudCwgaXNJUmVwbGF5VHJhY2tlckV2ZW50IH0gZnJvbSAnLi9JUmVwbGF5RXZlbnQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU1VuaXRCb3JuRXZlbnQgZXh0ZW5kcyBJUmVwbGF5VHJhY2tlckV2ZW50IHtcclxuICAgIHJlYWRvbmx5IF9ldmVudDogJ05OZXQuUmVwbGF5LlRyYWNrZXIuU1VuaXRCb3JuRXZlbnQnO1xyXG4gICAgcmVhZG9ubHkgbV9jb250cm9sUGxheWVySWQ6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IG1fdW5pdFRhZ0luZGV4OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtX3VuaXRUYWdSZWN5Y2xlOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtX3VuaXRUeXBlTmFtZTogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgbV91cGtlZXBQbGF5ZXJJZDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbV94OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtX3k6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzU1VuaXRCb3JuRXZlbnQob2JqOiBhbnkpOiBvYmogaXMgSVNVbml0Qm9ybkV2ZW50IHtcclxuICAgIHJldHVybiBpc0lSZXBsYXlUcmFja2VyRXZlbnQob2JqKSAmJiBvYmouX2V2ZW50ID09PSAnTk5ldC5SZXBsYXkuVHJhY2tlci5TVW5pdEJvcm5FdmVudCc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElLZXlWYWx1ZUFycmF5PFQ+e1xyXG4gICAgcmVhZG9ubHkgbV9uYW1lOiBzdHJpbmc7XHJcbiAgICByZWFkb25seSBtX3ZhbHVlczogVFtdW107XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJU2NvcmVSZXN1bHQge1xyXG4gICAgcmVhZG9ubHkgbV90aW1lOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBtX3ZhbHVlOiBudW1iZXI7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTU2NvcmVSZXN1bHRFdmVudCB7XHJcbiAgICByZWFkb25seSBtX2luc3RhbmNlTGlzdDogSUtleVZhbHVlQXJyYXk8SVNjb3JlUmVzdWx0PltdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTU2NvcmVSZXN1bHRFdmVudChvYmo6IGFueSk6IG9iaiBpcyBJU1Njb3JlUmVzdWx0RXZlbnQge1xyXG4gICAgcmV0dXJuIGlzSVJlcGxheVRyYWNrZXJFdmVudChvYmopICYmIG9iai5fZXZlbnQgPT09ICdOTmV0LlJlcGxheS5UcmFja2VyLlNTY29yZVJlc3VsdEV2ZW50JztcclxufSJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/types/events/ITrackerEvents.js\n// module id = ../heroprotocol/dist/lib/types/events/ITrackerEvents.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./IReplayEvent\"));\n__export(require(\"./IMessageEvents\"));\n__export(require(\"./FilteredEvents\"));\n__export(require(\"./ITrackerEvents\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR5cGVzL2V2ZW50cy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLG9DQUErQjtBQUMvQixzQ0FBaUM7QUFDakMsc0NBQWlDO0FBQ2pDLHNDQUFpQyIsImZpbGUiOiJ0eXBlcy9ldmVudHMvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL0lSZXBsYXlFdmVudCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSU1lc3NhZ2VFdmVudHMnO1xyXG5leHBvcnQgKiBmcm9tICcuL0ZpbHRlcmVkRXZlbnRzJztcclxuZXhwb3J0ICogZnJvbSAnLi9JVHJhY2tlckV2ZW50cyc7XHJcblxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/types/events/index.js\n// module id = ../heroprotocol/dist/lib/types/events/index.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./events\"));\n__export(require(\"./type\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR5cGVzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBS0EsOEJBQXlCO0FBQ3pCLDRCQUF1QiIsImZpbGUiOiJ0eXBlcy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vSUhlcm9Qcm90b2NvbCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSUJhc2VUeXBlcyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSVJlcGxheUhlYWRlcic7XHJcbmV4cG9ydCAqIGZyb20gJy4vSVJlcGxheUluaXREYXRhJztcclxuZXhwb3J0ICogZnJvbSAnLi9JUmVwbGF5RGV0YWlscyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vZXZlbnRzJztcclxuZXhwb3J0ICogZnJvbSAnLi90eXBlJztcclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/types/index.js\n// module id = ../heroprotocol/dist/lib/types/index.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Type = Function;\nfunction isType(v) {\n    return typeof v === 'function';\n}\nexports.isType = isType;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR5cGVzL3R5cGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBYSxRQUFBLElBQUksR0FBRyxRQUFRLENBQUM7QUFFN0IsZ0JBQXVCLENBQU07SUFDM0IsT0FBTyxPQUFPLENBQUMsS0FBSyxVQUFVLENBQUM7QUFDakMsQ0FBQztBQUZELHdCQUVDIiwiZmlsZSI6InR5cGVzL3R5cGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgVHlwZSA9IEZ1bmN0aW9uO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVHlwZSh2OiBhbnkpOiB2IGlzIFR5cGU8YW55PiB7XHJcbiAgcmV0dXJuIHR5cGVvZiB2ID09PSAnZnVuY3Rpb24nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFR5cGU8VD4gZXh0ZW5kcyBGdW5jdGlvbiB7IG5ldyAoLi4uYXJnczogYW55W10pOiBUOyB9XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/dist/lib/types/type.js\n// module id = ../heroprotocol/dist/lib/types/type.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MPQUserDataHeader {\n    constructor(data) {\n        this.magic = data.toString('utf8', 0, 4);\n        this.userDataSize = data.readUInt32LE(4);\n        this.mpqHeaderOffset = data.readUInt32LE(8);\n        this.userDataHeaderSize = data.readUInt32LE(12);\n    }\n}\nexports.MPQUserDataHeader = MPQUserDataHeader;\nclass MPQFileHeader {\n    constructor(data) {\n        if (data) {\n            this.magic = data.toString('utf8', 0, 4);\n            this.headerSize = data.readUInt32LE(4);\n            this.archiveSize = data.readUInt32LE(8);\n            this.formatVersion = data.readUInt16LE(12);\n            this.sectorSizeShift = data.readUInt16LE(14);\n            this.hashTableOffset = data.readUInt32LE(16);\n            this.blockTableOffset = data.readUInt32LE(20);\n            this.hashTableEntries = data.readUInt32LE(24);\n            this.blockTableEntries = data.readUInt32LE(28);\n        }\n    }\n}\nexports.MPQFileHeader = MPQFileHeader;\nclass MPQFileHeaderExt extends MPQFileHeader {\n    constructor(data) {\n        super(null);\n        this.extendedBlockTableOffset = data.readIntLE(0, 8);\n        this.hashTableOffsetHigh = data.readInt8(8);\n        this.blockTableOffsetHigh = data.readInt8(10);\n    }\n}\nexports.MPQFileHeaderExt = MPQFileHeaderExt;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGEvaGVhZGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBO0lBT0ksWUFBbUIsSUFBWTtRQUMzQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3BELENBQUM7Q0FFSjtBQWRELDhDQWNDO0FBRUQ7SUFZSSxZQUFtQixJQUFZO1FBQzNCLElBQUksSUFBSSxFQUFFO1lBQ04sSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDekMsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3ZDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzdDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM3QyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM5QyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM5QyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNsRDtJQUNMLENBQUM7Q0FDSjtBQXpCRCxzQ0F5QkM7QUFFRCxzQkFBOEIsU0FBUSxhQUFhO0lBSy9DLFlBQW1CLElBQVk7UUFDM0IsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ1osSUFBSSxDQUFDLHdCQUF3QixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2xELENBQUM7Q0FDSjtBQVhELDRDQVdDIiwiZmlsZSI6ImRhdGEvaGVhZGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgTVBRVXNlckRhdGFIZWFkZXIge1xyXG4gICAgcHVibGljIG1hZ2ljOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdXNlckRhdGFTaXplOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgbXBxSGVhZGVyT2Zmc2V0OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgdXNlckRhdGFIZWFkZXJTaXplOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgY29udGVudDogQnVmZmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcclxuICAgICAgICB0aGlzLm1hZ2ljID0gZGF0YS50b1N0cmluZygndXRmOCcsIDAsIDQpO1xyXG4gICAgICAgIHRoaXMudXNlckRhdGFTaXplID0gZGF0YS5yZWFkVUludDMyTEUoNCk7XHJcbiAgICAgICAgdGhpcy5tcHFIZWFkZXJPZmZzZXQgPSBkYXRhLnJlYWRVSW50MzJMRSg4KTtcclxuICAgICAgICB0aGlzLnVzZXJEYXRhSGVhZGVyU2l6ZSA9IGRhdGEucmVhZFVJbnQzMkxFKDEyKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNUFFGaWxlSGVhZGVyIHtcclxuICAgIHB1YmxpYyBtYWdpYzogc3RyaW5nO1xyXG4gICAgcHVibGljIGhlYWRlclNpemU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBhcmNoaXZlU2l6ZTogbnVtYmVyO1xyXG4gICAgcHVibGljIHNlY3RvclNpemVTaGlmdDogbnVtYmVyO1xyXG4gICAgcHVibGljIGhhc2hUYWJsZU9mZnNldDogbnVtYmVyO1xyXG4gICAgcHVibGljIGJsb2NrVGFibGVPZmZzZXQ6IG51bWJlcjtcclxuICAgIHB1YmxpYyBoYXNoVGFibGVFbnRyaWVzOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgYmxvY2tUYWJsZUVudHJpZXM6IG51bWJlcjtcclxuICAgIHB1YmxpYyBvZmZzZXQ6IG51bWJlcjtcclxuICAgIHB1YmxpYyBmb3JtYXRWZXJzaW9uOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgdXNlckRhdGFIZWFkZXI6IE1QUVVzZXJEYXRhSGVhZGVyO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFnaWMgPSBkYXRhLnRvU3RyaW5nKCd1dGY4JywgMCwgNCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyU2l6ZSA9IGRhdGEucmVhZFVJbnQzMkxFKDQpO1xyXG4gICAgICAgICAgICB0aGlzLmFyY2hpdmVTaXplID0gZGF0YS5yZWFkVUludDMyTEUoOCk7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0VmVyc2lvbiA9IGRhdGEucmVhZFVJbnQxNkxFKDEyKTtcclxuICAgICAgICAgICAgdGhpcy5zZWN0b3JTaXplU2hpZnQgPSBkYXRhLnJlYWRVSW50MTZMRSgxNCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGFzaFRhYmxlT2Zmc2V0ID0gZGF0YS5yZWFkVUludDMyTEUoMTYpO1xyXG4gICAgICAgICAgICB0aGlzLmJsb2NrVGFibGVPZmZzZXQgPSBkYXRhLnJlYWRVSW50MzJMRSgyMCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGFzaFRhYmxlRW50cmllcyA9IGRhdGEucmVhZFVJbnQzMkxFKDI0KTtcclxuICAgICAgICAgICAgdGhpcy5ibG9ja1RhYmxlRW50cmllcyA9IGRhdGEucmVhZFVJbnQzMkxFKDI4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNUFFGaWxlSGVhZGVyRXh0IGV4dGVuZHMgTVBRRmlsZUhlYWRlciB7XHJcbiAgICBwdWJsaWMgZXh0ZW5kZWRCbG9ja1RhYmxlT2Zmc2V0OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgaGFzaFRhYmxlT2Zmc2V0SGlnaDogbnVtYmVyO1xyXG4gICAgcHVibGljIGJsb2NrVGFibGVPZmZzZXRIaWdoOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xyXG4gICAgICAgIHN1cGVyKG51bGwpO1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kZWRCbG9ja1RhYmxlT2Zmc2V0ID0gZGF0YS5yZWFkSW50TEUoMCwgOCk7XHJcbiAgICAgICAgdGhpcy5oYXNoVGFibGVPZmZzZXRIaWdoID0gZGF0YS5yZWFkSW50OCg4KTtcclxuICAgICAgICB0aGlzLmJsb2NrVGFibGVPZmZzZXRIaWdoID0gZGF0YS5yZWFkSW50OCgxMCk7XHJcbiAgICB9XHJcbn1cclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/data/headers.js\n// module id = ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/data/headers.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./headers\"));\n__export(require(\"./tables\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGEvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSwrQkFBMEI7QUFDMUIsOEJBQXlCIiwiZmlsZSI6ImRhdGEvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2hlYWRlcnMnO1xyXG5leHBvcnQgKiBmcm9tICcuL3RhYmxlcyc7XHJcbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/data/index.js\n// module id = ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/data/index.js\n// module chunks = main","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MPQHashTableEntry {\n    constructor(data) {\n        this.hashA = data.readUInt32BE(0);\n        this.hashB = data.readUInt32BE(4);\n        this.locale = data.readUInt16BE(8);\n        this.platform = data.readUInt16BE(10);\n        this.blockTableIndex = data.readUInt32BE(12);\n    }\n}\nexports.MPQHashTableEntry = MPQHashTableEntry;\nclass MPQBlockTableEntry {\n    constructor(data) {\n        this.offset = data.readUInt32BE(0);\n        this.archivedSize = data.readUInt32BE(4);\n        this.size = data.readUInt32BE(8);\n        this.flags = data.readUInt32BE(12);\n    }\n}\nexports.MPQBlockTableEntry = MPQBlockTableEntry;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGEvdGFibGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUE7SUFPSSxZQUFtQixJQUFZO1FBQzNCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDakQsQ0FBQztDQUNKO0FBZEQsOENBY0M7QUFFRDtJQUtJLFlBQW1CLElBQVk7UUFDM0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7Q0FDSjtBQVhELGdEQVdDIiwiZmlsZSI6ImRhdGEvdGFibGVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNUFFIYXNoVGFibGVFbnRyeSB7XHJcbiAgICBwdWJsaWMgaGFzaEE6IG51bWJlcjtcclxuICAgIHB1YmxpYyBoYXNoQjogbnVtYmVyO1xyXG4gICAgcHVibGljIGxvY2FsZTogbnVtYmVyO1xyXG4gICAgcHVibGljIHBsYXRmb3JtOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgYmxvY2tUYWJsZUluZGV4OiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMuaGFzaEEgPSBkYXRhLnJlYWRVSW50MzJCRSgwKTtcclxuICAgICAgICB0aGlzLmhhc2hCID0gZGF0YS5yZWFkVUludDMyQkUoNCk7XHJcbiAgICAgICAgdGhpcy5sb2NhbGUgPSBkYXRhLnJlYWRVSW50MTZCRSg4KTtcclxuICAgICAgICB0aGlzLnBsYXRmb3JtID0gZGF0YS5yZWFkVUludDE2QkUoMTApO1xyXG4gICAgICAgIHRoaXMuYmxvY2tUYWJsZUluZGV4ID0gZGF0YS5yZWFkVUludDMyQkUoMTIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTVBRQmxvY2tUYWJsZUVudHJ5IHtcclxuICAgIHB1YmxpYyBvZmZzZXQ6IG51bWJlcjtcclxuICAgIHB1YmxpYyBhcmNoaXZlZFNpemU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBzaXplOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZmxhZ3M6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcclxuICAgICAgICB0aGlzLm9mZnNldCA9IGRhdGEucmVhZFVJbnQzMkJFKDApO1xyXG4gICAgICAgIHRoaXMuYXJjaGl2ZWRTaXplID0gZGF0YS5yZWFkVUludDMyQkUoNCk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gZGF0YS5yZWFkVUludDMyQkUoOCk7XHJcbiAgICAgICAgdGhpcy5mbGFncyA9IGRhdGEucmVhZFVJbnQzMkJFKDEyKTtcclxuICAgIH1cclxufVxyXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/data/tables.js\n// module id = ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/data/tables.js\n// module chunks = main","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./data\"));\n__export(require(\"./mpq\"));\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNEJBQXVCO0FBQ3ZCLDJCQUFzQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGF0YSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vbXBxJzsiXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/index.js\n// module id = ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/index.js\n// module chunks = main","\"use strict\";\n/**************************************************************\n    This is a port of\n    https://github.com/nexus-devtools/empeeku\n    to typescript and modifies it to run in the browser\n\r\n    https://github.com/nexus-devtools/empeeku is a fork of\n    https://github.com/Farof/mpyqjs which is a port of\n    https://github.com/eagleflo/mpyq\n  \r\n ***************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// tslint:disable:no-bitwise\nconst buffer_1 = require(\"buffer\");\nconst Long = require(\"long\");\nconst data_1 = require(\"./data\");\nconst compress = require(\"keybase-compressjs\");\nconst hashTypes = {\n    'TABLE_OFFSET': 0,\n    'HASH_A': 1,\n    'HASH_B': 2,\n    'TABLE': 3\n};\nconst MPQ_FILE_IMPLODE = 0x00000100;\nconst MPQ_FILE_COMPRESS = 0x00000200;\nconst MPQ_FILE_ENCRYPTED = 0x00010000;\nconst MPQ_FILE_FIX_KEY = 0x00020000;\nconst MPQ_FILE_SINGLE_UNIT = 0x01000000;\nconst MPQ_FILE_DELETE_MARKER = 0x02000000;\nconst MPQ_FILE_SECTOR_CRC = 0x04000000;\nconst MPQ_FILE_EXISTS = 0x80000000;\nclass MPQArchive {\n    constructor(mpqData, listFiles = true) {\n        this._encryptionTable = (function () {\n            const table = {};\n            let index;\n            let seed = new Long.fromValue(0x00100001, true);\n            for (let i = 0; i < 256; i++) {\n                index = i;\n                for (let j = 0; j < 5; j++) {\n                    seed = seed.mul(125).add(3).mod(0x2AAAAB);\n                    const t1 = seed.and(0xFFFF).shiftLeft(0x10);\n                    seed = seed.mul(125).add(3).mod(0x2AAAAB);\n                    const t2 = seed.and(0xFFFF);\n                    table[index] = t1.or(t2).toNumber();\n                    index += 0x100;\n                }\n            }\n            return table;\n        })();\n        this._data = new buffer_1.Buffer(mpqData);\n        this._header = this._readHeader();\n        this._hashTable = this._readTable('hash');\n        this._blockTable = this._readTable('block');\n        if (listFiles) {\n            const listFile = this.readFile('(listfile)');\n            if (listFile) {\n                this._files = listFile.toString('utf-8').trim().split('\\r\\n');\n            }\n        }\n    }\n    get files() {\n        return this._files;\n    }\n    get header() {\n        return this._header;\n    }\n    printHeaders() {\n        console.info('MPQ archive header');\n        console.info('------------------');\n        for (const key in this._header) {\n            if (key === 'userDataHeader') {\n                continue;\n            }\n            console.info(key + ' - ' + this._header[key]);\n        }\n        if (this._header.userDataHeader) {\n            console.info();\n            console.info('MPQ user data header');\n            console.info('--------------------');\n            console.info();\n            // tslint:disable-next-line:forin\n            for (const key in this._header.userDataHeader) {\n                console.info(key + ' - ' + this._header.userDataHeader[key]);\n            }\n            console.info();\n        }\n    }\n    printHashTable() {\n        console.info('MPQ archive hash table');\n        console.info('----------------------');\n        console.info('Hash A\\t\\tHash B\\t\\tLocl\\tPlat\\tBlockIdx');\n        const format = [8, 8, 4, 4, 8];\n        this._hashTable.forEach(entry => {\n            console.info(Object.keys(entry).map((key, i) => {\n                return this._formatWord(entry[key], format[i]);\n            }).join('\\t'));\n        });\n        console.info();\n    }\n    ;\n    printBlockTable() {\n        console.info('MPQ archive block table');\n        console.info('-----------------------');\n        console.info('Offset\\t\\tArchSize\\tRealSize\\tFlags');\n        this._blockTable.forEach(entry => {\n            console.info([\n                this._formatWord(entry.offset, 8),\n                this._leadingChar(entry.archivedSize, ' ', 8),\n                this._leadingChar(entry.size, ' ', 8),\n                this._formatWord(entry.flags, 8)\n            ].join('\\t'));\n        });\n        console.info();\n    }\n    ;\n    readFile(filename, forceDecompress = false) {\n        function decompress(data) {\n            const compressionType = data.readUInt8(0);\n            if (compressionType === 0) {\n                return data;\n            }\n            else if (compressionType === 2) {\n                throw new Error('Unsupported compression type \"zlib\".');\n            }\n            else if (compressionType === 16) {\n                return new buffer_1.Buffer(compress.Bzip2.decompressFile(data.slice(1)));\n            }\n            else {\n                throw new Error('Unsupported compression type.');\n            }\n        }\n        const hashEntry = this._getHashTableEntry(filename);\n        if (!hashEntry) {\n            return null;\n        }\n        const blockEntry = this._blockTable[hashEntry.blockTableIndex];\n        if (blockEntry.flags & MPQ_FILE_EXISTS) {\n            if (blockEntry.archivedSize === 0) {\n                return null;\n            }\n            const offset = blockEntry.offset + this._header.offset;\n            let fileData = this._data.slice(offset, offset + blockEntry.archivedSize);\n            if (blockEntry.flags & MPQ_FILE_ENCRYPTED) {\n                throw new Error('Encryption is not supported yet');\n            }\n            if (!(blockEntry.flags & MPQ_FILE_SINGLE_UNIT)) {\n                const sectorSize = 512 << this._header.sectorSizeShift;\n                let sectors = Math.trunc(blockEntry.size / sectorSize) + 1;\n                let crc;\n                if (blockEntry.flags & MPQ_FILE_SECTOR_CRC) {\n                    crc = true;\n                    sectors += 1;\n                }\n                else {\n                    crc = false;\n                }\n                const positions = [];\n                for (let i = 0; i < (sectors + 1); i++) {\n                    positions[i] = fileData.readUInt32LE(4 * i);\n                }\n                const ln = positions.length - (crc ? 2 : 1);\n                let result = new buffer_1.Buffer(0);\n                let sectorBytesLeft = blockEntry.size;\n                for (let i = 0; i < ln; i++) {\n                    let sector = fileData.slice(positions[i], positions[i + 1]);\n                    if ((blockEntry.flags & MPQ_FILE_COMPRESS) && (forceDecompress || (sectorBytesLeft > sector.length))) {\n                        sector = decompress(sector);\n                    }\n                    sectorBytesLeft -= sector.length;\n                    result = buffer_1.Buffer.concat([result, sector]);\n                }\n                fileData = result;\n            }\n            else {\n                if ((blockEntry.flags & MPQ_FILE_COMPRESS) && (forceDecompress || (blockEntry.size > blockEntry.archivedSize))) {\n                    fileData = decompress(fileData);\n                }\n            }\n            return fileData;\n        }\n    }\n    _leadingChar(str, ch, ln, after = false) {\n        str = '' + str;\n        while (str.length < ln) {\n            str = after ? str + ch : ch + str;\n        }\n        return str;\n    }\n    _formatWord(data, ln) {\n        return this._leadingChar(data.toString(16).toUpperCase(), '0', ln);\n    }\n    _getHashTableEntry(filename) {\n        const hashA = this._hash(filename, 'HASH_A');\n        const hashB = this._hash(filename, 'HASH_B');\n        for (const entry of this._hashTable) {\n            if (entry.hashA === hashA && entry.hashB === hashB) {\n                return entry;\n            }\n            ;\n        }\n        return undefined;\n    }\n    _readHeader() {\n        let header;\n        const head = this._data.toString('utf-8', 0, 4);\n        if (head === 'MPQ\\x1a') {\n            header = this._readMPQHeader();\n            header.offset = 0;\n        }\n        else if (head === 'MPQ\\x1b') {\n            const userDataHeader = this._readMPQUserDataHeader();\n            header = this._readMPQHeader(userDataHeader.mpqHeaderOffset);\n            header.offset = userDataHeader.mpqHeaderOffset;\n            header.userDataHeader = userDataHeader;\n        }\n        else {\n            throw new Error('Invalid MPQ file header');\n        }\n        return header;\n    }\n    _readMPQUserDataHeader() {\n        const data = this._data.slice(0, 16);\n        const header = new data_1.MPQUserDataHeader(data);\n        header.content = this._data.slice(16, 16 + header.userDataHeaderSize);\n        return header;\n    }\n    _readMPQHeader(offset = 0) {\n        let data = this._data.slice(offset, offset + 32);\n        let header = new data_1.MPQFileHeader(data);\n        if (header.formatVersion === 1) {\n            data = this._data.slice(offset + 32, offset + 32 + 12);\n            header = Object.assign(new data_1.MPQFileHeaderExt(data), header);\n        }\n        return header;\n    }\n    _readTable(tableType) {\n        let type;\n        switch (tableType) {\n            case 'hash':\n                type = data_1.MPQHashTableEntry;\n                break;\n            case 'block':\n                type = type = data_1.MPQBlockTableEntry;\n                break;\n        }\n        const tableOffset = this._header[tableType + 'TableOffset'];\n        const tableEntries = this._header[tableType + 'TableEntries'];\n        const key = this._hash('(' + tableType + ' table)', 'TABLE');\n        let data = this._data.slice(tableOffset + this._header.offset, tableOffset + this._header.offset + tableEntries * 16);\n        data = this._decrypt(data, key);\n        const entries = [];\n        for (let i = 0; i < tableEntries; i++) {\n            entries[i] = new type(data.slice(i * 16, i * 16 + 16));\n        }\n        return entries;\n    }\n    _hash(value, hashType) {\n        let seed1 = new Long.fromValue(0x7FED7FED, true);\n        let seed2 = new Long.fromValue(0xEEEEEEEE, true);\n        let result;\n        let ch;\n        for (ch of value.toUpperCase()) {\n            if (isNaN(parseInt(ch, 10))) {\n                ch = ch.codePointAt(0);\n            }\n            result = new Long.fromValue(this._encryptionTable[(hashTypes[hashType] << 8) + ch], true);\n            seed1 = result.xor(seed1.add(seed2)).and(0xFFFFFFFF);\n            seed2 = seed1.add(seed2).add(ch).add(seed2.shiftLeft(5)).add(3).and(0xFFFFFFFF);\n        }\n        return seed1.toNumber();\n    }\n    _decrypt(data, key) {\n        const result = new buffer_1.Buffer(data.length);\n        const ln = data.length / 4;\n        let seed1 = new Long.fromValue(key, true);\n        let seed2 = new Long.fromValue(0xEEEEEEEE, true);\n        for (let i = 0; i < ln; i++) {\n            // tslint:disable-next-line:no-bitwise\n            seed2 = seed2.add(this._encryptionTable[0x400 + (seed1 & 0xFF)]);\n            seed2 = seed2.and(0xFFFFFFFF);\n            let value = new Long.fromValue(data.readUInt32LE(i * 4), true);\n            value = value.xor(seed1.add(seed2)).and(0xFFFFFFFF);\n            seed1 = seed1.xor(-1).shiftLeft(0x15).add(0x11111111).or(seed1.shiftRight(0x0B));\n            seed1 = seed1.and(0xFFFFFFFF);\n            seed2 = value.add(seed2).add(seed2.shiftLeft(5)).add(3).and(0xFFFFFFFF);\n            result.writeUInt32BE(value.toNumber(), i * 4);\n        }\n        return result;\n    }\n}\nexports.MPQArchive = MPQArchive;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2pGLEtBQUssR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzlCLEtBQUssR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4RSxNQUFNLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDakQ7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0NBQ0o7QUF0UkQsZ0NBc1JDIiwiZmlsZSI6Im1wcS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgVGhpcyBpcyBhIHBvcnQgb2YgIFxyXG4gICAgaHR0cHM6Ly9naXRodWIuY29tL25leHVzLWRldnRvb2xzL2VtcGVla3UgXHJcbiAgICB0byB0eXBlc2NyaXB0IGFuZCBtb2RpZmllcyBpdCB0byBydW4gaW4gdGhlIGJyb3dzZXJcclxuXHJcbiAgICBodHRwczovL2dpdGh1Yi5jb20vbmV4dXMtZGV2dG9vbHMvZW1wZWVrdSBpcyBhIGZvcmsgb2YgXHJcbiAgICBodHRwczovL2dpdGh1Yi5jb20vRmFyb2YvbXB5cWpzIHdoaWNoIGlzIGEgcG9ydCBvZlxyXG4gICAgaHR0cHM6Ly9naXRodWIuY29tL2VhZ2xlZmxvL21weXFcclxuICBcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8vIHRzbGludDpkaXNhYmxlOm5vLWJpdHdpc2VcclxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcclxuaW1wb3J0ICogYXMgTG9uZyBmcm9tICdsb25nJztcclxuaW1wb3J0IHsgTVBRVXNlckRhdGFIZWFkZXIsIE1QUUZpbGVIZWFkZXIsIE1QUUZpbGVIZWFkZXJFeHQsIE1QUUJsb2NrVGFibGVFbnRyeSwgTVBRSGFzaFRhYmxlRW50cnkgfSBmcm9tICcuL2RhdGEnO1xyXG5pbXBvcnQgKiBhcyBjb21wcmVzcyBmcm9tICdrZXliYXNlLWNvbXByZXNzanMnO1xyXG5cclxuY29uc3QgaGFzaFR5cGVzID0ge1xyXG4gICAgJ1RBQkxFX09GRlNFVCc6IDAsXHJcbiAgICAnSEFTSF9BJzogMSxcclxuICAgICdIQVNIX0InOiAyLFxyXG4gICAgJ1RBQkxFJzogM1xyXG59O1xyXG5cclxuY29uc3QgTVBRX0ZJTEVfSU1QTE9ERSA9IDB4MDAwMDAxMDA7XHJcbmNvbnN0IE1QUV9GSUxFX0NPTVBSRVNTID0gMHgwMDAwMDIwMDtcclxuY29uc3QgTVBRX0ZJTEVfRU5DUllQVEVEID0gMHgwMDAxMDAwMDtcclxuY29uc3QgTVBRX0ZJTEVfRklYX0tFWSA9IDB4MDAwMjAwMDA7XHJcbmNvbnN0IE1QUV9GSUxFX1NJTkdMRV9VTklUID0gMHgwMTAwMDAwMDtcclxuY29uc3QgTVBRX0ZJTEVfREVMRVRFX01BUktFUiA9IDB4MDIwMDAwMDA7XHJcbmNvbnN0IE1QUV9GSUxFX1NFQ1RPUl9DUkMgPSAweDA0MDAwMDAwO1xyXG5jb25zdCBNUFFfRklMRV9FWElTVFMgPSAweDgwMDAwMDAwO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1QUUFyY2hpdmUge1xyXG5cclxuICAgIHByaXZhdGUgX2RhdGE6IEJ1ZmZlcjtcclxuICAgIHByaXZhdGUgX2hlYWRlcjogTVBRRmlsZUhlYWRlcjtcclxuXHJcbiAgICBwcml2YXRlIF9oYXNoVGFibGU6IE1QUUhhc2hUYWJsZUVudHJ5W107XHJcbiAgICBwcml2YXRlIF9ibG9ja1RhYmxlOiBNUFFCbG9ja1RhYmxlRW50cnlbXTtcclxuXHJcbiAgICBwcml2YXRlIF9maWxlczogc3RyaW5nW107XHJcblxyXG4gICAgcHJpdmF0ZSBfZW5jcnlwdGlvblRhYmxlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCB0YWJsZSA9IHt9O1xyXG4gICAgICAgIGxldCBpbmRleDogbnVtYmVyO1xyXG4gICAgICAgIGxldCBzZWVkID0gbmV3IExvbmcuZnJvbVZhbHVlKDB4MDAxMDAwMDEsIHRydWUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcclxuICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDU7IGorKykge1xyXG4gICAgICAgICAgICAgICAgc2VlZCA9IHNlZWQubXVsKDEyNSkuYWRkKDMpLm1vZCgweDJBQUFBQik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0MSA9IHNlZWQuYW5kKDB4RkZGRikuc2hpZnRMZWZ0KDB4MTApO1xyXG4gICAgICAgICAgICAgICAgc2VlZCA9IHNlZWQubXVsKDEyNSkuYWRkKDMpLm1vZCgweDJBQUFBQik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0MiA9IHNlZWQuYW5kKDB4RkZGRik7XHJcbiAgICAgICAgICAgICAgICB0YWJsZVtpbmRleF0gPSB0MS5vcih0MikudG9OdW1iZXIoKTtcclxuICAgICAgICAgICAgICAgIGluZGV4ICs9IDB4MTAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGFibGU7XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgZmlsZXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maWxlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhlYWRlcigpOiBNUFFGaWxlSGVhZGVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faGVhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihtcHFEYXRhOiBBcnJheUJ1ZmZlciwgbGlzdEZpbGVzID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuX2RhdGEgPSBuZXcgQnVmZmVyKG1wcURhdGEpO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlciA9IHRoaXMuX3JlYWRIZWFkZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faGFzaFRhYmxlID0gdGhpcy5fcmVhZFRhYmxlKCdoYXNoJyk7XHJcbiAgICAgICAgdGhpcy5fYmxvY2tUYWJsZSA9IHRoaXMuX3JlYWRUYWJsZSgnYmxvY2snKTtcclxuXHJcbiAgICAgICAgaWYgKGxpc3RGaWxlcykge1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0RmlsZSA9IHRoaXMucmVhZEZpbGUoJyhsaXN0ZmlsZSknKTtcclxuICAgICAgICAgICAgaWYgKGxpc3RGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9maWxlcyA9IGxpc3RGaWxlLnRvU3RyaW5nKCd1dGYtOCcpLnRyaW0oKS5zcGxpdCgnXFxyXFxuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByaW50SGVhZGVycygpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ01QUSBhcmNoaXZlIGhlYWRlcicpO1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tJyk7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5faGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICd1c2VyRGF0YUhlYWRlcicpIHsgY29udGludWU7IH1cclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKGtleSArICcgLSAnICsgdGhpcy5faGVhZGVyW2tleV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5faGVhZGVyLnVzZXJEYXRhSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ01QUSB1c2VyIGRhdGEgaGVhZGVyJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKCk7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpmb3JpblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl9oZWFkZXIudXNlckRhdGFIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhrZXkgKyAnIC0gJyArIHRoaXMuX2hlYWRlci51c2VyRGF0YUhlYWRlcltrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByaW50SGFzaFRhYmxlKCkge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnTVBRIGFyY2hpdmUgaGFzaCB0YWJsZScpO1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpO1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnSGFzaCBBXFx0XFx0SGFzaCBCXFx0XFx0TG9jbFxcdFBsYXRcXHRCbG9ja0lkeCcpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IFs4LCA4LCA0LCA0LCA4XTtcclxuICAgICAgICB0aGlzLl9oYXNoVGFibGUuZm9yRWFjaChlbnRyeSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhPYmplY3Qua2V5cyhlbnRyeSkubWFwKChrZXksIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mb3JtYXRXb3JkKGVudHJ5W2tleV0sIGZvcm1hdFtpXSk7XHJcbiAgICAgICAgICAgIH0pLmpvaW4oJ1xcdCcpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmluZm8oKTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIHByaW50QmxvY2tUYWJsZSgpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ01QUSBhcmNoaXZlIGJsb2NrIHRhYmxlJyk7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpO1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnT2Zmc2V0XFx0XFx0QXJjaFNpemVcXHRSZWFsU2l6ZVxcdEZsYWdzJyk7XHJcbiAgICAgICAgdGhpcy5fYmxvY2tUYWJsZS5mb3JFYWNoKGVudHJ5ID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKFtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Zvcm1hdFdvcmQoZW50cnkub2Zmc2V0LCA4KSxcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xlYWRpbmdDaGFyKGVudHJ5LmFyY2hpdmVkU2l6ZSwgJyAnLCA4KSxcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xlYWRpbmdDaGFyKGVudHJ5LnNpemUsICcgJywgOCksXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9mb3JtYXRXb3JkKGVudHJ5LmZsYWdzLCA4KVxyXG4gICAgICAgICAgICBdLmpvaW4oJ1xcdCcpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmluZm8oKTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIHJlYWRGaWxlKGZpbGVuYW1lOiBzdHJpbmcsIGZvcmNlRGVjb21wcmVzcyA9IGZhbHNlKTogQnVmZmVyIHtcclxuICAgICAgICBmdW5jdGlvbiBkZWNvbXByZXNzKGRhdGE6IEJ1ZmZlcik6IEJ1ZmZlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzaW9uVHlwZSA9IGRhdGEucmVhZFVJbnQ4KDApO1xyXG4gICAgICAgICAgICBpZiAoY29tcHJlc3Npb25UeXBlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wcmVzc2lvblR5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgY29tcHJlc3Npb24gdHlwZSBcInpsaWJcIi4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wcmVzc2lvblR5cGUgPT09IDE2KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlcihjb21wcmVzcy5CemlwMi5kZWNvbXByZXNzRmlsZShkYXRhLnNsaWNlKDEpKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGNvbXByZXNzaW9uIHR5cGUuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGhhc2hFbnRyeSA9IHRoaXMuX2dldEhhc2hUYWJsZUVudHJ5KGZpbGVuYW1lKTtcclxuICAgICAgICBpZiAoIWhhc2hFbnRyeSkgeyByZXR1cm4gbnVsbDsgfVxyXG4gICAgICAgIGNvbnN0IGJsb2NrRW50cnkgPSB0aGlzLl9ibG9ja1RhYmxlW2hhc2hFbnRyeS5ibG9ja1RhYmxlSW5kZXhdO1xyXG4gICAgICAgIGlmIChibG9ja0VudHJ5LmZsYWdzICYgTVBRX0ZJTEVfRVhJU1RTKSB7XHJcbiAgICAgICAgICAgIGlmIChibG9ja0VudHJ5LmFyY2hpdmVkU2l6ZSA9PT0gMCkgeyByZXR1cm4gbnVsbDsgfVxyXG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBibG9ja0VudHJ5Lm9mZnNldCArIHRoaXMuX2hlYWRlci5vZmZzZXQ7XHJcbiAgICAgICAgICAgIGxldCBmaWxlRGF0YSA9IHRoaXMuX2RhdGEuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBibG9ja0VudHJ5LmFyY2hpdmVkU2l6ZSk7XHJcbiAgICAgICAgICAgIGlmIChibG9ja0VudHJ5LmZsYWdzICYgTVBRX0ZJTEVfRU5DUllQVEVEKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VuY3J5cHRpb24gaXMgbm90IHN1cHBvcnRlZCB5ZXQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIShibG9ja0VudHJ5LmZsYWdzICYgTVBRX0ZJTEVfU0lOR0xFX1VOSVQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWN0b3JTaXplID0gNTEyIDw8IHRoaXMuX2hlYWRlci5zZWN0b3JTaXplU2hpZnQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VjdG9ycyA9IE1hdGgudHJ1bmMoYmxvY2tFbnRyeS5zaXplIC8gc2VjdG9yU2l6ZSkgKyAxO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNyYzogYm9vbGVhbjtcclxuICAgICAgICAgICAgICAgIGlmIChibG9ja0VudHJ5LmZsYWdzICYgTVBRX0ZJTEVfU0VDVE9SX0NSQykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyYyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdG9ycyArPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAoc2VjdG9ycyArIDEpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnNbaV0gPSBmaWxlRGF0YS5yZWFkVUludDMyTEUoNCAqIGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbG4gPSBwb3NpdGlvbnMubGVuZ3RoIC0gKGNyYyA/IDIgOiAxKTtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBuZXcgQnVmZmVyKDApO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlY3RvckJ5dGVzTGVmdCA9IGJsb2NrRW50cnkuc2l6ZTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzZWN0b3IgPSBmaWxlRGF0YS5zbGljZShwb3NpdGlvbnNbaV0sIHBvc2l0aW9uc1tpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYmxvY2tFbnRyeS5mbGFncyAmIE1QUV9GSUxFX0NPTVBSRVNTKSAmJiAoZm9yY2VEZWNvbXByZXNzIHx8IChzZWN0b3JCeXRlc0xlZnQgPiBzZWN0b3IubGVuZ3RoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdG9yID0gZGVjb21wcmVzcyhzZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZWN0b3JCeXRlc0xlZnQgLT0gc2VjdG9yLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBCdWZmZXIuY29uY2F0KFtyZXN1bHQsIHNlY3Rvcl0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmlsZURhdGEgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGJsb2NrRW50cnkuZmxhZ3MgJiBNUFFfRklMRV9DT01QUkVTUykgJiYgKGZvcmNlRGVjb21wcmVzcyB8fCAoYmxvY2tFbnRyeS5zaXplID4gYmxvY2tFbnRyeS5hcmNoaXZlZFNpemUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVEYXRhID0gZGVjb21wcmVzcyhmaWxlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZpbGVEYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9sZWFkaW5nQ2hhcihzdHI6IHN0cmluZyB8IG51bWJlciwgY2g6IHN0cmluZywgbG46IG51bWJlciwgYWZ0ZXIgPSBmYWxzZSk6IHN0cmluZyB7XHJcbiAgICAgICAgc3RyID0gJycgKyBzdHI7XHJcbiAgICAgICAgd2hpbGUgKHN0ci5sZW5ndGggPCBsbikge1xyXG4gICAgICAgICAgICBzdHIgPSBhZnRlciA/IHN0ciArIGNoIDogY2ggKyBzdHI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdHI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZm9ybWF0V29yZChkYXRhOiBudW1iZXIsIGxuOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sZWFkaW5nQ2hhcihkYXRhLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLCAnMCcsIGxuKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBfZ2V0SGFzaFRhYmxlRW50cnkoZmlsZW5hbWU6IHN0cmluZyk6IE1QUUhhc2hUYWJsZUVudHJ5IHtcclxuICAgICAgICBjb25zdCBoYXNoQSA9IHRoaXMuX2hhc2goZmlsZW5hbWUsICdIQVNIX0EnKTtcclxuICAgICAgICBjb25zdCBoYXNoQiA9IHRoaXMuX2hhc2goZmlsZW5hbWUsICdIQVNIX0InKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMuX2hhc2hUYWJsZSkge1xyXG4gICAgICAgICAgICBpZiAoZW50cnkuaGFzaEEgPT09IGhhc2hBICYmIGVudHJ5Lmhhc2hCID09PSBoYXNoQikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3JlYWRIZWFkZXIoKTogTVBRRmlsZUhlYWRlciB7XHJcbiAgICAgICAgbGV0IGhlYWRlcjogTVBRRmlsZUhlYWRlcjtcclxuXHJcbiAgICAgICAgY29uc3QgaGVhZCA9IHRoaXMuX2RhdGEudG9TdHJpbmcoJ3V0Zi04JywgMCwgNCk7XHJcbiAgICAgICAgaWYgKGhlYWQgPT09ICdNUFFcXHgxYScpIHtcclxuICAgICAgICAgICAgaGVhZGVyID0gdGhpcy5fcmVhZE1QUUhlYWRlcigpO1xyXG4gICAgICAgICAgICBoZWFkZXIub2Zmc2V0ID0gMDtcclxuICAgICAgICB9IGVsc2UgaWYgKGhlYWQgPT09ICdNUFFcXHgxYicpIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlckRhdGFIZWFkZXIgPSB0aGlzLl9yZWFkTVBRVXNlckRhdGFIZWFkZXIoKTtcclxuICAgICAgICAgICAgaGVhZGVyID0gdGhpcy5fcmVhZE1QUUhlYWRlcih1c2VyRGF0YUhlYWRlci5tcHFIZWFkZXJPZmZzZXQpO1xyXG4gICAgICAgICAgICBoZWFkZXIub2Zmc2V0ID0gdXNlckRhdGFIZWFkZXIubXBxSGVhZGVyT2Zmc2V0O1xyXG4gICAgICAgICAgICBoZWFkZXIudXNlckRhdGFIZWFkZXIgPSB1c2VyRGF0YUhlYWRlcjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgTVBRIGZpbGUgaGVhZGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVhZE1QUVVzZXJEYXRhSGVhZGVyKCk6IE1QUVVzZXJEYXRhSGVhZGVyIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5fZGF0YS5zbGljZSgwLCAxNik7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gbmV3IE1QUVVzZXJEYXRhSGVhZGVyKGRhdGEpO1xyXG4gICAgICAgIGhlYWRlci5jb250ZW50ID0gdGhpcy5fZGF0YS5zbGljZSgxNiwgMTYgKyBoZWFkZXIudXNlckRhdGFIZWFkZXJTaXplKTtcclxuICAgICAgICByZXR1cm4gaGVhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3JlYWRNUFFIZWFkZXIob2Zmc2V0ID0gMCk6IE1QUUZpbGVIZWFkZXIge1xyXG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5fZGF0YS5zbGljZShvZmZzZXQsIG9mZnNldCArIDMyKTtcclxuICAgICAgICBsZXQgaGVhZGVyID0gbmV3IE1QUUZpbGVIZWFkZXIoZGF0YSk7XHJcbiAgICAgICAgaWYgKGhlYWRlci5mb3JtYXRWZXJzaW9uID09PSAxKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLl9kYXRhLnNsaWNlKG9mZnNldCArIDMyLCBvZmZzZXQgKyAzMiArIDEyKTtcclxuICAgICAgICAgICAgaGVhZGVyID0gPE1QUUZpbGVIZWFkZXI+T2JqZWN0LmFzc2lnbihuZXcgTVBRRmlsZUhlYWRlckV4dChkYXRhKSwgaGVhZGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZWFkVGFibGUodGFibGVUeXBlOiAnaGFzaCcpOiBNUFFIYXNoVGFibGVFbnRyeVtdO1xyXG4gICAgcHJpdmF0ZSBfcmVhZFRhYmxlKHRhYmxlVHlwZTogJ2Jsb2NrJyk6IE1QUUJsb2NrVGFibGVFbnRyeVtdO1xyXG4gICAgcHJpdmF0ZSBfcmVhZFRhYmxlKHRhYmxlVHlwZTogJ2hhc2gnIHwgJ2Jsb2NrJykge1xyXG4gICAgICAgIGxldCB0eXBlOiBhbnk7XHJcbiAgICAgICAgc3dpdGNoICh0YWJsZVR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnaGFzaCc6XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gTVBRSGFzaFRhYmxlRW50cnk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYmxvY2snOlxyXG4gICAgICAgICAgICAgICAgdHlwZSA9IHR5cGUgPSBNUFFCbG9ja1RhYmxlRW50cnk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGFibGVPZmZzZXQgPSB0aGlzLl9oZWFkZXJbdGFibGVUeXBlICsgJ1RhYmxlT2Zmc2V0J107XHJcbiAgICAgICAgY29uc3QgdGFibGVFbnRyaWVzID0gdGhpcy5faGVhZGVyW3RhYmxlVHlwZSArICdUYWJsZUVudHJpZXMnXTtcclxuXHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5faGFzaCgnKCcgKyB0YWJsZVR5cGUgKyAnIHRhYmxlKScsICdUQUJMRScpO1xyXG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5fZGF0YS5zbGljZSh0YWJsZU9mZnNldCArIHRoaXMuX2hlYWRlci5vZmZzZXQsIHRhYmxlT2Zmc2V0ICsgdGhpcy5faGVhZGVyLm9mZnNldCArIHRhYmxlRW50cmllcyAqIDE2KTtcclxuICAgICAgICBkYXRhID0gdGhpcy5fZGVjcnlwdChkYXRhLCBrZXkpO1xyXG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYmxlRW50cmllczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGVudHJpZXNbaV0gPSBuZXcgdHlwZShkYXRhLnNsaWNlKGkgKiAxNiwgaSAqIDE2ICsgMTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVudHJpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaGFzaCh2YWx1ZTogc3RyaW5nLCBoYXNoVHlwZTogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgc2VlZDEgPSBuZXcgTG9uZy5mcm9tVmFsdWUoMHg3RkVEN0ZFRCwgdHJ1ZSk7XHJcbiAgICAgICAgbGV0IHNlZWQyID0gbmV3IExvbmcuZnJvbVZhbHVlKDB4RUVFRUVFRUUsIHRydWUpO1xyXG4gICAgICAgIGxldCByZXN1bHQ6IGFueTtcclxuICAgICAgICBsZXQgY2g6IGFueTtcclxuICAgICAgICBmb3IgKGNoIG9mIHZhbHVlLnRvVXBwZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKHBhcnNlSW50KGNoLCAxMCkpKSB7XHJcbiAgICAgICAgICAgICAgICBjaCA9IGNoLmNvZGVQb2ludEF0KDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBMb25nLmZyb21WYWx1ZSh0aGlzLl9lbmNyeXB0aW9uVGFibGVbKGhhc2hUeXBlc1toYXNoVHlwZV0gPDwgOCkgKyBjaF0sIHRydWUpO1xyXG4gICAgICAgICAgICBzZWVkMSA9IHJlc3VsdC54b3Ioc2VlZDEuYWRkKHNlZWQyKSkuYW5kKDB4RkZGRkZGRkYpO1xyXG4gICAgICAgICAgICBzZWVkMiA9IHNlZWQxLmFkZChzZWVkMikuYWRkKGNoKS5hZGQoc2VlZDIuc2hpZnRMZWZ0KDUpKS5hZGQoMykuYW5kKDB4RkZGRkZGRkYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNlZWQxLnRvTnVtYmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZGVjcnlwdChkYXRhOiBCdWZmZXIsIGtleTogbnVtYmVyKTogQnVmZmVyIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQnVmZmVyKGRhdGEubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBsbiA9IGRhdGEubGVuZ3RoIC8gNDtcclxuICAgICAgICBsZXQgc2VlZDEgPSBuZXcgTG9uZy5mcm9tVmFsdWUoa2V5LCB0cnVlKTtcclxuICAgICAgICBsZXQgc2VlZDIgPSBuZXcgTG9uZy5mcm9tVmFsdWUoMHhFRUVFRUVFRSwgdHJ1ZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1iaXR3aXNlXHJcbiAgICAgICAgICAgIHNlZWQyID0gc2VlZDIuYWRkKHRoaXMuX2VuY3J5cHRpb25UYWJsZVsweDQwMCArIChzZWVkMSAmIDB4RkYpXSk7XHJcbiAgICAgICAgICAgIHNlZWQyID0gc2VlZDIuYW5kKDB4RkZGRkZGRkYpO1xyXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBuZXcgTG9uZy5mcm9tVmFsdWUoZGF0YS5yZWFkVUludDMyTEUoaSAqIDQpLCB0cnVlKTtcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS54b3Ioc2VlZDEuYWRkKHNlZWQyKSkuYW5kKDB4RkZGRkZGRkYpO1xyXG4gICAgICAgICAgICBzZWVkMSA9IHNlZWQxLnhvcigtMSkuc2hpZnRMZWZ0KDB4MTUpLmFkZCgweDExMTExMTExKS5vcihzZWVkMS5zaGlmdFJpZ2h0KDB4MEIpKTtcclxuICAgICAgICAgICAgc2VlZDEgPSBzZWVkMS5hbmQoMHhGRkZGRkZGRik7XHJcbiAgICAgICAgICAgIHNlZWQyID0gdmFsdWUuYWRkKHNlZWQyKS5hZGQoc2VlZDIuc2hpZnRMZWZ0KDUpKS5hZGQoMykuYW5kKDB4RkZGRkZGRkYpO1xyXG4gICAgICAgICAgICByZXN1bHQud3JpdGVVSW50MzJCRSh2YWx1ZS50b051bWJlcigpLCBpICogNCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn1cclxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/mpq.js\n// module id = ../heroprotocol/node_modules/@heroesbrowser/mpq/dist/mpq.js\n// module chunks = main","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/charenc/charenc.js\n// module id = ../heroprotocol/node_modules/charenc/charenc.js\n// module chunks = main","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/crypt/crypt.js\n// module id = ../heroprotocol/node_modules/crypt/crypt.js\n// module chunks = main","if (typeof console.assert !== \"function\") { console.assert = function () {} };\nexports.BWT = require('./outlib/BWT');\nexports.BWTC = require('./outlib/BWTC');\nexports.BitStream = require('./outlib/BitStream');\nexports.Bzip2 = require('./outlib/Bzip2');\nexports.CRC32 = require('./outlib/CRC32');\nexports.Context1Model = require('./outlib/Context1Model');\nexports.DefSumModel = require('./outlib/DefSumModel');\nexports.DeflateDistanceModel = require('./outlib/DeflateDistanceModel');\nexports.Dmc = require('./outlib/Dmc');\nexports.DummyRangeCoder = require('./outlib/DummyRangeCoder');\nexports.FenwickModel = require('./outlib/FenwickModel');\nexports.Huffman = require('./outlib/Huffman');\nexports.HuffmanAllocator = require('./outlib/HuffmanAllocator');\nexports.LogDistanceModel = require('./outlib/LogDistanceModel');\nexports.Lzjb = require('./outlib/Lzjb');\nexports.LzjbR = require('./outlib/LzjbR');\nexports.Lzp3 = require('./outlib/Lzp3');\nexports.MTFModel = require('./outlib/MTFModel');\nexports.NoModel = require('./outlib/NoModel');\nexports.PPM = require('./outlib/PPM');\nexports.RangeCoder = require('./outlib/RangeCoder');\nexports.Simple = require('./outlib/Simple');\nexports.Stream = require('./outlib/Stream');\nexports.Util = require('./outlib/Util');\nexports.freeze = require('./outlib/freeze');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/main2.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/main2.js\n// module chunks = main","/** Burrows-Wheeler transform, computed with the Induced Sorting Suffix Array\n *  construction mechanism (sais).  Code is a port of:\n *    https://sites.google.com/site/yuta256/sais\n *  which is:\n *    Copyright (c) 2008-2010 Yuta Mori All Rights Reserved.\n *  and licensed under an MIT/X11 license.  I generally looked at both\n *  the C and the Java implementations to guide my work.\n *\n * This JavaScript port is:\n *    Copyright (c) 2013 C. Scott Ananian\n * and licensed under GPLv2; see the README at the top level of this package.\n */\nvar libs = [\n\trequire('./freeze'),\n\trequire('./Util')\n];\nvar body_fn = function (freeze, Util) {\n    var ASSERT = console.assert.bind(console);\n\n    // we're dispensing with the \"arbitrary alphabet\" stuff of the source\n    // and just using Uint8Arrays.\n\n    /** Find the start or end of each bucket. */\n    var getCounts = function(T, C, n, k) {\n        var i;\n        for (i = 0; i < k; i++) { C[i] = 0; }\n        for (i = 0; i < n; i++) { C[T[i]]++; }\n    };\n    var getBuckets = function(C, B, k, end) {\n        var i, sum = 0;\n        if (end) {\n            for (i = 0; i < k; i++) { sum += C[i]; B[i] = sum; }\n        } else {\n            for (i = 0; i < k; i++) { sum += C[i]; B[i] = sum - C[i]; }\n        }\n    };\n\n    /** Sort all type LMS suffixes */\n    var LMSsort = function(T, SA, C, B, n, k) {\n        var b, i, j;\n        var c0, c1;\n        /* compute SAl */\n        if (C === B) { getCounts(T, C, n, k); }\n        getBuckets(C, B, k, false); /* find starts of buckets */\n        j = n - 1;\n        b = B[c1 = T[j]];\n        j--;\n        SA[b++] = (T[j] < c1) ? ~j : j;\n        for (i = 0; i < n; i++) {\n            if ((j = SA[i]) > 0) {\n                ASSERT(T[j] >= T[j+1]);\n                if ((c0 = T[j]) !== c1) { B[c1] = b; b = B[c1 = c0]; }\n                ASSERT(i < b);\n                j--;\n                SA[b++] = (T[j] < c1) ? ~j : j;\n                SA[i] = 0;\n            } else if (j < 0) {\n                SA[i] = ~j;\n            }\n        }\n        /* compute SAs */\n        if (C === B) { getCounts(T, C, n, k); }\n        getBuckets(C, B, k, 1); /* find ends of buckets */\n        for (i = n-1, b = B[c1 = 0]; i >= 0; i--) {\n            if ((j = SA[i]) > 0) {\n                ASSERT(T[j] <= T[j+1]);\n                if ((c0 = T[j]) !== c1) { B[c1] = b; b = B[c1 = c0]; }\n                ASSERT(b <= i);\n                j--;\n                SA[--b] = (T[j] > c1) ? ~(j+1) : j;\n                SA[i] = 0;\n            }\n        }\n    };\n\n    var LMSpostproc = function(T, SA, n, m) {\n        var i, j, p, q, plen, qlen, name;\n        var c0, c1;\n        var diff;\n\n        /* compact all the sorted substrings into the first m items of SA\n         * 2*m must not be larger than n (provable) */\n        ASSERT(n > 0);\n        for (i = 0; (p = SA[i]) < 0; i++) { SA[i] = ~p; ASSERT((i+1) < n); }\n        if (i < m) {\n            for (j = i, i++; ; i++) {\n                ASSERT(i < n);\n                if ((p = SA[i]) < 0) {\n                    SA[j++] = ~p; SA[i] = 0;\n                    if (j === m) { break; }\n                }\n            }\n        }\n\n        /* store the length of all substrings */\n        c0 = T[i = j = n - 1];\n        do { c1 = c0; } while ( ((--i) >= 0 ) && ((c0=T[i]) >= c1) );\n        for (; i >= 0; ) {\n            do { c1 = c0; } while ( ((--i) >= 0 ) && ((c0=T[i]) <= c1) );\n            if (i >= 0) {\n                SA[m + ((i + 1) >>> 1)] = j - i; j = i + 1;\n                do { c1 = c0; } while ( ((--i) >= 0 ) && ((c0=T[i]) >= c1) );\n            }\n        }\n\n        /* find the lexicographic names of all substrings */\n        for (i = 0, name = 0, q = n, qlen = 0; i < m; i++) {\n            p = SA[i]; plen = SA[m + (p >>> 1)]; diff = true;\n            if ((plen === qlen) && ((q + plen) < n)) {\n                for (j = 0; (j < plen) && (T[p + j] === T[q + j]); ) { j++; }\n                if (j === plen) { diff = false; }\n            }\n            if (diff) { name++; q = p; qlen = plen; }\n            SA[m + (p >>> 1)] = name;\n        }\n\n        return name;\n    };\n\n    /* compute SA and BWT */\n    var induceSA = function(T, SA, C, B, n, k) {\n        var b, i, j;\n        var c0, c1;\n        /* compute SAl */\n        if (C === B) { getCounts(T, C, n, k); }\n        getBuckets(C, B, k, false); /* find starts of buckets */\n        j = n - 1;\n        b = B[c1 = T[j]];\n        SA[b++] = ((j > 0) && (T[j-1] < c1)) ? ~j : j;\n        for (i = 0; i < n; i++) {\n            j = SA[i]; SA[i] = ~j;\n            if (j > 0) {\n                j--;\n                ASSERT( T[j] >= T[j + 1] );\n                if ((c0 = T[j]) !== c1) { B[c1]  = b; b = B[c1=c0]; }\n                ASSERT( i < b );\n                SA[b++] = ((j > 0) && (T[j-1] < c1)) ? ~j : j;\n            }\n        }\n        /* compute SAs */\n        if (C === B) { getCounts(T, C, n, k); }\n        getBuckets(C, B, k, true); /* find ends of buckets */\n        for (i = n-1, b = B[c1 = 0]; i >= 0; i--) {\n            if ((j = SA[i]) > 0) {\n                j--;\n                ASSERT( T[j] <= T[j + 1] );\n                if ((c0 = T[j]) !== c1) { B[c1] = b; b = B[c1 = c0]; }\n                ASSERT( b <= i );\n                SA[--b] = ((j === 0) || (T[j - 1] > c1)) ? ~j : j;\n            } else {\n                SA[i] = ~j;\n            }\n        }\n    };\n\n    var computeBWT = function(T, SA, C, B, n, k) {\n        var b, i, j, pidx = -1;\n        var c0, c1;\n        /* compute SAl */\n        if (C === B) { getCounts(T, C, n, k); }\n        getBuckets(C, B, k, false); /* find starts of buckets */\n        j = n - 1;\n        b = B[c1 = T[j]];\n        SA[b++] = ((j > 0) && (T[j - 1] < c1)) ? ~j : j;\n        for (i = 0; i < n; i++) {\n            if ((j=SA[i]) > 0) {\n                j--;\n                ASSERT( T[j] >= T[j+1] );\n                SA[i] = ~(c0 = T[j]);\n                if (c0 !== c1) { B[c1] = b; b = B[c1 = c0]; }\n                ASSERT( i < b );\n                SA[b++] = ((j > 0) && (T[j - 1] < c1)) ? ~j : j;\n            } else if (j !== 0) {\n                SA[i] = ~j;\n            }\n        }\n        /* compute SAs */\n        if (C === B) { getCounts(T, C, n, k); }\n        getBuckets(C, B, k, true); /* find ends of buckets */\n        for (i = n-1, b = B[c1 = 0]; i >= 0; i--) {\n            if ((j = SA[i]) > 0) {\n                j--;\n                ASSERT( T[j] <= T[j+1] );\n                SA[i] = c0 = T[j];\n                if (c0 !== c1) { B[c1] = b; b = B[c1 = c0]; }\n                ASSERT( b <= i );\n                SA[--b] = ((j > 0) && (T[j-1] > c1)) ? (~T[j-1]) : j;\n            } else if (j !== 0) {\n                SA[i] = ~j;\n            } else {\n                pidx = i;\n            }\n        }\n        return pidx;\n    };\n\n    /* find the suffix array SA of T[0..n-1] in {0..k-1}^n\n       use a working space (excluding T and SA) of at most 2n+O(1) for a\n       constant alphabet */\n    var SA_IS = function(T, SA, fs, n, k, isbwt) {\n        var C, B, RA;\n        var i, j, b, c, m, p, q, name, pidx = 0, newfs;\n        var c0, c1;\n        var flags = 0;\n\n        // allocate temporary storage [CSA]\n        if (k <= 256) {\n            C = Util.makeS32Buffer(k);\n            if (k <= fs) { B = SA.subarray(n + fs - k); flags = 1; }\n            else { B = Util.makeS32Buffer(k); flags = 3; }\n        } else if (k <= fs) {\n            C = SA.subarray(n + fs - k);\n            if (k <= (fs - k)) { B = SA.subarray(n + fs - k * 2); flags = 0; }\n            else if (k <= 1024) { B = Util.makeS32Buffer(k); flags = 2; }\n            else { B = C; flags = 8; }\n        } else {\n            C = B = Util.makeS32Buffer(k);\n            flags = 4 | 8;\n        }\n\n        /* stage 1: reduce the problem by at least 1/2\n           sort all the LMS-substrings */\n        getCounts(T, C, n, k);\n        getBuckets(C, B, k, true); /* find ends of buckets */\n        for (i = 0; i < n; i++) { SA[i] = 0; }\n        b = -1; i = n - 1; j = n; m = 0; c0 = T[n - 1];\n        do { c1 = c0; } while ((--i >= 0) && ((c0 = T[i]) >= c1));\n        for (; i >= 0 ;) {\n            do { c1 = c0; } while ((--i >= 0) && ((c0 = T[i]) <= c1));\n            if ( i >= 0 ) {\n                if ( b >= 0 ) { SA[b] = j; }\n                b = --B[c1];\n                j = i;\n                ++m;\n                do { c1 = c0; } while ((--i >= 0) && ((c0 = T[i]) >= c1));\n            }\n        }\n\n        if (m > 1) {\n            LMSsort(T, SA, C, B, n, k);\n            name = LMSpostproc(T, SA, n, m);\n        } else if (m === 1) {\n            SA[b] = j + 1;\n            name = 1;\n        } else {\n            name = 0;\n        }\n\n        /* stage 2: solve the reduced problem\n           recurse if names are not yet unique */\n        if(name < m) {\n            if((flags & 4) !== 0) { C = null; B = null; }\n            if((flags & 2) !== 0) { B = null; }\n            newfs = (n + fs) - (m * 2);\n            if((flags & (1 | 4 | 8)) === 0) {\n                if((k + name) <= newfs) { newfs -= k; }\n                else { flags |= 8; }\n            }\n            ASSERT( (n >>> 1) <= (newfs + m) );\n            for (i = m + (n >>> 1) - 1, j = m * 2 + newfs - 1; m <= i; i--) {\n                if(SA[i] !== 0) { SA[j--] = SA[i] - 1; }\n            }\n            RA = SA.subarray(m + newfs);\n            SA_IS(RA, SA, newfs, m, name, false);\n            RA = null;\n\n            i = n - 1; j = m * 2 - 1; c0 = T[n - 1];\n            do { c1 = c0; } while ((--i >= 0) && ((c0 = T[i]) >= c1));\n            for (; i >= 0 ;) {\n                do { c1 = c0; } while ((--i >= 0) && ((c0 = T[i]) <= c1));\n                if ( i >= 0 ) {\n                    SA[j--] = i + 1;\n                    do { c1 = c0; } while ((--i >= 0) && ((c0 = T[i]) >= c1));\n                }\n            }\n\n            for (i = 0; i < m; i++) { SA[i] = SA[m + SA[i]]; }\n            if((flags & 4) !== 0) { C = B = Util.makeS32Buffer(k); }\n            if((flags & 2) !== 0) { B = Util.makeS32Buffer(k); }\n        }\n\n        /* stage 3: induce the result for the original problem */\n        if((flags & 8) !== 0) { getCounts(T, C, n, k); }\n        /* put all left-most S characters into their buckets */\n        if (m > 1) {\n            getBuckets(C, B, k, true); /* find ends of buckets */\n            i = m - 1; j = n; p = SA[m - 1]; c1 = T[p];\n            do {\n                q = B[c0 = c1];\n                while (q < j) { SA[--j] = 0; }\n                do {\n                    SA[--j] = p;\n                    if(--i < 0) { break; }\n                    p = SA[i];\n                } while((c1 = T[p]) === c0);\n            } while (i >= 0 );\n            while ( j > 0 ) { SA[--j] = 0; }\n        }\n        if (!isbwt) { induceSA(T, SA, C, B, n, k); }\n        else { pidx = computeBWT(T, SA, C, B, n, k); }\n        C = null; B = null;\n        return pidx;\n    };\n\n    var BWT = Object.create(null);\n    /** SA should be a Int32Array (signed!); T can be any typed array.\n     *  alphabetSize is optional if T is an Uint8Array or Uint16Array. */\n    BWT.suffixsort = function(T, SA, n, alphabetSize) {\n        ASSERT( T && SA && T.length >= n && SA.length >= n );\n        if (n <= 1) {\n            if (n === 1) { SA[0] = 0; }\n            return 0;\n        }\n        if (!alphabetSize) {\n            if (T.BYTES_PER_ELEMENT === 1) { alphabetSize = 256; }\n            else if (T.BYTES_PER_ELEMENT === 2) { alphabetSize = 65536; }\n            else throw new Error('Need to specify alphabetSize');\n        }\n        ASSERT( alphabetSize > 0 );\n        if (T.BYTES_PER_ELEMENT) {\n            ASSERT( alphabetSize <= (1 << (T.BYTES_PER_ELEMENT*8) ) );\n        }\n        return SA_IS(T, SA, 0, n, alphabetSize, false);\n    };\n    /** Burrows-Wheeler Transform.\n        A should be Int32Array (signed!); T can be any typed array.\n        U is the same type as T (it is used for output).\n        alphabetSize is optional if T is an Uint8Array or Uint16Array.\n        ASSUMES STRING IS TERMINATED WITH AN EOF CHARACTER.\n    */\n    BWT.bwtransform = function(T, U, A, n, alphabetSize) {\n        var i, pidx;\n        ASSERT( T && U && A );\n        ASSERT( T.length >= n && U.length >= n && A.length >= n );\n        if (n <= 1) {\n            if (n === 1) { U[0] = T[0]; }\n            return n;\n        }\n        if (!alphabetSize) {\n            if (T.BYTES_PER_ELEMENT === 1) { alphabetSize = 256; }\n            else if (T.BYTES_PER_ELEMENT === 2) { alphabetSize = 65536; }\n            else throw new Error('Need to specify alphabetSize');\n        }\n        ASSERT( alphabetSize > 0 );\n        if (T.BYTES_PER_ELEMENT) {\n            ASSERT( alphabetSize <= (1 << (T.BYTES_PER_ELEMENT*8) ) );\n        }\n        pidx = SA_IS(T, A, 0, n, alphabetSize, true);\n        U[0] = T[n - 1];\n        for (i = 0; i < pidx ; i++) { U[i + 1] = A[i]; }\n        for (i += 1; i < n; i++) { U[i] = A[i]; }\n        return pidx + 1;\n    };\n    /** Reverses transform above. (ASSUMED STRING IS TERMINATED WITH EOF.) */\n    BWT.unbwtransform = function(T, U, LF, n, pidx) {\n        var C = Util.makeU32Buffer(256);\n        var i, t;\n        for (i=0; i<256; i++) { C[i] = 0; }\n        for (i=0; i<n; i++) { LF[i] = C[T[i]]++; }\n        for (i=0, t=0; i<256; i++) { t += C[i]; C[i] = t - C[i]; }\n        for (i=n-1, t=0; i>=0; i--) {\n            t = LF[t] + C[U[i]=T[t]];\n            t += (t<pidx) ? 1 : 0;\n        }\n        C = null;\n    };\n\n    /** Burrows-Wheeler Transform.\n        A should be Int32Array (signed!); T can be any typed array.\n        U is the same type as T (it is used for output).\n        alphabetSize is optional if T is an Uint8Array or Uint16Array.\n        ASSUMES STRING IS CYCLIC.\n        (XXX: this is twice as inefficient as I'd like! [CSA])\n    */\n    BWT.bwtransform2 = function(T, U, n, alphabetSize) {\n        var i, j, pidx = 0;\n        ASSERT( T && U );\n        ASSERT( T.length >= n && U.length >= n );\n        if (n <= 1) {\n            if (n === 1) { U[0] = T[0]; }\n            return 0;\n        }\n        if (!alphabetSize) {\n            if (T.BYTES_PER_ELEMENT === 1) { alphabetSize = 256; }\n            else if (T.BYTES_PER_ELEMENT === 2) { alphabetSize = 65536; }\n            else throw new Error('Need to specify alphabetSize');\n        }\n        ASSERT( alphabetSize > 0 );\n        if (T.BYTES_PER_ELEMENT) {\n            ASSERT( alphabetSize <= (1 << (T.BYTES_PER_ELEMENT*8) ) );\n        }\n        // double length of T\n        var TT;\n        if (T.length >= n*2) {\n            TT = T; // do it in place if possible\n        } else if (alphabetSize <= 256) {\n            TT = Util.makeU8Buffer(n*2);\n        } else if (alphabetSize <= 65536) {\n            TT = Util.makeU16Buffer(n*2);\n        } else {\n            TT = Util.makeU32Buffer(n*2);\n        }\n        if (TT!==T) {\n            for (i=0; i<n; i++) { TT[i] = T[i]; }\n        }\n        for (i=0; i<n; i++) { TT[n+i] = TT[i]; }\n        // sort doubled string\n        var A = Util.makeS32Buffer(n*2);\n        SA_IS(TT, A, 0, n*2, alphabetSize, false);\n        for (i=0, j=0; i<2*n; i++) {\n            var s = A[i];\n            if (s < n) {\n                if (s === 0) { pidx = j; }\n                if (--s < 0) { s = n-1; }\n                U[j++] = T[s];\n            }\n        }\n        ASSERT(j===n);\n        return pidx;\n    };\n\n    return freeze(BWT);\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/BWT.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/BWT.js\n// module chunks = main","/* A simple bzip-like BWT compressor with a range encoder; written as a\n * self-test of the BWT package. */\nvar libs = [\n\trequire('./freeze'),\n\trequire('./BWT'),\n\trequire('./DefSumModel'),\n\trequire('./FenwickModel'),\n\trequire('./LogDistanceModel'),\n\trequire('./NoModel'),\n\trequire('./RangeCoder'),\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (freeze, BWT, DefSumModel, FenwickModel, LogDistanceModel, NoModel, RangeCoder, Stream, Util) {\n    var EOF = Stream.EOF;\n\n    var F_PROB_MAX  = 0xFF00;\n    var F_PROB_INCR = 0x0100;\n\n    BWTC = Object.create(null);\n    BWTC.MAGIC = \"bwtc\";\n    BWTC.compressFile = Util.compressFileHelper(BWTC.MAGIC, function(input, output, size, props, finalByte) {\n        var encoder = new RangeCoder(output);\n        encoder.encodeStart(finalByte, 1);\n\n        var blockSize = 9;\n        if (typeof(props)==='number' && props >= 1 && props <= 9) {\n            blockSize = props;\n        }\n        encoder.encodeByte(blockSize);\n        var fast = (blockSize <= 5);\n        blockSize *= 100000;\n\n        var block = Util.makeU8Buffer(blockSize);\n        var readBlock = function() {\n            var pos;\n            for (pos=0; pos < blockSize; ) {\n                var ch = input.readByte();\n                if (ch < 0) { break; }\n                block[pos++] = ch;\n            }\n            return pos;\n        };\n        var U = Util.makeU8Buffer(blockSize);\n        var A = Util.makeS32Buffer(blockSize);\n        var M = Util.makeU8Buffer(256); // move to front array\n        var bitModelFactory = NoModel.factory(encoder);\n        var lenModel = new LogDistanceModel(blockSize, 0,\n                                            bitModelFactory,\n                                            bitModelFactory);\n        var length, b, c, pidx, i, j;\n        do {\n            length = readBlock();\n            if (length === 0) { break; }\n            // indicate that there's another block comin'\n            // and encode the length of the block if necessary\n            if (length === block.length) {\n                encoder.encodeFreq(1, 0, 3); // \"full size block\"\n                b = block;\n            } else {\n                encoder.encodeFreq(1, 1, 3); // \"short block\"\n                lenModel.encode(length);\n                b = block.subarray(0, length);\n            }\n            pidx = BWT.bwtransform(b, U, A, length, 256);\n            lenModel.encode(pidx); // starting index\n            // encode the alphabet subset used\n            var useTree = Util.makeU16Buffer(512);\n            for (i=0; i<length; i++) {\n                c = U[i];\n                useTree[256+c] = 1;\n            }\n            for (i=255; i>0; i--) { // sum all the way up the tree\n                useTree[i] = useTree[2*i] + useTree[2*i + 1];\n            }\n            useTree[0] = 1; // sentinel\n            for (i=1; i<512; i++) {\n                var parent = i>>>1;\n                var full = 1 << (9-Util.fls(i));\n                if (useTree[parent] === 0 || useTree[parent] === (full*2)) {\n                    /* already known full/empty */\n                } else if (i >= 256) {\n                    encoder.encodeBit(useTree[i]); // leaf node\n                } else {\n                    var v = useTree[i];\n                    v = (v===0) ? 0 : (v===full) ? 2 : 1;\n                    encoder.encodeFreq(1, v, 3);\n                }\n            }\n            // remap symbols to this subset\n            var alphabetSize = 0;\n            for (i=0; i<256; i++) {\n                if (useTree[256+i]) { // symbol in use\n                    M[alphabetSize++] = i;\n                }\n            }\n            useTree = null;\n            // MTF encoding of U\n            for (i=0; i<length; i++) {\n                c = U[i];\n                for (j=0; j<alphabetSize; j++) {\n                    if (M[j] === c) {\n                        break;\n                    }\n                }\n                console.assert(j<alphabetSize);\n                U[i] = j;\n                // move to front\n                for (; j>0; j--) {\n                    M[j] = M[j-1];\n                }\n                M[0] = c;\n            }\n            // RLE/range encoding\n            var model = new FenwickModel(encoder, alphabetSize+1,\n                                         F_PROB_MAX, F_PROB_INCR);\n            if (fast) { model = new DefSumModel(encoder, alphabetSize+1); }\n            var runLength = 0;\n            var emitLastRun = function() {\n                // binary encode runs of zeros\n                while (runLength !== 0) {\n                    if (runLength&1) {\n                        model.encode(0); // RUNA\n                        runLength-=1;\n                    } else {\n                        model.encode(1); // RUNB\n                        runLength-=2;\n                    }\n                    runLength >>>= 1;\n                }\n            };\n            for (i=0; i<length; i++) {\n                c = U[i];\n                if (c === 0) {\n                    runLength++;\n                } else {\n                    emitLastRun();\n                    model.encode(c+1);\n                    // reset for next\n                    runLength = 0;\n                }\n            }\n            emitLastRun();\n            // done with this block!\n        } while (length === block.length);\n\n        encoder.encodeFreq(1, 2, 3); // \"no more blocks\"\n        encoder.encodeFinish();\n    }, true);\n\n    BWTC.decompressFile = Util.decompressFileHelper(BWTC.MAGIC, function(input, output, size) {\n        var decoder = new RangeCoder(input);\n        decoder.decodeStart(true/* already read the extra byte */);\n        var blockSize = decoder.decodeByte();\n        console.assert(blockSize >= 1 && blockSize <= 9);\n        var fast = (blockSize <= 5);\n        blockSize *= 100000;\n\n        var block = Util.makeU8Buffer(blockSize);\n        var U = Util.makeU8Buffer(blockSize);\n        var A = Util.makeS32Buffer(blockSize);\n        var M = Util.makeU8Buffer(256); // move to front array\n        var bitModelFactory = NoModel.factory(decoder);\n        var lenModel = new LogDistanceModel(blockSize, 0,\n                                            bitModelFactory,\n                                            bitModelFactory);\n        var b, length, i, j, c;\n        while (true) {\n            var blockIndicator = decoder.decodeCulFreq(3);\n            decoder.decodeUpdate(1, blockIndicator, 3);\n            if (blockIndicator === 0) { // full-length block\n                length = blockSize;\n                b = block;\n            } else if (blockIndicator === 1) { // short block\n                length = lenModel.decode();\n                b = block.subarray(0, length);\n            } else if (blockIndicator === 2) { // all done, no more blocks\n                break;\n            }\n            // read starting index for unBWT\n            var pidx = lenModel.decode();\n            // decode the alphabet subset used\n            var useTree = Util.makeU16Buffer(512);\n            useTree[0] = 1; // sentinel\n            for (i=1; i<512; i++) {\n                var parent = i>>>1;\n                var full = 1 << (9-Util.fls(i));\n                if (useTree[parent] === 0 || useTree[parent] === (full*2)) {\n                    /* already known full/empty */\n                    useTree[i] = useTree[parent] >>> 1;\n                } else if (i >= 256) {\n                    useTree[i] = decoder.decodeBit(); // leaf node\n                } else {\n                    var v = decoder.decodeCulFreq(3);\n                    decoder.decodeUpdate(1, v, 3);\n                    useTree[i] = (v===2) ? full : v;\n                }\n            }\n            // remap symbols to this subset\n            var alphabetSize = 0;\n            for (i=0; i<256; i++) {\n                if (useTree[256+i]) { // symbol in use\n                    M[alphabetSize++] = i;\n                }\n            }\n            useTree = null;\n            // RLE/range decoding\n            var model = new FenwickModel(decoder, alphabetSize+1,\n                                         F_PROB_MAX, F_PROB_INCR);\n            if (fast) { model = new DefSumModel(decoder, alphabetSize+1, true);}\n            var val = 1; // repeat count\n            for (i=0; i<length; ) {\n                c = model.decode();\n                if (c===0) {\n                    for (j=0; j<val; j++) { b[i++] = 0; }\n                    val *= 2;\n                } else if (c===1) {\n                    for (j=0; j<val; j++) { b[i++] = 0; b[i++] = 0; }\n                    val *= 2;\n                } else {\n                    val = 1;\n                    b[i++] = c-1;\n                }\n            }\n            // MTF decode\n            for (i=0; i<length; i++) {\n                j = b[i];\n                b[i] = c = M[j];\n                // move to front\n                for (; j>0; j--) {\n                    M[j] = M[j-1];\n                }\n                M[0] = c;\n            }\n            // unBWT\n            BWT.unbwtransform(block, U, A, length, pidx);\n            // emit!\n            output.write(U, 0, length);\n        }\n        decoder.decodeFinish();\n    });\n\n    return BWTC;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/BWTC.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/BWTC.js\n// module chunks = main","/** Big-Endian Bit Stream, implemented on top of a (normal byte) stream. */\nvar libs = [\n\trequire('./Stream')\n];\nvar body_fn = function (Stream) {\n\n    var BitStream = function(stream) {\n        (function() {\n            var bufferByte = 0x100; // private var for readers\n            this.readBit = function() {\n                if ((bufferByte & 0xFF) === 0) {\n                    var ch = stream.readByte();\n                    if (ch === Stream.EOF) {\n                        this._eof = true;\n                        return ch; /* !!! */\n                    }\n                    bufferByte = (ch << 1) | 1;\n                }\n                var bit = (bufferByte & 0x100) ? 1 : 0;\n                bufferByte <<= 1;\n                return bit;\n            };\n            // seekable iff the provided stream is\n            this.seekBit = function(pos) {\n                var n_byte = pos >>> 3;\n                var n_bit = pos - (n_byte*8);\n                this.seek(n_byte);\n                this._eof = false;\n                this.readBits(n_bit);\n            };\n            this.tellBit = function() {\n                var pos = stream.tell() * 8;\n                var b = bufferByte;\n                while ((b & 0xFF) !== 0) {\n                    pos--;\n                    b <<= 1;\n                }\n                return pos;\n            };\n            // implement byte stream interface as well.\n            this.readByte = function() {\n                if ((bufferByte & 0xFF) === 0) {\n                    return stream.readByte();\n                }\n                return this.readBits(8);\n            };\n            this.seek = function(pos) {\n                stream.seek(pos);\n                bufferByte = 0x100;\n            };\n        }).call(this);\n        (function() {\n            var bufferByte = 1; // private var for writers\n            this.writeBit = function(b) {\n                bufferByte <<= 1;\n                if (b) { bufferByte |= 1; }\n                if (bufferByte & 0x100) {\n                    stream.writeByte(bufferByte & 0xFF);\n                    bufferByte = 1;\n                }\n            };\n            // implement byte stream interface as well\n            this.writeByte = function(_byte) {\n                if (bufferByte===1) {\n                    stream.writeByte(_byte);\n                } else {\n                    stream.writeBits(8, _byte);\n                }\n            };\n            this.flush = function() {\n                while (bufferByte !== 1) {\n                    this.writeBit(0);\n                }\n                if (stream.flush) { stream.flush(); }\n            };\n        }).call(this);\n    };\n    // inherit read/write methods from Stream.\n    BitStream.EOF = Stream.EOF;\n    BitStream.prototype = Object.create(Stream.prototype);\n    // bit chunk read/write\n    BitStream.prototype.readBits = function(n) {\n        var i, r = 0, b;\n        if (n > 31) {\n            r = this.readBits(n-16)*0x10000; // fp multiply, not shift\n            return r + this.readBits(16);\n        }\n        for (i = 0; i < n; i++) {\n            r <<= 1; // this could make a negative value if n>31\n            // bits read past EOF are all zeros!\n            if (this.readBit() > 0) { r++; }\n        }\n        return r;\n    };\n    BitStream.prototype.writeBits = function(n, value) {\n        if (n > 32) {\n            var low = (value & 0xFFFF);\n            var high = (value - low) / (0x10000); // fp division, not shift\n            this.writeBits(n-16, high);\n            this.writeBits(16, low);\n            return;\n        }\n        var i;\n        for (i = n-1; i >= 0; i--) {\n            this.writeBit( (value >>> i) & 1 );\n        }\n    };\n\n    return BitStream;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/BitStream.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/BitStream.js\n// module chunks = main","/*\nAn implementation of Bzip2 de/compression, including the ability to\nseek within bzip2 data.\n\nCopyright (C) 2013 C. Scott Ananian\nCopyright (C) 2012 Eli Skeggs\nCopyright (C) 2011 Kevin Kwok\n\nThis library is free software; you can redistribute it and/or\nmodify it under the terms of the GNU Lesser General Public\nLicense as published by the Free Software Foundation; either\nversion 2.1 of the License, or (at your option) any later version.\n\nThis library is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\nLesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public\nLicense along with this library; if not, see\nhttp://www.gnu.org/licenses/lgpl-2.1.html\n\nAdapted from node-bzip, copyright 2012 Eli Skeggs.\nAdapted from bzip2.js, copyright 2011 Kevin Kwok (antimatter15@gmail.com).\n\nBased on micro-bunzip by Rob Landley (rob@landley.net).\n\nBased on bzip2 decompression code by Julian R Seward (jseward@acm.org),\nwhich also acknowledges contributions by Mike Burrows, David Wheeler,\nPeter Fenwick, Alistair Moffat, Radford Neal, Ian H. Witten,\nRobert Sedgewick, and Jon L. Bentley.\n\nBWT implementation based on work by Yuta Mori; see BWT.js for details.\n\nbzip2 compression code inspired by https://code.google.com/p/jbzip2\n*/\nvar libs = [\n\trequire('./freeze'),\n\trequire('./BitStream'),\n\trequire('./BWT'),\n\trequire('./CRC32'),\n\trequire('./HuffmanAllocator'),\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (freeze, BitStream, BWT, CRC32, HuffmanAllocator, Stream, Util) {\n\nvar MAX_HUFCODE_BITS = 20;\nvar MAX_SYMBOLS = 258;\nvar SYMBOL_RUNA = 0;\nvar SYMBOL_RUNB = 1;\nvar MIN_GROUPS = 2;\nvar MAX_GROUPS = 6;\nvar GROUP_SIZE = 50;\n\nvar WHOLEPI = 0x314159265359; // 48-bit integer\nvar SQRTPI =  0x177245385090; // 48-bit integer\n\nvar EOF = Stream.EOF;\n\nvar mtf = function(array, index) {\n  var src = array[index], i;\n  for (i = index; i > 0; i--) {\n    array[i] = array[i-1];\n  }\n  array[0] = src;\n  return src;\n};\n\nvar Err = {\n  OK: 0,\n  LAST_BLOCK: -1,\n  NOT_BZIP_DATA: -2,\n  UNEXPECTED_INPUT_EOF: -3,\n  UNEXPECTED_OUTPUT_EOF: -4,\n  DATA_ERROR: -5,\n  OUT_OF_MEMORY: -6,\n  OBSOLETE_INPUT: -7,\n  END_OF_BLOCK: -8\n};\nvar ErrorMessages = {};\nErrorMessages[Err.LAST_BLOCK] =            \"Bad file checksum\";\nErrorMessages[Err.NOT_BZIP_DATA] =         \"Not bzip data\";\nErrorMessages[Err.UNEXPECTED_INPUT_EOF] =  \"Unexpected input EOF\";\nErrorMessages[Err.UNEXPECTED_OUTPUT_EOF] = \"Unexpected output EOF\";\nErrorMessages[Err.DATA_ERROR] =            \"Data error\";\nErrorMessages[Err.OUT_OF_MEMORY] =         \"Out of memory\";\nErrorMessages[Err.OBSOLETE_INPUT] = \"Obsolete (pre 0.9.5) bzip format not supported.\";\n\nvar _throw = function(status, optDetail) {\n  var msg = ErrorMessages[status] || 'unknown error';\n  if (optDetail) { msg += ': '+optDetail; }\n  var e = new TypeError(msg);\n  e.errorCode = status;\n  throw e;\n};\n\nvar Bunzip = function(inputStream, outputStream) {\n  this.writePos = this.writeCurrent = this.writeCount = 0;\n\n  this._start_bunzip(inputStream, outputStream);\n};\nBunzip.prototype._init_block = function() {\n  var moreBlocks = this._get_next_block();\n  if ( !moreBlocks ) {\n    this.writeCount = -1;\n    return false; /* no more blocks */\n  }\n  this.blockCRC = new CRC32();\n  return true;\n};\n/* XXX micro-bunzip uses (inputStream, inputBuffer, len) as arguments */\nBunzip.prototype._start_bunzip = function(inputStream, outputStream) {\n  /* Ensure that file starts with \"BZh['1'-'9'].\" */\n  var buf = Util.makeU8Buffer(4);\n  if (inputStream.read(buf, 0, 4) !== 4 ||\n      String.fromCharCode(buf[0], buf[1], buf[2]) !== 'BZh')\n    _throw(Err.NOT_BZIP_DATA, 'bad magic');\n\n  var level = buf[3] - 0x30;\n  if (level < 1 || level > 9)\n    _throw(Err.NOT_BZIP_DATA, 'level out of range');\n\n  this.reader = new BitStream(inputStream);\n\n  /* Fourth byte (ascii '1'-'9'), indicates block size in units of 100k of\n     uncompressed data.  Allocate intermediate buffer for block. */\n  this.dbufSize = 100000 * level;\n  this.nextoutput = 0;\n  this.outputStream = outputStream;\n  this.streamCRC = 0;\n};\nBunzip.prototype._get_next_block = function() {\n  var i, j, k;\n  var reader = this.reader;\n  // this is get_next_block() function from micro-bunzip:\n  /* Read in header signature and CRC, then validate signature.\n     (last block signature means CRC is for whole file, return now) */\n  var h = reader.readBits(48);\n  if (h === SQRTPI) { // last block\n    return false; /* no more blocks */\n  }\n  if (h !== WHOLEPI)\n    _throw(Err.NOT_BZIP_DATA);\n  this.targetBlockCRC = reader.readBits(32);\n  this.streamCRC = (this.targetBlockCRC ^\n                    ((this.streamCRC << 1) | (this.streamCRC>>>31))) >>> 0;\n  /* We can add support for blockRandomised if anybody complains.  There was\n     some code for this in busybox 1.0.0-pre3, but nobody ever noticed that\n     it didn't actually work. */\n  if (reader.readBits(1))\n    _throw(Err.OBSOLETE_INPUT);\n  var origPointer = reader.readBits(24);\n  if (origPointer > this.dbufSize)\n    _throw(Err.DATA_ERROR, 'initial position out of bounds');\n  /* mapping table: if some byte values are never used (encoding things\n     like ASCII text), the compression code removes the gaps to have fewer\n     symbols to deal with, and writes a sparse bitfield indicating which\n     values were present.  We make a translation table to convert the symbols\n     back to the corresponding bytes. */\n  var t = reader.readBits(16);\n  var symToByte = Util.makeU8Buffer(256), symTotal = 0;\n  for (i = 0; i < 16; i++) {\n    if (t & (1 << (0xF - i))) {\n      var o = i * 16;\n      k = reader.readBits(16);\n      for (j = 0; j < 16; j++)\n        if (k & (1 << (0xF - j)))\n          symToByte[symTotal++] = o + j;\n    }\n  }\n\n  /* How many different Huffman coding groups does this block use? */\n  var groupCount = reader.readBits(3);\n  if (groupCount < MIN_GROUPS || groupCount > MAX_GROUPS)\n    _throw(Err.DATA_ERROR);\n  /* nSelectors: Every GROUP_SIZE many symbols we select a new Huffman coding\n     group.  Read in the group selector list, which is stored as MTF encoded\n     bit runs.  (MTF=Move To Front, as each value is used it's moved to the\n     start of the list.) */\n  var nSelectors = reader.readBits(15);\n  if (nSelectors === 0)\n    _throw(Err.DATA_ERROR);\n\n  var mtfSymbol = Util.makeU8Buffer(256);\n  for (i = 0; i < groupCount; i++)\n    mtfSymbol[i] = i;\n\n  var selectors = Util.makeU8Buffer(nSelectors); // was 32768...\n\n  for (i = 0; i < nSelectors; i++) {\n    /* Get next value */\n    for (j = 0; reader.readBits(1); j++)\n      if (j >= groupCount) _throw(Err.DATA_ERROR);\n    /* Decode MTF to get the next selector */\n    selectors[i] = mtf(mtfSymbol, j);\n  }\n\n  /* Read the Huffman coding tables for each group, which code for symTotal\n     literal symbols, plus two run symbols (RUNA, RUNB) */\n  var symCount = symTotal + 2;\n  var groups = [], hufGroup;\n  for (j = 0; j < groupCount; j++) {\n    var length = Util.makeU8Buffer(symCount), temp = Util.makeU8Buffer(MAX_HUFCODE_BITS + 1);\n    /* Read Huffman code lengths for each symbol.  They're stored in\n       a way similar to MTF; record a starting value for the first symbol,\n       and an offset from the previous value for every symbol after that. */\n    t = reader.readBits(5); // lengths\n    for (i = 0; i < symCount; i++) {\n      for (;;) {\n        if (t < 1 || t > MAX_HUFCODE_BITS) _throw(Err.DATA_ERROR);\n        /* If first bit is 0, stop.  Else second bit indicates whether\n           to increment or decrement the value. */\n        if(!reader.readBits(1))\n          break;\n        if(!reader.readBits(1))\n          t++;\n        else\n          t--;\n      }\n      length[i] = t;\n    }\n\n    /* Find largest and smallest lengths in this group */\n    var minLen,  maxLen;\n    minLen = maxLen = length[0];\n    for (i = 1; i < symCount; i++) {\n      if (length[i] > maxLen)\n        maxLen = length[i];\n      else if (length[i] < minLen)\n        minLen = length[i];\n    }\n\n    /* Calculate permute[], base[], and limit[] tables from length[].\n     *\n     * permute[] is the lookup table for converting Huffman coded symbols\n     * into decoded symbols.  base[] is the amount to subtract from the\n     * value of a Huffman symbol of a given length when using permute[].\n     *\n     * limit[] indicates the largest numerical value a symbol with a given\n     * number of bits can have.  This is how the Huffman codes can vary in\n     * length: each code with a value>limit[length] needs another bit.\n     */\n    hufGroup = {};\n    groups.push(hufGroup);\n    hufGroup.permute = Util.makeU16Buffer(MAX_SYMBOLS);\n    hufGroup.limit = Util.makeU32Buffer(MAX_HUFCODE_BITS + 2);\n    hufGroup.base = Util.makeU32Buffer(MAX_HUFCODE_BITS + 1);\n    hufGroup.minLen = minLen;\n    hufGroup.maxLen = maxLen;\n    /* Calculate permute[].  Concurrently, initialize temp[] and limit[]. */\n    var pp = 0;\n    for (i = minLen; i <= maxLen; i++) {\n      temp[i] = hufGroup.limit[i] = 0;\n      for (t = 0; t < symCount; t++)\n        if (length[t] === i)\n          hufGroup.permute[pp++] = t;\n    }\n    /* Count symbols coded for at each bit length */\n    for (i = 0; i < symCount; i++)\n      temp[length[i]]++;\n    /* Calculate limit[] (the largest symbol-coding value at each bit\n     * length, which is (previous limit<<1)+symbols at this level), and\n     * base[] (number of symbols to ignore at each bit length, which is\n     * limit minus the cumulative count of symbols coded for already). */\n    pp = t = 0;\n    for (i = minLen; i < maxLen; i++) {\n      pp += temp[i];\n      /* We read the largest possible symbol size and then unget bits\n         after determining how many we need, and those extra bits could\n         be set to anything.  (They're noise from future symbols.)  At\n         each level we're really only interested in the first few bits,\n         so here we set all the trailing to-be-ignored bits to 1 so they\n         don't affect the value>limit[length] comparison. */\n      hufGroup.limit[i] = pp - 1;\n      pp <<= 1;\n      t += temp[i];\n      hufGroup.base[i + 1] = pp - t;\n    }\n    hufGroup.limit[maxLen + 1] = Number.MAX_VALUE; /* Sentinel value for reading next sym. */\n    hufGroup.limit[maxLen] = pp + temp[maxLen] - 1;\n    hufGroup.base[minLen] = 0;\n  }\n  /* We've finished reading and digesting the block header.  Now read this\n     block's Huffman coded symbols from the file and undo the Huffman coding\n     and run length encoding, saving the result into dbuf[dbufCount++]=uc */\n\n  /* Initialize symbol occurrence counters and symbol Move To Front table */\n  var byteCount = Util.makeU32Buffer(256);\n  for (i = 0; i < 256; i++)\n    mtfSymbol[i] = i;\n  /* Loop through compressed symbols. */\n  var runPos = 0, dbufCount = 0, selector = 0, uc;\n  var dbuf = this.dbuf = Util.makeU32Buffer(this.dbufSize);\n  symCount = 0;\n  for (;;) {\n    /* Determine which Huffman coding group to use. */\n    if (!(symCount--)) {\n      symCount = GROUP_SIZE - 1;\n      if (selector >= nSelectors) { _throw(Err.DATA_ERROR); }\n      hufGroup = groups[selectors[selector++]];\n    }\n    /* Read next Huffman-coded symbol. */\n    i = hufGroup.minLen;\n    j = reader.readBits(i);\n    for (;;i++) {\n      if (i > hufGroup.maxLen) { _throw(Err.DATA_ERROR); }\n      if (j <= hufGroup.limit[i])\n        break;\n      j = (j << 1) | reader.readBits(1);\n    }\n    /* Huffman decode value to get nextSym (with bounds checking) */\n    j -= hufGroup.base[i];\n    if (j < 0 || j >= MAX_SYMBOLS) { _throw(Err.DATA_ERROR); }\n    var nextSym = hufGroup.permute[j];\n    /* We have now decoded the symbol, which indicates either a new literal\n       byte, or a repeated run of the most recent literal byte.  First,\n       check if nextSym indicates a repeated run, and if so loop collecting\n       how many times to repeat the last literal. */\n    if (nextSym === SYMBOL_RUNA || nextSym === SYMBOL_RUNB) {\n      /* If this is the start of a new run, zero out counter */\n      if (!runPos){\n        runPos = 1;\n        t = 0;\n      }\n      /* Neat trick that saves 1 symbol: instead of or-ing 0 or 1 at\n         each bit position, add 1 or 2 instead.  For example,\n         1011 is 1<<0 + 1<<1 + 2<<2.  1010 is 2<<0 + 2<<1 + 1<<2.\n         You can make any bit pattern that way using 1 less symbol than\n         the basic or 0/1 method (except all bits 0, which would use no\n         symbols, but a run of length 0 doesn't mean anything in this\n         context).  Thus space is saved. */\n      if (nextSym === SYMBOL_RUNA)\n        t += runPos;\n      else\n        t += 2 * runPos;\n      runPos <<= 1;\n      continue;\n    }\n    /* When we hit the first non-run symbol after a run, we now know\n       how many times to repeat the last literal, so append that many\n       copies to our buffer of decoded symbols (dbuf) now.  (The last\n       literal used is the one at the head of the mtfSymbol array.) */\n    if (runPos){\n      runPos = 0;\n      if (dbufCount + t >= this.dbufSize) { _throw(Err.DATA_ERROR); }\n      uc = symToByte[mtfSymbol[0]];\n      byteCount[uc] += t;\n      while (t--)\n        dbuf[dbufCount++] = uc;\n    }\n    /* Is this the terminating symbol? */\n    if (nextSym > symTotal)\n      break;\n    /* At this point, nextSym indicates a new literal character.  Subtract\n       one to get the position in the MTF array at which this literal is\n       currently to be found.  (Note that the result can't be -1 or 0,\n       because 0 and 1 are RUNA and RUNB.  But another instance of the\n       first symbol in the MTF array, position 0, would have been handled\n       as part of a run above.  Therefore 1 unused MTF position minus\n       2 non-literal nextSym values equals -1.) */\n    if (dbufCount >= this.dbufSize) { _throw(Err.DATA_ERROR); }\n    i = nextSym - 1;\n    uc = mtf(mtfSymbol, i);\n    uc = symToByte[uc];\n    /* We have our literal byte.  Save it into dbuf. */\n    byteCount[uc]++;\n    dbuf[dbufCount++] = uc;\n  }\n  /* At this point, we've read all the Huffman-coded symbols (and repeated\n     runs) for this block from the input stream, and decoded them into the\n     intermediate buffer.  There are dbufCount many decoded bytes in dbuf[].\n     Now undo the Burrows-Wheeler transform on dbuf.\n     See http://dogma.net/markn/articles/bwt/bwt.htm\n  */\n  if (origPointer < 0 || origPointer >= dbufCount) { _throw(Err.DATA_ERROR); }\n  /* Turn byteCount into cumulative occurrence counts of 0 to n-1. */\n  j = 0;\n  for (i = 0; i < 256; i++) {\n    k = j + byteCount[i];\n    byteCount[i] = j;\n    j = k;\n  }\n  /* Figure out what order dbuf would be in if we sorted it. */\n  for (i = 0; i < dbufCount; i++) {\n    uc = dbuf[i] & 0xff;\n    dbuf[byteCount[uc]] |= (i << 8);\n    byteCount[uc]++;\n  }\n  /* Decode first byte by hand to initialize \"previous\" byte.  Note that it\n     doesn't get output, and if the first three characters are identical\n     it doesn't qualify as a run (hence writeRunCountdown=5). */\n  var pos = 0, current = 0, run = 0;\n  if (dbufCount) {\n    pos = dbuf[origPointer];\n    current = (pos & 0xff);\n    pos >>= 8;\n    run = -1;\n  }\n  this.writePos = pos;\n  this.writeCurrent = current;\n  this.writeCount = dbufCount;\n  this.writeRun = run;\n\n  return true; /* more blocks to come */\n};\n/* Undo burrows-wheeler transform on intermediate buffer to produce output.\n   If start_bunzip was initialized with out_fd=-1, then up to len bytes of\n   data are written to outbuf.  Return value is number of bytes written or\n   error (all errors are negative numbers).  If out_fd!=-1, outbuf and len\n   are ignored, data is written to out_fd and return is RETVAL_OK or error.\n*/\nBunzip.prototype._read_bunzip = function(outputBuffer, len) {\n    var copies, previous, outbyte;\n    /* james@jamestaylor.org: writeCount goes to -1 when the buffer is fully\n       decoded, which results in this returning RETVAL_LAST_BLOCK, also\n       equal to -1... Confusing, I'm returning 0 here to indicate no\n       bytes written into the buffer */\n  if (this.writeCount < 0) { return 0; }\n\n  var gotcount = 0;\n  var dbuf = this.dbuf, pos = this.writePos, current = this.writeCurrent;\n  var dbufCount = this.writeCount, outputsize = this.outputsize;\n  var run = this.writeRun;\n\n  while (dbufCount) {\n    dbufCount--;\n    previous = current;\n    pos = dbuf[pos];\n    current = pos & 0xff;\n    pos >>= 8;\n    if (run++ === 3){\n      copies = current;\n      outbyte = previous;\n      current = -1;\n    } else {\n      copies = 1;\n      outbyte = current;\n    }\n    this.blockCRC.updateCRCRun(outbyte, copies);\n    while (copies--) {\n      this.outputStream.writeByte(outbyte);\n      this.nextoutput++;\n    }\n    if (current != previous)\n      run = 0;\n  }\n  this.writeCount = dbufCount;\n  // check CRC\n  if (this.blockCRC.getCRC() !== this.targetBlockCRC) {\n    _throw(Err.DATA_ERROR, \"Bad block CRC \"+\n           \"(got \"+this.blockCRC.getCRC().toString(16)+\n           \" expected \"+this.targetBlockCRC.toString(16)+\")\");\n  }\n  return this.nextoutput;\n};\n\n/* Static helper functions */\nBunzip.Err = Err;\n// 'input' can be a stream or a buffer\n// 'output' can be a stream or a buffer or a number (buffer size)\nBunzip.decode = function(input, output, multistream) {\n  // make a stream from a buffer, if necessary\n  var inputStream = Util.coerceInputStream(input);\n  var o = Util.coerceOutputStream(output, output);\n  var outputStream = o.stream;\n\n  var bz = new Bunzip(inputStream, outputStream);\n  while (true) {\n    if ('eof' in inputStream && inputStream.eof()) break;\n    if (bz._init_block()) {\n      bz._read_bunzip();\n    } else {\n      var targetStreamCRC = bz.reader.readBits(32);\n      if (targetStreamCRC !== bz.streamCRC) {\n        _throw(Err.DATA_ERROR, \"Bad stream CRC \"+\n               \"(got \"+bz.streamCRC.toString(16)+\n               \" expected \"+targetStreamCRC.toString(16)+\")\");\n      }\n      if (multistream &&\n          'eof' in inputStream &&\n          !inputStream.eof()) {\n        // note that start_bunzip will also resync the bit reader to next byte\n        bz._start_bunzip(inputStream, outputStream);\n      } else break;\n    }\n  }\n  return o.retval;\n};\nBunzip.decodeBlock = function(input, pos, output) {\n  // make a stream from a buffer, if necessary\n  var inputStream = Util.coerceInputStream(input);\n  var o = Util.coerceOutputStream(output, output);\n  var outputStream = o.stream;\n  var bz = new Bunzip(inputStream, outputStream);\n  bz.reader.seekBit(pos);\n  /* Fill the decode buffer for the block */\n  var moreBlocks = bz._get_next_block();\n  if (moreBlocks) {\n    /* Init the CRC for writing */\n    bz.blockCRC = new CRC32();\n\n    /* Zero this so the current byte from before the seek is not written */\n    bz.writeCopies = 0;\n\n    /* Decompress the block and write to stdout */\n    bz._read_bunzip();\n    // XXX keep writing?\n  }\n  return o.retval;\n};\n/* Reads bzip2 file from stream or buffer `input`, and invoke\n * `callback(position, size)` once for each bzip2 block,\n * where position gives the starting position (in *bits*)\n * and size gives uncompressed size of the block (in *bytes*). */\nBunzip.table = function(input, callback, multistream) {\n  // make a stream from a buffer, if necessary\n  var inputStream = new Stream();\n  inputStream.delegate = Util.coerceInputStream(input);\n  inputStream.pos = 0;\n  inputStream.readByte = function() {\n    this.pos++;\n    return this.delegate.readByte();\n  };\n  inputStream.tell = function() { return this.pos; };\n  if (inputStream.delegate.eof) {\n    inputStream.eof = inputStream.delegate.eof.bind(inputStream.delegate);\n  }\n  var outputStream = new Stream();\n  outputStream.pos = 0;\n  outputStream.writeByte = function() { this.pos++; };\n\n  var bz = new Bunzip(inputStream, outputStream);\n  var blockSize = bz.dbufSize;\n  while (true) {\n    if ('eof' in inputStream && inputStream.eof()) break;\n\n    var position = bz.reader.tellBit();\n\n    if (bz._init_block()) {\n      var start = outputStream.pos;\n      bz._read_bunzip();\n      callback(position, outputStream.pos - start);\n    } else {\n      var crc = bz.reader.readBits(32); // (but we ignore the crc)\n      if (multistream &&\n          'eof' in inputStream &&\n          !inputStream.eof()) {\n        // note that start_bunzip will also resync the bit reader to next byte\n        bz._start_bunzip(inputStream, outputStream);\n        console.assert(bz.dbufSize === blockSize,\n                       \"shouldn't change block size within multistream file\");\n      } else break;\n    }\n  }\n};\n\n// create a Huffman tree from the table of frequencies\nvar StaticHuffman = function(freq, alphabetSize) {\n  // As in BZip2HuffmanStageEncoder.java (from jbzip2):\n  // The Huffman allocator needs its input symbol frequencies to be\n  // sorted, but we need to return code lengths in the same order as\n  // the corresponding frequencies are passed in.\n  // The symbol frequency and index are merged into a single array of\n  // integers - frequency in the high 23 bits, index in the low 9\n  // bits.\n  //     2^23 = 8,388,608 which is higher than the maximum possible\n  //            frequency for one symbol in a block\n  //     2^9 = 512 which is higher than the maximum possible\n  //            alphabet size (== 258)\n  // Sorting this array simultaneously sorts the frequencies and\n  // leaves a lookup that can be used to cheaply invert the sort\n  var i, mergedFreq = [];\n  for (i=0; i<alphabetSize; i++) {\n    mergedFreq[i] = (freq[i] << 9) | i;\n  }\n  mergedFreq.sort(function(a,b) { return a-b; });\n  var sortedFreq = mergedFreq.map(function(v) { return v>>>9; });\n  // allocate code lengths in place. (result in sortedFreq array)\n  HuffmanAllocator.allocateHuffmanCodeLengths(sortedFreq, MAX_HUFCODE_BITS);\n  // reverse the sort to put codes & code lengths in order of input symbols\n  this.codeLengths = Util.makeU8Buffer(alphabetSize);\n  for (i=0; i<alphabetSize; i++) {\n    var sym = mergedFreq[i] & 0x1FF;\n    this.codeLengths[sym] = sortedFreq[i];\n  }\n};\n// compute canonical Huffman codes, given code lengths\nStaticHuffman.prototype.computeCanonical = function() {\n  var alphabetSize = this.codeLengths.length;\n  // merge arrays; sort first by length then by symbol.\n  var i, merged = [];\n  for (i=0; i<alphabetSize; i++) {\n    merged[i] = (this.codeLengths[i] << 9) | i;\n  }\n  merged.sort(function(a,b) { return a-b; });\n  // use sorted lengths to assign codes\n  this.code = Util.makeU32Buffer(alphabetSize);\n  var code = 0, prevLen = 0;\n  for (i=0; i<alphabetSize; i++) {\n    var curLen = merged[i] >>> 9;\n    var sym = merged[i] & 0x1FF;\n    console.assert(prevLen <= curLen);\n    code <<= (curLen - prevLen);\n    this.code[sym] = code++;\n    prevLen = curLen;\n  }\n};\n// compute the cost of encoding the given range of symbols w/ this Huffman code\nStaticHuffman.prototype.cost = function(array, offset, length) {\n  var i, cost = 0;\n  for (i=0; i<length; i++) {\n    cost += this.codeLengths[array[offset+i]];\n  }\n  return cost;\n};\n// emit the bit lengths used by this Huffman code\nStaticHuffman.prototype.emit = function(outStream) {\n  // write the starting length\n  var i, currentLength = this.codeLengths[0];\n  outStream.writeBits(5, currentLength);\n  for (i=0; i<this.codeLengths.length; i++) {\n    var codeLength = this.codeLengths[i];\n    var value, delta;\n    console.assert(codeLength > 0 && codeLength <= MAX_HUFCODE_BITS);\n    if (currentLength < codeLength) {\n      value = 2; delta = codeLength - currentLength;\n    } else {\n      value = 3; delta = currentLength - codeLength;\n    }\n    while (delta-- > 0) {\n      outStream.writeBits(2, value);\n    }\n    outStream.writeBit(0);\n    currentLength = codeLength;\n  }\n};\n// encode the given symbol with this Huffman code\nStaticHuffman.prototype.encode = function(outStream, symbol) {\n  outStream.writeBits(this.codeLengths[symbol], this.code[symbol]);\n};\n\n// read a block for bzip2 compression.\nvar readBlock = function(inStream, block, length, crc) {\n  var pos = 0;\n  var lastChar = -1;\n  var runLength = 0;\n  while (pos < length) {\n    if (runLength===4) {\n      block[pos++] = 0;\n      if (pos >= length) { break; }\n    }\n    var ch = inStream.readByte();\n    if (ch === EOF) {\n      break;\n    }\n    crc.updateCRC(ch);\n    if (ch !== lastChar) {\n      lastChar = ch;\n      runLength = 1;\n    } else {\n      runLength++;\n      if (runLength > 4) {\n        if (runLength < 256) {\n          block[pos-1]++;\n          continue;\n        } else {\n          runLength = 1;\n        }\n      }\n    }\n    block[pos++] = ch;\n  }\n  return pos;\n};\n\n// divide the input into groups at most GROUP_SIZE symbols long.\n// assign each group to the Huffman table which compresses it best.\nvar assignSelectors = function(selectors, groups, input) {\n  var i, j, k;\n  for (i=0, k=0; i<input.length; i+=GROUP_SIZE) {\n    var groupSize = Math.min(GROUP_SIZE, input.length - i);\n    var best = 0, bestCost = groups[0].cost(input, i, groupSize);\n    for (j=1; j<groups.length; j++) {\n      var groupCost = groups[j].cost(input, i, groupSize);\n      if (groupCost < bestCost) {\n        best = j; bestCost = groupCost;\n      }\n    }\n    selectors[k++] = best;\n  }\n};\nvar optimizeHuffmanGroups = function(groups, targetGroups, input,\n                                     selectors, alphabetSize) {\n  // until we've got \"targetGroups\" Huffman codes, pick the Huffman code which\n  // matches the largest # of groups and split it by picking the groups\n  // which require more than the median number of bits to encode.\n  // then recompute frequencies and reassign Huffman codes.\n  var i, j, k, groupCounts = [];\n  while (groups.length < targetGroups) {\n    assignSelectors(selectors, groups, input);\n    // which code gets used the most?\n    for (i=0; i<groups.length; i++) { groupCounts[i] = 0; }\n    for (i=0; i<selectors.length; i++) {\n      groupCounts[selectors[i]]++;\n    }\n    var which = groupCounts.indexOf(Math.max.apply(Math, groupCounts));\n    // ok, let's look at the size of those blocks\n    var splits = [];\n    for (i=0, j=0; i<selectors.length; i++) {\n      if (selectors[i] !== which) { continue; }\n      var start = i*GROUP_SIZE;\n      var end = Math.min(start + GROUP_SIZE, input.length);\n      splits.push({index: i, cost:groups[which].cost(input, start, end-start)});\n    }\n    // find the median.  there are O(n) algorithms to do this, but we'll\n    // be lazy and use a full O(n ln n) sort.\n    splits.sort(function(s1, s2) { return s1.cost - s2.cost; });\n    // assign the groups in the top half to the \"new\" selector\n    for (i=(splits.length>>>1); i<splits.length; i++) {\n      selectors[splits[i].index] = groups.length;\n    }\n    groups.push(null);\n    // recompute frequencies\n    var freq = [], f;\n    for (i=0; i<groups.length; i++) {\n      f = freq[i] = [];\n      for (j=0; j<alphabetSize; j++) { f[j] = 0; }\n    }\n    for (i=0, j=0; i<input.length; ) {\n      f = freq[selectors[j++]];\n      for (k=0; k<GROUP_SIZE && i<input.length; k++) {\n        f[input[i++]]++;\n      }\n    }\n    // reconstruct Huffman codes\n    for (i=0; i<groups.length; i++) {\n      groups[i] = new StaticHuffman(freq[i], alphabetSize);\n    }\n  }\n};\n\nvar compressBlock = function(block, length, outStream) {\n  var c, i, j, k;\n  // do BWT transform\n  var U = Util.makeU8Buffer(length);\n  var pidx = BWT.bwtransform2(block, U, length, 256);\n  outStream.writeBit(0); // not randomized\n  outStream.writeBits(24, pidx);\n  // track values used; write bitmap\n  var used = [], compact = [];\n  for (i=0; i<length; i++) {\n    c = block[i];\n    used[c] = true;\n    compact[c>>>4] = true;\n  }\n  for (i=0; i<16; i++) {\n    outStream.writeBit(!!compact[i]);\n  }\n  for (i=0; i<16; i++) {\n    if (compact[i]) {\n      for (j=0; j<16; j++) {\n        outStream.writeBit(!!used[(i<<4)|j]);\n      }\n    }\n  }\n  var alphabetSize = 0;\n  for (i=0; i<256; i++) {\n    if (used[i]) {\n      alphabetSize++;\n    }\n  }\n  // now MTF and RLE/2 encoding, while tracking symbol statistics.\n  // output can be one longer than length, because we include the\n  // end-of-block character at the end. Similarly, we need a U16\n  // array because the end-of-block character can be 256.\n  var A = Util.makeU16Buffer(length+1);\n  var endOfBlock = alphabetSize + 1;\n  var freq = [];\n  for (i=0; i<=endOfBlock; i++) { freq[i] = 0; }\n  var M = Util.makeU8Buffer(alphabetSize);\n  for (i=0, j=0; i<256; i++) {\n    if (used[i]) { M[j++] = i; }\n  }\n  used = null; compact = null;\n  var pos = 0, runLength = 0;\n  var emit = function(c) {\n    A[pos++] = c;\n    freq[c]++;\n  };\n  var emitLastRun = function() {\n    while (runLength !== 0) {\n      if (runLength & 1) {\n        emit(0); // RUNA\n        runLength -= 1;\n      } else {\n        emit(1); // RUNB\n        runLength -= 2;\n      }\n      runLength >>>= 1;\n    }\n  };\n  for (i=0; i<U.length; i++) {\n    c = U[i];\n    // look for C in M\n    for (j=0; j<alphabetSize; j++) {\n      if (M[j]===c) { break; }\n    }\n    console.assert(j!==alphabetSize);\n    // shift MTF array\n    mtf(M, j);\n    // emit j\n    if (j===0) {\n      runLength++;\n    } else {\n      emitLastRun();\n      emit(j+1);\n      runLength = 0;\n    }\n  }\n  emitLastRun();\n  emit(endOfBlock); // end of block symbol\n  A = A.subarray(0, pos);\n  // now A[0...pos) has the encoded output, and freq[0-alphabetSize] has the\n  // frequencies.  Use these to construct Huffman tables.\n  // the canonical bzip2 encoder does some complicated optimization\n  // to attempt to select the best tables.  We're going to simplify things:\n  // (unless the block is very short) we're always going to create MAX_GROUPS\n  // tables; 1 based on global frequencies, and the rest based on dividing the\n  // block into MAX_GROUPS-1 pieces.\n  var groups = [];\n  var targetGroups; // how many Huffman groups should we create?\n  // look at length of MTF-encoded block to pick a good number of groups\n  if (pos >= 2400) { targetGroups = 6; }\n  else if (pos >= 1200) { targetGroups = 5; }\n  else if (pos >= 600) { targetGroups = 4; }\n  else if (pos >= 200) { targetGroups = 3; }\n  else { targetGroups = 2; }\n  // start with two Huffman groups: one with the global frequencies, and\n  // a second with a flat frequency distribution (which is also the smallest\n  // possible Huffman table to encode, which is handy to prevent excessive\n  // bloat if the input file size is very small)\n  groups.push(new StaticHuffman(freq, endOfBlock+1));\n  for (i=0; i<=endOfBlock; i++) { freq[i] = 1; }\n  groups.push(new StaticHuffman(freq, endOfBlock+1));\n  freq = null;\n  // Now optimize the Huffman groups!  this is a black art.\n  // we probably don't want to waste too much time on it, though.\n  var selectors = Util.makeU8Buffer(Math.ceil(pos / GROUP_SIZE));\n  optimizeHuffmanGroups(groups, targetGroups, A, selectors, endOfBlock+1);\n  assignSelectors(selectors, groups, A);\n\n  // okay, let's start writing out our Huffman tables\n  console.assert(groups.length >= MIN_GROUPS && groups.length <= MAX_GROUPS);\n  outStream.writeBits(3, groups.length);\n  // and write out the best selector for each group\n  outStream.writeBits(15, selectors.length);\n  for (i=0; i<groups.length; i++) { M[i] = i; } // initialize MTF table.\n  for (i=0; i<selectors.length; i++) {\n    var s = selectors[i];\n    // find selector in MTF list\n    for (j=0; j<groups.length; j++) { if (M[j]===s) { break; } }\n    console.assert(j<groups.length);\n    mtf(M, j);\n    // emit 'j' as a unary number\n    for (;j>0; j--) {\n      outStream.writeBit(1);\n    }\n    outStream.writeBit(0);\n  }\n  // okay, now emit the Huffman tables in order.\n  for (i=0; i<groups.length; i++) {\n    groups[i].emit(outStream);\n    groups[i].computeCanonical(); // get ready for next step while we're at it\n  }\n  // okay, now (finally!) emit the actual data!\n  for (i=0, k=0; i<pos; ) {\n    var huff = groups[selectors[k++]];\n    for (j=0; j<GROUP_SIZE && i<pos; j++) {\n      huff.encode(outStream, A[i++]);\n    }\n  }\n  // done.\n};\n\nvar Bzip2 = Object.create(null);\nBzip2.compressFile = function(inStream, outStream, props) {\n  inStream = Util.coerceInputStream(inStream);\n  var o = Util.coerceOutputStream(outStream, outStream);\n  outStream = new BitStream(o.stream);\n\n  var blockSizeMultiplier = 9;\n  if (typeof(props)==='number') {\n    blockSizeMultiplier = props;\n  }\n  if (blockSizeMultiplier < 1 || blockSizeMultiplier > 9) {\n    throw new Error('Invalid block size multiplier');\n  }\n\n  var blockSize = blockSizeMultiplier * 100000;\n  // the C implementation always writes at least length-19 characters,\n  // but it reads ahead enough that if the last character written was part\n  // of a run, it writes out the full run.\n  // That's really annoying to implement.\n  // So instead just subtract 19 from the blockSize; in most cases (unless\n  // there's a run at the end of the block) this will yield block divisions\n  // matching the C implementation.\n  blockSize -= 19;\n\n  // write file magic\n  outStream.writeByte('B'.charCodeAt(0));\n  outStream.writeByte('Z'.charCodeAt(0));\n  outStream.writeByte('h'.charCodeAt(0)); // Huffman-coded bzip\n  outStream.writeByte('0'.charCodeAt(0) + blockSizeMultiplier);\n\n  // allocate a buffer for the block\n  var block = Util.makeU8Buffer(blockSize);\n  var streamCRC = 0;\n  var length;\n\n  do {\n    var crc = new CRC32();\n    length = readBlock(inStream, block, blockSize, crc);\n    if (length > 0) {\n      streamCRC = (((streamCRC << 1) | (streamCRC>>>31)) ^ crc.getCRC()) >>> 0;\n      outStream.writeBits(48, WHOLEPI);\n      outStream.writeBits(32, crc.getCRC());\n      compressBlock(block, length, outStream);\n    }\n  } while (length === blockSize);\n\n  // finish up\n  outStream.writeBits(48, SQRTPI);\n  outStream.writeBits(32, streamCRC);\n  outStream.flush(); // get the last bits flushed out\n  return o.retval;\n};\n\nBzip2.decompressFile = Bunzip.decode;\nBzip2.decompressBlock = Bunzip.decodeBlock;\nBzip2.table = Bunzip.table;\n\nreturn Bzip2;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/Bzip2.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/Bzip2.js\n// module chunks = main","/* CRC32, used in Bzip2 implementation.\n * This is a port of CRC32.java from the jbzip2 implementation at\n *   https://code.google.com/p/jbzip2\n * which is:\n *   Copyright (c) 2011 Matthew Francis\n *\n *   Permission is hereby granted, free of charge, to any person\n *   obtaining a copy of this software and associated documentation\n *   files (the \"Software\"), to deal in the Software without\n *   restriction, including without limitation the rights to use,\n *   copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the\n *   Software is furnished to do so, subject to the following\n *   conditions:\n *\n *   The above copyright notice and this permission notice shall be\n *   included in all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n *   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n *   OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n *   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n *   HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n *   WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n *   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n *   OTHER DEALINGS IN THE SOFTWARE.\n * This JavaScript implementation is:\n *   Copyright (c) 2013 C. Scott Ananian\n * with the same licensing terms as Matthew Francis' original implementation.\n */\nvar libs = [\n\trequire('./Util')\n];\nvar body_fn = function (Util) {\n\n  /**\n   * A static CRC lookup table\n   */\n    var crc32Lookup = Util.arraycopy(Util.makeU32Buffer(256), [\n    0x00000000, 0x04c11db7, 0x09823b6e, 0x0d4326d9, 0x130476dc, 0x17c56b6b, 0x1a864db2, 0x1e475005,\n    0x2608edb8, 0x22c9f00f, 0x2f8ad6d6, 0x2b4bcb61, 0x350c9b64, 0x31cd86d3, 0x3c8ea00a, 0x384fbdbd,\n    0x4c11db70, 0x48d0c6c7, 0x4593e01e, 0x4152fda9, 0x5f15adac, 0x5bd4b01b, 0x569796c2, 0x52568b75,\n    0x6a1936c8, 0x6ed82b7f, 0x639b0da6, 0x675a1011, 0x791d4014, 0x7ddc5da3, 0x709f7b7a, 0x745e66cd,\n    0x9823b6e0, 0x9ce2ab57, 0x91a18d8e, 0x95609039, 0x8b27c03c, 0x8fe6dd8b, 0x82a5fb52, 0x8664e6e5,\n    0xbe2b5b58, 0xbaea46ef, 0xb7a96036, 0xb3687d81, 0xad2f2d84, 0xa9ee3033, 0xa4ad16ea, 0xa06c0b5d,\n    0xd4326d90, 0xd0f37027, 0xddb056fe, 0xd9714b49, 0xc7361b4c, 0xc3f706fb, 0xceb42022, 0xca753d95,\n    0xf23a8028, 0xf6fb9d9f, 0xfbb8bb46, 0xff79a6f1, 0xe13ef6f4, 0xe5ffeb43, 0xe8bccd9a, 0xec7dd02d,\n    0x34867077, 0x30476dc0, 0x3d044b19, 0x39c556ae, 0x278206ab, 0x23431b1c, 0x2e003dc5, 0x2ac12072,\n    0x128e9dcf, 0x164f8078, 0x1b0ca6a1, 0x1fcdbb16, 0x018aeb13, 0x054bf6a4, 0x0808d07d, 0x0cc9cdca,\n    0x7897ab07, 0x7c56b6b0, 0x71159069, 0x75d48dde, 0x6b93dddb, 0x6f52c06c, 0x6211e6b5, 0x66d0fb02,\n    0x5e9f46bf, 0x5a5e5b08, 0x571d7dd1, 0x53dc6066, 0x4d9b3063, 0x495a2dd4, 0x44190b0d, 0x40d816ba,\n    0xaca5c697, 0xa864db20, 0xa527fdf9, 0xa1e6e04e, 0xbfa1b04b, 0xbb60adfc, 0xb6238b25, 0xb2e29692,\n    0x8aad2b2f, 0x8e6c3698, 0x832f1041, 0x87ee0df6, 0x99a95df3, 0x9d684044, 0x902b669d, 0x94ea7b2a,\n    0xe0b41de7, 0xe4750050, 0xe9362689, 0xedf73b3e, 0xf3b06b3b, 0xf771768c, 0xfa325055, 0xfef34de2,\n    0xc6bcf05f, 0xc27dede8, 0xcf3ecb31, 0xcbffd686, 0xd5b88683, 0xd1799b34, 0xdc3abded, 0xd8fba05a,\n    0x690ce0ee, 0x6dcdfd59, 0x608edb80, 0x644fc637, 0x7a089632, 0x7ec98b85, 0x738aad5c, 0x774bb0eb,\n    0x4f040d56, 0x4bc510e1, 0x46863638, 0x42472b8f, 0x5c007b8a, 0x58c1663d, 0x558240e4, 0x51435d53,\n    0x251d3b9e, 0x21dc2629, 0x2c9f00f0, 0x285e1d47, 0x36194d42, 0x32d850f5, 0x3f9b762c, 0x3b5a6b9b,\n    0x0315d626, 0x07d4cb91, 0x0a97ed48, 0x0e56f0ff, 0x1011a0fa, 0x14d0bd4d, 0x19939b94, 0x1d528623,\n    0xf12f560e, 0xf5ee4bb9, 0xf8ad6d60, 0xfc6c70d7, 0xe22b20d2, 0xe6ea3d65, 0xeba91bbc, 0xef68060b,\n    0xd727bbb6, 0xd3e6a601, 0xdea580d8, 0xda649d6f, 0xc423cd6a, 0xc0e2d0dd, 0xcda1f604, 0xc960ebb3,\n    0xbd3e8d7e, 0xb9ff90c9, 0xb4bcb610, 0xb07daba7, 0xae3afba2, 0xaafbe615, 0xa7b8c0cc, 0xa379dd7b,\n    0x9b3660c6, 0x9ff77d71, 0x92b45ba8, 0x9675461f, 0x8832161a, 0x8cf30bad, 0x81b02d74, 0x857130c3,\n    0x5d8a9099, 0x594b8d2e, 0x5408abf7, 0x50c9b640, 0x4e8ee645, 0x4a4ffbf2, 0x470cdd2b, 0x43cdc09c,\n    0x7b827d21, 0x7f436096, 0x7200464f, 0x76c15bf8, 0x68860bfd, 0x6c47164a, 0x61043093, 0x65c52d24,\n    0x119b4be9, 0x155a565e, 0x18197087, 0x1cd86d30, 0x029f3d35, 0x065e2082, 0x0b1d065b, 0x0fdc1bec,\n    0x3793a651, 0x3352bbe6, 0x3e119d3f, 0x3ad08088, 0x2497d08d, 0x2056cd3a, 0x2d15ebe3, 0x29d4f654,\n    0xc5a92679, 0xc1683bce, 0xcc2b1d17, 0xc8ea00a0, 0xd6ad50a5, 0xd26c4d12, 0xdf2f6bcb, 0xdbee767c,\n    0xe3a1cbc1, 0xe760d676, 0xea23f0af, 0xeee2ed18, 0xf0a5bd1d, 0xf464a0aa, 0xf9278673, 0xfde69bc4,\n    0x89b8fd09, 0x8d79e0be, 0x803ac667, 0x84fbdbd0, 0x9abc8bd5, 0x9e7d9662, 0x933eb0bb, 0x97ffad0c,\n    0xafb010b1, 0xab710d06, 0xa6322bdf, 0xa2f33668, 0xbcb4666d, 0xb8757bda, 0xb5365d03, 0xb1f740b4\n  ]);\n\n  var CRC32 = function() {\n    /**\n     * The current CRC\n     */\n    var crc = 0xffffffff;\n\n    /**\n     * @return The current CRC\n     */\n    this.getCRC = function() {\n      return (~crc) >>> 0; // return an unsigned value\n    };\n\n    /**\n     * Update the CRC with a single byte\n     * @param value The value to update the CRC with\n     */\n    this.updateCRC = function(value) {\n      crc = (crc << 8) ^ crc32Lookup[((crc >>> 24) ^ value) & 0xff];\n    };\n\n    /**\n     * Update the CRC with a sequence of identical bytes\n     * @param value The value to update the CRC with\n     * @param count The number of bytes\n     */\n    this.updateCRCRun = function(value, count) {\n      while (count-- > 0) {\n        crc = (crc << 8) ^ crc32Lookup[((crc >>> 24) ^ value) & 0xff];\n      }\n    };\n  };\n  return CRC32;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/CRC32.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/CRC32.js\n// module chunks = main","/** A simple context-1 model. */\nvar libs = [\n\trequire('./BitStream'),\n\trequire('./Huffman'),\n\trequire('./Util')\n];\nvar body_fn = function (BitStream,Huffman,Util) {\n\nvar Context1Model = function(modelFactory, contextSize, alphabetSize) {\n  var i;\n  this.literalModel = [];\n  // even if there's an EOF symbol, we don't need a context for it!\n  for (i=0; i<contextSize; i++) {\n    this.literalModel[i] = modelFactory(alphabetSize);\n  }\n};\nContext1Model.prototype.encode = function(ch, context) {\n  this.literalModel[context].encode(ch);\n};\nContext1Model.prototype.decode = function(context) {\n  return this.literalModel[context].decode();\n};\n\n/** Simple self-test. */\nContext1Model.MAGIC='ctx1';\nContext1Model.compressFile = Util.compressFileHelper(Context1Model.MAGIC, function(inStream, outStream, fileSize, props) {\n  var bitstream = new BitStream(outStream);\n  var alphabetSize = 256;\n  if (fileSize < 0) { alphabetSize++; }\n  var coder = Huffman.factory(bitstream, 8191);\n  var model = new Context1Model(coder, 256, alphabetSize);\n  var lastchar = 0x20;\n  var modelp = {\n    encode: function(symbol) {\n      model.encode(symbol, lastchar);\n      lastchar = symbol;\n    }\n  };\n  Util.compressWithModel(inStream, fileSize, modelp);\n  bitstream.flush();\n});\nContext1Model.decompressFile = Util.decompressFileHelper(Context1Model.MAGIC, function(inStream, outStream, fileSize) {\n  var bitstream = new BitStream(inStream);\n  var alphabetSize = 256;\n  if (fileSize < 0) { alphabetSize++; }\n  var coder = Huffman.factory(bitstream, 8191);\n  var model = new Context1Model(coder, 256, alphabetSize);\n  var lastchar = 0x20;\n  var modelp = {\n    decode: function() {\n      var symbol = model.decode(lastchar);\n      lastchar = symbol;\n      return symbol;\n    }\n  };\n  Util.decompressWithModel(outStream, fileSize, modelp);\n});\n\nreturn Context1Model;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/Context1Model.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/Context1Model.js\n// module chunks = main","/** Deferred-sum model, suitable for small ( ~ 256 ) ranges. */\nvar libs = [\n\trequire('./RangeCoder'),\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (RangeCoder,Stream,Util){\n\nvar LOG_PROB_TOTAL = 8;\nvar PROB_TOTAL = 1 << LOG_PROB_TOTAL;\nvar MAX_ESCAPE_COUNT = 40;\n\nvar DefSumModel = function(coder, size, isDecoder) {\n  var i;\n  console.assert(size < 300); // not meant for sparse\n  var ESCAPE = this.numSyms = size;\n  this.coder = coder;\n  this.prob = Util.makeU16Buffer(size+2); /* size + ESC + 1 */\n  this.escape = Util.makeU16Buffer(size+1);  /* size + 1*/\n  this.update = Util.makeU16Buffer(size+1); /* size + ESC */\n  this.prob[ESCAPE+1] = PROB_TOTAL;\n  for (i=0; i<=this.numSyms; i++) {\n    this.escape[i] = i;\n  }\n  this.updateCount = 0;\n  this.updateThresh = PROB_TOTAL - Math.floor(PROB_TOTAL / 2);\n  if (!isDecoder) { return; }\n  // extra tables for fast decoding\n  this.probToSym = Util.makeU16Buffer(PROB_TOTAL);\n  this.escProbToSym = Util.makeU16Buffer(this.numSyms);\n  for (i=0; i<PROB_TOTAL; i++) {\n    this.probToSym[i] = ESCAPE;\n  }\n  for (i=0; i<this.numSyms; i++) {\n    this.escProbToSym[i] = i;\n  }\n};\nDefSumModel.factory = function(coder, isDecoder) {\n  return function(size) { return new DefSumModel(coder, size, isDecoder); };\n};\nDefSumModel.prototype._update = function(symbol, isDecoder) {\n  if (symbol === this.numSyms) {\n    // some special cases for the escape character\n    if (this.update[symbol] >= MAX_ESCAPE_COUNT) { return; } // hard limit\n    // don't let an escape character trigger an update, because then the\n    // escaped character might find itself unescaped after the tables have\n    // been updated!\n    if (this.updateCount >= (this.updateThresh - 1)) { return; }\n  }\n  this.update[symbol]++;\n  this.updateCount++;\n  // is it time to transfer the updated probabilities?\n  if (this.updateCount < this.updateThresh) {\n    return; //defer update\n  }\n  var cumProb, cumEscProb, odd, i, j, k;\n  this.escape[0] = this.prob[0] = cumProb = cumEscProb = odd = 0;\n  for (i=0; i < this.numSyms+1; i++) {\n    var newProb = ((this.prob[i+1]-this.prob[i]) >>> 1) + this.update[i];\n    if (newProb) {\n      // live 'un\n      this.prob[i] = cumProb;\n      cumProb += newProb;\n      if (newProb & 1) { odd++; }\n      this.escape[i] = cumEscProb;\n    } else {\n      // this symbol will escape\n      this.prob[i] = cumProb;\n      this.escape[i] = cumEscProb;\n      cumEscProb++;\n    }\n  }\n  this.prob[i] = cumProb;\n  console.assert(cumProb === PROB_TOTAL);\n  /* how many updates will be required after current probs are halved? */\n  this.updateThresh = PROB_TOTAL - Math.floor((cumProb-odd) / 2);\n  /* reset the update table */\n  for (i=0; i < (this.numSyms + 1); i++) {\n    this.update[i] = 0;\n  }\n  this.update[this.numSyms] = 1; // ensure that escape never goes away\n  this.updateCount = 1;\n  /* compute decode table, if this is a decoder */\n  if (!isDecoder) { return; }\n  for (i=0, j=0, k=0; i<(this.numSyms+1); i++) {\n    var probLimit = this.prob[i+1];\n    for (; j<probLimit; j++) {\n      this.probToSym[j] = i;\n    }\n    var escProbLimit = this.escape[i+1];\n    for (; k<escProbLimit; k++) {\n      this.escProbToSym[k] = i;\n    }\n  }\n};\nDefSumModel.prototype.encode = function(symbol) {\n  var lt_f = this.prob[symbol];\n  var sy_f = this.prob[symbol+1] - lt_f;\n  console.assert(this.prob[this.numSyms+1] === PROB_TOTAL);\n  if (sy_f) {\n    this.coder.encodeShift(sy_f, lt_f, LOG_PROB_TOTAL);\n    return this._update(symbol);\n  }\n  // escape!\n  console.assert(symbol !== this.numSyms); // catch infinite recursion\n  this.encode(this.numSyms); // guaranteed non-zero probability\n  // code symbol as literal, taking advantage of reduced escape range.\n  lt_f = this.escape[symbol];\n  sy_f = this.escape[symbol+1] - lt_f;\n  var tot_f = this.escape[this.numSyms];\n  this.coder.encodeFreq(sy_f, lt_f, tot_f);\n  return this._update(symbol);\n};\nDefSumModel.prototype.decode = function() {\n  var prob = this.coder.decodeCulShift(LOG_PROB_TOTAL);\n  var symbol = this.probToSym[prob];\n  var lt_f = this.prob[symbol];\n  var sy_f = this.prob[symbol+1] - lt_f;\n  this.coder.decodeUpdate(sy_f, lt_f, PROB_TOTAL);\n  this._update(symbol, true);\n  if (symbol !== this.numSyms) {\n    return symbol;\n  }\n  // escape!\n  var tot_f = this.escape[this.numSyms];\n  prob = this.coder.decodeCulFreq(tot_f);\n  symbol = this.escProbToSym[prob];\n  lt_f = this.escape[symbol];\n  sy_f = this.escape[symbol+1] - lt_f;\n  this.coder.decodeUpdate(sy_f, lt_f, tot_f);\n  this._update(symbol, true);\n  return symbol;\n};\n\nDefSumModel.MAGIC='dfsm';\n/** Simple order-0 compressor, as self-test. */\nDefSumModel.compressFile = Util.compressFileHelper(DefSumModel.MAGIC, function(inStream, outStream, fileSize, props, finalByte) {\n  var range = new RangeCoder(outStream);\n  range.encodeStart(finalByte, 1);\n  var model = new DefSumModel(range, (fileSize<0) ? 257 : 256);\n  Util.compressWithModel(inStream, fileSize, model);\n  range.encodeFinish();\n},true);\n/** Simple order-0 decompresser, as self-test. */\nDefSumModel.decompressFile = Util.decompressFileHelper(DefSumModel.MAGIC, function(inStream, outStream, fileSize) {\n  var range = new RangeCoder(inStream);\n  range.decodeStart(true/*already read the final byte*/);\n  var model = new DefSumModel(range, (fileSize<0) ? 257 : 256, true);\n  Util.decompressWithModel(outStream, fileSize, model);\n  range.decodeFinish();\n});\n\nreturn DefSumModel;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/DefSumModel.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/DefSumModel.js\n// module chunks = main","/** Distance model used by gzip/deflate.\n *  Encodes distances starting at 0 (for deflate compatibility, subtract\n *  one from distance to encode).\n *  Uses ~32-entry model to predict ln2(distance) (more-or-less) and then\n *  encodes a few more bits for the actual distance. */\nvar libs = [\n\trequire('./Util')\n];\nvar body_fn = function (Util){\n\n    // lengthBitsModelFactory will be called with arguments 2, 4, 8, 16, etc\n    // and must return an appropriate model or coder.\n    var DeflateDistanceModel = function(size, extraStates,\n                                        lgDistanceModelFactory,\n                                        lengthBitsModelFactory) {\n        var i;\n        var bits = Util.fls(size-1);\n        this.extraStates = +extraStates || 0;\n        this.lgDistanceModel = lgDistanceModelFactory(2*bits + extraStates);\n        // this.distanceModel[n] used for distances which are n-bits long,\n        // but only n-2 bits are encoded: the top bit is known to be one,\n        // and the next bit is encoded by the lgDistanceModel.\n        this.distanceModel = [];\n        for (i=3 ; i <= bits; i++) {\n            var numBits = i - 2;\n            this.distanceModel[i] = lengthBitsModelFactory(1<<numBits);\n        }\n    };\n    /* you can give this model arguments between 0 and (size-1), or else\n       a negative argument which is one of the 'extra states'. */\n    DeflateDistanceModel.prototype.encode = function(distance) {\n        if (distance < 4) { // small distance or an 'extra state'\n            this.lgDistanceModel.encode(distance + this.extraStates);\n            return;\n        }\n        var lgDistance = Util.fls(distance);\n        console.assert(distance & (1<<(lgDistance-1))); // top bit is set\n        console.assert(lgDistance >= 3);\n        var nextBit = (distance & (1 << (lgDistance-2))) ? 1 : 0;\n        var l = 4 + ((lgDistance-3)*2) + nextBit;\n        this.lgDistanceModel.encode(l + this.extraStates);\n        // now encode the rest of the bits.\n        var rest = distance & ((1 << (lgDistance-2)) - 1);\n        this.distanceModel[lgDistance].encode(rest);\n    };\n    DeflateDistanceModel.prototype.decode = function() {\n        var l = this.lgDistanceModel.decode() - this.extraStates;\n        if (l < 4) {\n            return l; // this is a small distance or an 'extra state'\n        }\n        var nextBit = (l&1);\n        var lgDistance = ((l-4) >>> 1) + 3;\n        var rest = this.distanceModel[lgDistance].decode();\n        return ((2+nextBit) << (lgDistance-2)) + rest;\n    };\n    return DeflateDistanceModel;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/DeflateDistanceModel.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/DeflateDistanceModel.js\n// module chunks = main","/**\n * Implementation of Dynamic Markov Compression, using byte-oriented\n * nodes/transitions.\n *\n * Currently no model-shrinking is done, so be careful trying to use\n * this on large inputs!\n *\n * Notes for the future / TO DO:\n *\n * Add node merging to Dmc:\n *  - once (total states traversed / total node count) exceeds a certain value\n *    - find the median node w/rt total visits\n *    - combine all nodes w/ less visits into a single node, with transitions\n *      to node[0] - node[255] (initial context-1 states)\n *      - initially transition counts are zero?  or summed from components?\n *        needs to be summed so kirchoff principle holds\n *    - halve the edge counts of all nodes, to provide for adaptation\n *      - enforce property that all nodes point \"higher\" except for\n *        links to nodes 0-255.  So we can resum all nodes in one pass,\n *        after resetting all node.sum to zero. X YES because we know\n *        what the total sum must be, so we can arrange to scale to maintain\n *        proper sum. XXX what about node 0-255? XXX maybe just clear all\n *        edge counts XXX\n *\n * Fix buglet: ensure that kirchoff principle *exactly* holds by\n * paying attention to rounding when we distribute edge counts.  track\n * highest edge and give (desiredSum - newSum) extra counts to that\n * outgoing edge? add one to each nonzero edge until all gone?\n *\n * Split 'to' nodes when to.sum grows too high -- only if we're\n * highest incoming edge?  Fix bug again here with saturating counts;\n * we can't ignore counts w/o violating kirchoff principle, so we need\n * to clone it.  Maybe start trying to clone early (before our counter\n * saturates) so we have a better chance of cloning on the high\n * incoming edge? XXX we don't track incoming edges.  XXX so just\n * clone when we visit.\n */\nvar libs = [\n\trequire('./MTFModel'),\n\trequire('./RangeCoder'),\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (MTFModel, RangeCoder, Stream, Util){\n\n// nm = no model cloning, MAX_TRANS_CNT=0xFF, MAX_MODEL_PROB=0xFFFF\n// nm2 = \"                            0xFFFF                 0xFFFF\n// nm3 = \"                             0xFFF                 0x0FFF\n// nm4 = \"                            0xFFFF                   0xFF\n// cl1 = model cloning, MAX_TRANS_CNT=0xFFFF  MAX_MODEL_PROB=0xFF\n// cl2 = model cloning, MAX_TRANS_CNT=  0xFF  MAX_MODEL_PROB=0xFF\n// cl3 = model cloning, MAX_TRANS_CNT=0xFFFF  MAX_MODEL_PROB=0xFFFF\nvar MAX_TRANS_CNT = 0xFFFF;\nvar DEFAULT_MIN_CNT1 = 8;\nvar DEFAULT_MIN_CNT2 = 128;\nvar MODEL_PROB_MAX = 0xFF00;\nvar MODEL_PROB_INCR= 0x0100;\nvar CLONE_MODELS=false;\nvar PRINT_STATS=false; // for quick benchmarking\n\n// XXX need to limit growth of model (throw away and retrain if model\n//     gets too large)\n\nvar Dmc = Object.create(null);\nDmc.MAGIC = 'dmc!';\n\nvar MarkovNode = function(coder, size, optModel) {\n  this.out = [];\n  this.model = optModel ? optModel.clone() :\n    new MTFModel(coder, size, MODEL_PROB_MAX, MODEL_PROB_INCR);\n  this.count = Util.makeU16Buffer(size);\n  this.sum = 0;\n};\nMarkovNode.prototype.clone = function(coder, size) {\n  var i;\n  var newNode = new MarkovNode(coder, size, CLONE_MODELS ? this.model : null);\n  for (i=0; i<size; i++) {\n    newNode.out[i] = this.out[i];\n  }\n  return newNode;\n};\n\nvar MarkovModel = function(coder, size, MIN_CNT1, MIN_CNT2) {\n  var i, j;\n  // initial model is 'size' states, completely linked.\n  this.coder = coder;\n  this.size = size;\n  this.MIN_CNT1 = MIN_CNT1 || DEFAULT_MIN_CNT1;\n  this.MIN_CNT2 = MIN_CNT2 || DEFAULT_MIN_CNT2;\n  this.nodes = [];\n  for (i=0; i<size; i++) {\n    this.nodes[i] = new MarkovNode(coder, size);\n  }\n  // now link nodes\n  for (i=0; i<size; i++) {\n    for (j=0; j<size; j++) {\n      this.nodes[i].out[j] = this.nodes[j];\n    }\n  }\n  // select an arbitrary node as the start state.\n  this.current = this.nodes[0];\n};\nMarkovModel.prototype.maybeSplit = function(from, symbol, to) {\n  var trans_cnt = from.count[symbol];\n  var next_cnt = to.sum;\n  var i;\n  if ( (trans_cnt <= this.MIN_CNT1) ||\n       (next_cnt - trans_cnt <= this.MIN_CNT2) ) {\n    return to; // no split\n  }\n\n  // split this guy!\n  var newNode = to.clone(this.coder, this.size);\n  this.nodes.push(newNode);\n  from.out[symbol] = newNode;\n  // distribute transition counts among new and cloned node\n  newNode.sum = to.sum = 0;\n  for (i=0; i<this.size; i++) {\n    newNode.count[i] = to.count[i] * trans_cnt / next_cnt;\n    newNode.sum += newNode.count[i];\n    to.count[i] -= newNode.count[i];\n    to.sum += to.count[i];\n  }\n\n  return newNode;\n};\nMarkovModel.prototype.encode = function(symbol) {\n  var from = this.current;\n  from.model.encode(symbol);\n  var to = from.out[symbol];\n  if (from.count[symbol] !== MAX_TRANS_CNT) {\n      from.count[symbol]++;\n      from.sum++;\n  }\n  this.current = this.maybeSplit(from, symbol, to);\n};\nMarkovModel.prototype.decode = function() {\n  var from = this.current;\n  var symbol = from.model.decode();\n  var to = from.out[symbol];\n  if (from.count[symbol] !== MAX_TRANS_CNT) {\n      from.count[symbol]++;\n      from.sum++;\n  }\n  this.current = this.maybeSplit(from, symbol, to);\n  return symbol;\n};\n\nDmc.compressFile = Util.compressFileHelper(Dmc.MAGIC, function(inStream, outStream, fileSize, props) {\n\n  props = props || {};\n  var MIN_CNT1 = (+props.m) || DEFAULT_MIN_CNT1;\n  var MIN_CNT2 = (+props.n) || DEFAULT_MIN_CNT2;\n  Util.writeUnsignedNumber(outStream, MIN_CNT1);\n  Util.writeUnsignedNumber(outStream, MIN_CNT2);\n\n  var range = new RangeCoder(outStream);\n  range.encodeStart(0xCA, 0);\n\n  var mm = new MarkovModel(range, (fileSize<0) ? 257 : 256,\n                           MIN_CNT1, MIN_CNT2);\n  var inSize = 0;\n  while (inSize !== fileSize) {\n    var ch = inStream.readByte();\n    if (ch===Stream.EOF) {\n      mm.encode(256); // end of stream\n      break;\n    }\n    mm.encode(ch);\n    inSize++;\n  }\n  var outSize = range.encodeFinish();\n  if (PRINT_STATS) {\n    console.log('M1', mm.MIN_CNT1, 'M2', mm.MIN_CNT2,\n                'states', mm.nodes.length, 'size', outSize);\n  }\n});\n\nDmc.decompressFile = Util.decompressFileHelper(Dmc.MAGIC, function(inStream, outStream, fileSize) {\n\n  var MIN_CNT1 = Util.readUnsignedNumber(inStream);\n  var MIN_CNT2 = Util.readUnsignedNumber(inStream);\n\n  var range = new RangeCoder(inStream);\n  range.decodeStart();\n\n  var mm = new MarkovModel(range, (fileSize<0) ? 257 : 256,\n                           MIN_CNT1, MIN_CNT2);\n  var outSize = 0;\n  while (outSize !== fileSize) {\n    var ch = mm.decode();\n    if (ch===256) {\n      break; // EOF\n    }\n    outStream.writeByte(ch);\n    outSize++;\n  }\n  range.decodeFinish();\n});\n\nreturn Dmc;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/Dmc.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/Dmc.js\n// module chunks = main","/* Dummy Range Coder, for debugging.\n * This has the same interface as RangeCoder, but just dumps the frequency\n * parameters given to the file.  This helps debug problems with the model\n * driving the range coder.\n */\nvar libs = [\n\trequire('./RangeCoder'),\n\trequire('./Util')\n];\nvar body_fn = function (RangeCoder,Util){\n    var Dummy = function(stream) {\n        RangeCoder.call(this, stream);\n    };\n    Dummy.prototype = Object.create(RangeCoder.prototype);\n    Dummy.prototype._write8 = function(b) {\n        Util.writeUnsignedNumber(this.stream, b);\n        this.stream.writeByte(b);\n    };\n    Dummy.prototype._write16 = function(s) {\n        this.stream.writeByte((s >>> 8) & 0xFF);\n        this.stream.writeByte(s & 0xFF);\n    };\n    Dummy.prototype._read8 = function() {\n        return this.stream.readByte();\n    };\n    Dummy.prototype._read16 = function() {\n        var hi = this.stream.readByte();\n        var lo = this.stream.readByte();\n        return (hi<<8) | lo;\n    };\n    Dummy.prototype.encodeStart = function(c, initlength) {\n        this.stream.writeByte(c);\n    };\n    Dummy.prototype.encodeFreq = function(sy_f, lt_f, tot_f) {\n        console.assert(sy_f > 0);\n        console.assert(tot_f > 0);\n        console.assert(tot_f <= (1<<23));\n        if ((sy_f + lt_f) > tot_f) {\n            console.error('dummy coder: lt_f + sy_f > tot_f',\n                          sy_f, lt_f, tot_f);\n        }\n        Util.writeUnsignedNumber(this.stream, sy_f);\n        Util.writeUnsignedNumber(this.stream, lt_f);\n        Util.writeUnsignedNumber(this.stream, tot_f);\n    };\n    Dummy.prototype.encodeShift = function(sy_f, lt_f, shift) {\n        this.encodeFreq(sy_f, lt_f, 1 << shift);\n    };\n    Dummy.prototype.encodeFinish = function() {\n        return 0;\n    };\n    Dummy.prototype.decodeStart = function(skipInitialRead) {\n        return skipInitialRead ? 0 : this.stream.readByte();\n    };\n    Dummy.prototype.decodeCulFreq = function(tot_f) {\n        console.assert(tot_f > 0);\n        this.sy_f = Util.readUnsignedNumber(this.stream);\n        this.lt_f = Util.readUnsignedNumber(this.stream);\n        this.tot_f= Util.readUnsignedNumber(this.stream);\n        if (tot_f !== this.tot_f) {\n            console.error('decodeCul* wrong total: got', tot_f,\n                          'expected', this.tot_f);\n        }\n        return (this.sy_f>>>1) + this.lt_f;\n    };\n    Dummy.prototype.decodeCulShift = function(shift) {\n        return this.decodeCulFreq(1<<shift);\n    };\n    Dummy.prototype.decodeUpdate = function(sy_f, lt_f, tot_f) {\n        console.assert(sy_f > 0);\n        console.assert(tot_f > 0);\n        if (sy_f !== this.sy_f ||\n            lt_f !== this.lt_f ||\n            tot_f!== this.tot_f) {\n            console.error('decodeUpdate wrong parameters; got',\n                          sy_f, lt_f, tot_f, 'expected',\n                          this.sy_f, this.lt_f, this.tot_f);\n        }\n    };\n    Dummy.prototype.decodeFinish = function() {\n    };\n\n    return Dummy;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/DummyRangeCoder.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/DummyRangeCoder.js\n// module chunks = main","/** Range coding model based on Fenwick trees for O(ln N) query/update. */\nvar libs = [\n\trequire('./RangeCoder'),\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (RangeCoder,Stream,Util){\n\n/** We store two probabilities in a U32, so max prob is going to be 0xFFFF */\nvar DEFAULT_MAX_PROB = 0xFF00;\nvar DEFAULT_INCREMENT= 0x0100;\n\nvar ESC_MASK = 0x0000FFFF, ESC_SHIFT = 0;\nvar SYM_MASK = 0xFFFF0000, SYM_SHIFT = 16;\nvar SCALE_MASK=0xFFFEFFFE;\n\nvar FenwickModel = function(coder, size, max_prob, increment) {\n    this.coder = coder;\n    this.numSyms = size + 1; // save space for an escape symbol\n    this.tree = Util.makeU32Buffer(this.numSyms*2);\n    this.increment = (+increment) || DEFAULT_INCREMENT;\n    this.max_prob = (+max_prob) || DEFAULT_MAX_PROB;\n    // sanity-check to prevent overflow.\n    console.assert((this.max_prob + (this.increment-1)) <= 0xFFFF);\n    console.assert(size <= 0xFFFF);\n    // record escape probability as 1.\n    var i;\n    for (i=0; i<size; i++) {\n        this.tree[this.numSyms + i] = // escape prob=1, sym prob = 0\n            (1 << ESC_SHIFT) | (0 << SYM_SHIFT);\n    }\n    this.tree[this.numSyms + i] = // escape prob = 0, sym prob = 1\n        (0 << ESC_SHIFT) | (this.increment << SYM_SHIFT);\n    this._sumTree();\n    // probability sums are in this.tree[1].  this.tree[0] is unused.\n};\nFenwickModel.factory = function(coder, max_prob, increment) {\n    return function(size) {\n        return new FenwickModel(coder, size, max_prob, increment);\n    };\n};\nFenwickModel.prototype.clone = function() {\n    var newModel = new FenwickModel(this.coder, this.size,\n                                    this.max_prob, this.increment);\n    var i;\n    for (i=1; i<this.tree.length; i++) {\n        newModel.tree[i] = this.tree[i];\n    }\n    return newModel;\n};\nFenwickModel.prototype.encode = function(symbol) {\n    var i = this.numSyms + symbol;\n    var sy_f = this.tree[i];\n    var mask = SYM_MASK, shift = SYM_SHIFT;\n    var update = (this.increment << SYM_SHIFT);\n\n    if ((sy_f & SYM_MASK) === 0) { // escape!\n        this.encode(this.numSyms-1);\n        mask = ESC_MASK;\n        update -= (1<<ESC_SHIFT); // not going to escape no mo'\n        shift = ESC_SHIFT;\n    } else if (symbol === (this.numSyms-1) &&\n               ((this.tree[1] & ESC_MASK) >>> ESC_SHIFT) === 1) {\n        // this is the last escape, zero it out\n        update = -this.tree[i];\n    }\n    // sum up the proper lt_f\n    var lt_f = 0;\n    while (i > 1) {\n        var isRight = (i & 1);\n        var parent = (i >>> 1);\n        // if we're the right child, we need to\n        // add the prob from the left child\n        if (isRight) {\n            lt_f += this.tree[2*parent];\n        }\n        // update sums\n        this.tree[i] += update; // increase sym / decrease esc\n        i = parent;\n    }\n    var tot_f = this.tree[1];\n    this.tree[1] += update; // update prob in root\n    sy_f = (sy_f & mask) >>> shift;\n    lt_f = (lt_f & mask) >>> shift;\n    tot_f =(tot_f& mask) >>> shift;\n    this.coder.encodeFreq(sy_f, lt_f, tot_f);\n    // rescale?\n    if ((( this.tree[1] & SYM_MASK ) >>> SYM_SHIFT) >= this.max_prob) {\n        this._rescale();\n    }\n};\nFenwickModel.prototype._decode = function(isEscape) {\n    var mask = SYM_MASK, shift = SYM_SHIFT;\n    var update = (this.increment << SYM_SHIFT);\n    if (isEscape) {\n        mask = ESC_MASK;\n        update -= (1 << ESC_SHIFT);\n        shift = ESC_SHIFT;\n    }\n    var tot_f = (this.tree[1] & mask) >>> shift;\n    var prob = this.coder.decodeCulFreq(tot_f);\n    // travel down the tree looking for this\n    var i = 1, lt_f = 0;\n    while (i < this.numSyms) {\n        this.tree[i] += update;\n        // look at probability in left child.\n        var leftProb = (this.tree[2*i] & mask) >>> shift;\n        i *= 2;\n        if ((prob-lt_f) >= leftProb) {\n            lt_f += leftProb;\n            i++; // take the right child.\n        }\n    }\n    var symbol = i - this.numSyms;\n    var sy_f = (this.tree[i] & mask) >>> shift;\n    this.tree[i] += update;\n    this.coder.decodeUpdate(sy_f, lt_f, tot_f);\n    // was this the last escape?\n    if (symbol === (this.numSyms-1) &&\n        ((this.tree[1] & ESC_MASK) >>> ESC_SHIFT) === 1) {\n        update = -this.tree[i]; // zero it out\n        while (i >= 1) {\n            this.tree[i] += update;\n            i = (i >>> 1); // parent\n        }\n    }\n    // rescale?\n    if ((( this.tree[1] & SYM_MASK ) >>> SYM_SHIFT) >= this.max_prob) {\n        this._rescale();\n    }\n    return symbol;\n};\nFenwickModel.prototype.decode = function() {\n    var symbol = this._decode(false); // not escape\n    if (symbol === (this.numSyms-1)) {\n        // this was an escape!\n        symbol = this._decode(true); // an escape!\n    }\n    return symbol;\n};\nFenwickModel.prototype._rescale = function() {\n    var i, prob, noEscape = true;\n    // scale symbols (possible causing them to escape)\n    for (i=0; i < this.numSyms-1; i++) {\n        prob = this.tree[this.numSyms + i];\n        if ((prob & ESC_MASK) !== 0) {\n            // this symbol escapes\n            noEscape = false;\n            continue;\n        }\n        prob = (prob & SCALE_MASK) >>> 1;\n        if (prob === 0) {\n            // this symbol newly escapes\n            prob = (1 << ESC_SHIFT);\n            noEscape = false;\n        }\n        this.tree[this.numSyms + i] = prob;\n    }\n    // scale the escape symbol\n    prob = this.tree[this.numSyms + i];\n    prob = (prob & SCALE_MASK) >>> 1;\n    // prob should be zero if there are no escaping symbols, otherwise\n    // it must be at least 1.\n    if (noEscape) { prob = 0; }\n    else if (prob === 0) { prob = (1 << SYM_SHIFT); }\n    this.tree[this.numSyms + i] = prob;\n    // sum it all up afresh\n    this._sumTree();\n};\nFenwickModel.prototype._sumTree = function() {\n    var i;\n    // sum it all. (we know we won't overflow)\n    for (i=this.numSyms - 1; i > 0; i--) {\n        this.tree[i] = this.tree[2*i] + this.tree[2*i + 1];\n    }\n};\n\nFenwickModel.MAGIC = 'fenw';\n/** Simple order-0 compressor, as self-test. */\nFenwickModel.compressFile = Util.compressFileHelper(FenwickModel.MAGIC, function(inStream, outStream, fileSize, props, finalByte) {\n    var range = new RangeCoder(outStream);\n    range.encodeStart(finalByte, 1);\n    var model = new FenwickModel(range, (fileSize<0) ? 257 : 256);\n    Util.compressWithModel(inStream, fileSize, model);\n    range.encodeFinish();\n}, true);\n\n/** Simple order-0 decompresser, as self-test. */\nFenwickModel.decompressFile = Util.decompressFileHelper(FenwickModel.MAGIC, function(inStream, outStream, fileSize) {\n    var range = new RangeCoder(inStream);\n    range.decodeStart(true/*already read the final byte*/);\n    var model = new FenwickModel(range, (fileSize<0) ? 257 : 256);\n    Util.decompressWithModel(outStream, fileSize, model);\n    range.decodeFinish();\n});\n\nreturn FenwickModel;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/FenwickModel.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/FenwickModel.js\n// module chunks = main","/* Adaptive Huffman code, using Vitter's algorithm ported from\n * vitter.c at http://code.google.com/p/compression-code/downloads/list\n * The original code was placed in the public domain, and so I\n * also place this JavaScript port in the public domain.\n *   -- C. Scott Ananian <cscott@cscott.net>, 2013\n * ps. some truly grotty C code in the originally, faithfully ported to\n *     evil comma-operator-using, assignment-in-if-condition JavaScript.\n */\nvar libs = [\n\trequire('./BitStream'),\n\trequire('./Util')\n];\nvar body_fn = function (BitStream,Util) {\n//  This code is adapted from Professor Vitter's\n//  article, Design and Analysis of Dynamic Huffman Codes,\n//  which appeared in JACM October 1987\n\n//  A design trade-off has been made to simplify the\n//  code:  a node's block is determined dynamically,\n//  and the implicit tree structure is maintained,\n//  e.g. explicit node numbers are also implicit.\n\n//  Dynamic Huffman table weight ranking\n//  is maintained per Professor Vitter's\n//  invariant (*) for algorithm FGK:\n\n//  leaves precede internal nodes of the\n//  same weight in a non-decreasing ranking\n//  of weights using implicit node numbers:\n\n//  1) leaves slide over internal nodes, internal nodes\n//  swap over groups of leaves, leaves are swapped\n//  into group leader position, but two internal\n//  nodes never change positions relative\n//  to one another.\n\n//  2) weights are incremented by 2:\n//  leaves always have even weight values;\n//  internal nodes always have odd values.\n\n//  3) even node numbers are always right children;\n//  odd numbers are left children in the tree.\n\n//  node 2 * HuffSize - 1 is always the tree root;\n//  node HuffEsc is the escape node;\n\n//  the tree is initialized by creating an\n//  escape node as the root.\n\n//  each new leaf symbol is paired with a new escape\n//  node into the previous escape node in the tree,\n//  until the last symbol which takes over the\n//  tree position of the escape node, and\n//  HuffEsc is left at zero.\n\n//  overall table size: 2 * HuffSize\n\n//  huff_init(alphabet_size, potential symbols used)\n//  huff_encode(next_symbol)\n//  next_symbol = huff_decode()\n\n//  huff_scale(by_bits) -- scale weights and re-balance tree\n\nvar HTable = function(up, down, symbol, weight) {\n    this.up = up; // next node up the tree\n    this.down = down; // pair of down nodes\n    this.symbol = symbol;       // node symbol value\n    this.weight = weight;       // node weight\n};\nHTable.prototype.clone = function() {\n  return new HTable(this.up, this.down, this.symbol, this.weight);\n};\nHTable.prototype.set = function(htable) {\n  this.up = htable.up;\n  this.down = htable.down;\n  this.symbol = htable.symbol;\n  this.weight = htable.weight;\n};\n\n//  initialize an adaptive coder\n//  for alphabet size, and count\n//  of nodes to be used\nvar Huffman = function(size, root, bitstream, max_weight) {\n  var i;\n  //  default: all alphabet symbols are used\n\n  console.assert(size && typeof(size)==='number');\n  if( !root || root > size )\n      root = size;\n\n  //  create the initial escape node\n  //  at the tree root\n\n  if ( root <<= 1 ) {\n      root--;\n  }\n\n  // create root+1 htables (coding table)\n  // XXX this could be views on a backing Uint32 array?\n  this.table = [];\n  for (i=0; i<=root; i++) {\n    this.table[i] = new HTable(0,0,0,0);\n  }\n\n  // this.map => mapping for symbols to nodes\n  this.map = [];\n  // this.size => the alphabet size\n  if( this.size = size ) {\n    for (i=0; i<size; i++) {\n      this.map[i] = 0;\n    }\n  }\n\n  // this.esc  => the current tree height\n  // this.root => the root of the tree\n  this.esc = this.root = root;\n\n  if (bitstream) {\n    this.readBit = bitstream.readBit.bind(bitstream);\n    this.writeBit = bitstream.writeBit.bind(bitstream);\n  }\n  this.max_weight = max_weight; // may be null or undefined\n}\n// factory interface\nHuffman.factory = function(bitstream, max_weight) {\n  return function(size) {\n    return new Huffman(size, size, bitstream, max_weight);\n  };\n};\n\n\n// split escape node to incorporate new symbol\n\nHuffman.prototype.split = function(symbol) {\n  var pair, node;\n\n  //  is the tree already full???\n\n  if( pair = this.esc ) {\n    this.esc--;\n  } else {\n    console.assert(false);\n    return 0;\n  }\n\n  //  if this is the last symbol, it moves into\n  //  the escape node's old position, and\n  //  this.esc is set to zero.\n\n  //  otherwise, the escape node is promoted to\n  //  parent a new escape node and the new symbol.\n\n  if( node = this.esc ) {\n    this.table[pair].down = node;\n    this.table[pair].weight = 1;\n    this.table[node].up = pair;\n    this.esc--;\n  } else {\n    pair = 0;\n    node = 1;\n  }\n\n  //  initialize the new symbol node\n\n  this.table[node].symbol = symbol;\n  this.table[node].weight = 0;\n  this.table[node].down = 0;\n  this.map[symbol] = node;\n\n  //  initialize a new escape node.\n\n  this.table[this.esc].weight = 0;\n  this.table[this.esc].down = 0;\n  this.table[this.esc].up = pair;\n  return node;\n};\n\n//  swap leaf to group leader position\n//  return symbol's new node\n\nHuffman.prototype.leader = function(node) {\n  var weight = this.table[node].weight;\n  var leader = node, prev, symbol;\n\n  while( weight === this.table[leader + 1].weight ) {\n    leader++;\n  }\n\n  if( leader === node ) {\n    return node;\n  }\n\n  // swap the leaf nodes\n\n  symbol = this.table[node].symbol;\n  prev = this.table[leader].symbol;\n\n  this.table[leader].symbol = symbol;\n  this.table[node].symbol = prev;\n  this.map[symbol] = leader;\n  this.map[prev] = node;\n  return leader;\n};\n\n//  slide internal node up over all leaves of equal weight;\n//  or exchange leaf with next smaller weight internal node\n\n//  return node's new position\n\nHuffman.prototype.slide = function(node) {\n  var next = node;\n  var swap;\n\n  swap = this.table[next++].clone();\n\n  // if we're sliding an internal node, find the\n  // highest possible leaf to exchange with\n\n  if( swap.weight & 1 ) {\n    while( swap.weight > this.table[next + 1].weight ) {\n      next++;\n    }\n  }\n\n  //  swap the two nodes\n\n  this.table[node].set(this.table[next]);\n  this.table[next].set(swap);\n\n  this.table[next].up = this.table[node].up;\n  this.table[node].up = swap.up;\n\n  //  repair the symbol map and tree structure\n\n  if( swap.weight & 1 ) {\n    this.table[swap.down].up = next;\n    this.table[swap.down - 1].up = next;\n    this.map[this.table[node].symbol] = node;\n  } else {\n    this.table[this.table[node].down - 1].up = node;\n    this.table[this.table[node].down].up = node;\n    this.map[swap.symbol] = next;\n  }\n\n  return next;\n};\n\n//  increment symbol weight and re balance the tree.\n\nHuffman.prototype.increment = function(node) {\n  var up;\n\n  //  obviate swapping a parent with its child:\n  //    increment the leaf and proceed\n  //    directly to its parent.\n\n  //  otherwise, promote leaf to group leader position in the tree\n\n  if( this.table[node].up === node + 1 ) {\n    this.table[node].weight += 2;\n    node++;\n  } else {\n    node = this.leader (node);\n  }\n\n  //  increase the weight of each node and slide\n  //  over any smaller weights ahead of it\n  //  until reaching the root\n\n  //  internal nodes work upwards from\n  //  their initial positions; while\n  //  symbol nodes slide over first,\n  //  then work up from their final\n  //  positions.\n\n  while( this.table[node].weight += 2, up = this.table[node].up ) {\n    while( this.table[node].weight > this.table[node + 1].weight ) {\n        node = this.slide (node);\n    }\n\n    if( this.table[node].weight & 1 ) {\n        node = up;\n    } else {\n        node = this.table[node].up;\n    }\n  }\n\n  /* Re-scale if necessary. */\n  if (this.max_weight) {\n    if (this.table[this.root].weight >= this.max_weight) {\n      this.scale(1);\n    }\n  }\n};\n\n//  scale all weights and re-balance the tree\n\n//  zero weight nodes are removed from the tree\n//  by sliding them out the left of the rank list\n\nHuffman.prototype.scale = function(bits) {\n  var node = this.esc, weight, prev;\n\n  //  work up the tree from the escape node\n  //  scaling weights by the value of bits\n\n  while( ++node <= this.root ) {\n    //  recompute the weight of internal nodes;\n    //  slide down and out any unused ones\n\n    if( this.table[node].weight & 1 ) {\n      if( weight = this.table[this.table[node].down].weight & ~1 ) {\n        weight += this.table[this.table[node].down - 1].weight | 1;\n      }\n\n      //  remove zero weight leaves by incrementing HuffEsc\n      //  and removing them from the symbol map.  take care\n\n    } else if( !(weight = this.table[node].weight >> bits & ~1) ) {\n      if( this.map[this.table[node].symbol] = 0, this.esc++ ) {\n        this.esc++;\n      }\n    }\n\n    // slide the scaled node back down over any\n    // previous nodes with larger weights\n\n    this.table[node].weight = weight;\n    prev = node;\n\n    while( weight < this.table[--prev].weight ) {\n      this.slide(prev);\n    }\n  }\n\n  // prepare a new escape node\n\n  this.table[this.esc].down = 0;\n};\n\n//  send the bits for an escaped symbol\n\nHuffman.prototype.sendid = function(symbol) {\n  var empty = 0, max;\n\n  //  count the number of empty symbols\n  //  before the symbol in the table\n\n  while( symbol-- ) {\n    if( !this.map[symbol] ) {\n      empty++;\n    }\n  }\n\n  //  send LSB of this count first, using\n  //  as many bits as are required for\n  //  the maximum possible count\n\n  if( max = this.size - Math.floor((this.root - this.esc) / 2) - 1 ) {\n    do {\n      this.writeBit(empty & 1);\n      empty >>= 1;\n    } while( max >>= 1 );\n  }\n};\n\n//  encode the next symbol\n\nHuffman.prototype.encode = function(symbol) {\n  var emit = 1, bit;\n  var up, idx, node;\n\n  if( symbol < this.size ) {\n    node = this.map[symbol];\n  } else {\n    console.assert(false);\n    return;\n  }\n\n  //  for a new symbol, direct the receiver to the escape node\n  //  but refuse input if table is already full.\n\n  if( !(idx = node) ) {\n    if( !(idx = this.esc) ) {\n      return;\n    }\n  }\n\n  //  accumulate the code bits by\n  //  working up the tree from\n  //  the node to the root\n\n  while( up = this.table[idx].up ) {\n    emit <<= 1; emit |= idx & 1; idx = up;\n  }\n\n  //  send the code, root selector bit first\n\n  while( bit = emit & 1, emit >>= 1 ) {\n    this.writeBit(bit);\n  }\n\n  //  send identification and incorporate\n  //  new symbols into the tree\n\n  if( !node ) {\n    this.sendid(symbol);\n    node = this.split(symbol);\n  }\n\n  //  adjust and re-balance the tree\n\n  this.increment(node);\n};\n\n//  read the identification bits\n//  for an escaped symbol\n\nHuffman.prototype.readid = function() {\n  var empty = 0, bit = 1, max, symbol;\n\n  //  receive the symbol, LSB first, reading\n  //  only the number of bits necessary to\n  //  transmit the maximum possible symbol value\n\n  if( max = this.size - Math.floor((this.root - this.esc) / 2) - 1 ) {\n    do {\n      empty |= this.readBit() ? bit : 0;\n      bit <<= 1;\n    } while( max >>= 1 );\n  }\n\n  //  the count is of unmapped symbols\n  //  in the table before the new one\n\n  for( symbol = 0; symbol < this.size; symbol++ ) {\n    if( !this.map[symbol] ) {\n      if( !empty-- ) {\n        return symbol;\n      }\n    }\n  }\n\n  //  oops!  our count is too big, either due\n  //  to a bit error, or a short node count\n  //  given to huff_init.\n\n  console.assert(false);\n  return 0;\n};\n\n//  decode the next symbol\n\nHuffman.prototype.decode = function() {\n  var node = this.root;\n  var symbol, down;\n\n  //  work down the tree from the root\n  //  until reaching either a leaf\n  //  or the escape node.  A one\n  //  bit means go left, a zero\n  //  means go right.\n\n  while( down = this.table[node].down ) {\n    if( this.readBit() ) {\n      node = down - 1;  // the left child precedes the right child\n    } else {\n      node = down;\n    }\n  }\n\n  //  sent to the escape node???\n  //  refuse to add to a full tree\n\n  if( node === this.esc ) {\n    if( this.esc ) {\n      symbol = this.readid ();\n      node = this.split (symbol);\n    } else {\n      console.assert(false);\n      return 0;\n    }\n  } else {\n    symbol = this.table[node].symbol;\n  }\n\n  //  increment weights and re-balance\n  //  the coding tree\n\n  this.increment (node);\n  return symbol;\n};\n\n// stand alone compressor, mostly for testing\nHuffman.MAGIC = 'huff';\nHuffman.compressFile = Util.compressFileHelper(Huffman.MAGIC, function(input, output, size, props) {\n  var bitstream = new BitStream(output);\n\n  var alphabetSize = 256;\n  if (size < 0) { alphabetSize++; }\n  var huff = new Huffman(257, alphabetSize, bitstream, 8191);\n  Util.compressWithModel(input, size, huff);\n  bitstream.flush();\n});\n\n// stand alone decompresser, again for testing\nHuffman.decompressFile = Util.decompressFileHelper(Huffman.MAGIC, function(input, output, size) {\n  var bitstream = new BitStream(input);\n\n  var alphabetSize = 256;\n  if (size < 0) { alphabetSize++; }\n  var huff = new Huffman(257, alphabetSize, bitstream, 8191);\n  Util.decompressWithModel(output, size, huff);\n});\n\nreturn Huffman;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/Huffman.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/Huffman.js\n// module chunks = main","/**\n * An in-place, length restricted Canonical Huffman code length allocator\n *\n * Based on the algorithm proposed by R. L. Milidi, A. A. Pessoa and\n * E. S. Laber in \"In-place Length-Restricted Prefix Coding\" (see:\n * http://www-di.inf.puc-rio.br/~laber/public/spire98.ps) and\n * incorporating additional ideas from the implementation of \"shcodec\"\n * by Simakov Alexander (see: http://webcenter.ru/~xander/)\n *\n * This JavaScript implementation ported from HuffmanAllocator.java from\n *   https://code.google.com/p/jbzip2\n * which is:\n *\n *   Copyright (c) 2011 Matthew Francis\n *\n *   Permission is hereby granted, free of charge, to any person\n *   obtaining a copy of this software and associated documentation\n *   files (the \"Software\"), to deal in the Software without\n *   restriction, including without limitation the rights to use,\n *   copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the\n *   Software is furnished to do so, subject to the following\n *   conditions:\n *\n *   The above copyright notice and this permission notice shall be\n *   included in all copies or substantial portions of the Software.\n *\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n *   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n *   OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n *   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n *   HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n *   WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n *   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n *   OTHER DEALINGS IN THE SOFTWARE.\n *\n * This JavaScript implementation is:\n *   Copyright (c) 2013 C. Scott Ananian\n * with the same licensing terms as Matthew Francis' original implementation.\n */\nvar libs = [\n\trequire('./freeze'),\n\trequire('./Util')\n];\nvar body_fn = function (freeze, Util) {\n\n  /**\n   * FIRST() function\n   * @param array The code length array\n   * @param i The input position\n   * @param nodesToMove The number of internal nodes to be relocated\n   * @return The smallest {@code k} such that {@code nodesToMove <= k <= i} and\n   *         {@code i <= (array[k] % array.length)}\n   */\n  var first = function(array, i, nodesToMove) {\n    var length = array.length;\n    var limit = i;\n    var k = array.length - 2;\n\n    while ((i >= nodesToMove) && ((array[i] % length) > limit)) {\n      k = i;\n      i -= (limit - i + 1);\n    }\n    i = Math.max (nodesToMove - 1, i);\n\n    while (k > (i + 1)) {\n      var temp = (i + k) >> 1;\n      if ((array[temp] % length) > limit) {\n        k = temp;\n      } else {\n        i = temp;\n      }\n    }\n\n    return k;\n  };\n\n  /**\n   * Fills the code array with extended parent pointers\n   * @param array The code length array\n   */\n  var setExtendedParentPointers = function(array) {\n    var length = array.length;\n\n    array[0] += array[1];\n\n    var headNode, tailNode, topNode, temp;\n    for (headNode = 0, tailNode = 1, topNode = 2;\n         tailNode < (length - 1);\n         tailNode++) {\n      if ((topNode >= length) || (array[headNode] < array[topNode])) {\n        temp = array[headNode];\n        array[headNode++] = tailNode;\n      } else {\n        temp = array[topNode++];\n      }\n\n      if ((topNode >= length) ||\n          ((headNode < tailNode) && (array[headNode] < array[topNode]))) {\n        temp += array[headNode];\n        array[headNode++] = tailNode + length;\n      } else {\n        temp += array[topNode++];\n      }\n\n      array[tailNode] = temp;\n    }\n  };\n\n  /**\n   * Finds the number of nodes to relocate in order to achieve a given code\n   * length limit\n   * @param array The code length array\n   * @param maximumLength The maximum bit length for the generated codes\n   * @return The number of nodes to relocate\n   */\n  var findNodesToRelocate = function(array, maximumLength) {\n    var currentNode = array.length - 2;\n    var currentDepth;\n    for (currentDepth = 1;\n         (currentDepth < (maximumLength - 1)) && (currentNode > 1);\n         currentDepth++) {\n      currentNode =  first (array, currentNode - 1, 0);\n    }\n\n    return currentNode;\n  };\n\n\n  /**\n   * A final allocation pass with no code length limit\n   * @param array The code length array\n   */\n  var allocateNodeLengths = function(array) {\n    var firstNode = array.length - 2;\n    var nextNode = array.length - 1;\n    var currentDepth, availableNodes, lastNode, i;\n\n    for (currentDepth = 1, availableNodes = 2;\n         availableNodes > 0;\n         currentDepth++) {\n      lastNode = firstNode;\n      firstNode = first (array, lastNode - 1, 0);\n\n      for (i = availableNodes - (lastNode - firstNode); i > 0; i--) {\n        array[nextNode--] = currentDepth;\n      }\n\n      availableNodes = (lastNode - firstNode) << 1;\n    }\n  };\n\n  /**\n   * A final allocation pass that relocates nodes in order to achieve a\n   * maximum code length limit\n   * @param array The code length array\n   * @param nodesToMove The number of internal nodes to be relocated\n   * @param insertDepth The depth at which to insert relocated nodes\n   */\n  var allocateNodeLengthsWithRelocation = function(array, nodesToMove,\n                                                   insertDepth) {\n    var firstNode = array.length - 2;\n    var nextNode = array.length - 1;\n    var currentDepth = (insertDepth == 1) ? 2 : 1;\n    var nodesLeftToMove = (insertDepth == 1) ? nodesToMove - 2 : nodesToMove;\n    var availableNodes, lastNode, offset, i;\n\n    for (availableNodes = currentDepth << 1;\n         availableNodes > 0;\n         currentDepth++) {\n      lastNode = firstNode;\n      firstNode = (firstNode <= nodesToMove) ? firstNode : first (array, lastNode - 1, nodesToMove);\n\n      offset = 0;\n      if (currentDepth >= insertDepth) {\n        offset = Math.min (nodesLeftToMove, 1 << (currentDepth - insertDepth));\n      } else if (currentDepth == (insertDepth - 1)) {\n        offset = 1;\n        if ((array[firstNode]) == lastNode) {\n          firstNode++;\n        }\n      }\n\n      for (i = availableNodes - (lastNode - firstNode + offset); i > 0; i--) {\n        array[nextNode--] = currentDepth;\n      }\n\n      nodesLeftToMove -= offset;\n      availableNodes = (lastNode - firstNode + offset) << 1;\n    }\n  };\n\n  /**\n   * Allocates Canonical Huffman code lengths in place based on a sorted\n   * frequency array\n   * @param array On input, a sorted array of symbol frequencies; On output,\n   *              an array of Canonical Huffman code lengths\n   * @param maximumLength The maximum code length. Must be at least\n   *                      {@code ceil(log2(array.length))}\n   */\n  // public\n  var allocateHuffmanCodeLengths = function(array, maximumLength) {\n    switch (array.length) {\n    case 2:\n      array[1] = 1;\n    case 1:\n      array[0] = 1;\n      return;\n    }\n\n    /* Pass 1 : Set extended parent pointers */\n    setExtendedParentPointers (array);\n\n    /* Pass 2 : Find number of nodes to relocate in order to achieve\n     *          maximum code length */\n    var nodesToRelocate = findNodesToRelocate (array, maximumLength);\n\n    /* Pass 3 : Generate code lengths */\n    if ((array[0] % array.length) >= nodesToRelocate) {\n      allocateNodeLengths (array);\n    } else {\n      var insertDepth = maximumLength - (Util.fls(nodesToRelocate - 1));\n      allocateNodeLengthsWithRelocation (array, nodesToRelocate, insertDepth);\n    }\n  };\n\n  return freeze({\n    allocateHuffmanCodeLengths: allocateHuffmanCodeLengths\n  });\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/HuffmanAllocator.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/HuffmanAllocator.js\n// module chunks = main","/** Simple (log n)(n) distance model. */\nvar libs = [\n\trequire('./Util')\n];\nvar body_fn = function (Util){\n\n    // lengthBitsModelFactory will be called with arguments 2, 4, 8, 16, etc\n    // and must return an appropriate model or coder.\n    var LogDistanceModel = function(size, extraStates,\n                                    lgDistanceModelFactory,\n                                    lengthBitsModelFactory) {\n        var i;\n        var bits = Util.fls(size-1);\n        this.extraStates = +extraStates || 0;\n        this.lgDistanceModel = lgDistanceModelFactory(1 + bits + extraStates);\n        // this.distanceModel[n] used for distances which are n-bits long,\n        // but only n-1 bits are encoded: the top bit is known to be one.\n        this.distanceModel = [];\n        for (i=2 ; i <= bits; i++) {\n            var numBits = i - 1;\n            this.distanceModel[i] = lengthBitsModelFactory(1<<numBits);\n        }\n    };\n    /* you can give this model arguments between 0 and (size-1), or else\n       a negative argument which is one of the 'extra states'. */\n    LogDistanceModel.prototype.encode = function(distance) {\n        if (distance < 2) { // small distance or an 'extra state'\n            this.lgDistanceModel.encode(distance + this.extraStates);\n            return;\n        }\n        var lgDistance = Util.fls(distance);\n        console.assert(distance & (1<<(lgDistance-1))); // top bit is set\n        console.assert(lgDistance >= 2);\n        this.lgDistanceModel.encode(lgDistance + this.extraStates);\n        // now encode the rest of the bits.\n        var rest = distance & ((1 << (lgDistance-1)) - 1);\n        this.distanceModel[lgDistance].encode(rest);\n    };\n    LogDistanceModel.prototype.decode = function() {\n        var lgDistance = this.lgDistanceModel.decode() - this.extraStates;\n        if (lgDistance < 2) {\n            return lgDistance; // this is a small distance or an 'extra state'\n        }\n        var rest = this.distanceModel[lgDistance].decode();\n        return (1 << (lgDistance-1)) + rest;\n    };\n    return LogDistanceModel;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/LogDistanceModel.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/LogDistanceModel.js\n// module chunks = main","/* LZJB compression: http://en.wikipedia.org/wiki/LZJB */\nvar libs = [\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (Stream,Util) {\n/**\n$Id: Iuppiter.js 3026 2010-06-23 10:03:13Z Bear $\n\nCopyright (c) 2010 Nuwa Information Co., Ltd, and individual contributors.\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n  1. Redistributions of source code must retain the above copyright notice,\n     this list of conditions and the following disclaimer.\n\n  2. Redistributions in binary form must reproduce the above copyright\n     notice, this list of conditions and the following disclaimer in the\n     documentation and/or other materials provided with the distribution.\n\n  3. Neither the name of Nuwa Information nor the names of its contributors\n     may be used to endorse or promote products derived from this software\n     without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n$Author: Bear $\n$Date: 2010-06-23 18:03:13 +0800 (, 23  2010) $\n$Revision: 3026 $\n*/\n\nvar Lzjb = Object.create(null);\nLzjb.MAGIC = 'lzjb';\n\n// Constants was used for compress/decompress function.\nvar NBBY = 8,\n    MATCH_BITS = 6,\n    MATCH_MIN = 3,\n    MATCH_MAX = ((1 << MATCH_BITS) + (MATCH_MIN - 1)),\n    OFFSET_MASK = ((1 << (16 - MATCH_BITS)) - 1),\n    LEMPEL_SIZE_BASE = 1024;\nvar EOF = Stream.EOF;\n\n// set C_COMPAT to true if you need to decompress with the (untweaked) C lzjb\n// implementation, which breaks if offset==0; the javascript\n// implementation uses 0 to indicate an offset of OFFSET_MASK+1.\nvar C_COMPAT = true;\n\n/**\n * Compress string or byte array using fast and efficient algorithm.\n *\n * Because of weak of javascript's natural, many compression algorithm\n * become useless in javascript implementation. The main problem is\n * performance, even the simple Huffman, LZ77/78 algorithm will take many\n * many time to operate. We use LZJB algorithm to do that, it suprisingly\n * fulfills our requirement to compress string fastly and efficiently.\n *\n * Our implementation is based on\n * http://src.opensolaris.org/source/raw/onnv/onnv-gate/usr/src/uts/common/fs/zfs/lzjb.c\n * and\n * http://src.opensolaris.org/source/raw/onnv/onnv-gate/usr/src/uts/common/os/compress.c\n * It is licensed under CDDL.\n *\n * @param {Array|Uint8Array|Buffer|stream} input The stream or byte array\n *        that you want to compress.\n * @param {stream} output Optional output stream.\n * @return {Array|Uint8Array|Buffer} Compressed byte array, or 'output'\n */\nLzjb.compressFile = Util.compressFileHelper(Lzjb.MAGIC, function(inStream, outStream, fileSize, props) {\n    var sstart, dstart = [], slen,\n        src = 0, dst = 0,\n        cpy, copymap,\n        mlen, offset,\n        hash, hp,\n        lempel,\n        i, j;\n    var retval;\n\n    // in an improvement over the original C implementation, we expand\n    // the hash table to track a number of potential matches, not just the\n    // most recent.  This doesn't require any changes to the decoder.\n    // Sample impact on compression size (on wikipedia data):\n    //  EXPAND  Time     Size      Option\n    //    1   0m20.321s  50185613    -1\n    //    2   0m22.437s  46503301    -2\n    //    3   0m23.773s  45744564    -3\n    //    4   0m25.666s  45199866    -4\n    //    5   0m35.810s  44821413    -5\n    //    6   0m40.947s  44666638    -6\n    //    8   0m49.639s  44413865    -7\n    //   12   0m49.927s  44124825    -8\n    //   16   1m01.180s  43972515    -9\n    //   32   1m30.530s  43554099\n    //   64   2m14.504s  43005530\n    //  128   3m43.570s  42361718\n    //  256   6m38.681s  41684853\n    var LEMPEL_SIZE = LEMPEL_SIZE_BASE;\n    var EXPAND = 1; // default to original C impl\n    if (typeof(props)==='number') {\n        LEMPEL_SIZE *= 2;\n        props = Math.max(1, Math.min(9, props)) - 1;\n        EXPAND = 1<<Math.floor(props/2);\n        if (props&1) EXPAND = Math.round(EXPAND * 1.5);\n        if (props >=2 && props <= 4) EXPAND++;\n    }\n\n    // use Uint16Array if available (zero-filled)\n    lempel = Util.makeU16Buffer(LEMPEL_SIZE * EXPAND);\n\n    var window = Util.makeU8Buffer(OFFSET_MASK+1);\n    var windowpos = 0;\n    var winput = function(_byte) {\n        window[windowpos++] = _byte;\n        if (windowpos >= window.length) {\n            windowpos = 0;\n        }\n        return _byte;\n    };\n\n    var outwindow = Util.makeU8Buffer(17);\n    var outpos = 0;\n    var dumpout = function() {\n        var i;\n        for (i=0; i<outpos; i++) {\n            outStream.writeByte(outwindow[i]);\n        }\n        outpos = 0;\n    };\n\n    var unbuffer = [];\n    var get = function() {\n        if (unbuffer.length)\n            return unbuffer.pop();\n        return inStream.readByte();\n    };\n    var unget = function(_byte) {\n        unbuffer.push(_byte);\n    };\n\n    var copymask = 1 << (NBBY - 1);\n    var matchpossibility = [];\n    while (true) {\n        var c1 = get();\n        if (c1 === EOF) break;\n\n        if ((copymask <<= 1) == (1 << NBBY)) {\n            dumpout();\n            copymask = 1;\n            outwindow[0] = 0;\n            outpos = 1;\n        }\n\n        var c2 = get();\n        if (c2 === EOF) {\n            outwindow[outpos++] = winput(c1);\n            break;\n        }\n        var c3 = get();\n        if (c3 === EOF) {\n            outwindow[outpos++] = winput(c1);\n            unget(c2);\n            continue;\n        }\n\n        hash = (c1 << 16) + (c2 << 8) + c3;\n        hash ^= (hash >> 9);\n        hash += (hash >> 5);\n        hash ^= c1;\n        hp = (hash & (LEMPEL_SIZE - 1)) * EXPAND;\n        matchpossibility.length = 0;\n        for (j=0; j<EXPAND; j++) {\n            offset = (windowpos - lempel[hp+j]) & OFFSET_MASK;\n            cpy = window.length + windowpos - offset;\n            var w1 = window[cpy & OFFSET_MASK];\n            var w2 = window[(cpy+1) & OFFSET_MASK];\n            var w3 = window[(cpy+2) & OFFSET_MASK];\n            // if offset is small, we might not have copied the tentative\n            // bytes into the window yet.  (Note that offset=0 really means\n            // offset=(OFFSET_MASK+1).)\n            if (C_COMPAT && offset===0) {\n                w1 = c1 ^ 1; // ensure match will fail\n            } else if (offset==1) { w2 = c1; w3 = c2; }\n            else if (offset==2) { w3 = c1; }\n            if (c1 === w1 && c2 === w2 && c3 === w3) {\n                matchpossibility.push(offset);\n            }\n        }\n        // store this location in the hash, move the others over to make room\n        // oldest match drops off\n        for (j=EXPAND-1; j>0; j--)\n            lempel[hp+j] = lempel[hp+j-1];\n        lempel[hp] = windowpos;\n        // did we find any matches?\n        if (matchpossibility.length === 0) {\n            outwindow[outpos++] = winput(c1);\n            unget(c3);\n            unget(c2);\n        } else {\n            // find the longest of the possible matches\n            outwindow[0] |= copymask;\n            winput(c1); winput(c2); winput(c3);\n            var c4 = get(), last = matchpossibility[0];\n            var base = window.length + windowpos;\n            for (mlen = MATCH_MIN; mlen < MATCH_MAX; mlen++, base++) {\n                if (c4 === EOF) break;\n                for (j=0; j < matchpossibility.length; ) {\n                    var w4 = window[(base - matchpossibility[j]) & OFFSET_MASK];\n                    if (c4 !== w4) {\n                        last = matchpossibility[j];\n                        matchpossibility.splice(j, 1);\n                    } else {\n                        j++;\n                    }\n                }\n                if (matchpossibility.length===0) break; // no more matches\n                winput(c4);\n                c4 = get();\n            }\n            if (matchpossibility.length !== 0) {\n                // maximum length match, rock on!\n                last = matchpossibility[0];\n            }\n            unget(c4);\n\n            outwindow[outpos++] = ((mlen - MATCH_MIN) << (NBBY - MATCH_BITS)) |\n                (last >> NBBY);\n            outwindow[outpos++] = last & 0xFF;\n        }\n    }\n    dumpout();\n});\n\n/**\n * Decompress string or byte array using fast and efficient algorithm.\n *\n * Our implementation is based on\n * http://src.opensolaris.org/source/raw/onnv/onnv-gate/usr/src/uts/common/fs/zfs/lzjb.c\n * and\n * http://src.opensolaris.org/source/raw/onnv/onnv-gate/usr/src/uts/common/os/compress.c\n * It is licensed under CDDL.\n *\n * @param {Array|Uint8Array|Buffer|stream} input The stream or byte array\n *        that you want to decompress.\n * @param {stream} output Optional output stream.\n * @return {Array|Uint8Array|Buffer} Decompressed byte array, or 'output'\n */\nLzjb.decompressFile = Util.decompressFileHelper(Lzjb.MAGIC, function(inStream, outStream, outSize) {\n    var sstart, dstart = [], slen,\n        src = 0, dst = 0,\n        cpy, copymap,\n        mlen, offset,\n        i, c;\n    var retval;\n\n    var window = Util.makeU8Buffer(OFFSET_MASK+1);\n    var windowpos = 0;\n\n    var copymask = 1 << (NBBY - 1);\n\n    while (outSize !== 0) {\n        c = inStream.readByte();\n        if (c === EOF) break;\n\n        if ((copymask <<= 1) == (1 << NBBY)) {\n            copymask = 1;\n            copymap = c;\n            c = inStream.readByte();\n        }\n        if (copymap & copymask) {\n            mlen = (c >> (NBBY - MATCH_BITS)) + MATCH_MIN;\n            offset = ((c << NBBY) | inStream.readByte()) & OFFSET_MASK;\n            cpy = windowpos - offset;\n            if (cpy < 0) cpy += window.length;\n            if (outSize >= 0) outSize -= mlen;\n            while (--mlen >= 0) {\n                c = window[windowpos++] = window[cpy++];\n                outStream.writeByte(c);\n                if (windowpos >= window.length) { windowpos=0; }\n                if (cpy >= window.length) { cpy = 0; }\n            }\n        } else {\n            outStream.writeByte(c);\n            window[windowpos++] = c;\n            if (windowpos >= window.length) { windowpos=0; }\n            if (outSize >= 0) outSize--;\n        }\n    }\n});\n\n\nreturn Lzjb;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/Lzjb.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/Lzjb.js\n// module chunks = main","/* Tweaked version of LZJB, using range coder. */\nvar libs = [\n\trequire('./Context1Model'),\n\trequire('./FenwickModel'),\n\trequire('./LogDistanceModel'),\n\trequire('./NoModel'),\n\trequire('./RangeCoder'),\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (Context1Model,FenwickModel,LogDistanceModel,NoModel,RangeCoder,Stream,Util){\n\nvar LzjbR = Object.create(null);\nLzjbR.MAGIC = 'lzjR';\n\n// Constants was used for compress/decompress function.\nvar NBBY = 8,\n    MATCH_BITS = 6,\n    MATCH_MIN = 3,\n    MATCH_MAX = ((1 << MATCH_BITS) + (MATCH_MIN - 1)),\n    OFFSET_MASK = ((1 << (16 - MATCH_BITS)) - 1),\n    LEMPEL_SIZE_BASE = 1024;\nvar LENGTH_MODEL_CUTOFF = 32;\n\n\n/**\n * Compress using modified LZJB algorithm.  Instead of using the simple\n * 9-bit literal / 17-bit match format of the original, use a range\n * coder for the literal/match bit and for the offset and length.\n */\nLzjbR.compressFile = Util.compressFileHelper(LzjbR.MAGIC, function(inStream, outStream, fileSize, props, finalByte) {\n    var sstart, dstart = [], slen,\n        src = 0, dst = 0,\n        cpy, copymap,\n        mlen, offset,\n        hash, hp,\n        lempel,\n        i, j;\n\n    // in an improvement over the original C implementation of LZJB, we expand\n    // the hash table to track a number of potential matches, not just the\n    // most recent.  This doesn't require any changes to the decoder.\n    var LEMPEL_SIZE = LEMPEL_SIZE_BASE;\n    var EXPAND = 1; // default to original C impl\n    if (typeof(props)==='number') {\n        LEMPEL_SIZE *= 2;\n        props = Math.max(1, Math.min(9, props)) - 1;\n        EXPAND = 1<<Math.floor(props/2);\n        if (props&1) EXPAND = Math.round(EXPAND * 1.5);\n        if (props >=2 && props <= 4) EXPAND++;\n    }\n\n    var encoder = new RangeCoder(outStream);\n    encoder.encodeStart(finalByte, 1);\n\n    // use Uint16Array if available (zero-filled)\n    lempel = Util.makeU16Buffer(LEMPEL_SIZE * EXPAND);\n\n    var window = Util.makeU8Buffer(OFFSET_MASK+1);\n    var windowpos = 0;\n    var winput = function(_byte) {\n        window[windowpos++] = _byte;\n        if (windowpos >= window.length) {\n            windowpos = 0;\n        }\n        return _byte;\n    };\n\n    var unbuffer = [];\n    var get = function() {\n        if (unbuffer.length)\n            return unbuffer.pop();\n        return inStream.readByte();\n    };\n    var unget = function(_byte) {\n        unbuffer.push(_byte);\n    };\n\n    var matchpossibility = [];\n    var MATCH = 256;\n    var EOF_SYM = 257;\n    var noModelFactory = NoModel.factory(encoder);\n    var modelFactory = FenwickModel.factory(encoder, 0xFF00, 0x100);\n    var literalModel = new Context1Model(modelFactory, 256,\n                                         ((fileSize<0) ? EOF_SYM : MATCH) + 1);\n    var sparseModelFactory = function(size) {\n        if (size <= LENGTH_MODEL_CUTOFF) { return modelFactory(size); }\n        return noModelFactory(size);\n    };\n    var lenModel = new LogDistanceModel((MATCH_MAX-MATCH_MIN)+1, 0,\n                                        modelFactory, sparseModelFactory);\n    var posModel = new LogDistanceModel(OFFSET_MASK+1, 1,\n                                        modelFactory, sparseModelFactory);\n    var lastChar = 0x20, lastOffset = 0;\n    while (true) {\n        var initialPos = windowpos;\n        var c1 = get();\n        if (c1 === Stream.EOF) break;\n\n        var c2 = get();\n        if (c2 === Stream.EOF) {\n            literalModel.encode(winput(c1), lastChar); // literal, not a match\n            break;\n        }\n        var c3 = get();\n        if (c3 === Stream.EOF) {\n            literalModel.encode(winput(c1), lastChar); // literal, not a match\n            unget(c2); lastChar = c1;\n            continue;\n        }\n\n        hash = (c1 << 16) + (c2 << 8) + c3;\n        hash ^= (hash >> 9);\n        hash += (hash >> 5);\n        hash ^= c1;\n        hp = (hash & (LEMPEL_SIZE - 1)) * EXPAND;\n        matchpossibility.length = 0;\n        for (j=0; j<EXPAND; j++) {\n            offset = (windowpos - lempel[hp+j]) & OFFSET_MASK;\n            cpy = window.length + windowpos - offset;\n            var w1 = window[cpy & OFFSET_MASK];\n            var w2 = window[(cpy+1) & OFFSET_MASK];\n            var w3 = window[(cpy+2) & OFFSET_MASK];\n            // if offset is small, we might not have copied the tentative\n            // bytes into the window yet.  (Note that offset=0 really means\n            // offset=(OFFSET_MASK+1).)\n            if (offset==1) { w2 = c1; w3 = c2; }\n            else if (offset==2) { w3 = c1; }\n            if (c1 === w1 && c2 === w2 && c3 === w3) {\n                matchpossibility.push(offset);\n            }\n        }\n        // store this location in the hash, move the others over to make room\n        // oldest match drops off\n        for (j=EXPAND-1; j>0; j--)\n            lempel[hp+j] = lempel[hp+j-1];\n        lempel[hp] = windowpos;\n        // did we find any matches?\n        if (matchpossibility.length === 0) {\n            literalModel.encode(winput(c1), lastChar); // literal, not a match\n            unget(c3);\n            unget(c2);\n            lastChar = c1;\n        } else {\n            literalModel.encode(MATCH, lastChar); // a match!\n            // find the longest of the possible matches\n            winput(c1); winput(c2); winput(c3); lastChar = c3;\n            var c4 = get(), last = matchpossibility[0];\n            var base = window.length + windowpos;\n            for (mlen = MATCH_MIN; mlen < MATCH_MAX; mlen++, base++) {\n                if (c4 === Stream.EOF) break;\n                for (j=0; j < matchpossibility.length; ) {\n                    var w4 = window[(base - matchpossibility[j]) & OFFSET_MASK];\n                    if (c4 !== w4) {\n                        last = matchpossibility[j];\n                        matchpossibility.splice(j, 1);\n                    } else {\n                        j++;\n                    }\n                }\n                if (matchpossibility.length===0) break; // no more matches\n                winput(c4); lastChar = c4;\n                c4 = get();\n            }\n            if (matchpossibility.length !== 0) {\n                // maximum length match, rock on!\n                last = matchpossibility[0];\n            }\n            unget(c4);\n\n            // encode match length\n            // XXX we could get a bit more compression if we allowed\n            // the length to predict the offset (or vice-versa)\n            lenModel.encode(mlen - MATCH_MIN);\n            offset = (initialPos - last) & OFFSET_MASK;\n            if (offset === lastOffset) {\n                posModel.encode(-1); // common case!\n            } else {\n                posModel.encode(offset);\n                lastOffset = offset;\n            }\n        }\n    }\n    if (fileSize < 0) {\n        literalModel.encode(EOF_SYM, lastChar); // end of file (streaming)\n    }\n    encoder.encodeFinish();\n}, true);\n\n/**\n * Decompress using modified LZJB algorithm.\n */\nLzjbR.decompressFile = Util.decompressFileHelper(LzjbR.MAGIC, function(inStream, outStream, outSize) {\n    var sstart, dstart = [], slen,\n        src = 0, dst = 0,\n        cpy, copymap,\n        mlen, offset,\n        i, c;\n\n    var window = Util.makeU8Buffer(OFFSET_MASK+1);\n    var windowpos = 0;\n\n    var decoder = new RangeCoder(inStream);\n    decoder.decodeStart(true/* we already read the 'free' byte*/);\n\n    var MATCH = 256;\n    var EOF_SYM = 257;\n    var noModelFactory = NoModel.factory(decoder);\n    var modelFactory = FenwickModel.factory(decoder, 0xFF00, 0x100);\n    var literalModel = new Context1Model(modelFactory, 256,\n                                         ((outSize<0) ? EOF_SYM : MATCH) + 1);\n    var sparseModelFactory = function(size) {\n        if (size <= LENGTH_MODEL_CUTOFF) { return modelFactory(size); }\n        return noModelFactory(size);\n    };\n    var lenModel = new LogDistanceModel((MATCH_MAX-MATCH_MIN)+1, 0,\n                                        modelFactory, sparseModelFactory);\n    var posModel = new LogDistanceModel(OFFSET_MASK+1, 1,\n                                        modelFactory, sparseModelFactory);\n    var lastChar = 0x20, lastOffset = 0;\n    while (outSize !== 0) {\n        c = literalModel.decode(lastChar);\n        if (c === EOF_SYM) {\n            break;\n        } else if (c === MATCH) {\n            mlen = lenModel.decode() + MATCH_MIN;\n            cpy = posModel.decode();\n            if (cpy<0) { cpy = lastOffset; }\n            else       { lastOffset = cpy; }\n            if (outSize >= 0) outSize -= mlen;\n            while (--mlen >= 0) {\n                c = lastChar = window[windowpos++] = window[cpy++];\n                outStream.writeByte(c);\n                if (windowpos >= window.length) { windowpos=0; }\n                if (cpy >= window.length) { cpy = 0; }\n            }\n        } else {\n            outStream.writeByte(c);\n            window[windowpos++] = lastChar = c;\n            if (windowpos >= window.length) { windowpos=0; }\n            if (outSize >= 0) outSize--;\n        }\n    }\n    decoder.decodeFinish();\n});\n\n\nreturn LzjbR;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/LzjbR.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/LzjbR.js\n// module chunks = main","/* Implementation of LZP3(ish), with an adaptive Huffman code or a range\n * coder (instead of LZP3's original static Huffman code).\n * See: http://www.cbloom.com/papers/lzp.pdf\n */\nvar libs = [\n\trequire('./BitStream'),\n\trequire('./Context1Model'),\n\trequire('./DefSumModel'),\n\trequire('./FenwickModel'),\n\trequire('./Huffman'),\n\trequire('./LogDistanceModel'),\n\trequire('./NoModel'),\n\trequire('./RangeCoder'),\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (BitStream, Context1Model, DefSumModel, FenwickModel, Huffman, LogDistanceModel, NoModel, RangeCoder, Stream, Util){\n\nvar Lzp3 = Object.create(null);\nLzp3.MAGIC = 'lzp3';\n\n// use Huffman coder (fast) or else use range coder (slow)\nvar USE_HUFFMAN_CODE = false;\n// use deferred-sum model, which is supposed to be faster (but compresses worse)\nvar USE_DEFSUM = false;\n// when to give up attempting to model the length\nvar LENGTH_MODEL_CUTOFF = 256;\nvar MODEL_MAX_PROB = 0xFF00;\nvar MODEL_INCREMENT = 0x100;\n\n// Constants was used for compress/decompress function.\nvar CTXT4_TABLE_SIZE = 1 << 16;\nvar CTXT3_TABLE_SIZE = 1 << 12;\nvar CTXT2_TABLE_SIZE = 1 << 16;\nvar CONTEXT_LEN = 4;\nvar LOG_WINDOW_SIZE = 20;\nvar WINDOW_SIZE = 1 << LOG_WINDOW_SIZE;\nvar MAX_MATCH_LEN = WINDOW_SIZE-1;\nvar MATCH_LEN_CONTEXTS = 16;\n\nvar MAX32 = 0xFFFFFFFF;\nvar MAX24 = 0x00FFFFFF;\nvar MAX16 = 0x0000FFFF;\nvar MAX8  = 0x000000FF;\n\n\nvar Window = function(maxSize) {\n  this.buffer = Util.makeU8Buffer(Math.min(maxSize+4, WINDOW_SIZE));\n  this.pos = 0;\n  // context-4 hash table.\n  this.ctxt4 = Util.makeU32Buffer(CTXT4_TABLE_SIZE);\n  // context-3 hash table\n  this.ctxt3 = Util.makeU32Buffer(CTXT3_TABLE_SIZE);\n  // context-2 table (not really a hash any more)\n  this.ctxt2 = Util.makeU32Buffer(CTXT2_TABLE_SIZE);\n  // initial context\n  this.put(0x63); this.put(0x53); this.put(0x61); this.put(0x20);\n};\nWindow.prototype.put = function(_byte) {\n  this.buffer[this.pos++] = _byte;\n  if (this.pos >= WINDOW_SIZE) { this.pos = 0; }\n  return _byte;\n};\nWindow.prototype.get = function(pos) {\n  return this.buffer[pos & (WINDOW_SIZE-1)];\n};\nWindow.prototype.context = function(pos, n) {\n  var c = 0, i;\n  pos = (pos - n) & (WINDOW_SIZE-1);\n  for (i=0; i<n; i++) {\n    c = (c << 8) | this.buffer[pos++];\n    if (pos >= WINDOW_SIZE) { pos = 0; }\n  }\n  return c;\n};\n// if matchLen !== 0, update the index; otherwise get index value.\nWindow.prototype.getIndex = function(s, matchLen) {\n  var c = this.context(s, 4);\n  // compute context hashes\n  var h4 = ((c>>>15) ^ c) & (CTXT4_TABLE_SIZE-1);\n  var h3 = ((c>>>11) ^ c) & (CTXT3_TABLE_SIZE-1);\n  var h2 = c & MAX16;\n  // check order-4 context\n  var p = 0, checkc;\n  // only do context confirmation if matchLen==0 (that is, if we're not just\n  // doing an update)\n  if (matchLen===0) {\n    p = this.ctxt4[h4];\n    if (p !== 0 && c !== this.context(p-1, 4)) {\n      p = 0; // context confirmation failed\n    }\n    if (p === 0) {\n      // check order-3 context\n      p = this.ctxt3[h3];\n      if (p !== 0 && (c & MAX24) !== this.context(p-1, 3)) {\n        p = 0; // context confirmation failed\n      }\n      if (p === 0) {\n        // check order-2 context\n        p = this.ctxt2[h2];\n        if (p !== 0 && (c && MAX16) !== this.context(p-1, 2)) {\n          p = 0; // context confirmation failed\n        }\n      }\n    }\n  }\n  // update context index\n  if (matchLen) { matchLen--; }\n  this.ctxt4[h4] = this.ctxt3[h3] = this.ctxt2[h2] =\n    (s | (matchLen << LOG_WINDOW_SIZE)) + 1;\n  // return lookup result.\n  return p;\n};\n\n/**\n * Compress using modified LZP3 algorithm.  Instead of using static\n * Huffman coding, we use an adaptive Huffman code or range encoding.\n */\nLzp3.compressFile = Util.compressFileHelper(Lzp3.MAGIC, function(inStream, outStream, fileSize, props) {\n  // sliding window & hash table\n  var window = new Window( (fileSize>=0) ? fileSize : WINDOW_SIZE );\n\n  var coderFactory, sparseCoderFactory, flush;\n\n  if (USE_HUFFMAN_CODE) {\n    // Huffman contexts\n    outStream.writeByte(0x80); // mark that this is Huffman coded.\n    var bitstream = new BitStream(outStream);\n    flush = bitstream.flush.bind(bitstream);\n    coderFactory = Huffman.factory(bitstream, MAX16);\n    sparseCoderFactory = NoModel.factory(bitstream);\n\n  } else { // range encoder\n    var range = new RangeCoder(outStream);\n    range.encodeStart(0x00, 0); // 0x00 == range encoded\n\n    coderFactory = FenwickModel.factory(range, MODEL_MAX_PROB, MODEL_INCREMENT);\n    if (USE_DEFSUM) {\n      coderFactory = DefSumModel.factory(range, false /* encoder */);\n    }\n    // switch sparseCoderFactory to a NoModel when size > cutoff\n    var noCoderFactory = NoModel.factory(range);\n    sparseCoderFactory = function(size) {\n      if (size > LENGTH_MODEL_CUTOFF) {\n        return noCoderFactory(size);\n      }\n      return coderFactory(size);\n    };\n    flush = function() { range.encodeFinish(); };\n  }\n\n  var huffLiteral= new Context1Model(coderFactory, 256,\n                                     (fileSize<0) ? 257 : 256);\n  var huffLen = [], i;\n  for (i=0; i<MATCH_LEN_CONTEXTS; i++) {\n    huffLen[i] = new LogDistanceModel(MAX_MATCH_LEN+1, 1,\n                                      coderFactory, sparseCoderFactory);\n  }\n\n  var inSize = 0, s, matchContext = 0;\n  while (inSize !== fileSize) {\n    var ch = inStream.readByte();\n    s = window.pos;\n    var p = window.getIndex(s, 0);\n    if (p !== 0) {\n      // great, a match! how long is it?\n      p--; // p=0 is used for 'not here'. p=1 really means WINDOW_SIZE\n      var prevMatchLen = (p >>> LOG_WINDOW_SIZE) + 1;\n      var matchLen = 0;\n      while (window.get(p + matchLen) === ch && matchLen < MAX_MATCH_LEN) {\n        matchLen++;\n        window.put(ch);\n        ch = inStream.readByte();\n      }\n      // code match length; match len = 0 means \"literal\"\n      // use \"extra state\" -1 to mean \"same as previous match length\"\n      if (prevMatchLen===matchLen) {\n        huffLen[matchContext&(MATCH_LEN_CONTEXTS-1)].encode(-1);\n      } else {\n        huffLen[matchContext&(MATCH_LEN_CONTEXTS-1)].encode(matchLen);\n      }\n      // update hash with this match\n      window.getIndex(s, matchLen);\n      inSize += matchLen;\n      matchContext <<= 1;\n      if (matchLen > 0) { matchContext |= 1; }\n      // XXX: LZMA uses a special \"delta match\" context here if matchLen==0\n      // XXX: it also uses the offset as context for the length (or vice-versa)\n    }\n    // always encode a literal after a match\n    var context1 = window.get(window.pos-1);\n    if (ch===Stream.EOF) {\n      if (fileSize < 0) {\n        huffLiteral.encode(256, context1);\n      }\n      break;\n    }\n    huffLiteral.encode(ch, context1);\n    window.put(ch);\n    inSize++;\n  }\n  if (flush) flush();\n});\n\n/**\n * Decompress using modified LZP3 algorithm.\n */\nLzp3.decompressFile = Util.decompressFileHelper(Lzp3.MAGIC, function(inStream, outStream, fileSize) {\n  var flags = inStream.readByte();\n  var use_huffman_code = !!(flags & 0x80);\n\n  // sliding window & hash table\n  var window = new Window( (fileSize>=0) ? fileSize : WINDOW_SIZE );\n\n  var coderFactory, sparseCoderFactory, finish;\n\n  if (use_huffman_code) {\n    // Huffman contexts\n    var bitstream = new BitStream(inStream);\n    coderFactory = Huffman.factory(bitstream, MAX16);\n    sparseCoderFactory = NoModel.factory(bitstream);\n  } else { // range encoder\n    var range = new RangeCoder(inStream);\n    range.decodeStart(true/* skip initial read */);\n    coderFactory = FenwickModel.factory(range, MODEL_MAX_PROB, MODEL_INCREMENT);\n    if (USE_DEFSUM) {\n      coderFactory = DefSumModel.factory(range, true /* decoder */);\n    }\n    // switch sparseCoderFactory to a NoModel when size > cutoff\n    var noCoderFactory = NoModel.factory(range);\n    sparseCoderFactory = function(size) {\n      if (size > LENGTH_MODEL_CUTOFF) {\n        return noCoderFactory(size);\n      }\n      return coderFactory(size);\n    };\n    finish = function() { range.decodeFinish(); };\n  }\n\n  var huffLiteral= new Context1Model(coderFactory, 256,\n                                     (fileSize<0) ? 257 : 256);\n  var huffLen = [], i;\n  for (i=0; i<MATCH_LEN_CONTEXTS; i++) {\n    huffLen[i] = new LogDistanceModel(MAX_MATCH_LEN+1, 1,\n                                      coderFactory, sparseCoderFactory);\n  }\n\n  var s, ch, outSize = 0, matchContext = 0;\n  while (outSize !== fileSize) {\n    s = window.pos;\n    var p = window.getIndex(s, 0);\n    if (p !== 0) {\n      p--; // p=0 is used for 'not here'. p=1 really means WINDOW_SIZE\n      var prevMatchLen = (p >>> LOG_WINDOW_SIZE) + 1;\n      var matchLen = huffLen[matchContext&(MATCH_LEN_CONTEXTS-1)].decode();\n      if (matchLen < 0) { matchLen = prevMatchLen; }\n      // copy characters!\n      for (i=0; i<matchLen; i++) {\n        ch = window.get(p + i);\n        outStream.writeByte(window.put(ch));\n      }\n      window.getIndex(s, matchLen);\n      outSize += matchLen;\n      matchContext <<= 1;\n      if (matchLen > 0) matchContext |= 1;\n    }\n    // literal always follows match (or failed match)\n    if (outSize === fileSize) {\n      break; // EOF\n    }\n    var context1 = window.get(window.pos-1);\n    ch = huffLiteral.decode(context1);\n    if (ch === 256) {\n      break; // EOF\n    }\n    outStream.writeByte(window.put(ch));\n    outSize++;\n  }\n  if (finish) finish();\n});\n\n\nreturn Lzp3;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/Lzp3.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/Lzp3.js\n// module chunks = main","/** Simple range coding model w/ escape, suitable for sparse symbol sets.\n *  Uses a move-to-front list, which is simple and relatively performant,\n *  but slows down a lot if you want to try to model escapes more precisely\n *  (which is why this feature is disabled by default).\n */\nvar libs = [\n\trequire('./RangeCoder'),\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (RangeCoder,Stream,Util){\n\nvar DEFAULT_MAX_PROB = 0xFF00;\nvar DEFAULT_INCREMENT= 0x0100;\n\nvar NUMERIC_SORT = function(a, b) { return a - b; };\n\nvar MTFModel = function(coder, size, max_prob, increment, betterEscape) {\n    this.coder = coder;\n    this.increment = (+increment) || DEFAULT_INCREMENT;\n    this.max_prob = (+max_prob) || DEFAULT_MAX_PROB;\n    console.assert((this.max_prob + (this.increment-1)) <= 0xFFFF);\n    this.sym = Util.makeU16Buffer(size+1);\n    this.prob= Util.makeU16Buffer(size+2);\n    this.sym[0] = size; // escape code\n    this.prob[0]= 0;\n    this.seenSyms = 1;\n    // total probability always found in this.prob[this.seenSyms]\n    this.prob[this.seenSyms] = this.increment;\n    this.numSyms = size;\n    if (betterEscape) {\n        this.sortedSeen = [size];\n    }\n};\nMTFModel.factory = function(coder, max_prob, increment, betterEscape) {\n    return function(size) {\n        return new MTFModel(coder, size, max_prob, increment, betterEscape);\n    };\n};\nMTFModel.prototype.clone = function() {\n    var newModel = new MTFModel(this.coder, this.numSyms, this.max_prob,\n                                this.increment, !!this.sortedSeen);\n    var i;\n    for (i=0; i<this.seenSyms; i++) {\n        newModel.sym[i] = this.sym[i];\n        newModel.prob[i] = this.prob[i];\n    }\n    newModel.prob[i] = this.prob[i]; // total probability\n    newModel.seenSyms = this.seenSyms;\n    if (this.sortedSeen) {\n        newModel.sortedSeen = this.sortedSeen.slice(0);\n    }\n    return newModel;\n};\nMTFModel.prototype._update = function(symbol, index, sy_f) {\n    var j, tot_f;\n    // move this symbol to the end\n    for (j=index; j<this.seenSyms-1; j++) {\n        this.sym[j] = this.sym[j+1];\n        this.prob[j] = this.prob[j+1] - sy_f;\n    }\n    if (index < this.seenSyms) {\n        this.sym[j] = symbol;\n        this.prob[j] = this.prob[j+1] - sy_f;\n        // increase frequency for this symbol, and total freq at same time\n        this.prob[this.seenSyms] = tot_f =\n            this.prob[this.seenSyms] + this.increment;\n        if (symbol === this.numSyms && this.seenSyms >= this.numSyms) {\n            // this is the last time we'll see an escape! remove it.\n            tot_f = this.prob[--this.seenSyms];\n            if (this.sortedSeen) { this.sortedSeen.length--; }\n        }\n    } else { // add to the end\n        tot_f = this.prob[this.seenSyms];\n        this.sym[index] = symbol;\n        this.prob[index] = tot_f;\n        tot_f += this.increment;\n        this.prob[++this.seenSyms] = tot_f;\n        if (this.sortedSeen) {\n            this.sortedSeen.push(symbol);\n            // hopefully sort is very fast on a mostly-sorted array\n            this.sortedSeen.sort(NUMERIC_SORT);\n        }\n    }\n    if (tot_f >= this.max_prob) { this._rescale(); }\n    return;\n};\nMTFModel.prototype._rescale = function() {\n    var i, j, total=0;\n    var noEscape = true;\n    if (this.sortedSeen) { this.sortedSeen.length = 0; }\n    for(i=0, j=0; i<this.seenSyms; i++) {\n        var sym = this.sym[i];\n        var sy_f = this.prob[i+1] - this.prob[i];\n        sy_f >>>= 1;\n        if (sy_f > 0) {\n            if (sym === this.numSyms) {\n                noEscape = false;\n            }\n            this.sym[j] = sym;\n            this.prob[j++] = total;\n            total += sy_f;\n            if (this.sortedSeen) { this.sortedSeen.push(sym); }\n        }\n    }\n    this.prob[j] = total;\n    this.seenSyms = j;\n    if (this.sortedSeen) {\n        this.sortedSeen.sort(NUMERIC_SORT);\n    }\n    // don't allow escape to go to zero prob if we still need it\n    if (noEscape && this.seenSyms < this.numSyms) {\n        // NOTE this adds this.increment to escape freq; the FenwickModel\n        //      just adds one.\n        this._update(this.numSyms/*escape*/, this.seenSyms/*at end*/);\n    }\n};\nMTFModel.prototype.decode = function() {\n    var tot_f = this.prob[this.seenSyms];\n    var prob = this.coder.decodeCulFreq(tot_f);\n    // we're expecting to find the probability near the \"most recent\" side\n    // of our array\n    var i;\n    for (i=this.seenSyms-1; i>=0; i--) {\n        if (this.prob[i] <= prob /*&& prob < this.prob[i+1]*/)\n            break;\n    }\n    console.assert(i>=0);\n    var symbol = this.sym[i];\n    var lt_f = this.prob[i];\n    var sy_f = this.prob[i + 1] - lt_f;\n    this.coder.decodeUpdate(sy_f, lt_f, tot_f);\n    this._update(symbol, i, sy_f);\n    if (symbol === this.numSyms) {\n        /* this is an escape */\n        /* decode the literal */\n        sy_f = 1;\n        tot_f = this.numSyms;\n        if (this.sortedSeen) {\n            // do a slower, but more precise decoding of the literal\n            // by excluding the already-seen symbols.\n            var seen = this.sortedSeen;\n            tot_f = this.numSyms - this.seenSyms;\n            if (seen[seen.length-1] === this.numSyms) { tot_f++; }\n            symbol = lt_f = this.coder.decodeCulFreq(tot_f);\n            for (i=0; i < seen.length && seen[i] <= symbol ; i++) {\n                symbol++;\n            }\n        } else {\n            symbol = lt_f = this.coder.decodeCulFreq(tot_f);\n        }\n        this.coder.decodeUpdate(sy_f, lt_f, tot_f);\n        this._update(symbol, this.seenSyms);\n    }\n    return symbol;\n};\nMTFModel.prototype.encode = function(symbol) {\n    // look for symbol, from most-recent to oldest\n    var i, sy_f, lt_f, tot_f;\n    for (i=this.seenSyms-1; i>=0; i--) {\n        if (symbol === this.sym[i]) {\n            // ok, found it.\n            lt_f = this.prob[i];\n            sy_f = this.prob[i + 1] - lt_f;\n            tot_f = this.prob[this.seenSyms];\n            this.coder.encodeFreq(sy_f, lt_f, tot_f);\n            return this._update(symbol, i, sy_f);\n        }\n    }\n    // couldn't find this symbol.  encode as escape.\n    console.assert(symbol !== this.numSyms); // catch infinite recursion\n    this.encode(this.numSyms); // guaranteed to be found in the table.\n    // code symbol as literal\n    sy_f = 1;\n    lt_f = symbol;\n    tot_f = this.numSyms;\n    if (this.sortedSeen) {\n        // do a slower, but more precise encoding of the literal\n        // by excluding the already-seen symbols.\n        var seen = this.sortedSeen;\n        tot_f -= this.seenSyms;\n        if (seen[seen.length-1] === this.numSyms) { tot_f++; }\n        for (i=0; i < seen.length && seen[i] < symbol; i++) {\n            lt_f--;\n        }\n    }\n    this.coder.encodeFreq(sy_f, lt_f, tot_f);\n    // now add symbol to the end.\n    return this._update(symbol, this.seenSyms);\n};\n\nMTFModel.MAGIC = 'mtfm';\n/** Simple order-0 compressor, as self-test. */\nMTFModel.compressFile = Util.compressFileHelper(MTFModel.MAGIC, function(inStream, outStream, fileSize, props, finalByte) {\n  var range = new RangeCoder(outStream);\n  range.encodeStart(finalByte, 1);\n  var model = new MTFModel(range, (fileSize<0) ? 257 : 256);\n  Util.compressWithModel(inStream, fileSize, model);\n  range.encodeFinish();\n}, true);\n\n/** Simple order-0 decompresser, as self-test. */\nMTFModel.decompressFile = Util.decompressFileHelper(MTFModel.MAGIC, function(inStream, outStream, fileSize) {\n  var range = new RangeCoder(inStream);\n  range.decodeStart(true/*we already read the 'free' byte*/);\n  var model = new MTFModel(range, (fileSize<0) ? 257 : 256);\n  Util.decompressWithModel(outStream, fileSize, model);\n  range.decodeFinish();\n});\n\nreturn MTFModel;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/MTFModel.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/MTFModel.js\n// module chunks = main","/** Simple \"lack of model\" -- just encode the bits directly.\n *  Useful especially with sparse spaces or Huffman coders where there's\n *  no obvious prediction to be made that will pay for itself.\n */\nvar libs = [\n\trequire('./BitStream'),\n\trequire('./Util')\n];\nvar body_fn = function (BitStream,Util) {\n\nvar NoModel = function(bitstream, size) {\n  this.bitstream = bitstream;\n  this.bits = Util.fls(size-1);\n};\nNoModel.factory = function(bitstream) {\n  return function(size) { return new NoModel(bitstream, size); };\n};\nNoModel.prototype.encode = function(symbol) {\n  var i;\n  for (i=this.bits-1; i>=0; i--) {\n    var b = (symbol >>> i) & 1;\n    this.bitstream.writeBit(b);\n  }\n};\nNoModel.prototype.decode = function() {\n  var i, r = 0;\n  for (i=this.bits-1; i>=0; i--) {\n    r <<= 1;\n    if (this.bitstream.readBit()) r++;\n  }\n  return r;\n};\n\n/** Brain-dead self-test. */\nNoModel.MAGIC = 'nomo';\nNoModel.compressFile = Util.compressFileHelper(NoModel.MAGIC, function(inStream, outStream, fileSize, props) {\n    var bitstream = new BitStream(outStream);\n    var model = new NoModel(bitstream, (fileSize<0) ? 257 : 256);\n    Util.compressWithModel(inStream, fileSize, model);\n    bitstream.flush();\n});\nNoModel.decompressFile = Util.decompressFileHelper(NoModel.MAGIC, function(inStream, outStream, fileSize) {\n    var bitstream = new BitStream(inStream);\n    var model = new NoModel(bitstream, (fileSize<0) ? 257 : 256);\n    Util.decompressWithModel(outStream, fileSize, model);\n});\n\nreturn NoModel;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/NoModel.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/NoModel.js\n// module chunks = main","/** Particularly simple-minded implementation of PPM compression. */\nvar libs = [\n\trequire('./RangeCoder'),\n\trequire('./Util')\n];\nvar body_fn = function (RangeCoder,Util) {\n\n  var MAX_CONTEXT = 5;\n  var LOG_WINDOW_SIZE = 18;\n  var WINDOW_SIZE = 1 << LOG_WINDOW_SIZE;\n\n  var Window = function() {\n    this.buffer = Util.makeU8Buffer(WINDOW_SIZE);\n    this.pos = 0;\n    this.firstPass = true;\n    for (var i=0; i<MAX_CONTEXT; i++) {\n      this.put('cSaCsA'.charCodeAt(i%6));\n    }\n  };\n  Window.prototype.put = function(_byte) {\n    this.buffer[this.pos++] = _byte;\n    if (this.pos >= WINDOW_SIZE) { this.pos = 0; this.firstPass = false; }\n    return _byte;\n  };\n  Window.prototype.get = function(pos) {\n    return this.buffer[pos & (WINDOW_SIZE-1)];\n  };\n  // the context ending just before 'pos'\n  Window.prototype.context = function(pos, n) {\n    var c = [], i;\n    pos = (pos - n) & (WINDOW_SIZE-1);\n    for (i=0; i<n; i++) {\n      c.push(this.buffer[pos++]);\n      if (pos >= WINDOW_SIZE) { pos = 0; }\n    }\n    return String.fromCharCode.apply(String, c);\n  };\n\n  var DMM_INCREMENT = 0x100, DMM_MAX_PROB = 0xFF00;\n\n  var PPM = function(coder, size) {\n    this.window = new Window();\n    this.contexts = Object.create(null);\n    // brain-dead '-1' context, using full exclusion\n    var Cm1Context = function() { };\n    Cm1Context.prototype.encode = function(symbol, exclude) {\n      var i, lt_f = 0;\n      for (i=0; i<symbol; i++) {\n        if (!exclude[i]) {\n          lt_f++;\n        }\n      }\n      var tot_f = size - exclude.total;\n      coder.encodeFreq(1, lt_f, tot_f);\n    };\n    Cm1Context.prototype.decode = function(exclude) {\n      var i, symbol, lt_f;\n      var tot_f = size - exclude.total;\n      symbol = lt_f = coder.decodeCulFreq(tot_f);\n      for (i=0; i<=symbol; i++) {\n        if (exclude[i]) {\n          symbol++;\n        }\n      }\n      coder.decodeUpdate(1, lt_f, tot_f);\n      return symbol;\n    };\n    this.cm1coder = new Cm1Context();\n\n    var DenseMTFModel = function() {\n      this.sym = [size];\n      this.prob= [0, DMM_INCREMENT];\n      this.refcount = 0;\n    };\n    DenseMTFModel.prototype._rescale = function() {\n      var seenSyms = this.sym.length;\n      var i, j, total=0;\n      var noEscape = true;\n      for(i=0, j=0; i<seenSyms; i++) {\n        var sym = this.sym[i];\n        var sy_f = this.prob[i+1] - this.prob[i];\n        sy_f >>>= 1;\n        if (sy_f > 0) {\n          if (sym === size) {\n            noEscape = false;\n          }\n          this.sym[j] = sym;\n          this.prob[j++] = total;\n          total += sy_f;\n        }\n      }\n      this.prob[j] = total;\n      seenSyms = this.sym.length = j;\n      this.prob.length = seenSyms + 1;\n      // don't allow escape to go to zero prob if we still need it\n      if (noEscape && seenSyms < size) {\n        total = this._update(size/*escape*/, seenSyms/*at end*/, 0, 1);\n      }\n      return total;\n    };\n    DenseMTFModel.prototype.update = function(symbol, incr) {\n      // find symbol\n      var i=0;\n      for (i=0; i<this.sym.length; i++) {\n        if (this.sym[i] === symbol) {\n          return this._update(symbol, i, this.prob[i+1] - this.prob[i], incr);\n        }\n      }\n      // symbol escaped\n      return this._update(symbol, i, 0, incr);\n    };\n    DenseMTFModel.prototype._update = function(symbol, index, sy_f, incr) {\n      var seenSyms = this.sym.length;\n      var i, j, tot_f;\n      // move this symbol to the end\n      for (j=index; j<seenSyms-1; j++) {\n        this.sym[j] = this.sym[j+1];\n        this.prob[j] = this.prob[j+1] - sy_f;\n      }\n      // \"method D\" -- if we add a new escaped symbol, escape & the symbol\n      // both increase by 1/2.\n      if (index < seenSyms) {\n        this.sym[j] = symbol;\n        this.prob[j] = this.prob[j+1] - sy_f;\n        // increase frequency for this symbol, and total freq at same time\n        this.prob[seenSyms] = tot_f =\n          this.prob[seenSyms] + incr;\n      } else { // add to the end\n        tot_f = this.prob[seenSyms];\n        this.sym[index] = symbol;\n        this.prob[index] = tot_f;\n        tot_f += incr;\n        this.prob[++seenSyms] = tot_f;\n        // remove probability of escape if table just filled up\n        if (this.sym.length > size) {\n          for (i=0; i<seenSyms; i++) {\n            if (size === this.sym[i]) {\n              // found it.\n              this._update(size, i, this.prob[i+1] - this.prob[i], -1);\n              this.sym.length--;\n              this.prob.length--;\n              tot_f = this.prob[this.prob.length-1];\n            }\n          }\n        }\n      }\n      if (tot_f >= DMM_MAX_PROB) { tot_f = this._rescale(); }\n      return tot_f;\n    };\n    DenseMTFModel.prototype.encode = function(symbol, exclude) {\n      // look for symbol, from most-recent to oldest\n      var i, j, sy_f, lt_f, tot_f, seenSyms = this.sym.length;\n      var ex_seen = 0, ex_lt_f = 0, ex_tot_f = 0, ex_sy_f;\n      for (i=seenSyms-1; i>=0; i--) {\n        lt_f = this.prob[i];\n        sy_f = this.prob[i + 1] - lt_f;\n        if (symbol === this.sym[i]) {\n          // ok, found it.\n          // count up the rest of the probabilities\n          for (j=i-1; j>=0 && ex_seen < exclude.total; j--) {\n            if (exclude[this.sym[j]]) {\n              ex_seen += 1;\n              ex_sy_f = this.prob[j+1] - this.prob[j];\n              ex_lt_f += ex_sy_f;\n              ex_tot_f += ex_sy_f;\n            }\n          }\n          tot_f = this.prob[seenSyms];\n          // adjust by excluded symbols\n          lt_f -= ex_lt_f;\n          tot_f -= ex_tot_f;\n          coder.encodeFreq(sy_f, lt_f, tot_f);\n          if (symbol === size) { // only update table for escapes\n            this._update(symbol, i, sy_f, DMM_INCREMENT/2);\n            return false; // escape.\n          } // otherwise we'll do update later\n          return true; // encoded character!\n        } else if (exclude[this.sym[i]]) {\n          ex_seen += 1;\n          ex_tot_f += sy_f;\n        }\n      }\n      // couldn't find this symbol.  encode as escape.\n      this.encode(size, exclude);\n      // add symbols to exclusion table\n      console.assert(this.sym[this.sym.length-1] === size);//escape\n      for (i=0; i<this.sym.length-1; i++) {\n        if (!exclude[this.sym[i]]) {\n          exclude[this.sym[i]] = true;\n          exclude.total++;\n        }\n      }\n    };\n    DenseMTFModel.prototype.decode = function(exclude) {\n      var seenSyms = this.sym.length;\n      var tot_f = this.prob[seenSyms];\n      var ex_seen = 0, ex_lt_f = 0, ex_tot_f = 0, ex_sy_f;\n      var i;\n      for (i=seenSyms-1; i>=0 && ex_seen < exclude.total; i--) {\n        if (exclude[this.sym[i]]) {\n          ex_seen += 1;\n          ex_tot_f += this.prob[i+1] - this.prob[i];\n        }\n      }\n      var prob = coder.decodeCulFreq(tot_f - ex_tot_f) + ex_tot_f;\n      // we're expecting to find the probability near the \"most recent\" side\n      // of our array\n      ex_lt_f = ex_tot_f;\n      for (i=seenSyms-1; i>=0; i--) {\n        if (exclude[this.sym[i]]) {\n          ex_sy_f = this.prob[i+1] - this.prob[i];\n          ex_lt_f -= ex_sy_f;\n          prob -= ex_sy_f;\n        } else if (this.prob[i] <= prob /*&& prob < this.prob[i+1]*/)\n          break;\n      }\n      console.assert(i>=0);\n      var symbol = this.sym[i];\n      var lt_f = this.prob[i];\n      var sy_f = this.prob[i + 1] - lt_f;\n      coder.decodeUpdate(sy_f, lt_f - ex_lt_f, tot_f - ex_tot_f);\n      // defer update\n      if (symbol < size) { return symbol; }\n      // an escape\n      this._update(symbol, i, sy_f, DMM_INCREMENT/2);\n      // add symbols to exclusion table\n      console.assert(this.sym[this.sym.length-1] === size);//escape\n      for (i=0; i<this.sym.length-1; i++) {\n        if (!exclude[this.sym[i]]) {\n          exclude[this.sym[i]] = true;\n          exclude.total++;\n        }\n      }\n      return -1;\n    };\n    this.newContext = function(initialSymbol) {\n      return new DenseMTFModel();\n    };\n    this.newExclude = function() {\n      var result = Object.create(null);\n      result.total = 0; // no excluded symbols (yet)\n      return result;\n    };\n    // set up some initial contexts\n    (function() {\n      var i, j;\n      for (i=0; i<MAX_CONTEXT; i++) {\n        for (j=0; j<=i; j++) {\n          var cc = this.window.context(j+((MAX_CONTEXT-1)-i), j);\n          if (!this.contexts[cc]) { this.contexts[cc] = this.newContext(); }\n          this.contexts[cc].refcount++;\n        }\n      }\n    }).call(this);\n  };\n  PPM.prototype.update = function(symbol, contextString, matchLevel) {\n    // slide up the contexts, updating them\n    var model, c, cc;\n    for (c=0; c <= MAX_CONTEXT; c++) {\n      cc = contextString.slice(MAX_CONTEXT - c);\n      model = this.contexts[cc];\n      if (!model) {\n        model = this.contexts[cc] = this.newContext();\n      }\n      if (c >= matchLevel) {\n        // only update useful contexts\n        model.update(symbol, DMM_INCREMENT / 2);\n      }\n      // refcount all contexts, whether used/updated or not\n      model.refcount++;\n    }\n    // now garbage-collect old contexts\n    contextString = this.window.context(this.window.pos + MAX_CONTEXT,\n                                        MAX_CONTEXT);\n    var firstPass = this.window.firstPass;\n    for (c=MAX_CONTEXT; c>=0 && !firstPass; c--) {\n      cc = contextString.slice(0, c);\n      model = this.contexts[cc];\n      console.assert(model);\n      if ((--model.refcount) <= 0) {\n        console.assert(cc !== ''); // don't allow context-0 to be gc'ed!\n        delete this.contexts[cc];\n      }\n    }\n    // ok, advance window.\n    this.window.put(symbol);\n  };\n  PPM.prototype.decode = function() {\n    var contextString = this.window.context(this.window.pos, MAX_CONTEXT);\n    var exclude = this.newExclude();\n    var model, c, cc, symbol;\n    for (c=MAX_CONTEXT; c>=0; c--) {\n      cc = contextString.slice(MAX_CONTEXT - c);\n      model = this.contexts[cc];\n      if (model) {\n        symbol = model.decode(exclude);\n        if (symbol >= 0) {\n          this.update(symbol, contextString, c);\n          return symbol;\n        }\n      }\n    }\n    // still no match, fall back to context -1\n    symbol = this.cm1coder.decode(exclude);\n    this.update(symbol, contextString, c);\n    return symbol;\n  };\n  PPM.prototype.encode = function(symbol) {\n    var contextString = this.window.context(this.window.pos, MAX_CONTEXT);\n    var exclude = this.newExclude();\n    var c;\n    for (c=MAX_CONTEXT; c>=0; c--) {\n      var cc = contextString.slice(MAX_CONTEXT - c);\n      var model = this.contexts[cc];\n      if (model) {\n        var success = model.encode(symbol, exclude);\n        if (success) {\n          this.update(symbol, contextString, c);\n          return;\n        }\n      }\n    }\n    // fall back to context -1 (but still use exclusion table)\n    this.cm1coder.encode(symbol, exclude);\n    this.update(symbol, contextString, c);\n    return;\n  };\n\n  PPM.MAGIC = 'ppm2';\n  PPM.compressFile = Util.compressFileHelper(PPM.MAGIC, function(inStream, outStream, fileSize, props, finalByte) {\n    var range = new RangeCoder(outStream);\n    range.encodeStart(finalByte, 1);\n    var model = new PPM(range, (fileSize<0) ? 257 : 256);\n    Util.compressWithModel(inStream, fileSize, model);\n    range.encodeFinish();\n  }, true);\n  PPM.decompressFile = Util.decompressFileHelper(PPM.MAGIC, function(inStream, outStream, fileSize) {\n    var range = new RangeCoder(inStream);\n    range.decodeStart(true/*we already read the 'free' byte*/);\n    var model = new PPM(range, (fileSize<0) ? 257 : 256);\n    Util.decompressWithModel(outStream, fileSize, model);\n    range.decodeFinish();\n  });\n\n  return PPM;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/PPM.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/PPM.js\n// module chunks = main","/* Range Coder.  Inspired by rangecod.c from rngcod13.zip from\n *    http://www.compressconsult.com/rangecoder/\n * This JavaScript version is:\n *    Copyright (c) 2013 C. Scott Ananian.\n */\nvar libs = [\n];\nvar body_fn = function (){\n\n    // Uses 32-bit integer math.  Hopefully the JavaScript runtime figures\n    // that out. ;)\n    // see https://github.com/kripken/emscripten/wiki/LLVM-Types-in-JavaScript\n    // for some hints on doing 32-bit unsigned match in JavaScript.\n    // One key is the use of \">>>0\" to change a signed result to unsigned.\n    var CODE_BITS = 32;\n    var Top_value = Math.pow(2, CODE_BITS-1);\n    var SHIFT_BITS = (CODE_BITS - 9);\n    var EXTRA_BITS = ((CODE_BITS-2) % 8 + 1);\n    var Bottom_value = (Top_value >>> 8);\n\n    var MAX_INT = Math.pow(2, CODE_BITS) - 1;\n\n    /* it is highly recommended that the total frequency count is less  */\n    /* than 1 << 19 to minimize rounding effects.                       */\n    /* the total frequency count MUST be less than 1<<23                */\n\n\n    var RangeCoder = function(stream) {\n        this.low = 0; /* low end of interval */\n        this.range = Top_value; /* length of interval */\n        this.buffer = 0; /* buffer for input/output */\n        this.help = 0; /* bytes_to_follow / intermediate value */\n        this.bytecount = 0; /* counter for output bytes */\n        this.stream = stream;\n    };\n\n    /* Do the normalization before we need a defined state, instead of\n     * after messing it up.  This simplifies starting and ending. */\n    var enc_normalize = function(rc, outputStream) {\n        while (rc.range <= Bottom_value) { /* do we need renormalization? */\n            if (rc.low < (0xFF << SHIFT_BITS)) {//no carry possible, so output\n                outputStream.writeByte(rc.buffer);\n                for (; rc.help; rc.help--)\n                    outputStream.writeByte(0xFF);\n                rc.buffer = (rc.low >>> SHIFT_BITS) & 0xFF;\n            } else if (rc.low & Top_value) { /* carry now, no future carry */\n                outputStream.writeByte(rc.buffer+1);\n                for (; rc.help; rc.help--)\n                    outputStream.writeByte(0x00);\n                rc.buffer = (rc.low >>> SHIFT_BITS) & 0xFF;\n            } else {\n                rc.help++;\n                if (rc.help > MAX_INT)\n                    throw new Error(\"Too many bytes outstanding, \"+\n                                    \"file too large!\");\n            }\n            rc.range = (rc.range << 8) >>> 0;/*ensure result remains positive*/\n            rc.low = ((rc.low << 8) & (Top_value - 1)) >>> 0; /* unsigned */\n            rc.bytecount++;\n        }\n    };\n\n    /* Start the encoder                                         */\n    /* c is written as the first byte in the datastream.\n     * one could do w/o, but then you have an additional if per output byte */\n    RangeCoder.prototype.encodeStart = function(c, initlength) {\n        this.low = 0;\n        this.range = Top_value;\n        this.buffer = c;\n        this.help = 0;\n        this.bytecount = initlength;\n    };\n\n   /* Encode a symbol using frequencies                         */\n    /* rc is the range coder to be used                          */\n    /* sy_f is the interval length (frequency of the symbol)     */\n    /* lt_f is the lower end (frequency sum of < symbols)        */\n    /* tot_f is the total interval length (total frequency sum)  */\n    /* or (faster): tot_f = (code_value)1<<shift                             */\n    RangeCoder.prototype.encodeFreq = function(sy_f, lt_f, tot_f) {\n        enc_normalize(this, this.stream);\n        var r = (this.range / tot_f) >>> 0; // note coercion to integer\n        var tmp = r * lt_f;\n        this.low += tmp;\n        if ((lt_f + sy_f) < tot_f) {\n            this.range = r * sy_f;\n        } else {\n            this.range -= tmp;\n        }\n    };\n    RangeCoder.prototype.encodeShift = function(sy_f, lt_f, shift) {\n        enc_normalize(this, this.stream);\n        var r = this.range >>> shift;\n        var tmp = r * lt_f;\n        this.low += tmp;\n        if ((lt_f + sy_f) >>> shift) {\n            this.range -= tmp;\n        } else {\n            this.range = r * sy_f;\n        }\n    };\n    /* Encode a bit w/o modelling. */\n    RangeCoder.prototype.encodeBit = function(b) {\n        this.encodeShift(1, b?1:0, 1);\n    };\n    /* Encode a byte w/o modelling. */\n    RangeCoder.prototype.encodeByte = function(b) {\n        this.encodeShift(1, b, 8);\n    };\n    /* Encode a short w/o modelling. */\n    RangeCoder.prototype.encodeShort = function(s) {\n        this.encodeShift(1, s, 16);\n    };\n\n    /* Finish encoding                                           */\n    /* returns number of bytes written                           */\n    RangeCoder.prototype.encodeFinish = function() {\n        var outputStream = this.stream;\n        enc_normalize(this, outputStream);\n        this.bytecount += 5;\n        var tmp = this.low >>> SHIFT_BITS;\n        if ((this.low & (Bottom_value-1)) >= ((this.bytecount&0xFFFFFF)>>>1)) {\n            tmp++;\n        }\n        if (tmp > 0xFF) { /* we have a carry */\n            outputStream.writeByte(this.buffer + 1);\n            for (; this.help; this.help--)\n                outputStream.writeByte(0x00);\n        } else { /* no carry */\n            outputStream.writeByte(this.buffer);\n            for (; this.help; this.help--)\n                outputStream.writeByte(0xFF);\n        }\n        outputStream.writeByte(tmp & 0xFF);\n        // XXX: i'm pretty sure these could be three arbitrary bytes\n        //      they are consumed by the decoder at the end\n        outputStream.writeByte((this.bytecount >>> 16) & 0xFF);\n        outputStream.writeByte((this.bytecount >>>  8) & 0xFF);\n        outputStream.writeByte((this.bytecount       ) & 0xFF);\n        return this.bytecount;\n    };\n\n    /* Start the decoder; you need to provide the *second* byte from the\n     * datastream. (The first byte was provided to startEncoding and is\n     * ignored by the decoder.)\n     */\n    RangeCoder.prototype.decodeStart = function(skipInitialRead) {\n        var c = skipInitialRead ? 0 : this.stream.readByte();\n        if (typeof(c) !== 'number' || c < 0) {\n            return c; // EOF\n        }\n        this.buffer = this.stream.readByte();\n        this.low = this.buffer >>> (8 - EXTRA_BITS);\n        this.range = 1 << EXTRA_BITS;\n        return c;\n    };\n\n    var dec_normalize = function(rc, inputStream) {\n        while (rc.range <= Bottom_value) {\n            rc.low = (rc.low << 8) | ((rc.buffer << EXTRA_BITS) & 0xFF);\n            /* rc.low could be negative here; don't fix it quite yet */\n            rc.buffer = inputStream.readByte();\n            rc.low |= rc.buffer >>> (8-EXTRA_BITS);\n            rc.low = rc.low >>> 0; /* fix it now */\n            rc.range = (rc.range << 8) >>> 0; /* ensure stays positive */\n        }\n    };\n\n    /* Calculate cumulative frequency for next symbol. Does NO update!*/\n    /* rc is the range coder to be used                          */\n    /* tot_f is the total frequency                              */\n    /* or: totf is (code_value)1<<shift                                      */\n    /* returns the <= cumulative frequency                         */\n    RangeCoder.prototype.decodeCulFreq = function(tot_f) {\n        dec_normalize(this, this.stream);\n        this.help = (this.range / tot_f) >>> 0; // note coercion to integer\n        var tmp = (this.low / this.help) >>> 0; // again\n        return (tmp >= tot_f ? tot_f-1 : tmp);\n    };\n    RangeCoder.prototype.decodeCulShift = function(shift) {\n        dec_normalize(this, this.stream);\n        this.help = this.range >>> shift;\n        var tmp = (this.low / this.help) >>> 0; // coercion to unsigned\n        // shift is less than 31, so shift below will remain positive\n        return ((tmp>>>shift) ? (1<<shift)-1 : tmp);\n    };\n\n    /* Update decoding state                                     */\n    /* rc is the range coder to be used                          */\n    /* sy_f is the interval length (frequency of the symbol)     */\n    /* lt_f is the lower end (frequency sum of < symbols)        */\n    /* tot_f is the total interval length (total frequency sum)  */\n    RangeCoder.prototype.decodeUpdate = function(sy_f, lt_f, tot_f) {\n        var tmp = this.help * lt_f; // should not overflow!\n        this.low -= tmp;\n        if (lt_f + sy_f < tot_f) {\n            this.range = (this.help * sy_f);\n        } else {\n            this.range -= tmp;\n        }\n    };\n\n    /* Decode a bit w/o modelling. */\n    RangeCoder.prototype.decodeBit = function() {\n        var tmp = this.decodeCulShift(1);\n        this.decodeUpdate(1, tmp, 1<<1);\n        return tmp;\n    };\n    /* decode a byte w/o modelling */\n    RangeCoder.prototype.decodeByte = function() {\n        var tmp = this.decodeCulShift(8);\n        this.decodeUpdate(1, tmp, 1<<8);\n        return tmp;\n    };\n    /* decode a short w/o modelling */\n    RangeCoder.prototype.decodeShort = function() {\n        var tmp = this.decodeCulShift(16);\n        this.decodeUpdate(1, tmp, 1<<16);\n        return tmp;\n    };\n\n    /* Finish decoding */\n    RangeCoder.prototype.decodeFinish = function() {\n        /* normalize to use up all bytes */\n        dec_normalize(this, this.stream);\n    };\n\n    /** Utility functions */\n\n    // bitstream interface\n    RangeCoder.prototype.writeBit = RangeCoder.prototype.encodeBit;\n    RangeCoder.prototype.readBit = RangeCoder.prototype.decodeBit;\n\n    // stream interface\n    RangeCoder.prototype.writeByte = RangeCoder.prototype.encodeByte;\n    RangeCoder.prototype.readByte = RangeCoder.prototype.decodeByte;\n\n    return RangeCoder;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/RangeCoder.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/RangeCoder.js\n// module chunks = main","/* *Very* simple de/compression utility, based on simple_c and simple_d from\n * rngcod13.zip at http://www.compressconsult.com/rangecoder/\n * Really just a demonstration/test of the rangecoder.\n */\nvar libs = [\n\trequire('./RangeCoder'),\n\trequire('./Stream'),\n\trequire('./Util')\n];\nvar body_fn = function (RangeCoder,Stream,Util){\n    var MAX_BLOCK_SIZE = 1<<17;\n\n    var Simple = Object.create(null);\n    Simple.MAGIC = 'smpl';\n    Simple.compressFile = Util.compressFileHelper(Simple.MAGIC, function(input, output, size, props, finalByte) {\n        var encoder = new RangeCoder(output);\n        encoder.encodeStart(finalByte, 1);\n\n        // read a block\n        var block = Util.makeU8Buffer(MAX_BLOCK_SIZE);\n        var counts = [];\n        var blockLength = 0, sawEOF = false;\n\n        var readBlock = function() {\n            var pos = 0;\n            // initialize counts\n            for (pos=0; pos < 256; pos++) {\n                counts[pos] = 0;\n            }\n            if (sawEOF) {\n                blockLength = 0;\n                return;\n            }\n            for (pos=0; pos < MAX_BLOCK_SIZE; ) {\n                var c = input.readByte();\n                if (c===Stream.EOF) {\n                    sawEOF = true;\n                    break;\n                }\n                block[pos++] = c;\n                counts[c]++;\n                // bail if some count reaches maximum\n                if (counts[c]===0xFFFF) {\n                    break;\n                }\n            }\n            blockLength = pos;\n        };\n\n        while (true) {\n            var i;\n            readBlock();\n            if (sawEOF && blockLength===0) {\n                break;\n            }\n            // indicate that there's another block comin'\n            encoder.encodeBit(true);\n            // write all the statistics\n            for (i=0; i<256; i++) {\n                encoder.encodeShort(counts[i]);\n            }\n            // convert counts to cumulative counts\n            counts[256] = blockLength;\n            for (i=256; i; i--) {\n                counts[i-1] = counts[i] - counts[i-1];\n            }\n            // encode the symbols using the probability table.\n            for (i=0; i<blockLength; i++) {\n                var ch = block[i];\n                encoder.encodeFreq(counts[ch+1]-counts[ch], counts[ch],\n                                   counts[256]);\n            }\n        }\n        // write a stop bit\n        encoder.encodeBit(false);\n        // done!\n        encoder.encodeFinish();\n    }, true);\n    Simple.decompressFile = Util.decompressFileHelper(Simple.MAGIC, function(input, output, size) {\n        var decoder = new RangeCoder(input);\n        decoder.decodeStart(true/*we already read the 'free' byte*/);\n        while (decoder.decodeBit()) {\n            var i, counts = [];\n            // read all the statistics\n            for (i=0; i<256; i++) {\n                counts[i] = decoder.decodeShort();\n            }\n            // compute cumulative stats & total block size\n            var blocksize = 0;\n            for (i=0; i<256; i++) {\n                var tmp = counts[i];\n                counts[i] = blocksize;\n                blocksize += tmp;\n            }\n            counts[256] = blocksize;\n\n            for (i=0; i<blocksize; i++) {\n                var cf = decoder.decodeCulFreq(blocksize);\n                // inefficient way to look up the symbol.\n                var symbol;\n                for (symbol=0; symbol<256; symbol++)\n                    // careful, there are length-0 ranges\n                    // (where counts[symbol]===counts[symbol+1])\n                    if (counts[symbol]<=cf && cf < counts[symbol+1])\n                        break;\n                var ch = symbol;\n                decoder.decodeUpdate(counts[symbol+1] - counts[symbol],\n                                     counts[symbol], blocksize);\n                output.writeByte(symbol);\n            }\n        }\n        decoder.decodeFinish();\n    });\n    return Simple;\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/Simple.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/Simple.js\n// module chunks = main","/** Abstract Stream interface, for byte-oriented i/o. */\nvar libs = [\n\trequire('./freeze')\n];\nvar body_fn = function (freeze) {\n    var EOF = -1;\n\n    var Stream = function() {\n        /* ABSTRACT */\n    };\n    // you must define one of read / readByte for a readable stream\n    Stream.prototype.readByte = function() {\n        var buf = [ 0 ];\n        var len = this.read(buf, 0, 1);\n        if (len===0) { this._eof = true; return EOF; }\n        return buf[0];\n    };\n    Stream.prototype.read = function(buf, bufOffset, length) {\n        var ch, bytesRead = 0;\n        while (bytesRead < length) {\n            ch = this.readByte();\n            if (ch === EOF) { this._eof = true; break; }\n            buf[bufOffset+(bytesRead++)] = ch;\n        }\n        return bytesRead;\n    };\n    // reasonable default implementation of 'eof'\n    Stream.prototype.eof = function() { return !!this._eof; };\n    // not all readable streams are seekable\n    Stream.prototype.seek = function(pos) {\n        throw new Error('Stream is not seekable.');\n    };\n    Stream.prototype.tell = function() {\n        throw new Error('Stream is not seekable.');\n    };\n    // you must define one of write / writeByte for a writable stream\n    Stream.prototype.writeByte = function(_byte) {\n        var buf = [ _byte ];\n        this.write(buf, 0, 1);\n    };\n    Stream.prototype.write = function(buf, bufOffset, length) {\n        var i;\n        for (i=0; i<length; i++) {\n            this.writeByte(buf[bufOffset + i]);\n        }\n        return length;\n    };\n    // flush will happily do nothing if you don't override it.\n    Stream.prototype.flush = function() { };\n\n    // export EOF as a constant.\n    Stream.EOF = EOF;\n\n    return freeze(Stream);\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/Stream.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/Stream.js\n// module chunks = main","/* Some basic utilities, used in a number of places. */\nvar libs = [\n\trequire('./freeze'),\n\trequire('./Stream')\n];\nvar body_fn = function (freeze, Stream) {\n    var Util = Object.create(null);\n\n    var EOF = Stream.EOF;\n\n    /* Take a buffer, array, or stream, and return an input stream. */\n    Util.coerceInputStream = function(input, forceRead) {\n        if (!('readByte' in input)) {\n            var buffer = input;\n            input = new Stream();\n            input.size = buffer.length;\n            input.pos = 0;\n            input.readByte = function() {\n                if (this.pos >= this.size) { return EOF; }\n                return buffer[this.pos++];\n            };\n            input.read = function(buf, bufOffset, length) {\n                var bytesRead = 0;\n                while (bytesRead < length && this.pos < buffer.length) {\n                    buf[bufOffset++] = buffer[this.pos++];\n                    bytesRead++;\n                }\n                return bytesRead;\n            };\n            input.seek = function(pos) { this.pos = pos; };\n            input.tell = function() { return this.pos; };\n            input.eof = function() { return this.pos >= buffer.length; };\n        } else if (forceRead && !('read' in input)) {\n            // wrap input if it doesn't implement read\n            var s = input;\n            input = new Stream();\n            input.readByte = function() {\n                var ch = s.readByte();\n                if (ch === EOF) { this._eof = true; }\n                return ch;\n            };\n            if ('size' in s) { input.size = s.size; }\n            if ('seek' in s) {\n                input.seek = function(pos) {\n                    s.seek(pos); // may throw if s doesn't implement seek\n                    this._eof = false;\n                };\n            }\n            if ('tell' in s) {\n                input.tell = s.tell.bind(s);\n            }\n        }\n        return input;\n    };\n\n    var BufferStream = function(buffer, resizeOk) {\n        this.buffer = buffer;\n        this.resizeOk = resizeOk;\n        this.pos = 0;\n    };\n    BufferStream.prototype = Object.create(Stream.prototype);\n    BufferStream.prototype.writeByte = function(_byte) {\n        if (this.resizeOk && this.pos >= this.buffer.length) {\n            var newBuffer = Util.makeU8Buffer(this.buffer.length * 2);\n            newBuffer.set(this.buffer);\n            this.buffer = newBuffer;\n        }\n        this.buffer[this.pos++] = _byte;\n    };\n    BufferStream.prototype.getBuffer = function() {\n        // trim buffer if needed\n        if (this.pos !== this.buffer.length) {\n            if (!this.resizeOk)\n                throw new TypeError('outputsize does not match decoded input');\n            var newBuffer = Util.makeU8Buffer(this.pos);\n            newBuffer.set(this.buffer.subarray(0, this.pos));\n            this.buffer = newBuffer;\n        }\n        return this.buffer;\n    };\n\n    /* Take a stream (or not) and an (optional) size, and return an\n     * output stream.  Return an object with a 'retval' field equal to\n     * the output stream (if that was given) or else a pointer at the\n     * internal Uint8Array/buffer/array; and a 'stream' field equal to\n     * an output stream to use.\n     */\n    Util.coerceOutputStream = function(output, size) {\n        var r = { stream: output, retval: output };\n        if (output) {\n            if (typeof(output)==='object' && 'writeByte' in output) {\n                return r; /* leave output alone */\n            } else if (typeof(size) === 'number') {\n                console.assert(size >= 0);\n                r.stream = new BufferStream(Util.makeU8Buffer(size), false);\n            } else { // output is a buffer\n                r.stream = new BufferStream(output, false);\n            }\n        } else {\n            r.stream = new BufferStream(Util.makeU8Buffer(16384), true);\n        }\n        Object.defineProperty(r, 'retval', {\n            get: r.stream.getBuffer.bind(r.stream)\n        });\n        return r;\n    };\n\n    Util.compressFileHelper = function(magic, guts, suppressFinalByte) {\n        return function(inStream, outStream, props) {\n            inStream = Util.coerceInputStream(inStream);\n            var o = Util.coerceOutputStream(outStream, outStream);\n            outStream = o.stream;\n\n            // write the magic number to identify this file type\n            // (it better be ASCII, we're not doing utf-8 conversion)\n            var i;\n            for (i=0; i<magic.length; i++) {\n                outStream.writeByte(magic.charCodeAt(i));\n            }\n\n            // if we know the size, write it\n            var fileSize;\n            if ('size' in inStream && inStream.size >= 0) {\n                fileSize = inStream.size;\n            } else {\n                fileSize = -1; // size unknown\n            }\n            if (suppressFinalByte) {\n                var tmpOutput = Util.coerceOutputStream([]);\n                Util.writeUnsignedNumber(tmpOutput.stream, fileSize + 1);\n                tmpOutput = tmpOutput.retval;\n                for (i=0; i<tmpOutput.length-1; i++) {\n                    outStream.writeByte(tmpOutput[i]);\n                }\n                suppressFinalByte = tmpOutput[tmpOutput.length-1];\n            } else {\n                Util.writeUnsignedNumber(outStream, fileSize + 1);\n            }\n\n            // call the guts to do the real compression\n            guts(inStream, outStream, fileSize, props, suppressFinalByte);\n\n            return o.retval;\n        };\n    };\n    Util.decompressFileHelper = function(magic, guts) {\n        return function(inStream, outStream) {\n            inStream = Util.coerceInputStream(inStream);\n\n            // read the magic number to confirm this file type\n            // (it better be ASCII, we're not doing utf-8 conversion)\n            var i;\n            for (i=0; i<magic.length; i++) {\n                if (magic.charCodeAt(i) !== inStream.readByte()) {\n                    throw new Error(\"Bad magic\");\n                }\n            }\n\n            // read the file size & create an appropriate output stream/buffer\n            var fileSize = Util.readUnsignedNumber(inStream) - 1;\n            var o = Util.coerceOutputStream(outStream, fileSize);\n            outStream = o.stream;\n\n            // call the guts to do the real decompression\n            guts(inStream, outStream, fileSize);\n\n            return o.retval;\n        };\n    };\n    // a helper for simple self-test of model encode\n    Util.compressWithModel = function(inStream, fileSize, model) {\n        var inSize = 0;\n        while (inSize !== fileSize) {\n            var ch = inStream.readByte();\n            if (ch === EOF) {\n                model.encode(256); // end of stream;\n                break;\n            }\n            model.encode(ch);\n            inSize++;\n        }\n    };\n    // a helper for simple self-test of model decode\n    Util.decompressWithModel = function(outStream, fileSize, model) {\n        var outSize = 0;\n        while (outSize !== fileSize) {\n            var ch = model.decode();\n            if (ch === 256) {\n                break; // end of stream;\n            }\n            outStream.writeByte(ch);\n            outSize++;\n        }\n    };\n\n    /** Write a number using a self-delimiting big-endian encoding. */\n    Util.writeUnsignedNumber = function(output, n) {\n        console.assert(n >= 0);\n        var bytes = [], i;\n        do {\n            bytes.push(n & 0x7F);\n            // use division instead of shift to allow encoding numbers up to\n            // 2^53\n            n = Math.floor( n / 128 );\n        } while (n !== 0);\n        bytes[0] |= 0x80; // mark end of encoding.\n        for (i=bytes.length-1; i>=0; i--) {\n            output.writeByte(bytes[i]); // write in big-endian order\n        }\n        return output;\n    };\n\n    /** Read a number using a self-delimiting big-endian encoding. */\n    Util.readUnsignedNumber = function(input) {\n        var n = 0, c;\n        while (true) {\n            c = input.readByte();\n            if (c&0x80) { n += (c&0x7F); break; }\n            // using + and * instead of << allows decoding numbers up to 2^53\n            n = (n + c) * 128;\n        }\n        return n;\n    };\n\n    // Compatibility thunks for Buffer/TypedArray constructors.\n\n    var zerofill = function(a) {\n        for (var i = 0, len = a.length; i < len; i++) {\n            a[i] = 0;\n        }\n        return a;\n    };\n\n    var fallbackarray = function(size) {\n        return zerofill(new Array(size));\n    };\n\n    // Node 0.11.6 - 0.11.10ish don't properly zero fill typed arrays.\n    // See https://github.com/joyent/node/issues/6664\n    // Try to detect and workaround the bug.\n    var ensureZeroed = function id(a) { return a; };\n    if ((typeof(process) !== 'undefined') &&\n        Array.prototype.some.call(new Uint32Array(128), function(x) {\n            return x !== 0;\n        })) {\n        //console.warn('Working around broken TypedArray');\n        ensureZeroed = zerofill;\n    }\n\n    /** Portable 8-bit unsigned buffer. */\n    Util.makeU8Buffer = (typeof(Uint8Array) !== 'undefined') ? function(size) {\n        // Uint8Array ought to be  automatically zero-filled\n        return ensureZeroed(new Uint8Array(size));\n    } : (typeof(Buffer) !== 'undefined') ? function(size) {\n        var b = new Buffer(size);\n        b.fill(0);\n        return b;\n    } : fallbackarray;\n\n    /** Portable 16-bit unsigned buffer. */\n    Util.makeU16Buffer = (typeof(Uint16Array) !== 'undefined') ? function(size) {\n        // Uint16Array ought to be  automatically zero-filled\n        return ensureZeroed(new Uint16Array(size));\n    } : fallbackarray;\n\n    /** Portable 32-bit unsigned buffer. */\n    Util.makeU32Buffer = (typeof(Uint32Array) !== 'undefined') ? function(size) {\n        // Uint32Array ought to be  automatically zero-filled\n        return ensureZeroed(new Uint32Array(size));\n    } : fallbackarray;\n\n    /** Portable 32-bit signed buffer. */\n    Util.makeS32Buffer = (typeof(Int32Array) !== 'undefined') ? function(size) {\n        // Int32Array ought to be  automatically zero-filled\n        return ensureZeroed(new Int32Array(size));\n    } : fallbackarray;\n\n    Util.arraycopy = function(dst, src) {\n        console.assert(dst.length >= src.length);\n        for (var i = 0, len = src.length; i < len ; i++) {\n            dst[i] = src[i];\n        }\n        return dst;\n    };\n\n    /** Highest bit set in a byte. */\n    var bytemsb = [\n        0, 1, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5,\n        5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,\n        6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7,\n        7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,\n        7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,\n        7, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n        8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n        8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n        8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n        8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,\n        8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8 /* 256 */\n    ];\n    console.assert(bytemsb.length===0x100);\n    /** Find last set (most significant bit).\n     *  @return the last bit set in the argument.\n     *          <code>fls(0)==0</code> and <code>fls(1)==1</code>. */\n    var fls = Util.fls = function(v) {\n        console.assert(v>=0);\n        if (v > 0xFFFFFFFF) { // use floating-point mojo\n            return 32 + fls(Math.floor(v / 0x100000000));\n        }\n        if ( (v & 0xFFFF0000) !== 0) {\n            if ( (v & 0xFF000000) !== 0) {\n                return 24 + bytemsb[(v>>>24) & 0xFF];\n            } else {\n                return 16 + bytemsb[v>>>16];\n            }\n        } else if ( (v & 0x0000FF00) !== 0) {\n            return 8 + bytemsb[v>>>8];\n        } else {\n            return bytemsb[v];\n        }\n    };\n    /** Returns ceil(log2(n)) */\n    Util.log2c = function(v) {\n        return (v===0)?-1:fls(v-1);\n    };\n\n    return freeze(Util); // ensure constants are recognized as such.\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/Util.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/Util.js\n// module chunks = main","\nvar libs = [\n];\nvar body_fn = function (){\n  'use strict';\n\n  // Object.freeze(), or a thunk if that method is not present in this\n  // JavaScript environment.\n\n  if (Object.freeze) {\n    return Object.freeze;\n  } else {\n    return function(o) { return o; };\n  }\n\n};\nmodule.exports = body_fn.apply(null, libs);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/keybase-compressjs/outlib/freeze.js\n// module id = ../heroprotocol/node_modules/keybase-compressjs/outlib/freeze.js\n// module chunks = main","/*--------------------------------------------------------------------------\r\n * linq.js - LINQ for JavaScript\r\n * licensed under MIT License\r\n *------------------------------------------------------------------------*/\r\n\r\n(function (root, undefined) {\r\n    // ReadOnly Function\r\n    var Functions = {\r\n        Identity: function (x) { return x; },\r\n        True: function () { return true; },\r\n        Blank: function () { }\r\n    };\r\n\r\n    // const Type\r\n    var Types = {\r\n        Boolean: typeof true,\r\n        Number: typeof 0,\r\n        String: typeof \"\",\r\n        Object: typeof {},\r\n        Undefined: typeof undefined,\r\n        Function: typeof function () { }\r\n    };\r\n\r\n    // createLambda cache\r\n    var funcCache = { \"\": Functions.Identity };\r\n\r\n    // private utility methods\r\n    var Utils = {\r\n        // Create anonymous function from lambda expression string\r\n        createLambda: function (expression) {\r\n            if (expression == null) return Functions.Identity;\r\n            if (typeof expression === Types.String) {\r\n                // get from cache\r\n                var f = funcCache[expression];\r\n                if (f != null) {\r\n                    return f;\r\n                }\r\n\r\n                if (expression.indexOf(\"=>\") === -1) {\r\n                    var regexp = new RegExp(\"[$]+\", \"g\");\r\n\r\n                    var maxLength = 0;\r\n                    var match;\r\n                    while ((match = regexp.exec(expression)) != null) {\r\n                        var paramNumber = match[0].length;\r\n                        if (paramNumber > maxLength) {\r\n                            maxLength = paramNumber;\r\n                        }\r\n                    }\r\n\r\n                    var argArray = [];\r\n                    for (var i = 1; i <= maxLength; i++) {\r\n                        var dollar = \"\";\r\n                        for (var j = 0; j < i; j++) {\r\n                            dollar += \"$\";\r\n                        }\r\n                        argArray.push(dollar);\r\n                    }\r\n\r\n                    var args = Array.prototype.join.call(argArray, \",\");\r\n\r\n                    f = new Function(args, \"return \" + expression);\r\n                    funcCache[expression] = f;\r\n                    return f;\r\n                }\r\n                else {\r\n                    var expr = expression.match(/^[(\\s]*([^()]*?)[)\\s]*=>(.*)/);\r\n                    f = new Function(expr[1], \"return \" + expr[2]);\r\n                    funcCache[expression] = f;\r\n                    return f;\r\n                }\r\n            }\r\n            return expression;\r\n        },\r\n\r\n        isIEnumerable: function (obj) {\r\n            if (typeof Enumerator !== Types.Undefined) {\r\n                try {\r\n                    new Enumerator(obj); // check JScript(IE)'s Enumerator\r\n                    return true;\r\n                }\r\n                catch (e) { }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        // IE8's defineProperty is defined but cannot use, therefore check defineProperties\r\n        defineProperty: (Object.defineProperties != null)\r\n            ? function (target, methodName, value) {\r\n                Object.defineProperty(target, methodName, {\r\n                    enumerable: false,\r\n                    configurable: true,\r\n                    writable: true,\r\n                    value: value\r\n                })\r\n            }\r\n            : function (target, methodName, value) {\r\n                target[methodName] = value;\r\n            },\r\n\r\n        compare: function (a, b) {\r\n            return (a === b) ? 0\r\n                 : (a > b) ? 1\r\n                 : -1;\r\n        },\r\n\r\n        dispose: function (obj) {\r\n            if (obj != null) obj.dispose();\r\n        }\r\n    };\r\n\r\n    // IEnumerator State\r\n    var State = { Before: 0, Running: 1, After: 2 };\r\n\r\n    // \"Enumerator\" is conflict JScript's \"Enumerator\"\r\n    var IEnumerator = function (initialize, tryGetNext, dispose) {\r\n        var yielder = new Yielder();\r\n        var state = State.Before;\r\n\r\n        this.current = yielder.current;\r\n\r\n        this.moveNext = function () {\r\n            try {\r\n                switch (state) {\r\n                    case State.Before:\r\n                        state = State.Running;\r\n                        initialize();\r\n                        // fall through\r\n                    case State.Running:\r\n                        if (tryGetNext.apply(yielder)) {\r\n                            return true;\r\n                        }\r\n                        else {\r\n                            this.dispose();\r\n                            return false;\r\n                        }\r\n                    case State.After:\r\n                        return false;\r\n                }\r\n            }\r\n            catch (e) {\r\n                this.dispose();\r\n                throw e;\r\n            }\r\n        };\r\n\r\n        this.dispose = function () {\r\n            if (state != State.Running) return;\r\n\r\n            try {\r\n                dispose();\r\n            }\r\n            finally {\r\n                state = State.After;\r\n            }\r\n        };\r\n    };\r\n\r\n    // for tryGetNext\r\n    var Yielder = function () {\r\n        var current = null;\r\n        this.current = function () { return current; };\r\n        this.yieldReturn = function (value) {\r\n            current = value;\r\n            return true;\r\n        };\r\n        this.yieldBreak = function () {\r\n            return false;\r\n        };\r\n    };\r\n\r\n    // Enumerable constuctor\r\n    var Enumerable = function (getEnumerator) {\r\n        this.getEnumerator = getEnumerator;\r\n    };\r\n\r\n    // Utility\r\n\r\n    Enumerable.Utils = {}; // container\r\n\r\n    Enumerable.Utils.createLambda = function (expression) {\r\n        return Utils.createLambda(expression);\r\n    };\r\n\r\n    Enumerable.Utils.createEnumerable = function (getEnumerator) {\r\n        return new Enumerable(getEnumerator);\r\n    };\r\n\r\n    Enumerable.Utils.createEnumerator = function (initialize, tryGetNext, dispose) {\r\n        return new IEnumerator(initialize, tryGetNext, dispose);\r\n    };\r\n\r\n    Enumerable.Utils.extendTo = function (type) {\r\n        var typeProto = type.prototype;\r\n        var enumerableProto;\r\n\r\n        if (type === Array) {\r\n            enumerableProto = ArrayEnumerable.prototype;\r\n            Utils.defineProperty(typeProto, \"getSource\", function () {\r\n                return this;\r\n            });\r\n        }\r\n        else {\r\n            enumerableProto = Enumerable.prototype;\r\n            Utils.defineProperty(typeProto, \"getEnumerator\", function () {\r\n                return Enumerable.from(this).getEnumerator();\r\n            });\r\n        }\r\n\r\n        for (var methodName in enumerableProto) {\r\n            var func = enumerableProto[methodName];\r\n\r\n            // already extended\r\n            if (typeProto[methodName] == func) continue;\r\n\r\n            // already defined(example Array#reverse/join/forEach...)\r\n            if (typeProto[methodName] != null) {\r\n                methodName = methodName + \"ByLinq\";\r\n                if (typeProto[methodName] == func) continue; // recheck\r\n            }\r\n\r\n            if (func instanceof Function) {\r\n                Utils.defineProperty(typeProto, methodName, func);\r\n            }\r\n        }\r\n    };\r\n\r\n    // Generator\r\n\r\n    Enumerable.choice = function () // variable argument\r\n    {\r\n        var args = arguments;\r\n\r\n        return new Enumerable(function () {\r\n            return new IEnumerator(\r\n                function () {\r\n                    args = (args[0] instanceof Array) ? args[0]\r\n                        : (args[0].getEnumerator != null) ? args[0].toArray()\r\n                        : args;\r\n                },\r\n                function () {\r\n                    return this.yieldReturn(args[Math.floor(Math.random() * args.length)]);\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    Enumerable.cycle = function () // variable argument\r\n    {\r\n        var args = arguments;\r\n\r\n        return new Enumerable(function () {\r\n            var index = 0;\r\n            return new IEnumerator(\r\n                function () {\r\n                    args = (args[0] instanceof Array) ? args[0]\r\n                        : (args[0].getEnumerator != null) ? args[0].toArray()\r\n                        : args;\r\n                },\r\n                function () {\r\n                    if (index >= args.length) index = 0;\r\n                    return this.yieldReturn(args[index++]);\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    Enumerable.empty = function () {\r\n        return new Enumerable(function () {\r\n            return new IEnumerator(\r\n                Functions.Blank,\r\n                function () { return false; },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    Enumerable.from = function (obj) {\r\n        if (obj == null) {\r\n            return Enumerable.empty();\r\n        }\r\n        if (obj instanceof Enumerable) {\r\n            return obj;\r\n        }\r\n        if (typeof obj == Types.Number || typeof obj == Types.Boolean) {\r\n            return Enumerable.repeat(obj, 1);\r\n        }\r\n        if (typeof obj == Types.String) {\r\n            return new Enumerable(function () {\r\n                var index = 0;\r\n                return new IEnumerator(\r\n                    Functions.Blank,\r\n                    function () {\r\n                        return (index < obj.length) ? this.yieldReturn(obj.charAt(index++)) : false;\r\n                    },\r\n                    Functions.Blank);\r\n            });\r\n        }\r\n        if (typeof obj != Types.Function) {\r\n            // array or array like object\r\n            if (typeof obj.length == Types.Number) {\r\n                return new ArrayEnumerable(obj);\r\n            }\r\n\r\n            // JScript's IEnumerable\r\n            if (!(obj instanceof Object) && Utils.isIEnumerable(obj)) {\r\n                return new Enumerable(function () {\r\n                    var isFirst = true;\r\n                    var enumerator;\r\n                    return new IEnumerator(\r\n                        function () { enumerator = new Enumerator(obj); },\r\n                        function () {\r\n                            if (isFirst) isFirst = false;\r\n                            else enumerator.moveNext();\r\n\r\n                            return (enumerator.atEnd()) ? false : this.yieldReturn(enumerator.item());\r\n                        },\r\n                        Functions.Blank);\r\n                });\r\n            }\r\n\r\n            // WinMD IIterable<T>\r\n            if (typeof Windows === Types.Object && typeof obj.first === Types.Function) {\r\n                return new Enumerable(function () {\r\n                    var isFirst = true;\r\n                    var enumerator;\r\n                    return new IEnumerator(\r\n                        function () { enumerator = obj.first(); },\r\n                        function () {\r\n                            if (isFirst) isFirst = false;\r\n                            else enumerator.moveNext();\r\n\r\n                            return (enumerator.hasCurrent) ? this.yieldReturn(enumerator.current) : this.yieldBreak();\r\n                        },\r\n                        Functions.Blank);\r\n                });\r\n            }\r\n        }\r\n\r\n        // case function/object : Create keyValuePair[]\r\n        return new Enumerable(function () {\r\n            var array = [];\r\n            var index = 0;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    for (var key in obj) {\r\n                        var value = obj[key];\r\n                        if (!(value instanceof Function) && Object.prototype.hasOwnProperty.call(obj, key)) {\r\n                            array.push({ key: key, value: value });\r\n                        }\r\n                    }\r\n                },\r\n                function () {\r\n                    return (index < array.length)\r\n                        ? this.yieldReturn(array[index++])\r\n                        : false;\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    },\r\n\r\n    Enumerable.make = function (element) {\r\n        return Enumerable.repeat(element, 1);\r\n    };\r\n\r\n    // Overload:function(input, pattern)\r\n    // Overload:function(input, pattern, flags)\r\n    Enumerable.matches = function (input, pattern, flags) {\r\n        if (flags == null) flags = \"\";\r\n        if (pattern instanceof RegExp) {\r\n            flags += (pattern.ignoreCase) ? \"i\" : \"\";\r\n            flags += (pattern.multiline) ? \"m\" : \"\";\r\n            pattern = pattern.source;\r\n        }\r\n        if (flags.indexOf(\"g\") === -1) flags += \"g\";\r\n\r\n        return new Enumerable(function () {\r\n            var regex;\r\n            return new IEnumerator(\r\n                function () { regex = new RegExp(pattern, flags); },\r\n                function () {\r\n                    var match = regex.exec(input);\r\n                    return (match) ? this.yieldReturn(match) : false;\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    // Overload:function(start, count)\r\n    // Overload:function(start, count, step)\r\n    Enumerable.range = function (start, count, step) {\r\n        if (step == null) step = 1;\r\n\r\n        return new Enumerable(function () {\r\n            var value;\r\n            var index = 0;\r\n\r\n            return new IEnumerator(\r\n                function () { value = start - step; },\r\n                function () {\r\n                    return (index++ < count)\r\n                        ? this.yieldReturn(value += step)\r\n                        : this.yieldBreak();\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    // Overload:function(start, count)\r\n    // Overload:function(start, count, step)\r\n    Enumerable.rangeDown = function (start, count, step) {\r\n        if (step == null) step = 1;\r\n\r\n        return new Enumerable(function () {\r\n            var value;\r\n            var index = 0;\r\n\r\n            return new IEnumerator(\r\n                function () { value = start + step; },\r\n                function () {\r\n                    return (index++ < count)\r\n                        ? this.yieldReturn(value -= step)\r\n                        : this.yieldBreak();\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    // Overload:function(start, to)\r\n    // Overload:function(start, to, step)\r\n    Enumerable.rangeTo = function (start, to, step) {\r\n        if (step == null) step = 1;\r\n\r\n        if (start < to) {\r\n            return new Enumerable(function () {\r\n                var value;\r\n\r\n                return new IEnumerator(\r\n                function () { value = start - step; },\r\n                function () {\r\n                    var next = value += step;\r\n                    return (next <= to)\r\n                        ? this.yieldReturn(next)\r\n                        : this.yieldBreak();\r\n                },\r\n                Functions.Blank);\r\n            });\r\n        }\r\n        else {\r\n            return new Enumerable(function () {\r\n                var value;\r\n\r\n                return new IEnumerator(\r\n                function () { value = start + step; },\r\n                function () {\r\n                    var next = value -= step;\r\n                    return (next >= to)\r\n                        ? this.yieldReturn(next)\r\n                        : this.yieldBreak();\r\n                },\r\n                Functions.Blank);\r\n            });\r\n        }\r\n    };\r\n\r\n    // Overload:function(element)\r\n    // Overload:function(element, count)\r\n    Enumerable.repeat = function (element, count) {\r\n        if (count != null) return Enumerable.repeat(element).take(count);\r\n\r\n        return new Enumerable(function () {\r\n            return new IEnumerator(\r\n                Functions.Blank,\r\n                function () { return this.yieldReturn(element); },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    Enumerable.repeatWithFinalize = function (initializer, finalizer) {\r\n        initializer = Utils.createLambda(initializer);\r\n        finalizer = Utils.createLambda(finalizer);\r\n\r\n        return new Enumerable(function () {\r\n            var element;\r\n            return new IEnumerator(\r\n                function () { element = initializer(); },\r\n                function () { return this.yieldReturn(element); },\r\n                function () {\r\n                    if (element != null) {\r\n                        finalizer(element);\r\n                        element = null;\r\n                    }\r\n                });\r\n        });\r\n    };\r\n\r\n    // Overload:function(func)\r\n    // Overload:function(func, count)\r\n    Enumerable.generate = function (func, count) {\r\n        if (count != null) return Enumerable.generate(func).take(count);\r\n        func = Utils.createLambda(func);\r\n\r\n        return new Enumerable(function () {\r\n            return new IEnumerator(\r\n                Functions.Blank,\r\n                function () { return this.yieldReturn(func()); },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(start)\r\n    // Overload:function(start, step)\r\n    Enumerable.toInfinity = function (start, step) {\r\n        if (start == null) start = 0;\r\n        if (step == null) step = 1;\r\n\r\n        return new Enumerable(function () {\r\n            var value;\r\n            return new IEnumerator(\r\n                function () { value = start - step; },\r\n                function () { return this.yieldReturn(value += step); },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(start)\r\n    // Overload:function(start, step)\r\n    Enumerable.toNegativeInfinity = function (start, step) {\r\n        if (start == null) start = 0;\r\n        if (step == null) step = 1;\r\n\r\n        return new Enumerable(function () {\r\n            var value;\r\n            return new IEnumerator(\r\n                function () { value = start + step; },\r\n                function () { return this.yieldReturn(value -= step); },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    Enumerable.unfold = function (seed, func) {\r\n        func = Utils.createLambda(func);\r\n\r\n        return new Enumerable(function () {\r\n            var isFirst = true;\r\n            var value;\r\n            return new IEnumerator(\r\n                Functions.Blank,\r\n                function () {\r\n                    if (isFirst) {\r\n                        isFirst = false;\r\n                        value = seed;\r\n                        return this.yieldReturn(value);\r\n                    }\r\n                    value = func(value);\r\n                    return this.yieldReturn(value);\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    Enumerable.defer = function (enumerableFactory) {\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = Enumerable.from(enumerableFactory()).getEnumerator(); },\r\n                function () {\r\n                    return (enumerator.moveNext())\r\n                        ? this.yieldReturn(enumerator.current())\r\n                        : this.yieldBreak();\r\n                },\r\n                function () {\r\n                    Utils.dispose(enumerator);\r\n                });\r\n        });\r\n    };\r\n\r\n    // Extension Methods\r\n\r\n    /* Projection and Filtering Methods */\r\n\r\n    // Overload:function(func)\r\n    // Overload:function(func, resultSelector<element>)\r\n    // Overload:function(func, resultSelector<element, nestLevel>)\r\n    Enumerable.prototype.traverseBreadthFirst = function (func, resultSelector) {\r\n        var source = this;\r\n        func = Utils.createLambda(func);\r\n        resultSelector = Utils.createLambda(resultSelector);\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var nestLevel = 0;\r\n            var buffer = [];\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    while (true) {\r\n                        if (enumerator.moveNext()) {\r\n                            buffer.push(enumerator.current());\r\n                            return this.yieldReturn(resultSelector(enumerator.current(), nestLevel));\r\n                        }\r\n\r\n                        var next = Enumerable.from(buffer).selectMany(function (x) { return func(x); });\r\n                        if (!next.any()) {\r\n                            return false;\r\n                        }\r\n                        else {\r\n                            nestLevel++;\r\n                            buffer = [];\r\n                            Utils.dispose(enumerator);\r\n                            enumerator = next.getEnumerator();\r\n                        }\r\n                    }\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(func)\r\n    // Overload:function(func, resultSelector<element>)\r\n    // Overload:function(func, resultSelector<element, nestLevel>)\r\n    Enumerable.prototype.traverseDepthFirst = function (func, resultSelector) {\r\n        var source = this;\r\n        func = Utils.createLambda(func);\r\n        resultSelector = Utils.createLambda(resultSelector);\r\n\r\n        return new Enumerable(function () {\r\n            var enumeratorStack = [];\r\n            var enumerator;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    while (true) {\r\n                        if (enumerator.moveNext()) {\r\n                            var value = resultSelector(enumerator.current(), enumeratorStack.length);\r\n                            enumeratorStack.push(enumerator);\r\n                            enumerator = Enumerable.from(func(enumerator.current())).getEnumerator();\r\n                            return this.yieldReturn(value);\r\n                        }\r\n\r\n                        if (enumeratorStack.length <= 0) return false;\r\n                        Utils.dispose(enumerator);\r\n                        enumerator = enumeratorStack.pop();\r\n                    }\r\n                },\r\n                function () {\r\n                    try {\r\n                        Utils.dispose(enumerator);\r\n                    }\r\n                    finally {\r\n                        Enumerable.from(enumeratorStack).forEach(function (s) { s.dispose(); });\r\n                    }\r\n                });\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.flatten = function () {\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var middleEnumerator = null;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    while (true) {\r\n                        if (middleEnumerator != null) {\r\n                            if (middleEnumerator.moveNext()) {\r\n                                return this.yieldReturn(middleEnumerator.current());\r\n                            }\r\n                            else {\r\n                                middleEnumerator = null;\r\n                            }\r\n                        }\r\n\r\n                        if (enumerator.moveNext()) {\r\n                            if (enumerator.current() instanceof Array) {\r\n                                Utils.dispose(middleEnumerator);\r\n                                middleEnumerator = Enumerable.from(enumerator.current())\r\n                                    .selectMany(Functions.Identity)\r\n                                    .flatten()\r\n                                    .getEnumerator();\r\n                                continue;\r\n                            }\r\n                            else {\r\n                                return this.yieldReturn(enumerator.current());\r\n                            }\r\n                        }\r\n\r\n                        return false;\r\n                    }\r\n                },\r\n                function () {\r\n                    try {\r\n                        Utils.dispose(enumerator);\r\n                    }\r\n                    finally {\r\n                        Utils.dispose(middleEnumerator);\r\n                    }\r\n                });\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.pairwise = function (selector) {\r\n        var source = this;\r\n        selector = Utils.createLambda(selector);\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerator = source.getEnumerator();\r\n                    enumerator.moveNext();\r\n                },\r\n                function () {\r\n                    var prev = enumerator.current();\r\n                    return (enumerator.moveNext())\r\n                        ? this.yieldReturn(selector(prev, enumerator.current()))\r\n                        : false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(func)\r\n    // Overload:function(seed,func<value,element>)\r\n    Enumerable.prototype.scan = function (seed, func) {\r\n        var isUseSeed;\r\n        if (func == null) {\r\n            func = Utils.createLambda(seed); // arguments[0]\r\n            isUseSeed = false;\r\n        } else {\r\n            func = Utils.createLambda(func);\r\n            isUseSeed = true;\r\n        }\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var value;\r\n            var isFirst = true;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    if (isFirst) {\r\n                        isFirst = false;\r\n                        if (!isUseSeed) {\r\n                            if (enumerator.moveNext()) {\r\n                                return this.yieldReturn(value = enumerator.current());\r\n                            }\r\n                        }\r\n                        else {\r\n                            return this.yieldReturn(value = seed);\r\n                        }\r\n                    }\r\n\r\n                    return (enumerator.moveNext())\r\n                        ? this.yieldReturn(value = func(value, enumerator.current()))\r\n                        : false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(selector<element>)\r\n    // Overload:function(selector<element,index>)\r\n    Enumerable.prototype.select = function (selector) {\r\n        selector = Utils.createLambda(selector);\r\n\r\n        if (selector.length <= 1) {\r\n            return new WhereSelectEnumerable(this, null, selector);\r\n        }\r\n        else {\r\n            var source = this;\r\n\r\n            return new Enumerable(function () {\r\n                var enumerator;\r\n                var index = 0;\r\n\r\n                return new IEnumerator(\r\n                    function () { enumerator = source.getEnumerator(); },\r\n                    function () {\r\n                        return (enumerator.moveNext())\r\n                            ? this.yieldReturn(selector(enumerator.current(), index++))\r\n                            : false;\r\n                    },\r\n                    function () { Utils.dispose(enumerator); });\r\n            });\r\n        }\r\n    };\r\n\r\n    // Overload:function(collectionSelector<element>)\r\n    // Overload:function(collectionSelector<element,index>)\r\n    // Overload:function(collectionSelector<element>,resultSelector)\r\n    // Overload:function(collectionSelector<element,index>,resultSelector)\r\n    Enumerable.prototype.selectMany = function (collectionSelector, resultSelector) {\r\n        var source = this;\r\n        collectionSelector = Utils.createLambda(collectionSelector);\r\n        if (resultSelector == null) resultSelector = function (a, b) { return b; };\r\n        resultSelector = Utils.createLambda(resultSelector);\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var middleEnumerator = undefined;\r\n            var index = 0;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    if (middleEnumerator === undefined) {\r\n                        if (!enumerator.moveNext()) return false;\r\n                    }\r\n                    do {\r\n                        if (middleEnumerator == null) {\r\n                            var middleSeq = collectionSelector(enumerator.current(), index++);\r\n                            middleEnumerator = Enumerable.from(middleSeq).getEnumerator();\r\n                        }\r\n                        if (middleEnumerator.moveNext()) {\r\n                            return this.yieldReturn(resultSelector(enumerator.current(), middleEnumerator.current()));\r\n                        }\r\n                        Utils.dispose(middleEnumerator);\r\n                        middleEnumerator = null;\r\n                    } while (enumerator.moveNext());\r\n                    return false;\r\n                },\r\n                function () {\r\n                    try {\r\n                        Utils.dispose(enumerator);\r\n                    }\r\n                    finally {\r\n                        Utils.dispose(middleEnumerator);\r\n                    }\r\n                });\r\n        });\r\n    };\r\n\r\n    // Overload:function(predicate<element>)\r\n    // Overload:function(predicate<element,index>)\r\n    Enumerable.prototype.where = function (predicate) {\r\n        predicate = Utils.createLambda(predicate);\r\n\r\n        if (predicate.length <= 1) {\r\n            return new WhereEnumerable(this, predicate);\r\n        }\r\n        else {\r\n            var source = this;\r\n\r\n            return new Enumerable(function () {\r\n                var enumerator;\r\n                var index = 0;\r\n\r\n                return new IEnumerator(\r\n                    function () { enumerator = source.getEnumerator(); },\r\n                    function () {\r\n                        while (enumerator.moveNext()) {\r\n                            if (predicate(enumerator.current(), index++)) {\r\n                                return this.yieldReturn(enumerator.current());\r\n                            }\r\n                        }\r\n                        return false;\r\n                    },\r\n                    function () { Utils.dispose(enumerator); });\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    // Overload:function(selector<element>)\r\n    // Overload:function(selector<element,index>)\r\n    Enumerable.prototype.choose = function (selector) {\r\n        selector = Utils.createLambda(selector);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var index = 0;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    while (enumerator.moveNext()) {\r\n                        var result = selector(enumerator.current(), index++);\r\n                        if (result != null) {\r\n                            return this.yieldReturn(result);\r\n                        }\r\n                    }\r\n                    return this.yieldBreak();\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.ofType = function (type) {\r\n        var typeName;\r\n        switch (type) {\r\n            case Number:\r\n                typeName = Types.Number;\r\n                break;\r\n            case String:\r\n                typeName = Types.String;\r\n                break;\r\n            case Boolean:\r\n                typeName = Types.Boolean;\r\n                break;\r\n            case Function:\r\n                typeName = Types.Function;\r\n                break;\r\n            default:\r\n                typeName = null;\r\n                break;\r\n        }\r\n        return (typeName === null)\r\n            ? this.where(function (x) { return x instanceof type; })\r\n            : this.where(function (x) { return typeof x === typeName; });\r\n    };\r\n\r\n    // mutiple arguments, last one is selector, others are enumerable\r\n    Enumerable.prototype.zip = function () {\r\n        var args = arguments;\r\n        var selector = Utils.createLambda(arguments[arguments.length - 1]);\r\n\r\n        var source = this;\r\n        // optimized case:argument is 2\r\n        if (arguments.length == 2) {\r\n            var second = arguments[0];\r\n\r\n            return new Enumerable(function () {\r\n                var firstEnumerator;\r\n                var secondEnumerator;\r\n                var index = 0;\r\n\r\n                return new IEnumerator(\r\n                function () {\r\n                    firstEnumerator = source.getEnumerator();\r\n                    secondEnumerator = Enumerable.from(second).getEnumerator();\r\n                },\r\n                function () {\r\n                    if (firstEnumerator.moveNext() && secondEnumerator.moveNext()) {\r\n                        return this.yieldReturn(selector(firstEnumerator.current(), secondEnumerator.current(), index++));\r\n                    }\r\n                    return false;\r\n                },\r\n                function () {\r\n                    try {\r\n                        Utils.dispose(firstEnumerator);\r\n                    } finally {\r\n                        Utils.dispose(secondEnumerator);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            return new Enumerable(function () {\r\n                var enumerators;\r\n                var index = 0;\r\n\r\n                return new IEnumerator(\r\n                function () {\r\n                    var array = Enumerable.make(source)\r\n                        .concat(Enumerable.from(args).takeExceptLast().select(Enumerable.from))\r\n                        .select(function (x) { return x.getEnumerator() })\r\n                        .toArray();\r\n                    enumerators = Enumerable.from(array);\r\n                },\r\n                function () {\r\n                    if (enumerators.all(function (x) { return x.moveNext() })) {\r\n                        var array = enumerators\r\n                            .select(function (x) { return x.current() })\r\n                            .toArray();\r\n                        array.push(index++);\r\n                        return this.yieldReturn(selector.apply(null, array));\r\n                    }\r\n                    else {\r\n                        return this.yieldBreak();\r\n                    }\r\n                },\r\n                function () {\r\n                    Enumerable.from(enumerators).forEach(Utils.dispose);\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    // mutiple arguments\r\n    Enumerable.prototype.merge = function () {\r\n        var args = arguments;\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerators;\r\n            var index = -1;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerators = Enumerable.make(source)\r\n                        .concat(Enumerable.from(args).select(Enumerable.from))\r\n                        .select(function (x) { return x.getEnumerator() })\r\n                        .toArray();\r\n                },\r\n                function () {\r\n                    while (enumerators.length > 0) {\r\n                        index = (index >= enumerators.length - 1) ? 0 : index + 1;\r\n                        var enumerator = enumerators[index];\r\n\r\n                        if (enumerator.moveNext()) {\r\n                            return this.yieldReturn(enumerator.current());\r\n                        }\r\n                        else {\r\n                            enumerator.dispose();\r\n                            enumerators.splice(index--, 1);\r\n                        }\r\n                    }\r\n                    return this.yieldBreak();\r\n                },\r\n                function () {\r\n                    Enumerable.from(enumerators).forEach(Utils.dispose);\r\n                });\r\n        });\r\n    };\r\n\r\n    /* Join Methods */\r\n\r\n    // Overload:function (inner, outerKeySelector, innerKeySelector, resultSelector)\r\n    // Overload:function (inner, outerKeySelector, innerKeySelector, resultSelector, compareSelector)\r\n    Enumerable.prototype.join = function (inner, outerKeySelector, innerKeySelector, resultSelector, compareSelector) {\r\n        outerKeySelector = Utils.createLambda(outerKeySelector);\r\n        innerKeySelector = Utils.createLambda(innerKeySelector);\r\n        resultSelector = Utils.createLambda(resultSelector);\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var outerEnumerator;\r\n            var lookup;\r\n            var innerElements = null;\r\n            var innerCount = 0;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    outerEnumerator = source.getEnumerator();\r\n                    lookup = Enumerable.from(inner).toLookup(innerKeySelector, Functions.Identity, compareSelector);\r\n                },\r\n                function () {\r\n                    while (true) {\r\n                        if (innerElements != null) {\r\n                            var innerElement = innerElements[innerCount++];\r\n                            if (innerElement !== undefined) {\r\n                                return this.yieldReturn(resultSelector(outerEnumerator.current(), innerElement));\r\n                            }\r\n\r\n                            innerElement = null;\r\n                            innerCount = 0;\r\n                        }\r\n\r\n                        if (outerEnumerator.moveNext()) {\r\n                            var key = outerKeySelector(outerEnumerator.current());\r\n                            innerElements = lookup.get(key).toArray();\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    }\r\n                },\r\n                function () { Utils.dispose(outerEnumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function (inner, outerKeySelector, innerKeySelector, resultSelector)\r\n    // Overload:function (inner, outerKeySelector, innerKeySelector, resultSelector, compareSelector)\r\n    Enumerable.prototype.groupJoin = function (inner, outerKeySelector, innerKeySelector, resultSelector, compareSelector) {\r\n        outerKeySelector = Utils.createLambda(outerKeySelector);\r\n        innerKeySelector = Utils.createLambda(innerKeySelector);\r\n        resultSelector = Utils.createLambda(resultSelector);\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator = source.getEnumerator();\r\n            var lookup = null;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerator = source.getEnumerator();\r\n                    lookup = Enumerable.from(inner).toLookup(innerKeySelector, Functions.Identity, compareSelector);\r\n                },\r\n                function () {\r\n                    if (enumerator.moveNext()) {\r\n                        var innerElement = lookup.get(outerKeySelector(enumerator.current()));\r\n                        return this.yieldReturn(resultSelector(enumerator.current(), innerElement));\r\n                    }\r\n                    return false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    /* Set Methods */\r\n\r\n    Enumerable.prototype.all = function (predicate) {\r\n        predicate = Utils.createLambda(predicate);\r\n\r\n        var result = true;\r\n        this.forEach(function (x) {\r\n            if (!predicate(x)) {\r\n                result = false;\r\n                return false; // break\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(predicate)\r\n    Enumerable.prototype.any = function (predicate) {\r\n        predicate = Utils.createLambda(predicate);\r\n\r\n        var enumerator = this.getEnumerator();\r\n        try {\r\n            if (arguments.length == 0) return enumerator.moveNext(); // case:function()\r\n\r\n            while (enumerator.moveNext()) // case:function(predicate)\r\n            {\r\n                if (predicate(enumerator.current())) return true;\r\n            }\r\n            return false;\r\n        }\r\n        finally {\r\n            Utils.dispose(enumerator);\r\n        }\r\n    };\r\n\r\n    Enumerable.prototype.isEmpty = function () {\r\n        return !this.any();\r\n    };\r\n\r\n    // multiple arguments\r\n    Enumerable.prototype.concat = function () {\r\n        var source = this;\r\n\r\n        if (arguments.length == 1) {\r\n            var second = arguments[0];\r\n\r\n            return new Enumerable(function () {\r\n                var firstEnumerator;\r\n                var secondEnumerator;\r\n\r\n                return new IEnumerator(\r\n                function () { firstEnumerator = source.getEnumerator(); },\r\n                function () {\r\n                    if (secondEnumerator == null) {\r\n                        if (firstEnumerator.moveNext()) return this.yieldReturn(firstEnumerator.current());\r\n                        secondEnumerator = Enumerable.from(second).getEnumerator();\r\n                    }\r\n                    if (secondEnumerator.moveNext()) return this.yieldReturn(secondEnumerator.current());\r\n                    return false;\r\n                },\r\n                function () {\r\n                    try {\r\n                        Utils.dispose(firstEnumerator);\r\n                    }\r\n                    finally {\r\n                        Utils.dispose(secondEnumerator);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            var args = arguments;\r\n\r\n            return new Enumerable(function () {\r\n                var enumerators;\r\n\r\n                return new IEnumerator(\r\n                    function () {\r\n                        enumerators = Enumerable.make(source)\r\n                            .concat(Enumerable.from(args).select(Enumerable.from))\r\n                            .select(function (x) { return x.getEnumerator() })\r\n                            .toArray();\r\n                    },\r\n                    function () {\r\n                        while (enumerators.length > 0) {\r\n                            var enumerator = enumerators[0];\r\n\r\n                            if (enumerator.moveNext()) {\r\n                                return this.yieldReturn(enumerator.current());\r\n                            }\r\n                            else {\r\n                                enumerator.dispose();\r\n                                enumerators.splice(0, 1);\r\n                            }\r\n                        }\r\n                        return this.yieldBreak();\r\n                    },\r\n                    function () {\r\n                        Enumerable.from(enumerators).forEach(Utils.dispose);\r\n                    });\r\n            });\r\n        }\r\n    };\r\n\r\n    Enumerable.prototype.insert = function (index, second) {\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var firstEnumerator;\r\n            var secondEnumerator;\r\n            var count = 0;\r\n            var isEnumerated = false;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    firstEnumerator = source.getEnumerator();\r\n                    secondEnumerator = Enumerable.from(second).getEnumerator();\r\n                },\r\n                function () {\r\n                    if (count == index && secondEnumerator.moveNext()) {\r\n                        isEnumerated = true;\r\n                        return this.yieldReturn(secondEnumerator.current());\r\n                    }\r\n                    if (firstEnumerator.moveNext()) {\r\n                        count++;\r\n                        return this.yieldReturn(firstEnumerator.current());\r\n                    }\r\n                    if (!isEnumerated && secondEnumerator.moveNext()) {\r\n                        return this.yieldReturn(secondEnumerator.current());\r\n                    }\r\n                    return false;\r\n                },\r\n                function () {\r\n                    try {\r\n                        Utils.dispose(firstEnumerator);\r\n                    }\r\n                    finally {\r\n                        Utils.dispose(secondEnumerator);\r\n                    }\r\n                });\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.alternate = function (alternateValueOrSequence) {\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var buffer;\r\n            var enumerator;\r\n            var alternateSequence;\r\n            var alternateEnumerator;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    if (alternateValueOrSequence instanceof Array || alternateValueOrSequence.getEnumerator != null) {\r\n                        alternateSequence = Enumerable.from(Enumerable.from(alternateValueOrSequence).toArray()); // freeze\r\n                    }\r\n                    else {\r\n                        alternateSequence = Enumerable.make(alternateValueOrSequence);\r\n                    }\r\n                    enumerator = source.getEnumerator();\r\n                    if (enumerator.moveNext()) buffer = enumerator.current();\r\n                },\r\n                function () {\r\n                    while (true) {\r\n                        if (alternateEnumerator != null) {\r\n                            if (alternateEnumerator.moveNext()) {\r\n                                return this.yieldReturn(alternateEnumerator.current());\r\n                            }\r\n                            else {\r\n                                alternateEnumerator = null;\r\n                            }\r\n                        }\r\n\r\n                        if (buffer == null && enumerator.moveNext()) {\r\n                            buffer = enumerator.current(); // hasNext\r\n                            alternateEnumerator = alternateSequence.getEnumerator();\r\n                            continue; // GOTO\r\n                        }\r\n                        else if (buffer != null) {\r\n                            var retVal = buffer;\r\n                            buffer = null;\r\n                            return this.yieldReturn(retVal);\r\n                        }\r\n\r\n                        return this.yieldBreak();\r\n                    }\r\n                },\r\n                function () {\r\n                    try {\r\n                        Utils.dispose(enumerator);\r\n                    }\r\n                    finally {\r\n                        Utils.dispose(alternateEnumerator);\r\n                    }\r\n                });\r\n        });\r\n    };\r\n\r\n    // Overload:function(value)\r\n    // Overload:function(value, compareSelector)\r\n    Enumerable.prototype.contains = function (value, compareSelector) {\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n        var enumerator = this.getEnumerator();\r\n        try {\r\n            while (enumerator.moveNext()) {\r\n                if (compareSelector(enumerator.current()) === value) return true;\r\n            }\r\n            return false;\r\n        }\r\n        finally {\r\n            Utils.dispose(enumerator);\r\n        }\r\n    };\r\n\r\n    Enumerable.prototype.defaultIfEmpty = function (defaultValue) {\r\n        var source = this;\r\n        if (defaultValue === undefined) defaultValue = null;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var isFirst = true;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    if (enumerator.moveNext()) {\r\n                        isFirst = false;\r\n                        return this.yieldReturn(enumerator.current());\r\n                    }\r\n                    else if (isFirst) {\r\n                        isFirst = false;\r\n                        return this.yieldReturn(defaultValue);\r\n                    }\r\n                    return false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(compareSelector)\r\n    Enumerable.prototype.distinct = function (compareSelector) {\r\n        return this.except(Enumerable.empty(), compareSelector);\r\n    };\r\n\r\n    Enumerable.prototype.distinctUntilChanged = function (compareSelector) {\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var compareKey;\r\n            var initial;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerator = source.getEnumerator();\r\n                },\r\n                function () {\r\n                    while (enumerator.moveNext()) {\r\n                        var key = compareSelector(enumerator.current());\r\n\r\n                        if (initial) {\r\n                            initial = false;\r\n                            compareKey = key;\r\n                            return this.yieldReturn(enumerator.current());\r\n                        }\r\n\r\n                        if (compareKey === key) {\r\n                            continue;\r\n                        }\r\n\r\n                        compareKey = key;\r\n                        return this.yieldReturn(enumerator.current());\r\n                    }\r\n                    return this.yieldBreak();\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(second)\r\n    // Overload:function(second, compareSelector)\r\n    Enumerable.prototype.except = function (second, compareSelector) {\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var keys;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerator = source.getEnumerator();\r\n                    keys = new Dictionary(compareSelector);\r\n                    Enumerable.from(second).forEach(function (key) { keys.add(key); });\r\n                },\r\n                function () {\r\n                    while (enumerator.moveNext()) {\r\n                        var current = enumerator.current();\r\n                        if (!keys.contains(current)) {\r\n                            keys.add(current);\r\n                            return this.yieldReturn(current);\r\n                        }\r\n                    }\r\n                    return false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(second)\r\n    // Overload:function(second, compareSelector)\r\n    Enumerable.prototype.intersect = function (second, compareSelector) {\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var keys;\r\n            var outs;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerator = source.getEnumerator();\r\n\r\n                    keys = new Dictionary(compareSelector);\r\n                    Enumerable.from(second).forEach(function (key) { keys.add(key); });\r\n                    outs = new Dictionary(compareSelector);\r\n                },\r\n                function () {\r\n                    while (enumerator.moveNext()) {\r\n                        var current = enumerator.current();\r\n                        if (!outs.contains(current) && keys.contains(current)) {\r\n                            outs.add(current);\r\n                            return this.yieldReturn(current);\r\n                        }\r\n                    }\r\n                    return false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(second)\r\n    // Overload:function(second, compareSelector)\r\n    Enumerable.prototype.sequenceEqual = function (second, compareSelector) {\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n\r\n        var firstEnumerator = this.getEnumerator();\r\n        try {\r\n            var secondEnumerator = Enumerable.from(second).getEnumerator();\r\n            try {\r\n                while (firstEnumerator.moveNext()) {\r\n                    if (!secondEnumerator.moveNext()\r\n                    || compareSelector(firstEnumerator.current()) !== compareSelector(secondEnumerator.current())) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                if (secondEnumerator.moveNext()) return false;\r\n                return true;\r\n            }\r\n            finally {\r\n                Utils.dispose(secondEnumerator);\r\n            }\r\n        }\r\n        finally {\r\n            Utils.dispose(firstEnumerator);\r\n        }\r\n    };\r\n\r\n    Enumerable.prototype.union = function (second, compareSelector) {\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var firstEnumerator;\r\n            var secondEnumerator;\r\n            var keys;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    firstEnumerator = source.getEnumerator();\r\n                    keys = new Dictionary(compareSelector);\r\n                },\r\n                function () {\r\n                    var current;\r\n                    if (secondEnumerator === undefined) {\r\n                        while (firstEnumerator.moveNext()) {\r\n                            current = firstEnumerator.current();\r\n                            if (!keys.contains(current)) {\r\n                                keys.add(current);\r\n                                return this.yieldReturn(current);\r\n                            }\r\n                        }\r\n                        secondEnumerator = Enumerable.from(second).getEnumerator();\r\n                    }\r\n                    while (secondEnumerator.moveNext()) {\r\n                        current = secondEnumerator.current();\r\n                        if (!keys.contains(current)) {\r\n                            keys.add(current);\r\n                            return this.yieldReturn(current);\r\n                        }\r\n                    }\r\n                    return false;\r\n                },\r\n                function () {\r\n                    try {\r\n                        Utils.dispose(firstEnumerator);\r\n                    }\r\n                    finally {\r\n                        Utils.dispose(secondEnumerator);\r\n                    }\r\n                });\r\n        });\r\n    };\r\n\r\n    /* Ordering Methods */\r\n\r\n    Enumerable.prototype.orderBy = function (keySelector) {\r\n        return new OrderedEnumerable(this, keySelector, false);\r\n    };\r\n\r\n    Enumerable.prototype.orderByDescending = function (keySelector) {\r\n        return new OrderedEnumerable(this, keySelector, true);\r\n    };\r\n\r\n    Enumerable.prototype.reverse = function () {\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var buffer;\r\n            var index;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    buffer = source.toArray();\r\n                    index = buffer.length;\r\n                },\r\n                function () {\r\n                    return (index > 0)\r\n                        ? this.yieldReturn(buffer[--index])\r\n                        : false;\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.shuffle = function () {\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var buffer;\r\n\r\n            return new IEnumerator(\r\n                function () { buffer = source.toArray(); },\r\n                function () {\r\n                    if (buffer.length > 0) {\r\n                        var i = Math.floor(Math.random() * buffer.length);\r\n                        return this.yieldReturn(buffer.splice(i, 1)[0]);\r\n                    }\r\n                    return false;\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.weightedSample = function (weightSelector) {\r\n        weightSelector = Utils.createLambda(weightSelector);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var sortedByBound;\r\n            var totalWeight = 0;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    sortedByBound = source\r\n                        .choose(function (x) {\r\n                            var weight = weightSelector(x);\r\n                            if (weight <= 0) return null; // ignore 0\r\n\r\n                            totalWeight += weight;\r\n                            return { value: x, bound: totalWeight };\r\n                        })\r\n                        .toArray();\r\n                },\r\n                function () {\r\n                    if (sortedByBound.length > 0) {\r\n                        var draw = Math.floor(Math.random() * totalWeight) + 1;\r\n\r\n                        var lower = -1;\r\n                        var upper = sortedByBound.length;\r\n                        while (upper - lower > 1) {\r\n                            var index = Math.floor((lower + upper) / 2);\r\n                            if (sortedByBound[index].bound >= draw) {\r\n                                upper = index;\r\n                            }\r\n                            else {\r\n                                lower = index;\r\n                            }\r\n                        }\r\n\r\n                        return this.yieldReturn(sortedByBound[upper].value);\r\n                    }\r\n\r\n                    return this.yieldBreak();\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    /* Grouping Methods */\r\n\r\n    // Overload:function(keySelector)\r\n    // Overload:function(keySelector,elementSelector)\r\n    // Overload:function(keySelector,elementSelector,resultSelector)\r\n    // Overload:function(keySelector,elementSelector,resultSelector,compareSelector)\r\n    Enumerable.prototype.groupBy = function (keySelector, elementSelector, resultSelector, compareSelector) {\r\n        var source = this;\r\n        keySelector = Utils.createLambda(keySelector);\r\n        elementSelector = Utils.createLambda(elementSelector);\r\n        if (resultSelector != null) resultSelector = Utils.createLambda(resultSelector);\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerator = source.toLookup(keySelector, elementSelector, compareSelector)\r\n                        .toEnumerable()\r\n                        .getEnumerator();\r\n                },\r\n                function () {\r\n                    while (enumerator.moveNext()) {\r\n                        return (resultSelector == null)\r\n                            ? this.yieldReturn(enumerator.current())\r\n                            : this.yieldReturn(resultSelector(enumerator.current().key(), enumerator.current()));\r\n                    }\r\n                    return false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(keySelector)\r\n    // Overload:function(keySelector,elementSelector)\r\n    // Overload:function(keySelector,elementSelector,resultSelector)\r\n    // Overload:function(keySelector,elementSelector,resultSelector,compareSelector)\r\n    Enumerable.prototype.partitionBy = function (keySelector, elementSelector, resultSelector, compareSelector) {\r\n\r\n        var source = this;\r\n        keySelector = Utils.createLambda(keySelector);\r\n        elementSelector = Utils.createLambda(elementSelector);\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n        var hasResultSelector;\r\n        if (resultSelector == null) {\r\n            hasResultSelector = false;\r\n            resultSelector = function (key, group) { return new Grouping(key, group); };\r\n        }\r\n        else {\r\n            hasResultSelector = true;\r\n            resultSelector = Utils.createLambda(resultSelector);\r\n        }\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var key;\r\n            var compareKey;\r\n            var group = [];\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerator = source.getEnumerator();\r\n                    if (enumerator.moveNext()) {\r\n                        key = keySelector(enumerator.current());\r\n                        compareKey = compareSelector(key);\r\n                        group.push(elementSelector(enumerator.current()));\r\n                    }\r\n                },\r\n                function () {\r\n                    var hasNext;\r\n                    while ((hasNext = enumerator.moveNext()) == true) {\r\n                        if (compareKey === compareSelector(keySelector(enumerator.current()))) {\r\n                            group.push(elementSelector(enumerator.current()));\r\n                        }\r\n                        else break;\r\n                    }\r\n\r\n                    if (group.length > 0) {\r\n                        var result = (hasResultSelector)\r\n                            ? resultSelector(key, Enumerable.from(group))\r\n                            : resultSelector(key, group);\r\n                        if (hasNext) {\r\n                            key = keySelector(enumerator.current());\r\n                            compareKey = compareSelector(key);\r\n                            group = [elementSelector(enumerator.current())];\r\n                        }\r\n                        else group = [];\r\n\r\n                        return this.yieldReturn(result);\r\n                    }\r\n\r\n                    return false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.buffer = function (count) {\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    var array = [];\r\n                    var index = 0;\r\n                    while (enumerator.moveNext()) {\r\n                        array.push(enumerator.current());\r\n                        if (++index >= count) return this.yieldReturn(array);\r\n                    }\r\n                    if (array.length > 0) return this.yieldReturn(array);\r\n                    return false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    /* Aggregate Methods */\r\n\r\n    // Overload:function(func)\r\n    // Overload:function(seed,func)\r\n    // Overload:function(seed,func,resultSelector)\r\n    Enumerable.prototype.aggregate = function (seed, func, resultSelector) {\r\n        resultSelector = Utils.createLambda(resultSelector);\r\n        return resultSelector(this.scan(seed, func, resultSelector).last());\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(selector)\r\n    Enumerable.prototype.average = function (selector) {\r\n        selector = Utils.createLambda(selector);\r\n\r\n        var sum = 0;\r\n        var count = 0;\r\n        this.forEach(function (x) {\r\n            sum += selector(x);\r\n            ++count;\r\n        });\r\n\r\n        return sum / count;\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(predicate)\r\n    Enumerable.prototype.count = function (predicate) {\r\n        predicate = (predicate == null) ? Functions.True : Utils.createLambda(predicate);\r\n\r\n        var count = 0;\r\n        this.forEach(function (x, i) {\r\n            if (predicate(x, i))++count;\r\n        });\r\n        return count;\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(selector)\r\n    Enumerable.prototype.max = function (selector) {\r\n        if (selector == null) selector = Functions.Identity;\r\n        return this.select(selector).aggregate(function (a, b) { return (a > b) ? a : b; });\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(selector)\r\n    Enumerable.prototype.min = function (selector) {\r\n        if (selector == null) selector = Functions.Identity;\r\n        return this.select(selector).aggregate(function (a, b) { return (a < b) ? a : b; });\r\n    };\r\n\r\n    Enumerable.prototype.maxBy = function (keySelector) {\r\n        keySelector = Utils.createLambda(keySelector);\r\n        return this.aggregate(function (a, b) { return (keySelector(a) > keySelector(b)) ? a : b; });\r\n    };\r\n\r\n    Enumerable.prototype.minBy = function (keySelector) {\r\n        keySelector = Utils.createLambda(keySelector);\r\n        return this.aggregate(function (a, b) { return (keySelector(a) < keySelector(b)) ? a : b; });\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(selector)\r\n    Enumerable.prototype.sum = function (selector) {\r\n        if (selector == null) selector = Functions.Identity;\r\n        return this.select(selector).aggregate(0, function (a, b) { return a + b; });\r\n    };\r\n\r\n    /* Paging Methods */\r\n\r\n    Enumerable.prototype.elementAt = function (index) {\r\n        var value;\r\n        var found = false;\r\n        this.forEach(function (x, i) {\r\n            if (i == index) {\r\n                value = x;\r\n                found = true;\r\n                return false;\r\n            }\r\n        });\r\n\r\n        if (!found) throw new Error(\"index is less than 0 or greater than or equal to the number of elements in source.\");\r\n        return value;\r\n    };\r\n\r\n    Enumerable.prototype.elementAtOrDefault = function (index, defaultValue) {\r\n        if (defaultValue === undefined) defaultValue = null;\r\n        var value;\r\n        var found = false;\r\n        this.forEach(function (x, i) {\r\n            if (i == index) {\r\n                value = x;\r\n                found = true;\r\n                return false;\r\n            }\r\n        });\r\n\r\n        return (!found) ? defaultValue : value;\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(predicate)\r\n    Enumerable.prototype.first = function (predicate) {\r\n        if (predicate != null) return this.where(predicate).first();\r\n\r\n        var value;\r\n        var found = false;\r\n        this.forEach(function (x) {\r\n            value = x;\r\n            found = true;\r\n            return false;\r\n        });\r\n\r\n        if (!found) throw new Error(\"first:No element satisfies the condition.\");\r\n        return value;\r\n    };\r\n\r\n    Enumerable.prototype.firstOrDefault = function (predicate, defaultValue) {\r\n        if (predicate !== undefined) {\r\n            if (typeof predicate === Types.Function || typeof Utils.createLambda(predicate) === Types.Function) {\r\n                return this.where(predicate).firstOrDefault(undefined, defaultValue);\r\n            }\r\n            defaultValue = predicate;\r\n        }\r\n\r\n        var value;\r\n        var found = false;\r\n        this.forEach(function (x) {\r\n            value = x;\r\n            found = true;\r\n            return false;\r\n        });\r\n        return (!found) ? defaultValue : value;\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(predicate)\r\n    Enumerable.prototype.last = function (predicate) {\r\n        if (predicate != null) return this.where(predicate).last();\r\n\r\n        var value;\r\n        var found = false;\r\n        this.forEach(function (x) {\r\n            found = true;\r\n            value = x;\r\n        });\r\n\r\n        if (!found) throw new Error(\"last:No element satisfies the condition.\");\r\n        return value;\r\n    };\r\n\r\n    Enumerable.prototype.lastOrDefault = function (predicate, defaultValue) {\r\n        if (predicate !== undefined) {\r\n            if (typeof predicate === Types.Function || typeof Utils.createLambda(predicate) === Types.Function) {\r\n                return this.where(predicate).lastOrDefault(undefined, defaultValue);\r\n            }\r\n            defaultValue = predicate;\r\n        }\r\n\r\n        var value;\r\n        var found = false;\r\n        this.forEach(function (x) {\r\n            found = true;\r\n            value = x;\r\n        });\r\n        return (!found) ? defaultValue : value;\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(predicate)\r\n    Enumerable.prototype.single = function (predicate) {\r\n        if (predicate != null) return this.where(predicate).single();\r\n\r\n        var value;\r\n        var found = false;\r\n        this.forEach(function (x) {\r\n            if (!found) {\r\n                found = true;\r\n                value = x;\r\n            } else throw new Error(\"single:sequence contains more than one element.\");\r\n        });\r\n\r\n        if (!found) throw new Error(\"single:No element satisfies the condition.\");\r\n        return value;\r\n    };\r\n\r\n    // Overload:function(defaultValue)\r\n    // Overload:function(defaultValue,predicate)\r\n    Enumerable.prototype.singleOrDefault = function (predicate, defaultValue) {\r\n        if (defaultValue === undefined) defaultValue = null;\r\n        if (predicate != null) return this.where(predicate).singleOrDefault(null, defaultValue);\r\n\r\n        var value;\r\n        var found = false;\r\n        this.forEach(function (x) {\r\n            if (!found) {\r\n                found = true;\r\n                value = x;\r\n            } else throw new Error(\"single:sequence contains more than one element.\");\r\n        });\r\n\r\n        return (!found) ? defaultValue : value;\r\n    };\r\n\r\n    Enumerable.prototype.skip = function (count) {\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var index = 0;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerator = source.getEnumerator();\r\n                    while (index++ < count && enumerator.moveNext()) {\r\n                    }\r\n                    ;\r\n                },\r\n                function () {\r\n                    return (enumerator.moveNext())\r\n                        ? this.yieldReturn(enumerator.current())\r\n                        : false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(predicate<element>)\r\n    // Overload:function(predicate<element,index>)\r\n    Enumerable.prototype.skipWhile = function (predicate) {\r\n        predicate = Utils.createLambda(predicate);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var index = 0;\r\n            var isSkipEnd = false;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    while (!isSkipEnd) {\r\n                        if (enumerator.moveNext()) {\r\n                            if (!predicate(enumerator.current(), index++)) {\r\n                                isSkipEnd = true;\r\n                                return this.yieldReturn(enumerator.current());\r\n                            }\r\n                            continue;\r\n                        } else return false;\r\n                    }\r\n\r\n                    return (enumerator.moveNext())\r\n                        ? this.yieldReturn(enumerator.current())\r\n                        : false;\r\n\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.take = function (count) {\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var index = 0;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    return (index++ < count && enumerator.moveNext())\r\n                        ? this.yieldReturn(enumerator.current())\r\n                        : false;\r\n                },\r\n                function () { Utils.dispose(enumerator); }\r\n            );\r\n        });\r\n    };\r\n\r\n    // Overload:function(predicate<element>)\r\n    // Overload:function(predicate<element,index>)\r\n    Enumerable.prototype.takeWhile = function (predicate) {\r\n        predicate = Utils.createLambda(predicate);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var index = 0;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    return (enumerator.moveNext() && predicate(enumerator.current(), index++))\r\n                        ? this.yieldReturn(enumerator.current())\r\n                        : false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(count)\r\n    Enumerable.prototype.takeExceptLast = function (count) {\r\n        if (count == null) count = 1;\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            if (count <= 0) return source.getEnumerator(); // do nothing\r\n\r\n            var enumerator;\r\n            var q = [];\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    while (enumerator.moveNext()) {\r\n                        if (q.length == count) {\r\n                            q.push(enumerator.current());\r\n                            return this.yieldReturn(q.shift());\r\n                        }\r\n                        q.push(enumerator.current());\r\n                    }\r\n                    return false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.takeFromLast = function (count) {\r\n        if (count <= 0 || count == null) return Enumerable.empty();\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var sourceEnumerator;\r\n            var enumerator;\r\n            var q = [];\r\n\r\n            return new IEnumerator(\r\n                function () { sourceEnumerator = source.getEnumerator(); },\r\n                function () {\r\n                    while (sourceEnumerator.moveNext()) {\r\n                        if (q.length == count) q.shift();\r\n                        q.push(sourceEnumerator.current());\r\n                    }\r\n                    if (enumerator == null) {\r\n                        enumerator = Enumerable.from(q).getEnumerator();\r\n                    }\r\n                    return (enumerator.moveNext())\r\n                        ? this.yieldReturn(enumerator.current())\r\n                        : false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(item)\r\n    // Overload:function(predicate)\r\n    Enumerable.prototype.indexOf = function (item) {\r\n        var found = null;\r\n\r\n        // item as predicate\r\n        if (typeof (item) === Types.Function) {\r\n            this.forEach(function (x, i) {\r\n                if (item(x, i)) {\r\n                    found = i;\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.forEach(function (x, i) {\r\n                if (x === item) {\r\n                    found = i;\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n\r\n        return (found !== null) ? found : -1;\r\n    };\r\n\r\n    // Overload:function(item)\r\n    // Overload:function(predicate)\r\n    Enumerable.prototype.lastIndexOf = function (item) {\r\n        var result = -1;\r\n\r\n        // item as predicate\r\n        if (typeof (item) === Types.Function) {\r\n            this.forEach(function (x, i) {\r\n                if (item(x, i)) result = i;\r\n            });\r\n        }\r\n        else {\r\n            this.forEach(function (x, i) {\r\n                if (x === item) result = i;\r\n            });\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    /* Convert Methods */\r\n\r\n    Enumerable.prototype.cast = function () {\r\n        return this;\r\n    };\r\n\r\n    Enumerable.prototype.asEnumerable = function () {\r\n        return Enumerable.from(this);\r\n    };\r\n\r\n    Enumerable.prototype.toArray = function () {\r\n        var array = [];\r\n        this.forEach(function (x) { array.push(x); });\r\n        return array;\r\n    };\r\n\r\n    // Overload:function(keySelector)\r\n    // Overload:function(keySelector, elementSelector)\r\n    // Overload:function(keySelector, elementSelector, compareSelector)\r\n    Enumerable.prototype.toLookup = function (keySelector, elementSelector, compareSelector) {\r\n        keySelector = Utils.createLambda(keySelector);\r\n        elementSelector = Utils.createLambda(elementSelector);\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n\r\n        var dict = new Dictionary(compareSelector);\r\n        this.forEach(function (x) {\r\n            var key = keySelector(x);\r\n            var element = elementSelector(x);\r\n\r\n            var array = dict.get(key);\r\n            if (array !== undefined) array.push(element);\r\n            else dict.add(key, [element]);\r\n        });\r\n        return new Lookup(dict);\r\n    };\r\n\r\n    Enumerable.prototype.toObject = function (keySelector, elementSelector) {\r\n        keySelector = Utils.createLambda(keySelector);\r\n        elementSelector = Utils.createLambda(elementSelector);\r\n\r\n        var obj = {};\r\n        this.forEach(function (x) {\r\n            obj[keySelector(x)] = elementSelector(x);\r\n        });\r\n        return obj;\r\n    };\r\n\r\n    // Overload:function(keySelector, elementSelector)\r\n    // Overload:function(keySelector, elementSelector, compareSelector)\r\n    Enumerable.prototype.toDictionary = function (keySelector, elementSelector, compareSelector) {\r\n        keySelector = Utils.createLambda(keySelector);\r\n        elementSelector = Utils.createLambda(elementSelector);\r\n        compareSelector = Utils.createLambda(compareSelector);\r\n\r\n        var dict = new Dictionary(compareSelector);\r\n        this.forEach(function (x) {\r\n            dict.add(keySelector(x), elementSelector(x));\r\n        });\r\n        return dict;\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(replacer)\r\n    // Overload:function(replacer, space)\r\n    Enumerable.prototype.toJSONString = function (replacer, space) {\r\n        if (typeof JSON === Types.Undefined || JSON.stringify == null) {\r\n            throw new Error(\"toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js\");\r\n        }\r\n        return JSON.stringify(this.toArray(), replacer, space);\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(separator)\r\n    // Overload:function(separator,selector)\r\n    Enumerable.prototype.toJoinedString = function (separator, selector) {\r\n        if (separator == null) separator = \"\";\r\n        if (selector == null) selector = Functions.Identity;\r\n\r\n        return this.select(selector).toArray().join(separator);\r\n    };\r\n\r\n\r\n    /* Action Methods */\r\n\r\n    // Overload:function(action<element>)\r\n    // Overload:function(action<element,index>)\r\n    Enumerable.prototype.doAction = function (action) {\r\n        var source = this;\r\n        action = Utils.createLambda(action);\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n            var index = 0;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    if (enumerator.moveNext()) {\r\n                        action(enumerator.current(), index++);\r\n                        return this.yieldReturn(enumerator.current());\r\n                    }\r\n                    return false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    // Overload:function(action<element>)\r\n    // Overload:function(action<element,index>)\r\n    // Overload:function(func<element,bool>)\r\n    // Overload:function(func<element,index,bool>)\r\n    Enumerable.prototype.forEach = function (action) {\r\n        action = Utils.createLambda(action);\r\n\r\n        var index = 0;\r\n        var enumerator = this.getEnumerator();\r\n        try {\r\n            while (enumerator.moveNext()) {\r\n                if (action(enumerator.current(), index++) === false) break;\r\n            }\r\n        } finally {\r\n            Utils.dispose(enumerator);\r\n        }\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(separator)\r\n    // Overload:function(separator,selector)\r\n    Enumerable.prototype.write = function (separator, selector) {\r\n        if (separator == null) separator = \"\";\r\n        selector = Utils.createLambda(selector);\r\n\r\n        var isFirst = true;\r\n        this.forEach(function (item) {\r\n            if (isFirst) isFirst = false;\r\n            else document.write(separator);\r\n            document.write(selector(item));\r\n        });\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(selector)\r\n    Enumerable.prototype.writeLine = function (selector) {\r\n        selector = Utils.createLambda(selector);\r\n\r\n        this.forEach(function (item) {\r\n            document.writeln(selector(item) + \"<br />\");\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.force = function () {\r\n        var enumerator = this.getEnumerator();\r\n\r\n        try {\r\n            while (enumerator.moveNext()) {\r\n            }\r\n        }\r\n        finally {\r\n            Utils.dispose(enumerator);\r\n        }\r\n    };\r\n\r\n    /* Functional Methods */\r\n\r\n    Enumerable.prototype.letBind = function (func) {\r\n        func = Utils.createLambda(func);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    enumerator = Enumerable.from(func(source)).getEnumerator();\r\n                },\r\n                function () {\r\n                    return (enumerator.moveNext())\r\n                        ? this.yieldReturn(enumerator.current())\r\n                        : false;\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.share = function () {\r\n        var source = this;\r\n        var sharedEnumerator;\r\n        var disposed = false;\r\n\r\n        return new DisposableEnumerable(function () {\r\n            return new IEnumerator(\r\n                function () {\r\n                    if (sharedEnumerator == null) {\r\n                        sharedEnumerator = source.getEnumerator();\r\n                    }\r\n                },\r\n                function () {\r\n                    if (disposed) throw new Error(\"enumerator is disposed\");\r\n\r\n                    return (sharedEnumerator.moveNext())\r\n                        ? this.yieldReturn(sharedEnumerator.current())\r\n                        : false;\r\n                },\r\n                Functions.Blank\r\n            );\r\n        }, function () {\r\n            disposed = true;\r\n            Utils.dispose(sharedEnumerator);\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.memoize = function () {\r\n        var source = this;\r\n        var cache;\r\n        var enumerator;\r\n        var disposed = false;\r\n\r\n        return new DisposableEnumerable(function () {\r\n            var index = -1;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    if (enumerator == null) {\r\n                        enumerator = source.getEnumerator();\r\n                        cache = [];\r\n                    }\r\n                },\r\n                function () {\r\n                    if (disposed) throw new Error(\"enumerator is disposed\");\r\n\r\n                    index++;\r\n                    if (cache.length <= index) {\r\n                        return (enumerator.moveNext())\r\n                            ? this.yieldReturn(cache[index] = enumerator.current())\r\n                            : false;\r\n                    }\r\n\r\n                    return this.yieldReturn(cache[index]);\r\n                },\r\n                Functions.Blank\r\n            );\r\n        }, function () {\r\n            disposed = true;\r\n            Utils.dispose(enumerator);\r\n            cache = null;\r\n        });\r\n    };\r\n\r\n    /* Error Handling Methods */\r\n\r\n    Enumerable.prototype.catchError = function (handler) {\r\n        handler = Utils.createLambda(handler);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    try {\r\n                        return (enumerator.moveNext())\r\n                            ? this.yieldReturn(enumerator.current())\r\n                            : false;\r\n                    } catch (e) {\r\n                        handler(e);\r\n                        return false;\r\n                    }\r\n                },\r\n                function () { Utils.dispose(enumerator); });\r\n        });\r\n    };\r\n\r\n    Enumerable.prototype.finallyAction = function (finallyAction) {\r\n        finallyAction = Utils.createLambda(finallyAction);\r\n        var source = this;\r\n\r\n        return new Enumerable(function () {\r\n            var enumerator;\r\n\r\n            return new IEnumerator(\r\n                function () { enumerator = source.getEnumerator(); },\r\n                function () {\r\n                    return (enumerator.moveNext())\r\n                        ? this.yieldReturn(enumerator.current())\r\n                        : false;\r\n                },\r\n                function () {\r\n                    try {\r\n                        Utils.dispose(enumerator);\r\n                    } finally {\r\n                        finallyAction();\r\n                    }\r\n                });\r\n        });\r\n    };\r\n\r\n    /* For Debug Methods */\r\n\r\n    // Overload:function()\r\n    // Overload:function(selector)\r\n    Enumerable.prototype.log = function (selector) {\r\n        selector = Utils.createLambda(selector);\r\n\r\n        return this.doAction(function (item) {\r\n            if (typeof console !== Types.Undefined) {\r\n                console.log(selector(item));\r\n            }\r\n        });\r\n    };\r\n\r\n    // Overload:function()\r\n    // Overload:function(message)\r\n    // Overload:function(message,selector)\r\n    Enumerable.prototype.trace = function (message, selector) {\r\n        if (message == null) message = \"Trace\";\r\n        selector = Utils.createLambda(selector);\r\n\r\n        return this.doAction(function (item) {\r\n            if (typeof console !== Types.Undefined) {\r\n                console.log(message, selector(item));\r\n            }\r\n        });\r\n    };\r\n\r\n    // private\r\n\r\n    var OrderedEnumerable = function (source, keySelector, descending, parent) {\r\n        this.source = source;\r\n        this.keySelector = Utils.createLambda(keySelector);\r\n        this.descending = descending;\r\n        this.parent = parent;\r\n    };\r\n    OrderedEnumerable.prototype = new Enumerable();\r\n\r\n    OrderedEnumerable.prototype.createOrderedEnumerable = function (keySelector, descending) {\r\n        return new OrderedEnumerable(this.source, keySelector, descending, this);\r\n    };\r\n\r\n    OrderedEnumerable.prototype.thenBy = function (keySelector) {\r\n        return this.createOrderedEnumerable(keySelector, false);\r\n    };\r\n\r\n    OrderedEnumerable.prototype.thenByDescending = function (keySelector) {\r\n        return this.createOrderedEnumerable(keySelector, true);\r\n    };\r\n\r\n    OrderedEnumerable.prototype.getEnumerator = function () {\r\n        var self = this;\r\n        var buffer;\r\n        var indexes;\r\n        var index = 0;\r\n\r\n        return new IEnumerator(\r\n            function () {\r\n                buffer = [];\r\n                indexes = [];\r\n                self.source.forEach(function (item, index) {\r\n                    buffer.push(item);\r\n                    indexes.push(index);\r\n                });\r\n                var sortContext = SortContext.create(self, null);\r\n                sortContext.GenerateKeys(buffer);\r\n\r\n                indexes.sort(function (a, b) { return sortContext.compare(a, b); });\r\n            },\r\n            function () {\r\n                return (index < indexes.length)\r\n                    ? this.yieldReturn(buffer[indexes[index++]])\r\n                    : false;\r\n            },\r\n            Functions.Blank\r\n        );\r\n    };\r\n\r\n    var SortContext = function (keySelector, descending, child) {\r\n        this.keySelector = keySelector;\r\n        this.descending = descending;\r\n        this.child = child;\r\n        this.keys = null;\r\n    };\r\n\r\n    SortContext.create = function (orderedEnumerable, currentContext) {\r\n        var context = new SortContext(orderedEnumerable.keySelector, orderedEnumerable.descending, currentContext);\r\n        if (orderedEnumerable.parent != null) return SortContext.create(orderedEnumerable.parent, context);\r\n        return context;\r\n    };\r\n\r\n    SortContext.prototype.GenerateKeys = function (source) {\r\n        var len = source.length;\r\n        var keySelector = this.keySelector;\r\n        var keys = new Array(len);\r\n        for (var i = 0; i < len; i++) keys[i] = keySelector(source[i]);\r\n        this.keys = keys;\r\n\r\n        if (this.child != null) this.child.GenerateKeys(source);\r\n    };\r\n\r\n    SortContext.prototype.compare = function (index1, index2) {\r\n        var comparison = Utils.compare(this.keys[index1], this.keys[index2]);\r\n\r\n        if (comparison == 0) {\r\n            if (this.child != null) return this.child.compare(index1, index2);\r\n            return Utils.compare(index1, index2);\r\n        }\r\n\r\n        return (this.descending) ? -comparison : comparison;\r\n    };\r\n\r\n    var DisposableEnumerable = function (getEnumerator, dispose) {\r\n        this.dispose = dispose;\r\n        Enumerable.call(this, getEnumerator);\r\n    };\r\n    DisposableEnumerable.prototype = new Enumerable();\r\n\r\n    // optimize array or arraylike object\r\n\r\n    var ArrayEnumerable = function (source) {\r\n        this.getSource = function () { return source; };\r\n    };\r\n    ArrayEnumerable.prototype = new Enumerable();\r\n\r\n    ArrayEnumerable.prototype.any = function (predicate) {\r\n        return (predicate == null)\r\n            ? (this.getSource().length > 0)\r\n            : Enumerable.prototype.any.apply(this, arguments);\r\n    };\r\n\r\n    ArrayEnumerable.prototype.count = function (predicate) {\r\n        return (predicate == null)\r\n            ? this.getSource().length\r\n            : Enumerable.prototype.count.apply(this, arguments);\r\n    };\r\n\r\n    ArrayEnumerable.prototype.elementAt = function (index) {\r\n        var source = this.getSource();\r\n        return (0 <= index && index < source.length)\r\n            ? source[index]\r\n            : Enumerable.prototype.elementAt.apply(this, arguments);\r\n    };\r\n\r\n    ArrayEnumerable.prototype.elementAtOrDefault = function (index, defaultValue) {\r\n        if (defaultValue === undefined) defaultValue = null;\r\n        var source = this.getSource();\r\n        return (0 <= index && index < source.length)\r\n            ? source[index]\r\n            : defaultValue;\r\n    };\r\n\r\n    ArrayEnumerable.prototype.first = function (predicate) {\r\n        var source = this.getSource();\r\n        return (predicate == null && source.length > 0)\r\n            ? source[0]\r\n            : Enumerable.prototype.first.apply(this, arguments);\r\n    };\r\n\r\n    ArrayEnumerable.prototype.firstOrDefault = function (predicate, defaultValue) {\r\n        if (predicate !== undefined) {\r\n            return Enumerable.prototype.firstOrDefault.apply(this, arguments);\r\n        }\r\n        defaultValue = predicate;\r\n\r\n        var source = this.getSource();\r\n        return source.length > 0 ? source[0] : defaultValue;\r\n    };\r\n\r\n    ArrayEnumerable.prototype.last = function (predicate) {\r\n        var source = this.getSource();\r\n        return (predicate == null && source.length > 0)\r\n            ? source[source.length - 1]\r\n            : Enumerable.prototype.last.apply(this, arguments);\r\n    };\r\n\r\n    ArrayEnumerable.prototype.lastOrDefault = function (predicate, defaultValue) {\r\n        if (predicate !== undefined) {\r\n            return Enumerable.prototype.lastOrDefault.apply(this, arguments);\r\n        }\r\n        defaultValue = predicate;\r\n\r\n        var source = this.getSource();\r\n        return source.length > 0 ? source[source.length - 1] : defaultValue;\r\n    };\r\n\r\n    ArrayEnumerable.prototype.skip = function (count) {\r\n        var source = this.getSource();\r\n\r\n        return new Enumerable(function () {\r\n            var index;\r\n\r\n            return new IEnumerator(\r\n                function () { index = (count < 0) ? 0 : count; },\r\n                function () {\r\n                    return (index < source.length)\r\n                        ? this.yieldReturn(source[index++])\r\n                        : false;\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    ArrayEnumerable.prototype.takeExceptLast = function (count) {\r\n        if (count == null) count = 1;\r\n        return this.take(this.getSource().length - count);\r\n    };\r\n\r\n    ArrayEnumerable.prototype.takeFromLast = function (count) {\r\n        return this.skip(this.getSource().length - count);\r\n    };\r\n\r\n    ArrayEnumerable.prototype.reverse = function () {\r\n        var source = this.getSource();\r\n\r\n        return new Enumerable(function () {\r\n            var index;\r\n\r\n            return new IEnumerator(\r\n                function () {\r\n                    index = source.length;\r\n                },\r\n                function () {\r\n                    return (index > 0)\r\n                        ? this.yieldReturn(source[--index])\r\n                        : false;\r\n                },\r\n                Functions.Blank);\r\n        });\r\n    };\r\n\r\n    ArrayEnumerable.prototype.sequenceEqual = function (second, compareSelector) {\r\n        if ((second instanceof ArrayEnumerable || second instanceof Array)\r\n            && compareSelector == null\r\n            && Enumerable.from(second).count() != this.count()) {\r\n            return false;\r\n        }\r\n\r\n        return Enumerable.prototype.sequenceEqual.apply(this, arguments);\r\n    };\r\n\r\n    ArrayEnumerable.prototype.toJoinedString = function (separator, selector) {\r\n        var source = this.getSource();\r\n        if (selector != null || !(source instanceof Array)) {\r\n            return Enumerable.prototype.toJoinedString.apply(this, arguments);\r\n        }\r\n\r\n        if (separator == null) separator = \"\";\r\n        return source.join(separator);\r\n    };\r\n\r\n    ArrayEnumerable.prototype.getEnumerator = function () {\r\n        var source = this.getSource();\r\n        var index = -1;\r\n\r\n        // fast and simple enumerator\r\n        return {\r\n            current: function () { return source[index]; },\r\n            moveNext: function () {\r\n                return ++index < source.length;\r\n            },\r\n            dispose: Functions.Blank\r\n        };\r\n    };\r\n\r\n    // optimization for multiple where and multiple select and whereselect\r\n\r\n    var WhereEnumerable = function (source, predicate) {\r\n        this.prevSource = source;\r\n        this.prevPredicate = predicate; // predicate.length always <= 1\r\n    };\r\n    WhereEnumerable.prototype = new Enumerable();\r\n\r\n    WhereEnumerable.prototype.where = function (predicate) {\r\n        predicate = Utils.createLambda(predicate);\r\n\r\n        if (predicate.length <= 1) {\r\n            var prevPredicate = this.prevPredicate;\r\n            var composedPredicate = function (x) { return prevPredicate(x) && predicate(x); };\r\n            return new WhereEnumerable(this.prevSource, composedPredicate);\r\n        }\r\n        else {\r\n            // if predicate use index, can't compose\r\n            return Enumerable.prototype.where.call(this, predicate);\r\n        }\r\n    };\r\n\r\n    WhereEnumerable.prototype.select = function (selector) {\r\n        selector = Utils.createLambda(selector);\r\n\r\n        return (selector.length <= 1)\r\n            ? new WhereSelectEnumerable(this.prevSource, this.prevPredicate, selector)\r\n            : Enumerable.prototype.select.call(this, selector);\r\n    };\r\n\r\n    WhereEnumerable.prototype.getEnumerator = function () {\r\n        var predicate = this.prevPredicate;\r\n        var source = this.prevSource;\r\n        var enumerator;\r\n\r\n        return new IEnumerator(\r\n            function () { enumerator = source.getEnumerator(); },\r\n            function () {\r\n                while (enumerator.moveNext()) {\r\n                    if (predicate(enumerator.current())) {\r\n                        return this.yieldReturn(enumerator.current());\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            function () { Utils.dispose(enumerator); });\r\n    };\r\n\r\n    var WhereSelectEnumerable = function (source, predicate, selector) {\r\n        this.prevSource = source;\r\n        this.prevPredicate = predicate; // predicate.length always <= 1 or null\r\n        this.prevSelector = selector; // selector.length always <= 1\r\n    };\r\n    WhereSelectEnumerable.prototype = new Enumerable();\r\n\r\n    WhereSelectEnumerable.prototype.where = function (predicate) {\r\n        predicate = Utils.createLambda(predicate);\r\n\r\n        return (predicate.length <= 1)\r\n            ? new WhereEnumerable(this, predicate)\r\n            : Enumerable.prototype.where.call(this, predicate);\r\n    };\r\n\r\n    WhereSelectEnumerable.prototype.select = function (selector) {\r\n        selector = Utils.createLambda(selector);\r\n\r\n        if (selector.length <= 1) {\r\n            var prevSelector = this.prevSelector;\r\n            var composedSelector = function (x) { return selector(prevSelector(x)); };\r\n            return new WhereSelectEnumerable(this.prevSource, this.prevPredicate, composedSelector);\r\n        }\r\n        else {\r\n            // if selector use index, can't compose\r\n            return Enumerable.prototype.select.call(this, selector);\r\n        }\r\n    };\r\n\r\n    WhereSelectEnumerable.prototype.getEnumerator = function () {\r\n        var predicate = this.prevPredicate;\r\n        var selector = this.prevSelector;\r\n        var source = this.prevSource;\r\n        var enumerator;\r\n\r\n        return new IEnumerator(\r\n            function () { enumerator = source.getEnumerator(); },\r\n            function () {\r\n                while (enumerator.moveNext()) {\r\n                    if (predicate == null || predicate(enumerator.current())) {\r\n                        return this.yieldReturn(selector(enumerator.current()));\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            function () { Utils.dispose(enumerator); });\r\n    };\r\n\r\n    // Collections\r\n\r\n    var Dictionary = (function () {\r\n        // static utility methods\r\n        var callHasOwnProperty = function (target, key) {\r\n            return Object.prototype.hasOwnProperty.call(target, key);\r\n        };\r\n\r\n        var computeHashCode = function (obj) {\r\n            if (obj === null) return \"null\";\r\n            if (obj === undefined) return \"undefined\";\r\n\r\n            return (typeof obj.toString === Types.Function)\r\n                ? obj.toString()\r\n                : Object.prototype.toString.call(obj);\r\n        };\r\n\r\n        // LinkedList for Dictionary\r\n        var HashEntry = function (key, value) {\r\n            this.key = key;\r\n            this.value = value;\r\n            this.prev = null;\r\n            this.next = null;\r\n        };\r\n\r\n        var EntryList = function () {\r\n            this.first = null;\r\n            this.last = null;\r\n        };\r\n        EntryList.prototype =\r\n        {\r\n            addLast: function (entry) {\r\n                if (this.last != null) {\r\n                    this.last.next = entry;\r\n                    entry.prev = this.last;\r\n                    this.last = entry;\r\n                } else this.first = this.last = entry;\r\n            },\r\n\r\n            replace: function (entry, newEntry) {\r\n                if (entry.prev != null) {\r\n                    entry.prev.next = newEntry;\r\n                    newEntry.prev = entry.prev;\r\n                } else this.first = newEntry;\r\n\r\n                if (entry.next != null) {\r\n                    entry.next.prev = newEntry;\r\n                    newEntry.next = entry.next;\r\n                } else this.last = newEntry;\r\n\r\n            },\r\n\r\n            remove: function (entry) {\r\n                if (entry.prev != null) entry.prev.next = entry.next;\r\n                else this.first = entry.next;\r\n\r\n                if (entry.next != null) entry.next.prev = entry.prev;\r\n                else this.last = entry.prev;\r\n            }\r\n        };\r\n\r\n        // Overload:function()\r\n        // Overload:function(compareSelector)\r\n        var Dictionary = function (compareSelector) {\r\n            this.countField = 0;\r\n            this.entryList = new EntryList();\r\n            this.buckets = {}; // as Dictionary<string,List<object>>\r\n            this.compareSelector = (compareSelector == null) ? Functions.Identity : compareSelector;\r\n        };\r\n        Dictionary.prototype =\r\n        {\r\n            add: function (key, value) {\r\n                var compareKey = this.compareSelector(key);\r\n                var hash = computeHashCode(compareKey);\r\n                var entry = new HashEntry(key, value);\r\n                if (callHasOwnProperty(this.buckets, hash)) {\r\n                    var array = this.buckets[hash];\r\n                    for (var i = 0; i < array.length; i++) {\r\n                        if (this.compareSelector(array[i].key) === compareKey) {\r\n                            this.entryList.replace(array[i], entry);\r\n                            array[i] = entry;\r\n                            return;\r\n                        }\r\n                    }\r\n                    array.push(entry);\r\n                } else {\r\n                    this.buckets[hash] = [entry];\r\n                }\r\n                this.countField++;\r\n                this.entryList.addLast(entry);\r\n            },\r\n\r\n            get: function (key) {\r\n                var compareKey = this.compareSelector(key);\r\n                var hash = computeHashCode(compareKey);\r\n                if (!callHasOwnProperty(this.buckets, hash)) return undefined;\r\n\r\n                var array = this.buckets[hash];\r\n                for (var i = 0; i < array.length; i++) {\r\n                    var entry = array[i];\r\n                    if (this.compareSelector(entry.key) === compareKey) return entry.value;\r\n                }\r\n                return undefined;\r\n            },\r\n\r\n            set: function (key, value) {\r\n                var compareKey = this.compareSelector(key);\r\n                var hash = computeHashCode(compareKey);\r\n                if (callHasOwnProperty(this.buckets, hash)) {\r\n                    var array = this.buckets[hash];\r\n                    for (var i = 0; i < array.length; i++) {\r\n                        if (this.compareSelector(array[i].key) === compareKey) {\r\n                            var newEntry = new HashEntry(key, value);\r\n                            this.entryList.replace(array[i], newEntry);\r\n                            array[i] = newEntry;\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n\r\n            contains: function (key) {\r\n                var compareKey = this.compareSelector(key);\r\n                var hash = computeHashCode(compareKey);\r\n                if (!callHasOwnProperty(this.buckets, hash)) return false;\r\n\r\n                var array = this.buckets[hash];\r\n                for (var i = 0; i < array.length; i++) {\r\n                    if (this.compareSelector(array[i].key) === compareKey) return true;\r\n                }\r\n                return false;\r\n            },\r\n\r\n            clear: function () {\r\n                this.countField = 0;\r\n                this.buckets = {};\r\n                this.entryList = new EntryList();\r\n            },\r\n\r\n            remove: function (key) {\r\n                var compareKey = this.compareSelector(key);\r\n                var hash = computeHashCode(compareKey);\r\n                if (!callHasOwnProperty(this.buckets, hash)) return;\r\n\r\n                var array = this.buckets[hash];\r\n                for (var i = 0; i < array.length; i++) {\r\n                    if (this.compareSelector(array[i].key) === compareKey) {\r\n                        this.entryList.remove(array[i]);\r\n                        array.splice(i, 1);\r\n                        if (array.length == 0) delete this.buckets[hash];\r\n                        this.countField--;\r\n                        return;\r\n                    }\r\n                }\r\n            },\r\n\r\n            count: function () {\r\n                return this.countField;\r\n            },\r\n\r\n            toEnumerable: function () {\r\n                var self = this;\r\n                return new Enumerable(function () {\r\n                    var currentEntry;\r\n\r\n                    return new IEnumerator(\r\n                        function () { currentEntry = self.entryList.first; },\r\n                        function () {\r\n                            if (currentEntry != null) {\r\n                                var result = { key: currentEntry.key, value: currentEntry.value };\r\n                                currentEntry = currentEntry.next;\r\n                                return this.yieldReturn(result);\r\n                            }\r\n                            return false;\r\n                        },\r\n                        Functions.Blank);\r\n                });\r\n            }\r\n        };\r\n\r\n        return Dictionary;\r\n    })();\r\n\r\n    // dictionary = Dictionary<TKey, TValue[]>\r\n    var Lookup = function (dictionary) {\r\n        this.count = function () {\r\n            return dictionary.count();\r\n        };\r\n        this.get = function (key) {\r\n            return Enumerable.from(dictionary.get(key));\r\n        };\r\n        this.contains = function (key) {\r\n            return dictionary.contains(key);\r\n        };\r\n        this.toEnumerable = function () {\r\n            return dictionary.toEnumerable().select(function (kvp) {\r\n                return new Grouping(kvp.key, kvp.value);\r\n            });\r\n        };\r\n    };\r\n\r\n    var Grouping = function (groupKey, elements) {\r\n        this.key = function () {\r\n            return groupKey;\r\n        };\r\n        ArrayEnumerable.call(this, elements);\r\n    };\r\n    Grouping.prototype = new ArrayEnumerable();\r\n\r\n    // module export\r\n    if (typeof define === Types.Function && define.amd) { // AMD\r\n        define(\"linqjs\", [], function () { return Enumerable; });\r\n    }\r\n    else if (typeof module !== Types.Undefined && module.exports) { // Node\r\n        module.exports = Enumerable;\r\n    }\r\n    else {\r\n        root.Enumerable = Enumerable;\r\n    }\r\n})(this);\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/linq/linq.js\n// module id = ../heroprotocol/node_modules/linq/linq.js\n// module chunks = main","module.exports = Long;\r\n\r\n/**\r\n * wasm optimizations, to do native i64 multiplication and divide\r\n */\r\nvar wasm = null;\r\n\r\ntry {\r\n  wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([\r\n    0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11\r\n  ])), {}).exports;\r\n} catch (e) {\r\n  // no wasm support :(\r\n}\r\n\r\n/**\r\n * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.\r\n *  See the from* functions below for more convenient ways of constructing Longs.\r\n * @exports Long\r\n * @class A Long class for representing a 64 bit two's-complement integer value.\r\n * @param {number} low The low (signed) 32 bits of the long\r\n * @param {number} high The high (signed) 32 bits of the long\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @constructor\r\n */\r\nfunction Long(low, high, unsigned) {\r\n\r\n    /**\r\n     * The low 32 bits as a signed value.\r\n     * @type {number}\r\n     */\r\n    this.low = low | 0;\r\n\r\n    /**\r\n     * The high 32 bits as a signed value.\r\n     * @type {number}\r\n     */\r\n    this.high = high | 0;\r\n\r\n    /**\r\n     * Whether unsigned or not.\r\n     * @type {boolean}\r\n     */\r\n    this.unsigned = !!unsigned;\r\n}\r\n\r\n// The internal representation of a long is the two given signed, 32-bit values.\r\n// We use 32-bit pieces because these are the size of integers on which\r\n// Javascript performs bit-operations.  For operations like addition and\r\n// multiplication, we split each number into 16 bit pieces, which can easily be\r\n// multiplied within Javascript's floating-point representation without overflow\r\n// or change in sign.\r\n//\r\n// In the algorithms below, we frequently reduce the negative case to the\r\n// positive case by negating the input(s) and then post-processing the result.\r\n// Note that we must ALWAYS check specially whether those values are MIN_VALUE\r\n// (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\r\n// a positive number, it overflows back into a negative).  Not handling this\r\n// case would often result in infinite recursion.\r\n//\r\n// Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*\r\n// methods on which they depend.\r\n\r\n/**\r\n * An indicator used to reliably determine if an object is a Long or not.\r\n * @type {boolean}\r\n * @const\r\n * @private\r\n */\r\nLong.prototype.__isLong__;\r\n\r\nObject.defineProperty(Long.prototype, \"__isLong__\", { value: true });\r\n\r\n/**\r\n * @function\r\n * @param {*} obj Object\r\n * @returns {boolean}\r\n * @inner\r\n */\r\nfunction isLong(obj) {\r\n    return (obj && obj[\"__isLong__\"]) === true;\r\n}\r\n\r\n/**\r\n * Tests if the specified object is a Long.\r\n * @function\r\n * @param {*} obj Object\r\n * @returns {boolean}\r\n */\r\nLong.isLong = isLong;\r\n\r\n/**\r\n * A cache of the Long representations of small integer values.\r\n * @type {!Object}\r\n * @inner\r\n */\r\nvar INT_CACHE = {};\r\n\r\n/**\r\n * A cache of the Long representations of small unsigned integer values.\r\n * @type {!Object}\r\n * @inner\r\n */\r\nvar UINT_CACHE = {};\r\n\r\n/**\r\n * @param {number} value\r\n * @param {boolean=} unsigned\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromInt(value, unsigned) {\r\n    var obj, cachedObj, cache;\r\n    if (unsigned) {\r\n        value >>>= 0;\r\n        if (cache = (0 <= value && value < 256)) {\r\n            cachedObj = UINT_CACHE[value];\r\n            if (cachedObj)\r\n                return cachedObj;\r\n        }\r\n        obj = fromBits(value, (value | 0) < 0 ? -1 : 0, true);\r\n        if (cache)\r\n            UINT_CACHE[value] = obj;\r\n        return obj;\r\n    } else {\r\n        value |= 0;\r\n        if (cache = (-128 <= value && value < 128)) {\r\n            cachedObj = INT_CACHE[value];\r\n            if (cachedObj)\r\n                return cachedObj;\r\n        }\r\n        obj = fromBits(value, value < 0 ? -1 : 0, false);\r\n        if (cache)\r\n            INT_CACHE[value] = obj;\r\n        return obj;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns a Long representing the given 32 bit integer value.\r\n * @function\r\n * @param {number} value The 32 bit integer in question\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {!Long} The corresponding Long value\r\n */\r\nLong.fromInt = fromInt;\r\n\r\n/**\r\n * @param {number} value\r\n * @param {boolean=} unsigned\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromNumber(value, unsigned) {\r\n    if (isNaN(value))\r\n        return unsigned ? UZERO : ZERO;\r\n    if (unsigned) {\r\n        if (value < 0)\r\n            return UZERO;\r\n        if (value >= TWO_PWR_64_DBL)\r\n            return MAX_UNSIGNED_VALUE;\r\n    } else {\r\n        if (value <= -TWO_PWR_63_DBL)\r\n            return MIN_VALUE;\r\n        if (value + 1 >= TWO_PWR_63_DBL)\r\n            return MAX_VALUE;\r\n    }\r\n    if (value < 0)\r\n        return fromNumber(-value, unsigned).neg();\r\n    return fromBits((value % TWO_PWR_32_DBL) | 0, (value / TWO_PWR_32_DBL) | 0, unsigned);\r\n}\r\n\r\n/**\r\n * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\r\n * @function\r\n * @param {number} value The number in question\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {!Long} The corresponding Long value\r\n */\r\nLong.fromNumber = fromNumber;\r\n\r\n/**\r\n * @param {number} lowBits\r\n * @param {number} highBits\r\n * @param {boolean=} unsigned\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromBits(lowBits, highBits, unsigned) {\r\n    return new Long(lowBits, highBits, unsigned);\r\n}\r\n\r\n/**\r\n * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is\r\n *  assumed to use 32 bits.\r\n * @function\r\n * @param {number} lowBits The low 32 bits\r\n * @param {number} highBits The high 32 bits\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {!Long} The corresponding Long value\r\n */\r\nLong.fromBits = fromBits;\r\n\r\n/**\r\n * @function\r\n * @param {number} base\r\n * @param {number} exponent\r\n * @returns {number}\r\n * @inner\r\n */\r\nvar pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)\r\n\r\n/**\r\n * @param {string} str\r\n * @param {(boolean|number)=} unsigned\r\n * @param {number=} radix\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromString(str, unsigned, radix) {\r\n    if (str.length === 0)\r\n        throw Error('empty string');\r\n    if (str === \"NaN\" || str === \"Infinity\" || str === \"+Infinity\" || str === \"-Infinity\")\r\n        return ZERO;\r\n    if (typeof unsigned === 'number') {\r\n        // For goog.math.long compatibility\r\n        radix = unsigned,\r\n        unsigned = false;\r\n    } else {\r\n        unsigned = !! unsigned;\r\n    }\r\n    radix = radix || 10;\r\n    if (radix < 2 || 36 < radix)\r\n        throw RangeError('radix');\r\n\r\n    var p;\r\n    if ((p = str.indexOf('-')) > 0)\r\n        throw Error('interior hyphen');\r\n    else if (p === 0) {\r\n        return fromString(str.substring(1), unsigned, radix).neg();\r\n    }\r\n\r\n    // Do several (8) digits each time through the loop, so as to\r\n    // minimize the calls to the very expensive emulated div.\r\n    var radixToPower = fromNumber(pow_dbl(radix, 8));\r\n\r\n    var result = ZERO;\r\n    for (var i = 0; i < str.length; i += 8) {\r\n        var size = Math.min(8, str.length - i),\r\n            value = parseInt(str.substring(i, i + size), radix);\r\n        if (size < 8) {\r\n            var power = fromNumber(pow_dbl(radix, size));\r\n            result = result.mul(power).add(fromNumber(value));\r\n        } else {\r\n            result = result.mul(radixToPower);\r\n            result = result.add(fromNumber(value));\r\n        }\r\n    }\r\n    result.unsigned = unsigned;\r\n    return result;\r\n}\r\n\r\n/**\r\n * Returns a Long representation of the given string, written using the specified radix.\r\n * @function\r\n * @param {string} str The textual representation of the Long\r\n * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to signed\r\n * @param {number=} radix The radix in which the text is written (2-36), defaults to 10\r\n * @returns {!Long} The corresponding Long value\r\n */\r\nLong.fromString = fromString;\r\n\r\n/**\r\n * @function\r\n * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val\r\n * @param {boolean=} unsigned\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromValue(val, unsigned) {\r\n    if (typeof val === 'number')\r\n        return fromNumber(val, unsigned);\r\n    if (typeof val === 'string')\r\n        return fromString(val, unsigned);\r\n    // Throws for non-objects, converts non-instanceof Long:\r\n    return fromBits(val.low, val.high, typeof unsigned === 'boolean' ? unsigned : val.unsigned);\r\n}\r\n\r\n/**\r\n * Converts the specified value to a Long using the appropriate from* function for its type.\r\n * @function\r\n * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val Value\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {!Long}\r\n */\r\nLong.fromValue = fromValue;\r\n\r\n// NOTE: the compiler should inline these constant values below and then remove these variables, so there should be\r\n// no runtime penalty for these.\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_16_DBL = 1 << 16;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_24_DBL = 1 << 24;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\r\n\r\n/**\r\n * @type {!Long}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar ZERO = fromInt(0);\r\n\r\n/**\r\n * Signed zero.\r\n * @type {!Long}\r\n */\r\nLong.ZERO = ZERO;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar UZERO = fromInt(0, true);\r\n\r\n/**\r\n * Unsigned zero.\r\n * @type {!Long}\r\n */\r\nLong.UZERO = UZERO;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar ONE = fromInt(1);\r\n\r\n/**\r\n * Signed one.\r\n * @type {!Long}\r\n */\r\nLong.ONE = ONE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar UONE = fromInt(1, true);\r\n\r\n/**\r\n * Unsigned one.\r\n * @type {!Long}\r\n */\r\nLong.UONE = UONE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar NEG_ONE = fromInt(-1);\r\n\r\n/**\r\n * Signed negative one.\r\n * @type {!Long}\r\n */\r\nLong.NEG_ONE = NEG_ONE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar MAX_VALUE = fromBits(0xFFFFFFFF|0, 0x7FFFFFFF|0, false);\r\n\r\n/**\r\n * Maximum signed value.\r\n * @type {!Long}\r\n */\r\nLong.MAX_VALUE = MAX_VALUE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar MAX_UNSIGNED_VALUE = fromBits(0xFFFFFFFF|0, 0xFFFFFFFF|0, true);\r\n\r\n/**\r\n * Maximum unsigned value.\r\n * @type {!Long}\r\n */\r\nLong.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar MIN_VALUE = fromBits(0, 0x80000000|0, false);\r\n\r\n/**\r\n * Minimum signed value.\r\n * @type {!Long}\r\n */\r\nLong.MIN_VALUE = MIN_VALUE;\r\n\r\n/**\r\n * @alias Long.prototype\r\n * @inner\r\n */\r\nvar LongPrototype = Long.prototype;\r\n\r\n/**\r\n * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.\r\n * @returns {number}\r\n */\r\nLongPrototype.toInt = function toInt() {\r\n    return this.unsigned ? this.low >>> 0 : this.low;\r\n};\r\n\r\n/**\r\n * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).\r\n * @returns {number}\r\n */\r\nLongPrototype.toNumber = function toNumber() {\r\n    if (this.unsigned)\r\n        return ((this.high >>> 0) * TWO_PWR_32_DBL) + (this.low >>> 0);\r\n    return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\r\n};\r\n\r\n/**\r\n * Converts the Long to a string written in the specified radix.\r\n * @param {number=} radix Radix (2-36), defaults to 10\r\n * @returns {string}\r\n * @override\r\n * @throws {RangeError} If `radix` is out of range\r\n */\r\nLongPrototype.toString = function toString(radix) {\r\n    radix = radix || 10;\r\n    if (radix < 2 || 36 < radix)\r\n        throw RangeError('radix');\r\n    if (this.isZero())\r\n        return '0';\r\n    if (this.isNegative()) { // Unsigned Longs are never negative\r\n        if (this.eq(MIN_VALUE)) {\r\n            // We need to change the Long value before it can be negated, so we remove\r\n            // the bottom-most digit in this base and then recurse to do the rest.\r\n            var radixLong = fromNumber(radix),\r\n                div = this.div(radixLong),\r\n                rem1 = div.mul(radixLong).sub(this);\r\n            return div.toString(radix) + rem1.toInt().toString(radix);\r\n        } else\r\n            return '-' + this.neg().toString(radix);\r\n    }\r\n\r\n    // Do several (6) digits each time through the loop, so as to\r\n    // minimize the calls to the very expensive emulated div.\r\n    var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned),\r\n        rem = this;\r\n    var result = '';\r\n    while (true) {\r\n        var remDiv = rem.div(radixToPower),\r\n            intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0,\r\n            digits = intval.toString(radix);\r\n        rem = remDiv;\r\n        if (rem.isZero())\r\n            return digits + result;\r\n        else {\r\n            while (digits.length < 6)\r\n                digits = '0' + digits;\r\n            result = '' + digits + result;\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Gets the high 32 bits as a signed integer.\r\n * @returns {number} Signed high bits\r\n */\r\nLongPrototype.getHighBits = function getHighBits() {\r\n    return this.high;\r\n};\r\n\r\n/**\r\n * Gets the high 32 bits as an unsigned integer.\r\n * @returns {number} Unsigned high bits\r\n */\r\nLongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {\r\n    return this.high >>> 0;\r\n};\r\n\r\n/**\r\n * Gets the low 32 bits as a signed integer.\r\n * @returns {number} Signed low bits\r\n */\r\nLongPrototype.getLowBits = function getLowBits() {\r\n    return this.low;\r\n};\r\n\r\n/**\r\n * Gets the low 32 bits as an unsigned integer.\r\n * @returns {number} Unsigned low bits\r\n */\r\nLongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {\r\n    return this.low >>> 0;\r\n};\r\n\r\n/**\r\n * Gets the number of bits needed to represent the absolute value of this Long.\r\n * @returns {number}\r\n */\r\nLongPrototype.getNumBitsAbs = function getNumBitsAbs() {\r\n    if (this.isNegative()) // Unsigned Longs are never negative\r\n        return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\r\n    var val = this.high != 0 ? this.high : this.low;\r\n    for (var bit = 31; bit > 0; bit--)\r\n        if ((val & (1 << bit)) != 0)\r\n            break;\r\n    return this.high != 0 ? bit + 33 : bit + 1;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value equals zero.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isZero = function isZero() {\r\n    return this.high === 0 && this.low === 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value equals zero. This is an alias of {@link Long#isZero}.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.eqz = LongPrototype.isZero;\r\n\r\n/**\r\n * Tests if this Long's value is negative.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isNegative = function isNegative() {\r\n    return !this.unsigned && this.high < 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is positive.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isPositive = function isPositive() {\r\n    return this.unsigned || this.high >= 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is odd.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isOdd = function isOdd() {\r\n    return (this.low & 1) === 1;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is even.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isEven = function isEven() {\r\n    return (this.low & 1) === 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value equals the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.equals = function equals(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    if (this.unsigned !== other.unsigned && (this.high >>> 31) === 1 && (other.high >>> 31) === 1)\r\n        return false;\r\n    return this.high === other.high && this.low === other.low;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.eq = LongPrototype.equals;\r\n\r\n/**\r\n * Tests if this Long's value differs from the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.notEquals = function notEquals(other) {\r\n    return !this.eq(/* validates */ other);\r\n};\r\n\r\n/**\r\n * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.neq = LongPrototype.notEquals;\r\n\r\n/**\r\n * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.ne = LongPrototype.notEquals;\r\n\r\n/**\r\n * Tests if this Long's value is less than the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.lessThan = function lessThan(other) {\r\n    return this.comp(/* validates */ other) < 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.lt = LongPrototype.lessThan;\r\n\r\n/**\r\n * Tests if this Long's value is less than or equal the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {\r\n    return this.comp(/* validates */ other) <= 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.lte = LongPrototype.lessThanOrEqual;\r\n\r\n/**\r\n * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.le = LongPrototype.lessThanOrEqual;\r\n\r\n/**\r\n * Tests if this Long's value is greater than the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.greaterThan = function greaterThan(other) {\r\n    return this.comp(/* validates */ other) > 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.gt = LongPrototype.greaterThan;\r\n\r\n/**\r\n * Tests if this Long's value is greater than or equal the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {\r\n    return this.comp(/* validates */ other) >= 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.gte = LongPrototype.greaterThanOrEqual;\r\n\r\n/**\r\n * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.ge = LongPrototype.greaterThanOrEqual;\r\n\r\n/**\r\n * Compares this Long's value with the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {number} 0 if they are the same, 1 if the this is greater and -1\r\n *  if the given one is greater\r\n */\r\nLongPrototype.compare = function compare(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    if (this.eq(other))\r\n        return 0;\r\n    var thisNeg = this.isNegative(),\r\n        otherNeg = other.isNegative();\r\n    if (thisNeg && !otherNeg)\r\n        return -1;\r\n    if (!thisNeg && otherNeg)\r\n        return 1;\r\n    // At this point the sign bits are the same\r\n    if (!this.unsigned)\r\n        return this.sub(other).isNegative() ? -1 : 1;\r\n    // Both are positive if at least one is unsigned\r\n    return (other.high >>> 0) > (this.high >>> 0) || (other.high === this.high && (other.low >>> 0) > (this.low >>> 0)) ? -1 : 1;\r\n};\r\n\r\n/**\r\n * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {number} 0 if they are the same, 1 if the this is greater and -1\r\n *  if the given one is greater\r\n */\r\nLongPrototype.comp = LongPrototype.compare;\r\n\r\n/**\r\n * Negates this Long's value.\r\n * @returns {!Long} Negated Long\r\n */\r\nLongPrototype.negate = function negate() {\r\n    if (!this.unsigned && this.eq(MIN_VALUE))\r\n        return MIN_VALUE;\r\n    return this.not().add(ONE);\r\n};\r\n\r\n/**\r\n * Negates this Long's value. This is an alias of {@link Long#negate}.\r\n * @function\r\n * @returns {!Long} Negated Long\r\n */\r\nLongPrototype.neg = LongPrototype.negate;\r\n\r\n/**\r\n * Returns the sum of this and the specified Long.\r\n * @param {!Long|number|string} addend Addend\r\n * @returns {!Long} Sum\r\n */\r\nLongPrototype.add = function add(addend) {\r\n    if (!isLong(addend))\r\n        addend = fromValue(addend);\r\n\r\n    // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\r\n\r\n    var a48 = this.high >>> 16;\r\n    var a32 = this.high & 0xFFFF;\r\n    var a16 = this.low >>> 16;\r\n    var a00 = this.low & 0xFFFF;\r\n\r\n    var b48 = addend.high >>> 16;\r\n    var b32 = addend.high & 0xFFFF;\r\n    var b16 = addend.low >>> 16;\r\n    var b00 = addend.low & 0xFFFF;\r\n\r\n    var c48 = 0, c32 = 0, c16 = 0, c00 = 0;\r\n    c00 += a00 + b00;\r\n    c16 += c00 >>> 16;\r\n    c00 &= 0xFFFF;\r\n    c16 += a16 + b16;\r\n    c32 += c16 >>> 16;\r\n    c16 &= 0xFFFF;\r\n    c32 += a32 + b32;\r\n    c48 += c32 >>> 16;\r\n    c32 &= 0xFFFF;\r\n    c48 += a48 + b48;\r\n    c48 &= 0xFFFF;\r\n    return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the difference of this and the specified Long.\r\n * @param {!Long|number|string} subtrahend Subtrahend\r\n * @returns {!Long} Difference\r\n */\r\nLongPrototype.subtract = function subtract(subtrahend) {\r\n    if (!isLong(subtrahend))\r\n        subtrahend = fromValue(subtrahend);\r\n    return this.add(subtrahend.neg());\r\n};\r\n\r\n/**\r\n * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.\r\n * @function\r\n * @param {!Long|number|string} subtrahend Subtrahend\r\n * @returns {!Long} Difference\r\n */\r\nLongPrototype.sub = LongPrototype.subtract;\r\n\r\n/**\r\n * Returns the product of this and the specified Long.\r\n * @param {!Long|number|string} multiplier Multiplier\r\n * @returns {!Long} Product\r\n */\r\nLongPrototype.multiply = function multiply(multiplier) {\r\n    if (this.isZero())\r\n        return ZERO;\r\n    if (!isLong(multiplier))\r\n        multiplier = fromValue(multiplier);\r\n\r\n    // use wasm support if present\r\n    if (wasm) {\r\n        var low = wasm.mul(this.low,\r\n                           this.high,\r\n                           multiplier.low,\r\n                           multiplier.high);\r\n        return fromBits(low, wasm.get_high(), this.unsigned);\r\n    }\r\n\r\n    if (multiplier.isZero())\r\n        return ZERO;\r\n    if (this.eq(MIN_VALUE))\r\n        return multiplier.isOdd() ? MIN_VALUE : ZERO;\r\n    if (multiplier.eq(MIN_VALUE))\r\n        return this.isOdd() ? MIN_VALUE : ZERO;\r\n\r\n    if (this.isNegative()) {\r\n        if (multiplier.isNegative())\r\n            return this.neg().mul(multiplier.neg());\r\n        else\r\n            return this.neg().mul(multiplier).neg();\r\n    } else if (multiplier.isNegative())\r\n        return this.mul(multiplier.neg()).neg();\r\n\r\n    // If both longs are small, use float multiplication\r\n    if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24))\r\n        return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned);\r\n\r\n    // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.\r\n    // We can skip products that would overflow.\r\n\r\n    var a48 = this.high >>> 16;\r\n    var a32 = this.high & 0xFFFF;\r\n    var a16 = this.low >>> 16;\r\n    var a00 = this.low & 0xFFFF;\r\n\r\n    var b48 = multiplier.high >>> 16;\r\n    var b32 = multiplier.high & 0xFFFF;\r\n    var b16 = multiplier.low >>> 16;\r\n    var b00 = multiplier.low & 0xFFFF;\r\n\r\n    var c48 = 0, c32 = 0, c16 = 0, c00 = 0;\r\n    c00 += a00 * b00;\r\n    c16 += c00 >>> 16;\r\n    c00 &= 0xFFFF;\r\n    c16 += a16 * b00;\r\n    c32 += c16 >>> 16;\r\n    c16 &= 0xFFFF;\r\n    c16 += a00 * b16;\r\n    c32 += c16 >>> 16;\r\n    c16 &= 0xFFFF;\r\n    c32 += a32 * b00;\r\n    c48 += c32 >>> 16;\r\n    c32 &= 0xFFFF;\r\n    c32 += a16 * b16;\r\n    c48 += c32 >>> 16;\r\n    c32 &= 0xFFFF;\r\n    c32 += a00 * b32;\r\n    c48 += c32 >>> 16;\r\n    c32 &= 0xFFFF;\r\n    c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\r\n    c48 &= 0xFFFF;\r\n    return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.\r\n * @function\r\n * @param {!Long|number|string} multiplier Multiplier\r\n * @returns {!Long} Product\r\n */\r\nLongPrototype.mul = LongPrototype.multiply;\r\n\r\n/**\r\n * Returns this Long divided by the specified. The result is signed if this Long is signed or\r\n *  unsigned if this Long is unsigned.\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Quotient\r\n */\r\nLongPrototype.divide = function divide(divisor) {\r\n    if (!isLong(divisor))\r\n        divisor = fromValue(divisor);\r\n    if (divisor.isZero())\r\n        throw Error('division by zero');\r\n\r\n    // use wasm support if present\r\n    if (wasm) {\r\n        // guard against signed division overflow: the largest\r\n        // negative number / -1 would be 1 larger than the largest\r\n        // positive number, due to two's complement.\r\n        if (!this.unsigned &&\r\n            this.high === -0x80000000 &&\r\n            divisor.low === -1 && divisor.high === -1) {\r\n            // be consistent with non-wasm code path\r\n            return this;\r\n        }\r\n        var low = (this.unsigned ? wasm.div_u : wasm.div_s)(\r\n            this.low,\r\n            this.high,\r\n            divisor.low,\r\n            divisor.high\r\n        );\r\n        return fromBits(low, wasm.get_high(), this.unsigned);\r\n    }\r\n\r\n    if (this.isZero())\r\n        return this.unsigned ? UZERO : ZERO;\r\n    var approx, rem, res;\r\n    if (!this.unsigned) {\r\n        // This section is only relevant for signed longs and is derived from the\r\n        // closure library as a whole.\r\n        if (this.eq(MIN_VALUE)) {\r\n            if (divisor.eq(ONE) || divisor.eq(NEG_ONE))\r\n                return MIN_VALUE;  // recall that -MIN_VALUE == MIN_VALUE\r\n            else if (divisor.eq(MIN_VALUE))\r\n                return ONE;\r\n            else {\r\n                // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\r\n                var halfThis = this.shr(1);\r\n                approx = halfThis.div(divisor).shl(1);\r\n                if (approx.eq(ZERO)) {\r\n                    return divisor.isNegative() ? ONE : NEG_ONE;\r\n                } else {\r\n                    rem = this.sub(divisor.mul(approx));\r\n                    res = approx.add(rem.div(divisor));\r\n                    return res;\r\n                }\r\n            }\r\n        } else if (divisor.eq(MIN_VALUE))\r\n            return this.unsigned ? UZERO : ZERO;\r\n        if (this.isNegative()) {\r\n            if (divisor.isNegative())\r\n                return this.neg().div(divisor.neg());\r\n            return this.neg().div(divisor).neg();\r\n        } else if (divisor.isNegative())\r\n            return this.div(divisor.neg()).neg();\r\n        res = ZERO;\r\n    } else {\r\n        // The algorithm below has not been made for unsigned longs. It's therefore\r\n        // required to take special care of the MSB prior to running it.\r\n        if (!divisor.unsigned)\r\n            divisor = divisor.toUnsigned();\r\n        if (divisor.gt(this))\r\n            return UZERO;\r\n        if (divisor.gt(this.shru(1))) // 15 >>> 1 = 7 ; with divisor = 8 ; true\r\n            return UONE;\r\n        res = UZERO;\r\n    }\r\n\r\n    // Repeat the following until the remainder is less than other:  find a\r\n    // floating-point that approximates remainder / other *from below*, add this\r\n    // into the result, and subtract it from the remainder.  It is critical that\r\n    // the approximate value is less than or equal to the real value so that the\r\n    // remainder never becomes negative.\r\n    rem = this;\r\n    while (rem.gte(divisor)) {\r\n        // Approximate the result of division. This may be a little greater or\r\n        // smaller than the actual value.\r\n        approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber()));\r\n\r\n        // We will tweak the approximate result by changing it in the 48-th digit or\r\n        // the smallest non-fractional digit, whichever is larger.\r\n        var log2 = Math.ceil(Math.log(approx) / Math.LN2),\r\n            delta = (log2 <= 48) ? 1 : pow_dbl(2, log2 - 48),\r\n\r\n        // Decrease the approximation until it is smaller than the remainder.  Note\r\n        // that if it is too large, the product overflows and is negative.\r\n            approxRes = fromNumber(approx),\r\n            approxRem = approxRes.mul(divisor);\r\n        while (approxRem.isNegative() || approxRem.gt(rem)) {\r\n            approx -= delta;\r\n            approxRes = fromNumber(approx, this.unsigned);\r\n            approxRem = approxRes.mul(divisor);\r\n        }\r\n\r\n        // We know the answer can't be zero... and actually, zero would cause\r\n        // infinite recursion since we would make no progress.\r\n        if (approxRes.isZero())\r\n            approxRes = ONE;\r\n\r\n        res = res.add(approxRes);\r\n        rem = rem.sub(approxRem);\r\n    }\r\n    return res;\r\n};\r\n\r\n/**\r\n * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.\r\n * @function\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Quotient\r\n */\r\nLongPrototype.div = LongPrototype.divide;\r\n\r\n/**\r\n * Returns this Long modulo the specified.\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Remainder\r\n */\r\nLongPrototype.modulo = function modulo(divisor) {\r\n    if (!isLong(divisor))\r\n        divisor = fromValue(divisor);\r\n\r\n    // use wasm support if present\r\n    if (wasm) {\r\n        var low = (this.unsigned ? wasm.rem_u : wasm.rem_s)(\r\n            this.low,\r\n            this.high,\r\n            divisor.low,\r\n            divisor.high\r\n        );\r\n        return fromBits(low, wasm.get_high(), this.unsigned);\r\n    }\r\n\r\n    return this.sub(this.div(divisor).mul(divisor));\r\n};\r\n\r\n/**\r\n * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\r\n * @function\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Remainder\r\n */\r\nLongPrototype.mod = LongPrototype.modulo;\r\n\r\n/**\r\n * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\r\n * @function\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Remainder\r\n */\r\nLongPrototype.rem = LongPrototype.modulo;\r\n\r\n/**\r\n * Returns the bitwise NOT of this Long.\r\n * @returns {!Long}\r\n */\r\nLongPrototype.not = function not() {\r\n    return fromBits(~this.low, ~this.high, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the bitwise AND of this Long and the specified.\r\n * @param {!Long|number|string} other Other Long\r\n * @returns {!Long}\r\n */\r\nLongPrototype.and = function and(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    return fromBits(this.low & other.low, this.high & other.high, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the bitwise OR of this Long and the specified.\r\n * @param {!Long|number|string} other Other Long\r\n * @returns {!Long}\r\n */\r\nLongPrototype.or = function or(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    return fromBits(this.low | other.low, this.high | other.high, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the bitwise XOR of this Long and the given one.\r\n * @param {!Long|number|string} other Other Long\r\n * @returns {!Long}\r\n */\r\nLongPrototype.xor = function xor(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns this Long with bits shifted to the left by the given amount.\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shiftLeft = function shiftLeft(numBits) {\r\n    if (isLong(numBits))\r\n        numBits = numBits.toInt();\r\n    if ((numBits &= 63) === 0)\r\n        return this;\r\n    else if (numBits < 32)\r\n        return fromBits(this.low << numBits, (this.high << numBits) | (this.low >>> (32 - numBits)), this.unsigned);\r\n    else\r\n        return fromBits(0, this.low << (numBits - 32), this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.\r\n * @function\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shl = LongPrototype.shiftLeft;\r\n\r\n/**\r\n * Returns this Long with bits arithmetically shifted to the right by the given amount.\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shiftRight = function shiftRight(numBits) {\r\n    if (isLong(numBits))\r\n        numBits = numBits.toInt();\r\n    if ((numBits &= 63) === 0)\r\n        return this;\r\n    else if (numBits < 32)\r\n        return fromBits((this.low >>> numBits) | (this.high << (32 - numBits)), this.high >> numBits, this.unsigned);\r\n    else\r\n        return fromBits(this.high >> (numBits - 32), this.high >= 0 ? 0 : -1, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.\r\n * @function\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shr = LongPrototype.shiftRight;\r\n\r\n/**\r\n * Returns this Long with bits logically shifted to the right by the given amount.\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {\r\n    if (isLong(numBits))\r\n        numBits = numBits.toInt();\r\n    numBits &= 63;\r\n    if (numBits === 0)\r\n        return this;\r\n    else {\r\n        var high = this.high;\r\n        if (numBits < 32) {\r\n            var low = this.low;\r\n            return fromBits((low >>> numBits) | (high << (32 - numBits)), high >>> numBits, this.unsigned);\r\n        } else if (numBits === 32)\r\n            return fromBits(high, 0, this.unsigned);\r\n        else\r\n            return fromBits(high >>> (numBits - 32), 0, this.unsigned);\r\n    }\r\n};\r\n\r\n/**\r\n * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\r\n * @function\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shru = LongPrototype.shiftRightUnsigned;\r\n\r\n/**\r\n * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\r\n * @function\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shr_u = LongPrototype.shiftRightUnsigned;\r\n\r\n/**\r\n * Converts this Long to signed.\r\n * @returns {!Long} Signed long\r\n */\r\nLongPrototype.toSigned = function toSigned() {\r\n    if (!this.unsigned)\r\n        return this;\r\n    return fromBits(this.low, this.high, false);\r\n};\r\n\r\n/**\r\n * Converts this Long to unsigned.\r\n * @returns {!Long} Unsigned long\r\n */\r\nLongPrototype.toUnsigned = function toUnsigned() {\r\n    if (this.unsigned)\r\n        return this;\r\n    return fromBits(this.low, this.high, true);\r\n};\r\n\r\n/**\r\n * Converts this Long to its byte representation.\r\n * @param {boolean=} le Whether little or big endian, defaults to big endian\r\n * @returns {!Array.<number>} Byte representation\r\n */\r\nLongPrototype.toBytes = function toBytes(le) {\r\n    return le ? this.toBytesLE() : this.toBytesBE();\r\n};\r\n\r\n/**\r\n * Converts this Long to its little endian byte representation.\r\n * @returns {!Array.<number>} Little endian byte representation\r\n */\r\nLongPrototype.toBytesLE = function toBytesLE() {\r\n    var hi = this.high,\r\n        lo = this.low;\r\n    return [\r\n        lo        & 0xff,\r\n        lo >>>  8 & 0xff,\r\n        lo >>> 16 & 0xff,\r\n        lo >>> 24       ,\r\n        hi        & 0xff,\r\n        hi >>>  8 & 0xff,\r\n        hi >>> 16 & 0xff,\r\n        hi >>> 24\r\n    ];\r\n};\r\n\r\n/**\r\n * Converts this Long to its big endian byte representation.\r\n * @returns {!Array.<number>} Big endian byte representation\r\n */\r\nLongPrototype.toBytesBE = function toBytesBE() {\r\n    var hi = this.high,\r\n        lo = this.low;\r\n    return [\r\n        hi >>> 24       ,\r\n        hi >>> 16 & 0xff,\r\n        hi >>>  8 & 0xff,\r\n        hi        & 0xff,\r\n        lo >>> 24       ,\r\n        lo >>> 16 & 0xff,\r\n        lo >>>  8 & 0xff,\r\n        lo        & 0xff\r\n    ];\r\n};\r\n\r\n/**\r\n * Creates a Long from its byte representation.\r\n * @param {!Array.<number>} bytes Byte representation\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @param {boolean=} le Whether little or big endian, defaults to big endian\r\n * @returns {Long} The corresponding Long value\r\n */\r\nLong.fromBytes = function fromBytes(bytes, unsigned, le) {\r\n    return le ? Long.fromBytesLE(bytes, unsigned) : Long.fromBytesBE(bytes, unsigned);\r\n};\r\n\r\n/**\r\n * Creates a Long from its little endian byte representation.\r\n * @param {!Array.<number>} bytes Little endian byte representation\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {Long} The corresponding Long value\r\n */\r\nLong.fromBytesLE = function fromBytesLE(bytes, unsigned) {\r\n    return new Long(\r\n        bytes[0]       |\r\n        bytes[1] <<  8 |\r\n        bytes[2] << 16 |\r\n        bytes[3] << 24,\r\n        bytes[4]       |\r\n        bytes[5] <<  8 |\r\n        bytes[6] << 16 |\r\n        bytes[7] << 24,\r\n        unsigned\r\n    );\r\n};\r\n\r\n/**\r\n * Creates a Long from its big endian byte representation.\r\n * @param {!Array.<number>} bytes Big endian byte representation\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {Long} The corresponding Long value\r\n */\r\nLong.fromBytesBE = function fromBytesBE(bytes, unsigned) {\r\n    return new Long(\r\n        bytes[4] << 24 |\r\n        bytes[5] << 16 |\r\n        bytes[6] <<  8 |\r\n        bytes[7],\r\n        bytes[0] << 24 |\r\n        bytes[1] << 16 |\r\n        bytes[2] <<  8 |\r\n        bytes[3],\r\n        unsigned\r\n    );\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/long/src/long.js\n// module id = ../heroprotocol/node_modules/long/src/long.js\n// module chunks = main","/*! *****************************************************************************\r\nCopyright (C) Microsoft. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\nvar Reflect;\r\n(function (Reflect) {\r\n    // Metadata Proposal\r\n    // https://rbuckton.github.io/reflect-metadata/\r\n    (function (factory) {\r\n        var root = typeof global === \"object\" ? global :\r\n            typeof self === \"object\" ? self :\r\n                typeof this === \"object\" ? this :\r\n                    Function(\"return this;\")();\r\n        var exporter = makeExporter(Reflect);\r\n        if (typeof root.Reflect === \"undefined\") {\r\n            root.Reflect = Reflect;\r\n        }\r\n        else {\r\n            exporter = makeExporter(root.Reflect, exporter);\r\n        }\r\n        factory(exporter);\r\n        function makeExporter(target, previous) {\r\n            return function (key, value) {\r\n                if (typeof target[key] !== \"function\") {\r\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\r\n                }\r\n                if (previous)\r\n                    previous(key, value);\r\n            };\r\n        }\r\n    })(function (exporter) {\r\n        var hasOwn = Object.prototype.hasOwnProperty;\r\n        // feature test for Symbol support\r\n        var supportsSymbol = typeof Symbol === \"function\";\r\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\r\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\r\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\r\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\r\n        var downLevel = !supportsCreate && !supportsProto;\r\n        var HashMap = {\r\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\r\n            create: supportsCreate\r\n                ? function () { return MakeDictionary(Object.create(null)); }\r\n                : supportsProto\r\n                    ? function () { return MakeDictionary({ __proto__: null }); }\r\n                    : function () { return MakeDictionary({}); },\r\n            has: downLevel\r\n                ? function (map, key) { return hasOwn.call(map, key); }\r\n                : function (map, key) { return key in map; },\r\n            get: downLevel\r\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\r\n                : function (map, key) { return map[key]; },\r\n        };\r\n        // Load global or shim versions of Map, Set, and WeakMap\r\n        var functionPrototype = Object.getPrototypeOf(Function);\r\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\r\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\r\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\r\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\r\n        // [[Metadata]] internal slot\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\r\n        var Metadata = new _WeakMap();\r\n        /**\r\n         * Applies a set of decorators to a property of a target object.\r\n         * @param decorators An array of decorators.\r\n         * @param target The target object.\r\n         * @param propertyKey (Optional) The property key to decorate.\r\n         * @param attributes (Optional) The property descriptor for the target key.\r\n         * @remarks Decorators are applied in reverse order.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     Example = Reflect.decorate(decoratorsArray, Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     Object.defineProperty(Example, \"staticMethod\",\r\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\r\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\r\n         *\r\n         *     // method (on prototype)\r\n         *     Object.defineProperty(Example.prototype, \"method\",\r\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\r\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\r\n         *\r\n         */\r\n        function decorate(decorators, target, propertyKey, attributes) {\r\n            if (!IsUndefined(propertyKey)) {\r\n                if (!IsArray(decorators))\r\n                    throw new TypeError();\r\n                if (!IsObject(target))\r\n                    throw new TypeError();\r\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\r\n                    throw new TypeError();\r\n                if (IsNull(attributes))\r\n                    attributes = undefined;\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n                return DecorateProperty(decorators, target, propertyKey, attributes);\r\n            }\r\n            else {\r\n                if (!IsArray(decorators))\r\n                    throw new TypeError();\r\n                if (!IsConstructor(target))\r\n                    throw new TypeError();\r\n                return DecorateConstructor(decorators, target);\r\n            }\r\n        }\r\n        exporter(\"decorate\", decorate);\r\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\r\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\r\n        /**\r\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\r\n         * @param metadataKey The key for the metadata entry.\r\n         * @param metadataValue The value for the metadata entry.\r\n         * @returns A decorator function.\r\n         * @remarks\r\n         * If `metadataKey` is already defined for the target and target key, the\r\n         * metadataValue for that key will be overwritten.\r\n         * @example\r\n         *\r\n         *     // constructor\r\n         *     @Reflect.metadata(key, value)\r\n         *     class Example {\r\n         *     }\r\n         *\r\n         *     // property (on constructor, TypeScript only)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         static staticProperty;\r\n         *     }\r\n         *\r\n         *     // property (on prototype, TypeScript only)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         property;\r\n         *     }\r\n         *\r\n         *     // method (on constructor)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         static staticMethod() { }\r\n         *     }\r\n         *\r\n         *     // method (on prototype)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         method() { }\r\n         *     }\r\n         *\r\n         */\r\n        function metadata(metadataKey, metadataValue) {\r\n            function decorator(target, propertyKey) {\r\n                if (!IsObject(target))\r\n                    throw new TypeError();\r\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\r\n                    throw new TypeError();\r\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n            }\r\n            return decorator;\r\n        }\r\n        exporter(\"metadata\", metadata);\r\n        /**\r\n         * Define a unique metadata entry on the target.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param metadataValue A value that contains attached metadata.\r\n         * @param target The target object on which to define metadata.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\r\n         *\r\n         *     // decorator factory as metadata-producing annotation.\r\n         *     function MyAnnotation(options): Decorator {\r\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\r\n         *     }\r\n         *\r\n         */\r\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n        }\r\n        exporter(\"defineMetadata\", defineMetadata);\r\n        /**\r\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function hasMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"hasMetadata\", hasMetadata);\r\n        /**\r\n         * Gets a value indicating whether the target object has the provided metadata key defined.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\r\n        /**\r\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"getMetadata\", getMetadata);\r\n        /**\r\n         * Gets the metadata value for the provided metadata key on the target object.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getOwnMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"getOwnMetadata\", getOwnMetadata);\r\n        /**\r\n         * Gets the metadata keys defined on the target object or its prototype chain.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns An array of unique metadata keys.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getMetadataKeys(Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getMetadataKeys(target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryMetadataKeys(target, propertyKey);\r\n        }\r\n        exporter(\"getMetadataKeys\", getMetadataKeys);\r\n        /**\r\n         * Gets the unique metadata keys defined on the target object.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns An array of unique metadata keys.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getOwnMetadataKeys(Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getOwnMetadataKeys(target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\r\n        }\r\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\r\n        /**\r\n         * Deletes the metadata entry from the target object with the provided key.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function deleteMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return false;\r\n            if (!metadataMap.delete(metadataKey))\r\n                return false;\r\n            if (metadataMap.size > 0)\r\n                return true;\r\n            var targetMetadata = Metadata.get(target);\r\n            targetMetadata.delete(propertyKey);\r\n            if (targetMetadata.size > 0)\r\n                return true;\r\n            Metadata.delete(target);\r\n            return true;\r\n        }\r\n        exporter(\"deleteMetadata\", deleteMetadata);\r\n        function DecorateConstructor(decorators, target) {\r\n            for (var i = decorators.length - 1; i >= 0; --i) {\r\n                var decorator = decorators[i];\r\n                var decorated = decorator(target);\r\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                    if (!IsConstructor(decorated))\r\n                        throw new TypeError();\r\n                    target = decorated;\r\n                }\r\n            }\r\n            return target;\r\n        }\r\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\r\n            for (var i = decorators.length - 1; i >= 0; --i) {\r\n                var decorator = decorators[i];\r\n                var decorated = decorator(target, propertyKey, descriptor);\r\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                    if (!IsObject(decorated))\r\n                        throw new TypeError();\r\n                    descriptor = decorated;\r\n                }\r\n            }\r\n            return descriptor;\r\n        }\r\n        function GetOrCreateMetadataMap(O, P, Create) {\r\n            var targetMetadata = Metadata.get(O);\r\n            if (IsUndefined(targetMetadata)) {\r\n                if (!Create)\r\n                    return undefined;\r\n                targetMetadata = new _Map();\r\n                Metadata.set(O, targetMetadata);\r\n            }\r\n            var metadataMap = targetMetadata.get(P);\r\n            if (IsUndefined(metadataMap)) {\r\n                if (!Create)\r\n                    return undefined;\r\n                metadataMap = new _Map();\r\n                targetMetadata.set(P, metadataMap);\r\n            }\r\n            return metadataMap;\r\n        }\r\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\r\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\r\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n            if (hasOwn)\r\n                return true;\r\n            var parent = OrdinaryGetPrototypeOf(O);\r\n            if (!IsNull(parent))\r\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\r\n            return false;\r\n        }\r\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\r\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return false;\r\n            return ToBoolean(metadataMap.has(MetadataKey));\r\n        }\r\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\r\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\r\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n            if (hasOwn)\r\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\r\n            var parent = OrdinaryGetPrototypeOf(O);\r\n            if (!IsNull(parent))\r\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\r\n            return undefined;\r\n        }\r\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\r\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return undefined;\r\n            return metadataMap.get(MetadataKey);\r\n        }\r\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\r\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\r\n            metadataMap.set(MetadataKey, MetadataValue);\r\n        }\r\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\r\n        function OrdinaryMetadataKeys(O, P) {\r\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\r\n            var parent = OrdinaryGetPrototypeOf(O);\r\n            if (parent === null)\r\n                return ownKeys;\r\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\r\n            if (parentKeys.length <= 0)\r\n                return ownKeys;\r\n            if (ownKeys.length <= 0)\r\n                return parentKeys;\r\n            var set = new _Set();\r\n            var keys = [];\r\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\r\n                var key = ownKeys_1[_i];\r\n                var hasKey = set.has(key);\r\n                if (!hasKey) {\r\n                    set.add(key);\r\n                    keys.push(key);\r\n                }\r\n            }\r\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\r\n                var key = parentKeys_1[_a];\r\n                var hasKey = set.has(key);\r\n                if (!hasKey) {\r\n                    set.add(key);\r\n                    keys.push(key);\r\n                }\r\n            }\r\n            return keys;\r\n        }\r\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\r\n        function OrdinaryOwnMetadataKeys(O, P) {\r\n            var keys = [];\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return keys;\r\n            var keysObj = metadataMap.keys();\r\n            var iterator = GetIterator(keysObj);\r\n            var k = 0;\r\n            while (true) {\r\n                var next = IteratorStep(iterator);\r\n                if (!next) {\r\n                    keys.length = k;\r\n                    return keys;\r\n                }\r\n                var nextValue = IteratorValue(next);\r\n                try {\r\n                    keys[k] = nextValue;\r\n                }\r\n                catch (e) {\r\n                    try {\r\n                        IteratorClose(iterator);\r\n                    }\r\n                    finally {\r\n                        throw e;\r\n                    }\r\n                }\r\n                k++;\r\n            }\r\n        }\r\n        // 6 ECMAScript Data Typ0es and Values\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\r\n        function Type(x) {\r\n            if (x === null)\r\n                return 1 /* Null */;\r\n            switch (typeof x) {\r\n                case \"undefined\": return 0 /* Undefined */;\r\n                case \"boolean\": return 2 /* Boolean */;\r\n                case \"string\": return 3 /* String */;\r\n                case \"symbol\": return 4 /* Symbol */;\r\n                case \"number\": return 5 /* Number */;\r\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\r\n                default: return 6 /* Object */;\r\n            }\r\n        }\r\n        // 6.1.1 The Undefined Type\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\r\n        function IsUndefined(x) {\r\n            return x === undefined;\r\n        }\r\n        // 6.1.2 The Null Type\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\r\n        function IsNull(x) {\r\n            return x === null;\r\n        }\r\n        // 6.1.5 The Symbol Type\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\r\n        function IsSymbol(x) {\r\n            return typeof x === \"symbol\";\r\n        }\r\n        // 6.1.7 The Object Type\r\n        // https://tc39.github.io/ecma262/#sec-object-type\r\n        function IsObject(x) {\r\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\r\n        }\r\n        // 7.1 Type Conversion\r\n        // https://tc39.github.io/ecma262/#sec-type-conversion\r\n        // 7.1.1 ToPrimitive(input [, PreferredType])\r\n        // https://tc39.github.io/ecma262/#sec-toprimitive\r\n        function ToPrimitive(input, PreferredType) {\r\n            switch (Type(input)) {\r\n                case 0 /* Undefined */: return input;\r\n                case 1 /* Null */: return input;\r\n                case 2 /* Boolean */: return input;\r\n                case 3 /* String */: return input;\r\n                case 4 /* Symbol */: return input;\r\n                case 5 /* Number */: return input;\r\n            }\r\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\r\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\r\n            if (exoticToPrim !== undefined) {\r\n                var result = exoticToPrim.call(input, hint);\r\n                if (IsObject(result))\r\n                    throw new TypeError();\r\n                return result;\r\n            }\r\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\r\n        }\r\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\r\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\r\n        function OrdinaryToPrimitive(O, hint) {\r\n            if (hint === \"string\") {\r\n                var toString_1 = O.toString;\r\n                if (IsCallable(toString_1)) {\r\n                    var result = toString_1.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n                var valueOf = O.valueOf;\r\n                if (IsCallable(valueOf)) {\r\n                    var result = valueOf.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n            }\r\n            else {\r\n                var valueOf = O.valueOf;\r\n                if (IsCallable(valueOf)) {\r\n                    var result = valueOf.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n                var toString_2 = O.toString;\r\n                if (IsCallable(toString_2)) {\r\n                    var result = toString_2.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n            }\r\n            throw new TypeError();\r\n        }\r\n        // 7.1.2 ToBoolean(argument)\r\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\r\n        function ToBoolean(argument) {\r\n            return !!argument;\r\n        }\r\n        // 7.1.12 ToString(argument)\r\n        // https://tc39.github.io/ecma262/#sec-tostring\r\n        function ToString(argument) {\r\n            return \"\" + argument;\r\n        }\r\n        // 7.1.14 ToPropertyKey(argument)\r\n        // https://tc39.github.io/ecma262/#sec-topropertykey\r\n        function ToPropertyKey(argument) {\r\n            var key = ToPrimitive(argument, 3 /* String */);\r\n            if (IsSymbol(key))\r\n                return key;\r\n            return ToString(key);\r\n        }\r\n        // 7.2 Testing and Comparison Operations\r\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\r\n        // 7.2.2 IsArray(argument)\r\n        // https://tc39.github.io/ecma262/#sec-isarray\r\n        function IsArray(argument) {\r\n            return Array.isArray\r\n                ? Array.isArray(argument)\r\n                : argument instanceof Object\r\n                    ? argument instanceof Array\r\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\r\n        }\r\n        // 7.2.3 IsCallable(argument)\r\n        // https://tc39.github.io/ecma262/#sec-iscallable\r\n        function IsCallable(argument) {\r\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\r\n            return typeof argument === \"function\";\r\n        }\r\n        // 7.2.4 IsConstructor(argument)\r\n        // https://tc39.github.io/ecma262/#sec-isconstructor\r\n        function IsConstructor(argument) {\r\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\r\n            return typeof argument === \"function\";\r\n        }\r\n        // 7.2.7 IsPropertyKey(argument)\r\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\r\n        function IsPropertyKey(argument) {\r\n            switch (Type(argument)) {\r\n                case 3 /* String */: return true;\r\n                case 4 /* Symbol */: return true;\r\n                default: return false;\r\n            }\r\n        }\r\n        // 7.3 Operations on Objects\r\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\r\n        // 7.3.9 GetMethod(V, P)\r\n        // https://tc39.github.io/ecma262/#sec-getmethod\r\n        function GetMethod(V, P) {\r\n            var func = V[P];\r\n            if (func === undefined || func === null)\r\n                return undefined;\r\n            if (!IsCallable(func))\r\n                throw new TypeError();\r\n            return func;\r\n        }\r\n        // 7.4 Operations on Iterator Objects\r\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\r\n        function GetIterator(obj) {\r\n            var method = GetMethod(obj, iteratorSymbol);\r\n            if (!IsCallable(method))\r\n                throw new TypeError(); // from Call\r\n            var iterator = method.call(obj);\r\n            if (!IsObject(iterator))\r\n                throw new TypeError();\r\n            return iterator;\r\n        }\r\n        // 7.4.4 IteratorValue(iterResult)\r\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\r\n        function IteratorValue(iterResult) {\r\n            return iterResult.value;\r\n        }\r\n        // 7.4.5 IteratorStep(iterator)\r\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\r\n        function IteratorStep(iterator) {\r\n            var result = iterator.next();\r\n            return result.done ? false : result;\r\n        }\r\n        // 7.4.6 IteratorClose(iterator, completion)\r\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\r\n        function IteratorClose(iterator) {\r\n            var f = iterator[\"return\"];\r\n            if (f)\r\n                f.call(iterator);\r\n        }\r\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\r\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\r\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\r\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\r\n        function OrdinaryGetPrototypeOf(O) {\r\n            var proto = Object.getPrototypeOf(O);\r\n            if (typeof O !== \"function\" || O === functionPrototype)\r\n                return proto;\r\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\r\n            // Try to determine the superclass constructor. Compatible implementations\r\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\r\n            // or ensure each class has a valid `constructor` property on its prototype that\r\n            // points back to the constructor.\r\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\r\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\r\n            if (proto !== functionPrototype)\r\n                return proto;\r\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\r\n            var prototype = O.prototype;\r\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\r\n            if (prototypeProto == null || prototypeProto === Object.prototype)\r\n                return proto;\r\n            // If the constructor was not a function, then we cannot determine the heritage.\r\n            var constructor = prototypeProto.constructor;\r\n            if (typeof constructor !== \"function\")\r\n                return proto;\r\n            // If we have some kind of self-reference, then we cannot determine the heritage.\r\n            if (constructor === O)\r\n                return proto;\r\n            // we have a pretty good guess at the heritage.\r\n            return constructor;\r\n        }\r\n        // naive Map shim\r\n        function CreateMapPolyfill() {\r\n            var cacheSentinel = {};\r\n            var arraySentinel = [];\r\n            var MapIterator = (function () {\r\n                function MapIterator(keys, values, selector) {\r\n                    this._index = 0;\r\n                    this._keys = keys;\r\n                    this._values = values;\r\n                    this._selector = selector;\r\n                }\r\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\r\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\r\n                MapIterator.prototype.next = function () {\r\n                    var index = this._index;\r\n                    if (index >= 0 && index < this._keys.length) {\r\n                        var result = this._selector(this._keys[index], this._values[index]);\r\n                        if (index + 1 >= this._keys.length) {\r\n                            this._index = -1;\r\n                            this._keys = arraySentinel;\r\n                            this._values = arraySentinel;\r\n                        }\r\n                        else {\r\n                            this._index++;\r\n                        }\r\n                        return { value: result, done: false };\r\n                    }\r\n                    return { value: undefined, done: true };\r\n                };\r\n                MapIterator.prototype.throw = function (error) {\r\n                    if (this._index >= 0) {\r\n                        this._index = -1;\r\n                        this._keys = arraySentinel;\r\n                        this._values = arraySentinel;\r\n                    }\r\n                    throw error;\r\n                };\r\n                MapIterator.prototype.return = function (value) {\r\n                    if (this._index >= 0) {\r\n                        this._index = -1;\r\n                        this._keys = arraySentinel;\r\n                        this._values = arraySentinel;\r\n                    }\r\n                    return { value: value, done: true };\r\n                };\r\n                return MapIterator;\r\n            }());\r\n            return (function () {\r\n                function Map() {\r\n                    this._keys = [];\r\n                    this._values = [];\r\n                    this._cacheKey = cacheSentinel;\r\n                    this._cacheIndex = -2;\r\n                }\r\n                Object.defineProperty(Map.prototype, \"size\", {\r\n                    get: function () { return this._keys.length; },\r\n                    enumerable: true,\r\n                    configurable: true\r\n                });\r\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\r\n                Map.prototype.get = function (key) {\r\n                    var index = this._find(key, /*insert*/ false);\r\n                    return index >= 0 ? this._values[index] : undefined;\r\n                };\r\n                Map.prototype.set = function (key, value) {\r\n                    var index = this._find(key, /*insert*/ true);\r\n                    this._values[index] = value;\r\n                    return this;\r\n                };\r\n                Map.prototype.delete = function (key) {\r\n                    var index = this._find(key, /*insert*/ false);\r\n                    if (index >= 0) {\r\n                        var size = this._keys.length;\r\n                        for (var i = index + 1; i < size; i++) {\r\n                            this._keys[i - 1] = this._keys[i];\r\n                            this._values[i - 1] = this._values[i];\r\n                        }\r\n                        this._keys.length--;\r\n                        this._values.length--;\r\n                        if (key === this._cacheKey) {\r\n                            this._cacheKey = cacheSentinel;\r\n                            this._cacheIndex = -2;\r\n                        }\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                };\r\n                Map.prototype.clear = function () {\r\n                    this._keys.length = 0;\r\n                    this._values.length = 0;\r\n                    this._cacheKey = cacheSentinel;\r\n                    this._cacheIndex = -2;\r\n                };\r\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\r\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\r\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\r\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\r\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\r\n                Map.prototype._find = function (key, insert) {\r\n                    if (this._cacheKey !== key) {\r\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\r\n                    }\r\n                    if (this._cacheIndex < 0 && insert) {\r\n                        this._cacheIndex = this._keys.length;\r\n                        this._keys.push(key);\r\n                        this._values.push(undefined);\r\n                    }\r\n                    return this._cacheIndex;\r\n                };\r\n                return Map;\r\n            }());\r\n            function getKey(key, _) {\r\n                return key;\r\n            }\r\n            function getValue(_, value) {\r\n                return value;\r\n            }\r\n            function getEntry(key, value) {\r\n                return [key, value];\r\n            }\r\n        }\r\n        // naive Set shim\r\n        function CreateSetPolyfill() {\r\n            return (function () {\r\n                function Set() {\r\n                    this._map = new _Map();\r\n                }\r\n                Object.defineProperty(Set.prototype, \"size\", {\r\n                    get: function () { return this._map.size; },\r\n                    enumerable: true,\r\n                    configurable: true\r\n                });\r\n                Set.prototype.has = function (value) { return this._map.has(value); };\r\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\r\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\r\n                Set.prototype.clear = function () { this._map.clear(); };\r\n                Set.prototype.keys = function () { return this._map.keys(); };\r\n                Set.prototype.values = function () { return this._map.values(); };\r\n                Set.prototype.entries = function () { return this._map.entries(); };\r\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\r\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\r\n                return Set;\r\n            }());\r\n        }\r\n        // naive WeakMap shim\r\n        function CreateWeakMapPolyfill() {\r\n            var UUID_SIZE = 16;\r\n            var keys = HashMap.create();\r\n            var rootKey = CreateUniqueKey();\r\n            return (function () {\r\n                function WeakMap() {\r\n                    this._key = CreateUniqueKey();\r\n                }\r\n                WeakMap.prototype.has = function (target) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\r\n                };\r\n                WeakMap.prototype.get = function (target) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\r\n                };\r\n                WeakMap.prototype.set = function (target, value) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\r\n                    table[this._key] = value;\r\n                    return this;\r\n                };\r\n                WeakMap.prototype.delete = function (target) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                    return table !== undefined ? delete table[this._key] : false;\r\n                };\r\n                WeakMap.prototype.clear = function () {\r\n                    // NOTE: not a real clear, just makes the previous data unreachable\r\n                    this._key = CreateUniqueKey();\r\n                };\r\n                return WeakMap;\r\n            }());\r\n            function CreateUniqueKey() {\r\n                var key;\r\n                do\r\n                    key = \"@@WeakMap@@\" + CreateUUID();\r\n                while (HashMap.has(keys, key));\r\n                keys[key] = true;\r\n                return key;\r\n            }\r\n            function GetOrCreateWeakMapTable(target, create) {\r\n                if (!hasOwn.call(target, rootKey)) {\r\n                    if (!create)\r\n                        return undefined;\r\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\r\n                }\r\n                return target[rootKey];\r\n            }\r\n            function FillRandomBytes(buffer, size) {\r\n                for (var i = 0; i < size; ++i)\r\n                    buffer[i] = Math.random() * 0xff | 0;\r\n                return buffer;\r\n            }\r\n            function GenRandomBytes(size) {\r\n                if (typeof Uint8Array === \"function\") {\r\n                    if (typeof crypto !== \"undefined\")\r\n                        return crypto.getRandomValues(new Uint8Array(size));\r\n                    if (typeof msCrypto !== \"undefined\")\r\n                        return msCrypto.getRandomValues(new Uint8Array(size));\r\n                    return FillRandomBytes(new Uint8Array(size), size);\r\n                }\r\n                return FillRandomBytes(new Array(size), size);\r\n            }\r\n            function CreateUUID() {\r\n                var data = GenRandomBytes(UUID_SIZE);\r\n                // mark as random - RFC 4122  4.4\r\n                data[6] = data[6] & 0x4f | 0x40;\r\n                data[8] = data[8] & 0xbf | 0x80;\r\n                var result = \"\";\r\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\r\n                    var byte = data[offset];\r\n                    if (offset === 4 || offset === 6 || offset === 8)\r\n                        result += \"-\";\r\n                    if (byte < 16)\r\n                        result += \"0\";\r\n                    result += byte.toString(16).toLowerCase();\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\r\n        function MakeDictionary(obj) {\r\n            obj.__ = undefined;\r\n            delete obj.__;\r\n            return obj;\r\n        }\r\n    });\r\n})(Reflect || (Reflect = {}));\r\n//# sourceMappingURL=Reflect.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/reflect-metadata/Reflect.js\n// module id = ../heroprotocol/node_modules/reflect-metadata/Reflect.js\n// module chunks = main","(function() {\n  var crypt = require('crypt'),\n      utf8 = require('charenc').utf8,\n      bin = require('charenc').bin,\n\n  // The core\n  sha1 = function (message) {\n    // Convert to byte array\n    if (message.constructor == String)\n      message = utf8.stringToBytes(message);\n    else if (typeof Buffer !== 'undefined' && typeof Buffer.isBuffer == 'function' && Buffer.isBuffer(message))\n      message = Array.prototype.slice.call(message, 0);\n    else if (!Array.isArray(message))\n      message = message.toString();\n\n    // otherwise assume byte array\n\n    var m  = crypt.bytesToWords(message),\n        l  = message.length * 8,\n        w  = [],\n        H0 =  1732584193,\n        H1 = -271733879,\n        H2 = -1732584194,\n        H3 =  271733878,\n        H4 = -1009589776;\n\n    // Padding\n    m[l >> 5] |= 0x80 << (24 - l % 32);\n    m[((l + 64 >>> 9) << 4) + 15] = l;\n\n    for (var i = 0; i < m.length; i += 16) {\n      var a = H0,\n          b = H1,\n          c = H2,\n          d = H3,\n          e = H4;\n\n      for (var j = 0; j < 80; j++) {\n\n        if (j < 16)\n          w[j] = m[i + j];\n        else {\n          var n = w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16];\n          w[j] = (n << 1) | (n >>> 31);\n        }\n\n        var t = ((H0 << 5) | (H0 >>> 27)) + H4 + (w[j] >>> 0) + (\n                j < 20 ? (H1 & H2 | ~H1 & H3) + 1518500249 :\n                j < 40 ? (H1 ^ H2 ^ H3) + 1859775393 :\n                j < 60 ? (H1 & H2 | H1 & H3 | H2 & H3) - 1894007588 :\n                         (H1 ^ H2 ^ H3) - 899497514);\n\n        H4 = H3;\n        H3 = H2;\n        H2 = (H1 << 30) | (H1 >>> 2);\n        H1 = H0;\n        H0 = t;\n      }\n\n      H0 += a;\n      H1 += b;\n      H2 += c;\n      H3 += d;\n      H4 += e;\n    }\n\n    return [H0, H1, H2, H3, H4];\n  },\n\n  // Public API\n  api = function (message, options) {\n    var digestbytes = crypt.wordsToBytes(sha1(message));\n    return options && options.asBytes ? digestbytes :\n        options && options.asString ? bin.bytesToString(digestbytes) :\n        crypt.bytesToHex(digestbytes);\n  };\n\n  api._blocksize = 16;\n  api._digestsize = 20;\n\n  module.exports = api;\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../heroprotocol/node_modules/sha1/sha1.js\n// module id = ../heroprotocol/node_modules/sha1/sha1.js\n// module chunks = main","var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale recursive ^\\\\.\\\\/.*$\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/moment/locale ^\\.\\/.*$\n// module id = ./node_modules/moment/locale recursive ^\\.\\/.*$\n// module chunks = main","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/$$_lazy_route_resource lazy\n// module id = ./src/$$_lazy_route_resource lazy recursive\n// module chunks = main","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { environment } from '../environments/environment';\r\nimport { ReplayViewerComponent } from './replay-viewer/replay-viewer.component';\r\nconst appRoutes: Routes = [\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        RouterModule.forRoot(\r\n            appRoutes,\r\n            { enableTracing: !environment.production } // <-- debugging purposes only\r\n        )\r\n    ],\r\n    exports: [\r\n        RouterModule\r\n    ]\r\n})\r\nexport class AppRoutingModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app-routing.module.ts","module.exports = \"<router-outlet></router-outlet>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = ./src/app/app.component.html\n// module chunks = main","module.exports = \":host {\\n  display: block;\\n  width: 100%;\\n  height: 100%; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.scss\n// module id = ./src/app/app.component.scss\n// module chunks = main","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'app';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { HeroProtocol } from '@heroesbrowser/heroprotocol';\nimport { environment } from '../environments/environment';\nimport { AppComponent } from './app.component';\nimport { ReplayViewerModule } from './replay-viewer/replay-viewer.module';\nimport { AppRoutingModule } from './app-routing.module';\nHeroProtocol.env = environment.production ? 'production' : 'developement';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    ReplayViewerModule,\n    AppRoutingModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/components/hero-icon/hero-icon.component.html\n// module id = ./src/app/replay-viewer/components/hero-icon/hero-icon.component.html\n// module chunks = main","module.exports = \":host {\\n  display: block;\\n  position: relative; }\\n  :host ::ng-deep canvas, :host ::ng-deep img {\\n    z-index: 1;\\n    width: 100%;\\n    height: 100%; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/components/hero-icon/hero-icon.component.scss\n// module id = ./src/app/replay-viewer/components/hero-icon/hero-icon.component.scss\n// module chunks = main","import { Component, Input, OnChanges, ChangeDetectionStrategy, SimpleChanges, Renderer2, ElementRef } from '@angular/core';\nimport { ClipIconService, ClipMethod } from '../../services/clip-icon/clip-icon.service';\n@Component({\n  selector: 'hero-icon',\n  templateUrl: './hero-icon.component.html',\n  styleUrls: ['./hero-icon.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class HeroIconComponent implements OnChanges {\n\n  private _shape: ClipMethod = ClipMethod.CIRCLE;\n\n  @Input()\n  private hero: string;\n  private _heroImage: HTMLCanvasElement | HTMLImageElement;\n\n  @Input()\n  public get shape(): ClipMethod | string | number {\n    return this._shape;\n  }\n\n  public set shape(value: ClipMethod | string | number) {\n    if (typeof value === 'string') {\n      this._shape = ClipMethod[value.toUpperCase()];\n    } else {\n      this._shape = value;\n    }\n  }\n\n  public get heroImage(): HTMLCanvasElement | HTMLImageElement {\n    return this._heroImage;\n  }\n\n  constructor(private clipIconService: ClipIconService,\n    private renderer: Renderer2,\n    private elementRef: ElementRef\n  ) { }\n\n  public ngOnChanges(changes: SimpleChanges): void {\n    if (changes.hero || changes.shape) {\n      if (this.hero) {\n        this.clipHeroImage();\n        console.log(this.heroImage);\n      }\n    }\n  }\n\n\n  private async clipHeroImage() {\n    this._heroImage = await this.clipIconService.loadAndClip(\n      '//d1i1jxrdh2kvwy.cloudfront.net/Images/Heroes/Portraits/' + this.cleanName(this.hero) + '.png',\n      48, 48, this._shape\n    );\n    this.renderer.appendChild(this.elementRef.nativeElement, this.heroImage);\n  }\n\n  public cleanName(name: string): string {\n    return name.replace(/[^\\w\\d]/g, '').replace(//g, '%C3%BA');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/replay-viewer/components/hero-icon/hero-icon.component.ts","module.exports = \"<div class=\\\"team team1\\\">\\n  <div class=\\\"winner\\\" [style.visibility]=\\\"replayDescription?.winningTeam === 0 ? 'visible' : 'hidden'\\\">Winner</div>\\n  <div class=\\\"players\\\">\\n    <hero-icon *ngFor=\\\"let player of team1Players\\\" class=\\\"player\\\" [hero]=\\\"player.hero\\\">\\n      {{cleanName(player.hero)}}\\n    </hero-icon>\\n  </div>\\n</div>\\n<div class=\\\"map\\\">\\n  <div>\\n    <div class=\\\"mode\\\">{{gameMode}}</div>\\n    <div class=\\\"name\\\">{{replayDescription.mapName}}</div>\\n  </div>\\n  <div class=\\\"date\\\">{{replayDescription.playedOn | date:'MMMM d, yyy - hh:mm a'}} - {{gameDuration}}</div>\\n</div>\\n<div class=\\\"team team2\\\">\\n  <div class=\\\"winner\\\" [style.visibility]=\\\"replayDescription?.winningTeam === 1 ? 'visible' : 'hidden'\\\">Winner</div>\\n  <div class=\\\"players\\\">\\n    <hero-icon *ngFor=\\\"let player of team2Players\\\" class=\\\"player\\\" [hero]=\\\"player.hero\\\">\\n      {{cleanName(player.hero)}}\\n    </hero-icon>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/components/replay-header/replay-header.component.html\n// module id = ./src/app/replay-viewer/components/replay-header/replay-header.component.html\n// module chunks = main","module.exports = \":host {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  padding: 16px;\\n  padding-bottom: 24px;\\n  background-repeat: repeat-x, repeat-x, no-repeat;\\n  background-size: auto auto, auto auto, 100% auto;\\n  background: -webkit-gradient(linear, left top, left bottom, from(rgba(13, 1, 25, 0)), to(#0d0119)), url(https://us.battle.net/heroes/static/images/heroes-2/nav-top-pattern.png), url(\\\"https://us.battle.net/heroes/static/images/game/Overview/TheBasics/BasicsBackground.jpg\\\");\\n  background: linear-gradient(rgba(13, 1, 25, 0), #0d0119), url(https://us.battle.net/heroes/static/images/heroes-2/nav-top-pattern.png), url(\\\"https://us.battle.net/heroes/static/images/game/Overview/TheBasics/BasicsBackground.jpg\\\");\\n  background-position: 0px 0px, 0px 0px, center 0px; }\\n  :host.battlefield-of-eternity {\\n    background: -webkit-gradient(linear, left top, left bottom, from(rgba(13, 1, 25, 0)), to(#0d0119)), url(https://us.battle.net/heroes/static/images/heroes-2/nav-top-pattern.png), url(\\\"https://us.battle.net/heroes/static/images/battlegrounds/battlefield-of-eternity/front-1940.jpg\\\");\\n    background: linear-gradient(rgba(13, 1, 25, 0), #0d0119), url(https://us.battle.net/heroes/static/images/heroes-2/nav-top-pattern.png), url(\\\"https://us.battle.net/heroes/static/images/battlegrounds/battlefield-of-eternity/front-1940.jpg\\\");\\n    background-position: 0px 0px, 0px 0px, center -40px; }\\n  :host.towers-of-doom {\\n    background: -webkit-gradient(linear, left top, left bottom, from(rgba(13, 1, 25, 0)), to(#0d0119)), url(https://us.battle.net/heroes/static/images/heroes-2/nav-top-pattern.png), url(\\\"https://us.battle.net/heroes/static/images/battlegrounds/towers-of-doom/front-1940.jpg\\\");\\n    background: linear-gradient(rgba(13, 1, 25, 0), #0d0119), url(https://us.battle.net/heroes/static/images/heroes-2/nav-top-pattern.png), url(\\\"https://us.battle.net/heroes/static/images/battlegrounds/towers-of-doom/front-1940.jpg\\\");\\n    background-position: 0px 0px, 0px 0px, center -10px; }\\n  :host.cursed-hollow {\\n    background: -webkit-gradient(linear, left top, left bottom, from(rgba(13, 1, 25, 0)), to(#0d0119)), url(https://us.battle.net/heroes/static/images/heroes-2/nav-top-pattern.png), url(\\\"https://us.battle.net/heroes/static/images/battlegrounds/cursed-hollow/front-1940.jpg\\\");\\n    background: linear-gradient(rgba(13, 1, 25, 0), #0d0119), url(https://us.battle.net/heroes/static/images/heroes-2/nav-top-pattern.png), url(\\\"https://us.battle.net/heroes/static/images/battlegrounds/cursed-hollow/front-1940.jpg\\\");\\n    background-position: 0px 0px, 0px 0px, center -110px; }\\n  :host > * {\\n    -webkit-box-flex: 1;\\n        -ms-flex-positive: 1;\\n            flex-grow: 1;\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    -webkit-box-orient: vertical;\\n    -webkit-box-direction: normal;\\n        -ms-flex-direction: column;\\n            flex-direction: column; }\\n  :host > * > * {\\n      -webkit-box-flex: 0;\\n          -ms-flex-positive: 0;\\n              flex-grow: 0;\\n      -ms-flex-item-align: center;\\n          -ms-grid-row-align: center;\\n          align-self: center; }\\n  :host .map .mode {\\n    padding-bottom: 8px; }\\n  :host .map .name {\\n    font-size: 36px;\\n    line-height: 36px;\\n    font-weight: 700;\\n    margin-bottom: 4px;\\n    text-shadow: 0px 0px 2px black, 0px 0px 2px black, 0px 0px 2px black, 0px 0px 24px white, 0px 0px 24px white, 0px 0px 34px white; }\\n  :host .map .date {\\n    padding-top: 8px; }\\n  :host .players {\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    -webkit-box-orient: horizontal;\\n    -webkit-box-direction: normal;\\n        -ms-flex-direction: row;\\n            flex-direction: row; }\\n  :host .players .player {\\n      width: 48px;\\n      height: 48px;\\n      border-radius: 50%;\\n      margin-left: 3px;\\n      margin-right: 3px; }\\n  :host .team .winner {\\n    padding: 8px;\\n    font-size: 16px;\\n    font-weight: 700; }\\n  :host .team1 .player {\\n    border: 2px solid navy;\\n    -webkit-box-shadow: 0px 0px 8px blue;\\n            box-shadow: 0px 0px 8px blue; }\\n  :host .team1 .winner {\\n    text-shadow: 0px 0px 18px blue, 0px 0px 18px blue, 0px 0px 18px blue; }\\n  :host .team2 .player {\\n    border: 2px solid maroon;\\n    -webkit-box-shadow: 0px 0px 8px red;\\n            box-shadow: 0px 0px 8px red; }\\n  :host .team2 .winner {\\n    text-shadow: 0px 0px 18px red, 0px 0px 18px red, 0px 0px 18px red; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/components/replay-header/replay-header.component.scss\n// module id = ./src/app/replay-viewer/components/replay-header/replay-header.component.scss\n// module chunks = main","import { Component, OnInit, Input, HostBinding } from '@angular/core';\nimport { ReplayDescription, GameType, BasicPlayerData } from '@heroesbrowser/heroprotocol';\nimport * as linq from 'linq';\nimport { paramCase } from 'change-case';\nimport { duration } from 'moment';\n\n@Component({\n  selector: 'replay-header',\n  templateUrl: './replay-header.component.html',\n  styleUrls: ['./replay-header.component.scss']\n})\nexport class ReplayHeaderComponent implements OnInit {\n  private _replayDescription: ReplayDescription;\n  public gameMode: string;\n  public gameDuration: string;\n  public team1Players: BasicPlayerData[];\n  public team2Players: BasicPlayerData[];\n  @HostBinding('class')\n  private mapClass: string[] = [];\n\n  @Input()\n  public get replayDescription(): ReplayDescription {\n    return this._replayDescription;\n  }\n  public set replayDescription(desc: ReplayDescription) {\n    this._replayDescription = desc;\n\n    this.mapClass = [paramCase(desc.mapName)];\n    console.log(desc);\n    this.gameMode = GameType[desc.gameType];\n\n    const dur = duration(desc.gameDuration, 's');\n    const min = Math.floor(dur.asMinutes());\n    const sec = ('' + Math.floor(dur.subtract(min, 'm').asSeconds())).padStart(2, '0');\n    this.gameDuration = min + 'm ' + sec + 's';\n\n    this.team1Players = linq.from(desc.players).where(p => p.team === 0).toArray();\n    this.team2Players = linq.from(desc.players).where(p => p.team === 1).toArray();\n  }\n\n  public cleanName(name: string): string {\n    return name.replace(/[^\\w\\d]/g, '');\n  }\n\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/replay-viewer/components/replay-header/replay-header.component.ts","module.exports = \"<label>{{item?.label}}</label>\\n<div class=\\\"children\\\" *ngIf=\\\"item.type === 'section' && item['children']?.length\\\">\\n  <nav-item *ngFor=\\\"let child of item['children']\\\" [item]=\\\"child\\\" [level]=\\\"level + 1\\\"></nav-item>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/components/replay-nav/nav-item/nav-item.component.html\n// module id = ./src/app/replay-viewer/components/replay-nav/nav-item/nav-item.component.html\n// module chunks = main","module.exports = \":host {\\n  display: block; }\\n  :host > label {\\n    display: block; }\\n  :host.section > .children {\\n    padding: 8px; }\\n  :host.section[level=\\\"0\\\"] > label {\\n    font-size: 16px;\\n    font-weight: 500;\\n    padding: 8px;\\n    text-align: center;\\n    text-transform: uppercase;\\n    border-width: 2px;\\n    border-style: solid;\\n    border-top: none;\\n    -o-border-image: linear-gradient(to left, transparent, transparent, aqua, transparent, transparent) 100% 58;\\n       border-image: -webkit-gradient(linear, right top, left top, from(transparent), color-stop(transparent), color-stop(aqua), color-stop(transparent), to(transparent)) 100% 58;\\n       border-image: linear-gradient(to left, transparent, transparent, aqua, transparent, transparent) 100% 58; }\\n  :host.section[level=\\\"0\\\"] > .children {\\n    padding-left: 20px; }\\n  :host.link > label {\\n    padding: 8px; }\\n  :host.link:hover {\\n    background: -webkit-gradient(linear, left top, right top, from(rgba(0, 255, 255, 0.4)), to(rgba(0, 255, 255, 0)));\\n    background: linear-gradient(to right, rgba(0, 255, 255, 0.4), rgba(0, 255, 255, 0)); }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/components/replay-nav/nav-item/nav-item.component.scss\n// module id = ./src/app/replay-viewer/components/replay-nav/nav-item/nav-item.component.scss\n// module chunks = main","import { Component, Input, ChangeDetectionStrategy, OnChanges, SimpleChanges, HostBinding } from '@angular/core';\nimport { IReplayNavItem, IReplayNavItemLink, IReplayNavItemSection } from './IReplayNavItemData';\n\n@Component({\n  selector: 'nav-item',\n  templateUrl: './nav-item.component.html',\n  styleUrls: ['./nav-item.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NavItemComponent implements OnChanges {\n\n  @Input()\n  public item: IReplayNavItemLink | IReplayNavItemSection;\n\n  @Input()\n  @HostBinding('attr.level')\n  public level = 0;\n\n  @HostBinding('class.section')\n  public get isSection(): boolean {\n    return this.item ? this.item.type === 'section' : false;\n  }\n\n  @HostBinding('class.link')\n  public get isLink(): boolean {\n    return this.item ? this.item.type === 'link' : false;\n  }\n\n  constructor() { }\n\n  public ngOnChanges(changes: SimpleChanges): void {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/replay-viewer/components/replay-nav/nav-item/nav-item.component.ts","module.exports = \"\\n<nav-item *ngFor=\\\"let item of navData\\\" [item]=\\\"item\\\"></nav-item>\\n<!--<pre>{{navData | json}}</pre>-->\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/components/replay-nav/replay-nav.component.html\n// module id = ./src/app/replay-viewer/components/replay-nav/replay-nav.component.html\n// module chunks = main","module.exports = \":host {\\n  display: block;\\n  border-width: 2px;\\n  border-style: solid;\\n  border-bottom: none;\\n  -o-border-image: linear-gradient(to left, transparent, transparent, aqua, transparent, transparent) 100% 50;\\n     border-image: -webkit-gradient(linear, right top, left top, from(transparent), color-stop(transparent), color-stop(aqua), color-stop(transparent), to(transparent)) 100% 50;\\n     border-image: linear-gradient(to left, transparent, transparent, aqua, transparent, transparent) 100% 50;\\n  padding-left: 20px;\\n  padding-right: 20px;\\n  min-width: 300px; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/components/replay-nav/replay-nav.component.scss\n// module id = ./src/app/replay-viewer/components/replay-nav/replay-nav.component.scss\n// module chunks = main","import { Component, Input, OnChanges, ChangeDetectionStrategy, SimpleChanges } from '@angular/core';\nimport { ReplayDescription, GameType, BasicPlayerData } from '@heroesbrowser/heroprotocol';\nimport { IReplayNavItem, IReplayNavItemLink, IReplayNavItemSection } from './nav-item/IReplayNavItemData';\n\n@Component({\n  selector: 'replay-nav',\n  templateUrl: './replay-nav.component.html',\n  styleUrls: ['./replay-nav.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ReplayNavComponent implements OnChanges {\n\n  private _replayDescription: ReplayDescription;\n\n  public navData: IReplayNavItem[];\n\n  @Input()\n  public get replayDescription(): ReplayDescription {\n    return this._replayDescription;\n  }\n\n  public set replayDescription(desc: ReplayDescription) {\n    this._replayDescription = desc;\n  }\n\n\n  constructor() { }\n\n  public ngOnChanges(changes: SimpleChanges): void {\n    if (changes.replayDescription) {\n\n      if (this.replayDescription) {\n        this.navData = [];\n        const overview: IReplayNavItemSection = {\n          type: 'section',\n          label: 'Overview',\n          children: []\n        };\n        const scoreScreen: IReplayNavItemLink = {\n          type: 'link',\n          label: 'Score Screen',\n          path: []\n        };\n        overview.children.push(scoreScreen);\n\n        const draft: IReplayNavItemLink = {\n          type: 'link',\n          label: 'Draft',\n          path: []\n        };\n        overview.children.push(draft);\n        this.navData.push(overview);\n      } else {\n        this.navData = undefined;\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/replay-viewer/components/replay-nav/replay-nav.component.ts","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ReplayViewerComponent } from './replay-viewer.component';\r\nimport { ScoreScreenComponent } from './sections/score-screen/score-screen.component';\r\n\r\nconst replayViewerRoutes: Routes = [\r\n    {\r\n        path: '',\r\n        component: ReplayViewerComponent,\r\n        children: [\r\n            {\r\n                path: '',\r\n                component: ScoreScreenComponent\r\n            }\r\n        ]\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        RouterModule.forChild(replayViewerRoutes)\r\n    ],\r\n    exports: [\r\n        RouterModule\r\n    ]\r\n})\r\nexport class ReplayViewerRoutingModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/replay-viewer/replay-viewer-routing.module.ts","module.exports = \"<div class=\\\"upload-container\\\" [class.loaded]=\\\"fileState === FileState.LOADED\\\" [class.drag]=\\\"fileState == FileState.DRAGGING\\\"\\n  [class.loading]=\\\"fileState == FileState.LOADING\\\" [class.parsing]=\\\"fileState == FileState.PARSING\\\">\\n  <div class=\\\"upload\\\">\\n    <input #fileInput type=\\\"file\\\" id=\\\"file\\\" (change)=\\\"handleFileSelected($event)\\\" />\\n    <label for=\\\"file\\\">\\n      <div>\\n        <strong>Load Replay</strong>\\n        <span class=\\\"dragndrop\\\"> or drag it here</span>\\n        <div class=\\\"status\\\">{{FileState[fileState]}}</div>\\n      </div>\\n      <mat-progress-bar mode=\\\"indeterminate\\\" *ngIf=\\\"fileState == FileState.LOADING || fileState == FileState.PARSING\\\"></mat-progress-bar>\\n    </label>\\n  </div>\\n</div>\\n<div class=\\\"viewer-container\\\" *ngIf=\\\"replayDescription\\\">\\n  <replay-header [replayDescription]=\\\"replayDescription\\\"></replay-header>\\n  <mat-sidenav-container>\\n    <mat-sidenav mode=\\\"side\\\" opened=\\\"true\\\">\\n      <replay-nav [replayDescription]=\\\"replayDescription\\\"></replay-nav>\\n    </mat-sidenav>\\n    <mat-sidenav-content>\\n      <router-outlet></router-outlet>\\n    </mat-sidenav-content>\\n  </mat-sidenav-container>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/replay-viewer.component.html\n// module id = ./src/app/replay-viewer/replay-viewer.component.html\n// module chunks = main","module.exports = \":host {\\n  display: block;\\n  width: 100%;\\n  height: 100%;\\n  background-color: #0d0119; }\\n  :host .upload-container {\\n    position: fixed;\\n    top: 0px;\\n    left: 0px;\\n    width: 100vw;\\n    height: 100vh;\\n    z-index: 5;\\n    background-color: navy;\\n    padding: 30px; }\\n  :host .upload-container.drag .upload {\\n      border: 1px dotted darkturquoise; }\\n  :host .upload-container .upload {\\n      width: 100%;\\n      height: 100%;\\n      border: 1px dashed darkturquoise; }\\n  :host .upload-container .upload input {\\n        display: none; }\\n  :host .upload-container .upload label {\\n        display: -webkit-box;\\n        display: -ms-flexbox;\\n        display: flex;\\n        -webkit-box-orient: vertical;\\n        -webkit-box-direction: normal;\\n            -ms-flex-direction: column;\\n                flex-direction: column;\\n        width: 100%;\\n        height: 100%;\\n        background-color: rgba(255, 255, 255, 0.2);\\n        -webkit-box-align: center;\\n            -ms-flex-align: center;\\n                align-items: center;\\n        -webkit-box-pack: center;\\n            -ms-flex-pack: center;\\n                justify-content: center; }\\n  :host .upload-container .upload label > div {\\n          text-align: center; }\\n  :host .upload-container .upload label .mat-progress-bar {\\n          width: 30%;\\n          display: block; }\\n  :host .upload-container.loaded {\\n      position: absolute;\\n      right: 0px;\\n      left: auto;\\n      width: auto;\\n      height: auto;\\n      padding: 4px; }\\n  :host .upload-container.loaded .upload {\\n        width: auto;\\n        height: auto; }\\n  :host .upload-container.loaded .upload label {\\n          padding: 4px;\\n          width: auto;\\n          height: auto; }\\n  :host .upload-container.loaded .upload label .status,\\n          :host .upload-container.loaded .upload label .dragndrop {\\n            display: none; }\\n  :host .viewer-container {\\n    min-height: 100%;\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    -webkit-box-orient: vertical;\\n    -webkit-box-direction: normal;\\n        -ms-flex-direction: column;\\n            flex-direction: column;\\n    -ms-flex-line-pack: stretch;\\n        align-content: stretch; }\\n  :host .viewer-container > .mat-sidenav-container {\\n      -webkit-box-flex: 1;\\n          -ms-flex-positive: 1;\\n              flex-grow: 1;\\n      background-color: #0d0119; }\\n  :host .viewer-container > .mat-sidenav-container .mat-sidenav {\\n        background-color: #0d0119;\\n        border-width: 1px;\\n        border-style: solid;\\n        border: none;\\n        border-right: solid;\\n        -o-border-image: linear-gradient(to bottom, transparent, transparent, rgba(138, 43, 226, 0.4), transparent, transparent) 200 100%;\\n           border-image: -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(transparent), color-stop(rgba(138, 43, 226, 0.4)), color-stop(transparent), to(transparent)) 200 100%;\\n           border-image: linear-gradient(to bottom, transparent, transparent, rgba(138, 43, 226, 0.4), transparent, transparent) 200 100%; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/replay-viewer.component.scss\n// module id = ./src/app/replay-viewer/replay-viewer.component.scss\n// module chunks = main","import {\n  Component,\n  OnInit,\n  HostListener,\n  ViewChild,\n  ElementRef,\n  Renderer2,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  EventEmitter\n} from '@angular/core';\n\nimport { Replay, BasicReplayAnalyser, ReplayDescription } from '@heroesbrowser/heroprotocol';\n\nenum FileState {\n  NONE,\n  DRAGGING,\n  LOADING,\n  PARSING,\n  LOADED\n}\n\n@Component({\n  selector: 'replay-viewer',\n  templateUrl: './replay-viewer.component.html',\n  styleUrls: ['./replay-viewer.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ReplayViewerComponent implements OnInit {\n  public FileState = FileState;\n  private _fileState: FileState = FileState.NONE;\n  public onReplayLoaded: EventEmitter<Replay> = new EventEmitter();\n\n  public replay: Replay;\n  private basicReplayAnalyser: BasicReplayAnalyser;\n\n  @ViewChild('fileInput')\n  private fileInputRef: ElementRef;\n\n\n  public replayDescription: ReplayDescription;\n\n  constructor(\n    private renderer: Renderer2,\n    private elmRef: ElementRef,\n    private changeDetectorRef: ChangeDetectorRef\n  ) { }\n\n  public get fileState(): FileState {\n    return this._fileState;\n  }\n\n  public set fileState(value: FileState) {\n    if (this._fileState !== value) {\n      this._fileState = value;\n      this.changeDetectorRef.markForCheck();\n    }\n  }\n\n  ngOnInit() {\n  }\n\n  @HostListener('dragstart', ['$event'])\n  public handleDragStart(event: DragEvent) {\n    return false;\n  }\n\n  @HostListener('dragover', ['$event'])\n  public handleDragOver(event: DragEvent) {\n    return false;\n  }\n\n  @HostListener('dragleave', ['$event'])\n  public handleDragLeave(event: DragEvent) {\n    console.log('dragleave', event);\n    if (!(<HTMLElement>this.elmRef.nativeElement).contains(event.fromElement)) {\n      console.log('handleDragLeave', event);\n      this.fileState = this.replay ? FileState.LOADED : FileState.NONE;\n      return false;\n    }\n  }\n\n  @HostListener('dragenter', ['$event'])\n  public handleDragEnter(event: DragEvent) {\n    this.fileState = FileState.DRAGGING;\n    return false;\n  }\n\n  @HostListener('drop', ['$event'])\n  public handleDrop(event: DragEvent) {\n    this.renderer.setProperty(this.fileInputRef.nativeElement, 'files', event.dataTransfer.files);\n    return false;\n  }\n\n  public handleFileSelected(event: Event) {\n    const fileList = (<HTMLInputElement>event.target).files;\n    const file = fileList[0];\n    if (file) {\n      if (file.name.endsWith('.StormReplay')) {\n        const fileReader = new FileReader();\n        fileReader.onload = (evt: ProgressEvent) => {\n          this.handleReplayLoaded(fileReader.result);\n        };\n        fileReader.onerror = (evt) => {\n          console.log('onerror', evt);\n        };\n        fileReader.onabort = (evt: ProgressEvent) => {\n          console.log('onabort', evt);\n        };\n        fileReader.onloadstart = (evt: ProgressEvent) => {\n          this.fileState = FileState.LOADING;\n        };\n        fileReader.onloadend = (evt: ProgressEvent) => {\n          this.renderer.setProperty(this.fileInputRef.nativeElement, 'value', '');\n        };\n        fileReader.readAsArrayBuffer(file);\n      }\n    }\n  }\n\n  public async handleReplayLoaded(replayData: ArrayBuffer) {\n    this.fileState = FileState.PARSING;\n    if (this.replay) {\n      this.replay.dispose();\n    }\n    this.replay = new Replay(replayData);\n    this.basicReplayAnalyser = new BasicReplayAnalyser(this.replay);\n    this.replayDescription = await this.basicReplayAnalyser.replayDescription;\n    setTimeout(() => {\n      this.fileState = FileState.LOADED;\n      this.onReplayLoaded.next(this.replay);\n    }, 0);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/replay-viewer/replay-viewer.component.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReplayViewerComponent } from './replay-viewer.component';\nimport { ReplayHeaderComponent } from './components/replay-header/replay-header.component';\nimport { HeroIconComponent } from './components/hero-icon/hero-icon.component';\nimport { ClipIconService } from './services/clip-icon/clip-icon.service';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { ReplayNavComponent } from './components/replay-nav/replay-nav.component';\nimport { NavItemComponent } from './components/replay-nav/nav-item/nav-item.component';\nimport { ReplayViewerRoutingModule } from './replay-viewer-routing.module';\nimport { ScoreScreenComponent } from './sections/score-screen/score-screen.component';\nimport {\n  MatSidenavModule,\n  MatProgressBarModule,\n  MatTableModule,\n  MatSortModule\n} from '@angular/material';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    BrowserAnimationsModule,\n    MatSidenavModule,\n    MatProgressBarModule,\n    MatTableModule,\n    MatSortModule,\n    ReplayViewerRoutingModule\n  ],\n  exports: [\n    ReplayViewerComponent\n  ],\n  declarations: [\n    ReplayViewerComponent,\n    ReplayHeaderComponent,\n    HeroIconComponent,\n    ReplayNavComponent,\n    NavItemComponent,\n    ScoreScreenComponent\n  ],\n  providers: [ClipIconService]\n})\nexport class ReplayViewerModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/replay-viewer/replay-viewer.module.ts","module.exports = \"<mat-table #table class=\\\"score-table\\\" [dataSource]=\\\"dataSource\\\" matSort>\\n  <ng-container matColumnDef=\\\"hero\\\">\\n    <mat-header-cell *matHeaderCellDef></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\" style=\\\"overflow:visible;\\\">\\n      <div class=\\\"player-cell\\\">\\n        <hero-icon [hero]=\\\"player.hero\\\" shape=\\\"none\\\"></hero-icon>\\n        <div class=\\\"icon-overlay\\\"></div>\\n        <div class=\\\"name\\\">\\n          <div class=\\\"hero-name\\\">{{player.hero}}</div>\\n          <div class=\\\"player-name\\\">{{player.name}}</div>\\n        </div>\\n      </div>\\n    </mat-cell>\\n  </ng-container>\\n  <ng-container matColumnDef=\\\"award\\\">\\n    <mat-header-cell *matHeaderCellDef></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\"></mat-cell>\\n  </ng-container>\\n  <ng-container matColumnDef=\\\"kills\\\">\\n    <mat-header-cell *matHeaderCellDef mat-sort-header><div class=\\\"icon\\\"></div></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\" [class.best]=\\\"isBest('SoloKill', player)\\\" [class.best-team]=\\\"isBest('SoloKill', player, player.team)\\\">{{player.scores.SoloKill}}</mat-cell>\\n  </ng-container>\\n  <ng-container matColumnDef=\\\"assists\\\">\\n    <mat-header-cell *matHeaderCellDef mat-sort-header><div class=\\\"icon\\\"></div></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\" [class.best]=\\\"isBest('Assists', player)\\\" [class.best-team]=\\\"isBest('Assists', player, player.team)\\\">{{player.scores.Assists}}</mat-cell>\\n  </ng-container>\\n  <ng-container matColumnDef=\\\"deaths\\\">\\n    <mat-header-cell *matHeaderCellDef mat-sort-header><div class=\\\"icon\\\"></div></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\" [class.best]=\\\"isBest('Deaths', player)\\\" [class.best-team]=\\\"isBest('Deaths', player, player.team)\\\">\\n      {{player.scores.Deaths}} </mat-cell>\\n  </ng-container>\\n  <ng-container matColumnDef=\\\"siegeDamage\\\">\\n    <mat-header-cell *matHeaderCellDef mat-sort-header><div class=\\\"icon\\\"></div></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\" [class.best]=\\\"isBest('SiegeDamage', player)\\\" [class.best-team]=\\\"isBest('SiegeDamage', player, player.team)\\\">\\n      {{player.scores.SiegeDamage | number}} </mat-cell>\\n  </ng-container>\\n  <ng-container matColumnDef=\\\"heroDamage\\\">\\n    <mat-header-cell *matHeaderCellDef mat-sort-header><div class=\\\"icon\\\"></div></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\" [class.best]=\\\"isBest('HeroDamage', player)\\\" [class.best-team]=\\\"isBest('HeroDamage', player, player.team)\\\">\\n      {{player.scores.HeroDamage | number}} </mat-cell>\\n  </ng-container>\\n  <ng-container matColumnDef=\\\"healing\\\">\\n    <mat-header-cell *matHeaderCellDef mat-sort-header><div class=\\\"icon\\\"></div></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\" [class.best]=\\\"isBest('Healing', player)\\\" [class.best-team]=\\\"isBest('Healing', player, player.team)\\\">\\n      {{(player.scores.Healing || '') | number}} </mat-cell>\\n  </ng-container>\\n  <ng-container matColumnDef=\\\"damageTaken\\\">\\n    <mat-header-cell *matHeaderCellDef mat-sort-header><div class=\\\"icon\\\"></div></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\" [class.best]=\\\"isBest('DamageTaken', player)\\\" [class.best-team]=\\\"isBest('DamageTaken', player, player.team)\\\">\\n      {{(player.scores.DamageTaken || '') | number}} </mat-cell>\\n  </ng-container>\\n  <ng-container matColumnDef=\\\"xp\\\">\\n    <mat-header-cell *matHeaderCellDef mat-sort-header><div class=\\\"icon\\\"></div></mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let player\\\" [class.best]=\\\"isBest('ExperienceContribution', player)\\\" [class.best-team]=\\\"isBest('ExperienceContribution', player, player.team)\\\">\\n      {{player.scores.ExperienceContribution | number}} </mat-cell>\\n  </ng-container>\\n  <mat-header-row *matHeaderRowDef=\\\"displayCols\\\"></mat-header-row>\\n  <mat-row *matRowDef=\\\"let player; columns: displayCols\\\" [class.team1]=\\\"player.team === 0\\\" [class.team2]=\\\"player.team === 1\\\"></mat-row>\\n</mat-table>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/sections/score-screen/score-screen.component.html\n// module id = ./src/app/replay-viewer/sections/score-screen/score-screen.component.html\n// module chunks = main","module.exports = \":host {\\n  display: block;\\n  padding: 40px; }\\n  :host mat-table {\\n    /*.mat-column-hero {\\r\\n      display: flex;\\r\\n      hero-icon {\\r\\n        left: -25px;\\r\\n        padding-left: 10px;\\r\\n        width: 74px;\\r\\n        height: 64px\\r\\n      }\\r\\n    }*/ }\\n  :host mat-table .best-team {\\n      font-weight: 500; }\\n  :host mat-table .best {\\n      font-weight: 700; }\\n  :host mat-table .team1 {\\n      /*.mat-column-hero {\\r\\n        hero-icon {\\r\\n          background-color: blue;\\r\\n        }\\r\\n      }*/ }\\n  :host mat-table .team2 {\\n      /* .mat-column-hero {\\r\\n        hero-icon {\\r\\n          background-color: red;\\r\\n        }\\r\\n      }*/ }\\n  .score-table {\\n  background-color: transparent; }\\n  .score-table .mat-column-kills {\\n    min-width: 75px;\\n    max-width: 75px;\\n    text-align: center; }\\n  .score-table .mat-column-assists {\\n    min-width: 75px;\\n    max-width: 75px;\\n    text-align: center; }\\n  .score-table .mat-column-deaths {\\n    min-width: 75px;\\n    max-width: 75px;\\n    text-align: center; }\\n  .score-table .mat-column-siegeDamage {\\n    min-width: 100px;\\n    max-width: 100px;\\n    text-align: center; }\\n  .score-table .mat-column-heroDamage {\\n    min-width: 100px;\\n    max-width: 100px;\\n    text-align: center; }\\n  .score-table .mat-column-healing {\\n    min-width: 100px;\\n    max-width: 100px;\\n    text-align: center; }\\n  .score-table .mat-column-damageTaken {\\n    min-width: 100px;\\n    max-width: 100px;\\n    text-align: center; }\\n  .score-table .mat-column-xp {\\n    min-width: 100px;\\n    max-width: 100px;\\n    text-align: center; }\\n  .score-table .mat-header-row {\\n    border: none; }\\n  .score-table .mat-header-row .mat-header-cell {\\n      text-align: center;\\n      display: -webkit-box;\\n      display: -ms-flexbox;\\n      display: flex;\\n      -webkit-box-orient: vertical;\\n      -webkit-box-direction: normal;\\n          -ms-flex-direction: column;\\n              flex-direction: column;\\n      -webkit-box-align: center;\\n          -ms-flex-align: center;\\n              align-items: center; }\\n  .score-table .mat-header-row .mat-header-cell .icon {\\n        width: 32px;\\n        height: 32px; }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-kills .icon {\\n        background-image: url('storm_ui_scorescreen_icon_kill.9a340ef8457e49eed2a9.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-kills:hover .icon {\\n        background-image: url('storm_ui_scorescreen_icon_kill_hover.4cd50fb9db4e9d833aa4.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-assists .icon {\\n        background-image: url('storm_ui_scorescreen_icon_assist.4faf1a5eac0164d0920d.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-assists:hover .icon {\\n        background-image: url('storm_ui_scorescreen_icon_assist_hover.1e2723f8aca1ba7fe71e.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-deaths .icon {\\n        background-image: url('storm_ui_scorescreen_icon_death.0b028ab5da381bff186c.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-deaths:hover .icon {\\n        background-image: url('storm_ui_scorescreen_icon_death_hover.0d0e083f2bb6e9280ed2.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-siegeDamage .icon {\\n        background-image: url('storm_ui_scorescreen_icon_siegedamage.7e1ce16c3e41af4eeb88.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-siegeDamage:hover .icon {\\n        background-image: url('storm_ui_scorescreen_icon_siegedamage_hover.743ad3442faaa8a2e1a2.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-heroDamage .icon {\\n        background-image: url('storm_ui_scorescreen_icon_herodamage.63e1eb2e50275c2e3452.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-heroDamage:hover .icon {\\n        background-image: url('storm_ui_scorescreen_icon_herodamage_hover.34ec9ada3edad6fd2db6.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-healing .icon {\\n        background-image: url('storm_ui_scorescreen_icon_healedandabsorbed.f2bc6e44231ddc84da42.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-healing:hover .icon {\\n        background-image: url('storm_ui_scorescreen_icon_healedandabsorbed_hover.55a0cf2cabf95f7352e3.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-damageTaken .icon {\\n        background-image: url('storm_ui_scorescreen_icon_damagetaken.5cc94932014f107ffb7e.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-damageTaken:hover .icon {\\n        background-image: url('storm_ui_scorescreen_icon_damagetaken_hover.ffb107689860530ed193.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-xp .icon {\\n        background-image: url('storm_ui_scorescreen_icon_xpcontribution.92b8b9082adae84fd691.png'); }\\n  .score-table .mat-header-row .mat-header-cell.mat-column-xp:hover .icon {\\n        background-image: url('storm_ui_scorescreen_icon_xpcontribution_hover.86ba96749bbc4a2b9e98.png'); }\\n  .score-table .mat-row {\\n    margin-bottom: 1px;\\n    border-bottom-width: 2px; }\\n  .score-table .mat-row::before {\\n      content: \\\" \\\";\\n      position: absolute;\\n      top: 1px;\\n      left: 1px;\\n      bottom: 1px;\\n      right: 1px;\\n      border-top-width: 1px;\\n      border-top-style: solid;\\n      z-index: 2; }\\n  .score-table .mat-row.team1 {\\n      -o-border-image: linear-gradient(to right, rgba(27, 56, 116, 0) 2%, #1b3874 6%) 1;\\n         border-image: -webkit-gradient(linear, left top, right top, color-stop(2%, rgba(27, 56, 116, 0)), color-stop(6%, #1b3874)) 1;\\n         border-image: linear-gradient(to right, rgba(27, 56, 116, 0) 2%, #1b3874 6%) 1;\\n      background: linear-gradient(to right, rgba(17, 16, 52, 0) 20px, #111034 20px) 100%; }\\n  .score-table .mat-row.team1::before {\\n        -o-border-image: linear-gradient(to right, rgba(27, 56, 116, 0) 2%, rgba(27, 56, 116, 0.3) 6%) 1;\\n           border-image: -webkit-gradient(linear, left top, right top, color-stop(2%, rgba(27, 56, 116, 0)), color-stop(6%, rgba(27, 56, 116, 0.3))) 1;\\n           border-image: linear-gradient(to right, rgba(27, 56, 116, 0) 2%, rgba(27, 56, 116, 0.3) 6%) 1; }\\n  .score-table .mat-row.team2 {\\n      -o-border-image: linear-gradient(to right, rgba(102, 7, 48, 0) 2%, #660730 6%) 1;\\n         border-image: -webkit-gradient(linear, left top, right top, color-stop(2%, rgba(102, 7, 48, 0)), color-stop(6%, #660730)) 1;\\n         border-image: linear-gradient(to right, rgba(102, 7, 48, 0) 2%, #660730 6%) 1;\\n      background: linear-gradient(to right, rgba(39, 2, 31, 0) 20px, #27021f 20px) 100%; }\\n  .score-table .mat-row.team2::before {\\n        -o-border-image: linear-gradient(to right, rgba(102, 7, 48, 0) 2%, rgba(102, 7, 48, 0.3) 6%) 1;\\n           border-image: -webkit-gradient(linear, left top, right top, color-stop(2%, rgba(102, 7, 48, 0)), color-stop(6%, rgba(102, 7, 48, 0.3))) 1;\\n           border-image: linear-gradient(to right, rgba(102, 7, 48, 0) 2%, rgba(102, 7, 48, 0.3) 6%) 1; }\\n  .score-table .mat-row .mat-cell {\\n      font-size: 18px;\\n      font-weight: 500;\\n      text-shadow: 0px 0px 1px black, 0px 0px 1px black, 1px 3px 2px black, 1px 3px 2px black; }\\n  .score-table .mat-row .mat-cell .player-cell {\\n        display: -webkit-box;\\n        display: -ms-flexbox;\\n        display: flex;\\n        background-repeat: no-repeat;\\n        background-position-y: -6px;\\n        height: 54px;\\n        left: -28px;\\n        min-width: 260px;\\n        overflow-y: hidden; }\\n  .score-table .mat-row .mat-cell .player-cell hero-icon {\\n          top: -24px;\\n          left: 16px;\\n          width: 96px;\\n          height: 96px; }\\n  .score-table .mat-row .mat-cell .player-cell .icon-overlay {\\n          position: absolute;\\n          top: 0px;\\n          left: 16px;\\n          width: 96px;\\n          height: 54px;\\n          z-index: 5; }\\n  .score-table .mat-row .mat-cell .player-cell .name {\\n          margin-left: 28px;\\n          padding-right: 14px; }\\n  .score-table .mat-row .mat-cell .player-cell .name > * {\\n            white-space: nowrap; }\\n  .score-table .mat-row .mat-cell .player-cell .name .hero-name {\\n            font-weight: 700;\\n            padding-top: 8px;\\n            padding-bottom: 2px; }\\n  .score-table .mat-row .mat-cell .player-cell .name .player-name {\\n            font-size: 14px; }\\n  .score-table .mat-row.team1 .mat-cell {\\n      color: #ccccff; }\\n  .score-table .mat-row.team1 .mat-cell .player-cell {\\n        background-image: url('player_row_blue.8c98df4c64229fe0e580.png'); }\\n  .score-table .mat-row.team1 .mat-cell .player-cell .icon-overlay {\\n          background: -webkit-gradient(linear, left top, right top, color-stop(16%, rgba(17, 16, 52, 0)), to(#111034)) 100%;\\n          background: linear-gradient(to right, rgba(17, 16, 52, 0) 16%, #111034 100%) 100%; }\\n  .score-table .mat-row.team1 .mat-cell .player-cell .name .hero-name {\\n          color: #e6e6ff;\\n          text-shadow: 0px 0px 1px black, 0px 0px 1px black, 0px 0px 1px black, 0px 0px 4px blue, 0px 0px 4px blue, 0px 0px 4px blue, 0px 0px 4px blue; }\\n  .score-table .mat-row.team1 .mat-cell.best-team {\\n        color: #e6e6ff;\\n        font-weight: 700; }\\n  .score-table .mat-row.team1 .mat-cell.best {\\n        font-weight: 700;\\n        color: #e6e6ff;\\n        text-shadow: 0px 0px 1px black, 0px 0px 1px black, 0px 0px 1px black, 0px 0px 4px blue, 0px 0px 4px blue, 0px 0px 4px blue, 0px 0px 4px blue; }\\n  .score-table .mat-row.team2 .mat-cell {\\n      color: #ffcccc; }\\n  .score-table .mat-row.team2 .mat-cell .player-cell {\\n        background-image: url('player_row_red.5caa877b50425325d8e4.png'); }\\n  .score-table .mat-row.team2 .mat-cell .player-cell .icon-overlay {\\n          background: -webkit-gradient(linear, left top, right top, color-stop(16%, rgba(39, 2, 31, 0)), to(#27021f)) 100%;\\n          background: linear-gradient(to right, rgba(39, 2, 31, 0) 16%, #27021f 100%) 100%; }\\n  .score-table .mat-row.team2 .mat-cell .player-cell .name .hero-name {\\n          color: #ffe6e6;\\n          text-shadow: 0px 0px 1px black, 0px 0px 1px black, 0px 0px 1px black, 0px 0px 4px red, 0px 0px 4px red, 0px 0px 4px red, 0px 0px 4px red; }\\n  .score-table .mat-row.team2 .mat-cell.best-team {\\n        color: #ffe6e6;\\n        font-weight: 700; }\\n  .score-table .mat-row.team2 .mat-cell.best {\\n        font-weight: 700;\\n        color: #ffe6e6;\\n        text-shadow: 0px 0px 1px black, 0px 0px 1px black, 0px 0px 1px black, 0px 0px 4px red, 0px 0px 4px red, 0px 0px 4px red, 0px 0px 4px red; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/replay-viewer/sections/score-screen/score-screen.component.scss\n// module id = ./src/app/replay-viewer/sections/score-screen/score-screen.component.scss\n// module chunks = main","import { Component, OnInit, ChangeDetectorRef, ChangeDetectionStrategy, ViewChild, AfterViewInit } from '@angular/core';\nimport { ReplayViewerComponent } from '../../replay-viewer.component';\nimport { Replay, ReplayDescription, ScoreAnalyser, IPlayerScores } from '@heroesbrowser/heroprotocol';\nimport { MatTableDataSource, MatSort } from '@angular/material';\ninterface IPlayerScoreRecord {\n  hero: string;\n  name: string;\n  team: number;\n  won: boolean;\n  scores: IPlayerScores;\n}\n\n@Component({\n  selector: 'score-screen',\n  templateUrl: './score-screen.component.html',\n  styleUrls: ['./score-screen.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ScoreScreenComponent implements OnInit, AfterViewInit {\n\n  private replay: Replay;\n  public replayDescription: ReplayDescription;\n  private scoreScreenAnalyser: ScoreAnalyser;\n  @ViewChild(MatSort) sort: MatSort;\n  public dataSource: MatTableDataSource<IPlayerScoreRecord> = new MatTableDataSource();\n\n  public scoreData: IPlayerScoreRecord[];\n  public highScores: {\n    game: { [stat: string]: number },\n    0: { [stat: string]: number },\n    1: { [stat: string]: number },\n  };\n\n  public displayCols: string[] = [\n    'hero',\n    'award',\n    'kills',\n    'assists',\n    'deaths',\n    'siegeDamage',\n    'heroDamage',\n    'healing',\n    'damageTaken',\n    'xp'\n  ];\n\n  constructor(\n    private replayViewer: ReplayViewerComponent,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {\n    replayViewer.onReplayLoaded.subscribe(replay => {\n      this.replayLoaded();\n    });\n    this.dataSource.sortingDataAccessor = this.getSortData.bind(this);\n  }\n\n  ngOnInit() {\n\n\n  }\n\n  ngAfterViewInit() {\n    this.replayLoaded();\n    this.dataSource.sort = this.sort;\n    this.sort.start = 'desc';\n  }\n\n  private getSortData(data: IPlayerScoreRecord, sortHeaderId: string): string | number {\n    switch (sortHeaderId) {\n      case 'kills':\n        return data.scores.SoloKill;\n      case 'assists':\n        return data.scores.Assists;\n      case 'deaths':\n        return data.scores.Deaths;\n      case 'siegeDamage':\n        return data.scores.SiegeDamage;\n      case 'heroDamage':\n        return data.scores.HeroDamage;\n      case 'healing':\n        return data.scores.Healing;\n      case 'damageTaken':\n        return data.scores.DamageTaken;\n      case 'xp':\n        return data.scores.ExperienceContribution;\n      default:\n        return 0;\n    }\n  }\n\n  private async replayLoaded() {\n    const hs = {\n      'Takedowns': 0,\n      'Deaths': Number.MAX_SAFE_INTEGER,\n      'SoloKill': 0,\n      'Assists': 0,\n      'ExperienceContribution': 0,\n      'Healing': 0,\n      'SiegeDamage': 0,\n      'HeroDamage': 0,\n      'DamageTaken': 0\n    };\n\n    this.highScores = {\n      game: Object.assign({}, hs),\n      0: Object.assign({}, hs),\n      1: Object.assign({}, hs)\n    };\n\n    this.replay = this.replayViewer.replay;\n    this.replayDescription = this.replayViewer.replayDescription;\n    this.scoreScreenAnalyser = new ScoreAnalyser(this.replay);\n    const scoreData = await this.scoreScreenAnalyser.scoreScreenData;\n    this.scoreData = [];\n    for (let i = 0; i < scoreData.length; i++) {\n      const player = this.replayDescription.players[i];\n      const pScore = scoreData[i];\n      for (const stat in pScore) {\n        if (pScore.hasOwnProperty(stat)) {\n          const value = pScore[stat];\n          if (stat === 'Deaths') {\n            if (this.highScores.game[stat] > value) {\n              this.highScores.game[stat] = value;\n            }\n            if (this.highScores[player.team][stat] > value) {\n              this.highScores[player.team][stat] = value;\n            }\n          } else {\n            if (this.highScores.game[stat] < value) {\n              this.highScores.game[stat] = value;\n            }\n            if (this.highScores[player.team][stat] < value) {\n              this.highScores[player.team][stat] = value;\n            }\n          }\n        }\n      }\n\n      this.scoreData.push({\n        hero: player.hero,\n        name: player.name,\n        team: player.team,\n        won: player.won,\n        scores: pScore\n      });\n    }\n    this.dataSource.data = this.scoreData;\n\n    this.changeDetectorRef.markForCheck();\n  }\n\n  public isBest(statName: string, player: IPlayerScoreRecord, scope: string | number = 'game'): boolean {\n    return this.highScores[scope][statName] === player.scores[statName];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/replay-viewer/sections/score-screen/score-screen.component.ts","import { Injectable } from '@angular/core';\n\n\nexport type ClipFn = (ctx: CanvasRenderingContext2D, w: number, h: number) => void;\n\nexport enum ClipMethod {\n  NONE,\n  CIRCLE,\n  HEXEGON\n}\n\nconst clipMethods: { [name: number]: ClipFn } = {\n  [ClipMethod.CIRCLE]: (ctx, w: number, h: number) => {\n    ctx.arc(w / 2, w / 2, w / 2, 0, 2 * Math.PI);\n  },\n  [ClipMethod.HEXEGON]: (ctx, w, h) => {\n    ctx.moveTo(w * 0.52, h * 0.04);\n    ctx.lineTo(w, h * 0.28);\n    ctx.lineTo(w, h * 0.78);\n    ctx.lineTo(w * 0.52, h * 1.01);\n    ctx.lineTo(w * 0.05, h * 0.78);\n    ctx.lineTo(w * 0.05, h * 0.28);\n  }\n};\n\n@Injectable()\nexport class ClipIconService {\n\n\n\n  public async clip(\n    imgData: HTMLImageElement | SVGImageElement | HTMLVideoElement | HTMLCanvasElement | ImageBitmap | ImageData | Blob,\n    w: number,\n    h: number,\n    shape: ClipMethod | ClipFn\n  ) {\n    const img = await createImageBitmap(imgData);\n    console.log(img);\n    const canvas: HTMLCanvasElement = document.createElement('canvas');\n    canvas.width = w;\n    canvas.height = h;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, w, h);\n    ctx.save();\n    ctx.beginPath();\n    let clipFn: ClipFn;\n\n    if (typeof shape !== 'function') {\n      clipFn = clipMethods[shape];\n    } else {\n      clipFn = shape;\n    }\n    clipFn(ctx, w, h);\n    ctx.clip();\n    ctx.drawImage(img, 0, 0, w, h);\n    ctx.restore();\n    console.log('!!!!!!', canvas);\n    return canvas;\n  }\n  public loadAndClip(imgUrl: string, width: number, height: number, shape?: ClipMethod.NONE): Promise<HTMLImageElement>;\n  public loadAndClip(imgUrl: string, width: number, height: number, shape: ClipMethod | ClipFn): Promise<HTMLCanvasElement>;\n  public loadAndClip(\n    imgUrl: string,\n    width: number,\n    height: number,\n    shape: ClipMethod | ClipFn\n  ): Promise<HTMLCanvasElement | HTMLImageElement> {\n    return new Promise((resolve, reject) => {\n      const img = new Image(width, height);\n      // img.setAttribute('crossOrigin', '*');\n      img.onload = event => {\n        if (!shape) {\n          resolve(img);\n          return;\n        }\n        this.clip(img, width, height, shape).then((clipped) => {\n          console.log('clipCallback', clipped);\n          resolve(clipped);\n        }).catch(err => {\n          reject(err);\n        });\n      };\n      img.onerror = event => {\n        reject(event);\n      };\n      img.src = imgUrl;\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/replay-viewer/services/clip-icon/clip-icon.service.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":"webpack:///"}
<div class="debug" *ngIf="showDebug">
  <svg [attr.viewBox]="debugData.viewBox">
    <rect *ngFor="let region of debugData.displayRegions" [attr.x]="region.x" [attr.y]="region.y" [attr.width]="region.width"
      [attr.height]="region.height" style="stroke:rgb(0, 255, 0);stroke-width:0.25; fill:transparent" />
    <circle *ngFor="let point of debugData.points" [attr.cx]="point.x" [attr.cy]="point.y" r="0.5" fill="red"></circle>
  </svg>
  <div style="position:fixed; z-index:1000; top: 1vh;">
    <div class="region-override" *ngFor="let region of regions; let i = index">
      x:
      <input type="number" #x [value]="region.cropArea.x" (keyup)="updateDebugRegion(i, 'x', x.value)" (click)="updateDebugRegion(i, 'x', x.value)"
      /> width:
      <input type="number" #w [value]="region.cropArea.width" (keyup)="updateDebugRegion(i, 'width', w.value)" (click)="updateDebugRegion(i, 'width', w.value)"
      /> y:
      <input type="number" #y [value]="region.cropArea.y" (keyup)="updateDebugRegion(i, 'y', y.value)" (click)="updateDebugRegion(i, 'y', y.value)"
      /> height:
      <input type="number" #h [value]="region.cropArea.height" (keyup)="updateDebugRegion(i, 'height', h.value)" (click)="updateDebugRegion(i, 'height', h.value)"
      /> ox:
      <input type="number" #ox [value]="region.offset.x" (keyup)="updateDebugRegion(i, 'ox', ox.value)" (click)="updateDebugRegion(i, 'ox', ox.value)"
      /> oy:
      <input type="number" #oy [value]="region.offset.y" (keyup)="updateDebugRegion(i, 'oy', oy.value)" (click)="updateDebugRegion(i, 'oy', oy.value)"
      />
    </div>
  </div>
</div>
<svg style="display: none;">
  <symbol id="map-core-symbol" viewBox="0 0 29.277331 26.278323">
    <g>
      <path d="m 5.6386648,25.5839 c -1.594,-0.457 -2.39375,-1.3258 -2.20681,-2.3975 0.16125,-0.9244 -0.65814,-4.8751 -1.82088,-8.7793 -1.16273,-3.9043 -1.85247,-7.3602 -1.53275,-7.6799 0.31971,-0.3198 1.92661,0.7075 3.57087,2.2828 1.64426,1.5753 2.98957,3.8785 2.98957,5.1181 0,1.2397 0.38371,2.4911 0.85268,2.7809 0.46897,0.2898 1.66709,-0.069 2.6624802,-0.7964 1.86578,-1.3643 1.67545,-2.5245 -1.0177402,-6.204 L 7.6052448,7.8171 10.711355,3.9086 C 12.419715,1.7589 14.187005,0 14.638665,0 c 0.45166,0 2.21895,1.7589 3.92731,3.9086 l 3.10611,3.9085 -1.53084,2.0915 c -2.69319,3.6795 -2.88352,4.8397 -1.01774,6.204 0.99539,0.7279 2.19351,1.0862 2.66248,0.7964 0.46897,-0.2898 0.85268,-1.5412 0.85268,-2.7809 0,-1.2396 1.34531,-3.5428 2.98957,-5.1181 1.64426,-1.5753 3.25116,-2.6026 3.57087,-2.2828 0.31972,0.3197 -0.37002,3.7756 -1.53275,7.6799 -1.16274,3.9042 -1.98213,7.8549 -1.82088,8.7793 0.18694,1.0717 -0.61281,1.9405 -2.20681,2.3975 -3.22957,0.926 -14.7704302,0.926 -18.0000002,0 z"
        style="fill:#000000" class="outline" />
      <path d="m 23.638665,24.5 c 1.55927,-0.4993 -1.82734,-0.8006 -9,-0.8006 -7.1726602,0 -10.5592702,0.3013 -9.0000002,0.8006 1.375,0.4404 5.4250002,0.8007 9.0000002,0.8007 3.575,0 7.625,-0.3603 9,-0.8007 z"
        fill="currentColor" class="bg" />
      <path d="m 26.084865,16.0371 c 0.87346,-3.0046 1.88835,-6.2671 2.25531,-7.25 L 29.007375,7 26.340295,9.5 c -1.46689,1.375 -2.67485,3.4574 -2.68435,4.6276 -0.01,1.1702 -0.63524,2.6404 -1.39053,3.2673 -0.75529,0.6268 -2.08816,0.8653 -2.96194,0.53 -0.87377,-0.3353 -1.87829,-1.5221 -2.23227,-2.6374 -0.4073,-1.2833 0.0824,-2.9934 1.33365,-4.6576 L 20.382095,8 17.760385,4.2714 c -1.44195,-2.0508 -2.84672,-3.7287 -3.12172,-3.7287 -0.275,0 -1.67977,1.6779 -3.12172,3.7287 L 8.8952348,8 10.872475,10.6299 c 1.25129,1.6642 1.74095,3.3743 1.33365,4.6576 -0.35398,1.1153 -1.3585,2.3021 -2.2322702,2.6374 -0.87378,0.3353 -2.20665,0.097 -2.96194,-0.53 -0.75529,-0.6269 -1.38102,-2.0971 -1.39053,-3.2673 -0.01,-1.1702 -1.21746,-3.2526 -2.68435,-4.6276 l -2.66708,-2.5 0.6672,1.7871 c 0.36696,0.9829 1.38185,4.2454 2.25531,7.25 l 1.58812,5.4629 9.8580802,0 9.85808,0 1.58812,-5.4629 z"
        fill="currentColor" class="bg" />
    </g>
  </symbol>






  <symbol id="MapPOISymbol_UNKNOWN" viewBox="0 0 1 1">
    <rect style="stroke:#000000;stroke-width:0.1" fill="currentColor" width="0.63303083" height="0.63303083" x="0.39980885" y="-0.29974031"
      transform="matrix(0.71475278,0.6993772,-0.71475278,0.6993772,0,0)" />
  </symbol>

  <symbol id="MapPOISymbol_Core" viewBox="0 0 1 1">
    <g id="g3614">
      <path id="path7425" d="M 0.19259491,0.88229906 C 0.13815005,0.86653875 0.1108337,0.83657688 0.11721884,0.79961769 0.12272652,0.76773838 0.09473933,0.63149259 0.05502465,0.49685041 0.0153103,0.36220478 -0.00824854,0.24302289 0.00267186,0.23199755 c 0.01092005,-0.0110288 0.06580551,0.0243992 0.12196706,0.0787258 0.0561615,0.0543266 0.10211211,0.13375591 0.10211211,0.17650535 0,0.0427529 0.013106,0.0859093 0.0291242,0.0959035 0.0160182,0.009994 0.0569413,-0.00238 0.09094,-0.027465 0.0637278,-0.0470499 0.0572269,-0.0870612 -0.0347621,-0.21395422 L 0.25976565,0.26958438 0.36585831,0.13479391 C 0.42420925,0.06065829 0.48457303,0 0.49999997,0 c 0.015427,0 0.0757907,0.06065829 0.13414169,0.13479391 l 0.10609265,0.13479047 -0.0522876,0.0721285 c -0.0919889,0.12689306 -0.0984898,0.16690428 -0.034762,0.21395422 0.0339986,0.0251027 0.0749218,0.0374592 0.09094,0.027465 0.0160182,-0.009994 0.0291242,-0.0531506 0.0291242,-0.0959035 0,-0.0427494 0.0459506,-0.12217875 0.10211209,-0.17650535 0.0561616,-0.0543266 0.111047,-0.0897545 0.12196706,-0.0787258 0.0109204,0.0110253 -0.0126384,0.13020723 -0.0523528,0.26485286 -0.0397147,0.13464218 -0.0677019,0.27088797 -0.0621942,0.30276728 0.006385,0.0369592 -0.0209312,0.0669211 -0.0753761,0.0826814 -0.11030959,0.0319345 -0.50450058,0.0319345 -0.61481015,0 z"
        style="fill:#000000" inkscape:connector-curvature="0" class="outline" />
      <path id="path7423" d="m 0.80740506,0.84491916 c 0.0532586,-0.0172191 -0.0624148,-0.0276099 -0.30740509,-0.0276099 -0.24499022,0 -0.36066368,0.0103908 -0.30740506,0.0276099 0.0469647,0.0151879 0.18529693,0.0276133 0.30740506,0.0276133 0.12210812,0 0.2604404,-0.0124255 0.30740509,-0.0276133 z"
        fill="currentColor" class="bg" />
      <path id="path6424" d="m 0.89095775,0.55306338 c 0.029834,-0.10361813 0.0644987,-0.21613032 0.0770326,-0.2500271 l 0.022789,-0.0616308 -0.0910971,0.0862162 c -0.0501033,0.0474189 -0.0913625,0.11923359 -0.091687,0.15958972 -3.4156e-4,0.0403561 -0.0216973,0.0910581 -0.0474951,0.11267772 -0.0257978,0.0216161 -0.0713234,0.0298411 -0.10116838,0.0182778 -0.0298446,-0.0115633 -0.0641551,-0.0524919 -0.0762457,-0.0909547 -0.0139118,-0.0442565 0.002814,-0.10323187 0.0455523,-0.16062431 l 0.0675348,-0.090696 -0.0895474,-0.12858636 c -0.0492514,-0.0707249 -0.0972329,-0.1285898 -0.10662584,-0.1285898 -0.009393,0 -0.0573744,0.0578649 -0.10662581,0.1285898 l -0.0895475,0.12858636 0.0675349,0.090696 c 0.0427392,0.0573924 0.0594641,0.11636778 0.0455523,0.16062431 -0.0120906,0.0384628 -0.0464011,0.0793914 -0.0762457,0.0909547 -0.0298449,0.0115633 -0.0753706,0.003345 -0.10116836,-0.0182778 -0.0257978,-0.0216196 -0.0471703,-0.0723216 -0.0474951,-0.11267772 -3.4157e-4,-0.0403561 -0.0415837,-0.11217078 -0.091687,-0.15958972 l -0.0910971,-0.0862162 0.02278896,0.0616308 c 0.01253393,0.0338968 0.04719863,0.14640897 0.07703264,0.2500271 l 0.054244,0.18839631 0.33671375,0 0.33671375,0 0.054244,-0.18839631 z"
        fill="currentColor" class="bg" />
    </g>
  </symbol>

  <symbol id="MapPOISymbol_Tower" viewBox="0 0 11.99978 16.999999">
    <g>
      <path d="M 6,17 0,17 0.0354,15.75 C 0.0549,15.0625 0.71394,13.375 1.49996,12 L 2.92909,9.5 2.96449,7.25 2.99989,5 l -1,0 -1,0 0,-2.5 0,-2.5 5,0 5,0 0,2.5 0,2.5 -1,0 -1,0 0.0354,2.25 0.0354,2.25 1.42913,2.5 c 0.78602,1.375 1.44507,3.0625 1.46456,3.75 l 0.0354,1.25 -6,0 z"
        style="fill:#000000" class="outline" />
      <path d="M 6,16 11.05136,16 9.52568,13.0497 8,10.0993 8,7.5497 8,5 6,5 4,5 4,7.5497 4,10.0993 2.47432,13.0497 0.94864,16 6,16 Z"
        fill="currentColor" class="bg" />
      <path d="M 6,4 10,4 9.9847,2.25 9.9694,0.5 8.98472,2 8.00003,3.5 l -1,-1.5 -1,-1.5 -1,1.5 -1,1.5 L 3.01534,2 2.03066,0.5 2.01536,2.25 2.00006,4 l 4,0 z"
        fill="currentColor" class="bg" />
    </g>
  </symbol>

  <symbol id="MapPOISymbol_Town" viewBox="0 0 21.508931 27.999989">
    <g>
      <path d="M 0.46056,26.75 0,25.5 2.91329,22.4152 5.82659,19.3304 6.43167,15.6018 7.03674,11.8731 4.8956,8.9771 2.75446,6.081 l 0,-2.4335 0,-2.4335 L 4.29285,0.6237 5.83123,0.0333 6.65132,2.2503 7.47142,4.4672 8.18033,2.2336 8.88923,0 l 1.86523,0 1.86523,0 0.7089,2.2336 0.70891,2.2336 0.8201,-2.2169 0.82009,-2.217 1.53838,0.5904 1.53839,0.5903 0,2.4335 0,2.4335 -2.14114,2.8961 -2.14114,2.896 0.60507,3.7287 0.60508,3.7286 2.9133,3.0848 2.9133,3.0848 -0.46057,1.25 -0.46057,1.25 -9.83333,0 -9.83333,0 -0.46057,-1.25 z"
        style="fill:#000000" class="outline" />
      <path d="m 20.0111,25.5 -0.24336,-1 -8.17305,-0.2931 C 7.09951,24.0457 2.793,24.1549 2.02467,24.4498 L 0.6277,24.9859 1.27262,26.0294 1.91754,27.0729 11.086,26.7865 20.25446,26.5 20.0111,25.5 Z"
        fill="currentColor" class="bg" />
      <path d="m 17.25446,22 -0.61803,-1 -5.88197,0 -5.88197,0 -0.61803,1 -0.61803,1 7.11803,0 7.11803,0 -0.61803,-1 z" fill="currentColor"
        class="bg" />
      <path d="m 14.25446,14.5 0,-5.5 -3.5,0 -3.5,0 0,5.5 0,5.5 3.5,0 3.5,0 0,-5.5 z" fill="currentColor" class="bg" />
      <path d="M 17.58912,5.1347 17.92379,2.7694 16.83912,1.6847 15.75446,0.6 l 0,2.2 0,2.2 L 14.37109,5 12.98772,5 12.46471,3 11.9417,1 10.75446,1 9.56722,1 9.04421,3 8.5212,5 7.13783,5 5.75446,5 l 0,-2.059 0,-2.059 -1,0.618 -1,0.6181 0,2.2743 c 0,1.2509 0.31903,2.5933 0.70896,2.9833 L 5.17238,8.0846 11.21342,7.7923 17.25446,7.5 17.58912,5.1347 Z"
        fill="currentColor" class="bg" />
    </g>
  </symbol>

  <symbol id="MapPOISymbol_MoonWell" viewBox="0 0 11.311881 11.313929">
    <g>
      <path d="m 5.655945,0.8319 c -2.66994,0 -4.82508,2.1552 -4.82508,4.8251 0,2.67 2.15514,4.8251 4.82508,4.8251 2.66995,0 4.82509,-2.1551 4.82509,-4.8251 0,-2.6699 -2.15514,-4.8251 -4.82509,-4.8251 z"
        style="fill-opacity:1;stroke:#000000;stroke-width:0;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
        fill="currentColor" class="bg" />
      <path d="m 6.662935,8.6776 0,-6.0421 -2.01402,0 0,6.0421 z m 2.01401,-4.0281 -6.04205,0 0,2.014 6.04205,0 z M 5.655935,0 c 3.11905,0 5.65594,2.5369 5.65594,5.656 0,3.119 -2.53689,5.658 -5.65594,5.658 C 2.536895,11.314 5e-6,8.775 5e-6,5.656 5e-6,2.5369 2.536895,0 5.655935,0 Z m 0,0.8309 c -2.66994,0 -4.82508,2.1551 -4.82508,4.8251 0,2.6699 2.15514,4.8251 4.82508,4.8251 2.66995,0 4.82509,-2.1552 4.82509,-4.8251 0,-2.67 -2.15514,-4.8251 -4.82509,-4.8251 z"
        style="fill-opacity:1;stroke:#000000;stroke-width:0;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
        class="outline" />
    </g>
  </symbol>


  <symbol id="MapPOISymbol_WatchTower" viewBox="0 0 10 7.0381198">
    <g>
      <path d="M 4.9655561,6.4252758e-4 C 3.9695323,-0.02497281 2.7431196,0.71925188 1.7446428,1.5434328 1.2454044,1.9555232 0.80657205,2.3902313 0.49404757,2.7737282 0.33778518,2.9654766 0.21294811,3.1439843 0.12680429,3.3052158 0.04066077,3.4664472 -0.0154344,3.6082888 0.00377475,3.7591947 0.03712351,4.0211792 0.23935368,4.294515 0.54079864,4.6277834 0.84224392,4.9610515 1.2519886,5.3321354 1.7249581,5.6827616 2.6708969,6.3840137 3.8645636,7.0097632 4.9575594,7.0373167 6.0640398,7.0652092 7.3167789,6.3622887 8.3033478,5.5818772 8.7966319,5.1916715 9.2213328,4.7794424 9.5225703,4.4174028 9.6731893,4.2363827 9.7933779,4.0685044 9.8762802,3.9166725 9.9591828,3.7648406 10.014024,3.6323004 9.9968493,3.4872995 9.9809441,3.3530223 9.9121096,3.2317559 9.8129203,3.0868382 9.7137307,2.9419208 9.579467,2.7797747 9.4161499,2.6051775 9.0895154,2.255984 8.6473914,1.8577582 8.1495609,1.4782272 7.1538986,0.71916401 5.9492381,0.02594102 4.9655561,6.4252758e-4 Z"
        fill="black" />
      <path d="m 4.9089627,5.5757258 c 0.028305,0.00154 0.056276,0.00467 0.08489,0.00492 -0.00574,-7.31e-5 -0.012132,7.244e-4 -0.017839,6.299e-4 -0.021546,-4.725e-4 -0.045155,-0.00449 -0.067051,-0.00554 z m 4.7286404,-1.898961 c -0.01194,0.029404 -0.019193,0.054497 -0.038139,0.089196 C 9.5312186,3.8909491 9.4223454,4.0461552 9.2808173,4.2162495 8.9977613,4.5564381 8.5859417,4.9567924 8.1083458,5.3345879 7.1531544,6.090179 5.927904,6.7466215 4.9655561,6.7223611 3.9897232,6.6977599 2.8274398,6.1081498 1.9125781,5.4299357 1.4551473,5.090829 1.0585662,4.7307818 0.77455492,4.4167877 0.56291955,4.1828106 0.41964088,3.9621934 0.35502427,3.8262459 0.38008844,3.8437543 1.0536532,4.3138703 1.9611748,4.7987942 2.8856924,5.2927999 4.0322573,5.7974631 4.9704773,5.8174788 5.9164544,5.8376612 7.0777244,5.2907392 8.0166887,4.747122 8.9252166,4.2211263 9.5933899,3.7106326 9.6376031,3.6767648 Z M 5.0104619,2.8038704 c 0.4157953,0 0.7437135,0.3164321 0.7437138,0.7018836 0,0.3854509 -0.3279185,0.7012682 -0.7437138,0.7012682 -0.4157953,0 -0.7443287,-0.3158173 -0.7443287,-0.7012682 0,-0.3854518 0.3285334,-0.7018836 0.7443287,-0.7018836 z m 0,-0.2503652 c -0.5446452,0 -0.9953089,0.4243259 -0.9953089,0.9522488 0,0.5279223 0.4506637,0.9522485 0.9953089,0.9522485 0.5446452,0 0.9946941,-0.4243262 0.9946941,-0.9522485 0,-0.5279229 -0.4500489,-0.9522488 -0.9946941,-0.9522488 z m 0,-0.8778156 c 0.9369,0 1.7014986,0.8088089 1.7014986,1.8196066 0,1.0107981 -0.7645986,1.819607 -1.7014986,1.819607 -0.9368998,0 -1.7021136,-0.8088089 -1.7021136,-1.819607 -10e-8,-1.0107977 0.7652138,-1.8196066 1.7021136,-1.8196066 z M 4.2378364,1.5766508 c -0.704246,0.3193061 -1.1958471,1.0610666 -1.1958471,1.9186454 0,1.0609992 0.7531814,1.9432057 1.7297954,2.0687419 C 3.9447232,5.4834637 2.9136033,5.0396846 2.0725165,4.5902593 1.2435827,4.1473277 0.72643569,3.7848135 0.61707711,3.7093678 0.7210405,3.6219537 1.2687965,3.1538629 2.1321859,2.6021019 2.7810051,2.1874648 3.5400352,1.7845001 4.2378364,1.5766508 Z M 5.4256868,1.4566968 C 6.2528075,1.5695335 7.2171021,2.0566379 7.9976194,2.5491992 8.799069,3.0549706 9.2914335,3.474592 9.3896987,3.5568112 9.2859904,3.6354609 8.746176,4.0515592 7.8985803,4.5422777 7.0606894,5.0273783 6.0390339,5.4974439 5.2233032,5.5683442 6.2126261,5.4553983 6.9789345,4.5657661 6.9789345,3.4952962 c 0,-0.9961221 -0.6639233,-1.8356791 -1.5532477,-2.0385994 z M 4.9575594,0.31498272 C 5.7931638,0.33647215 6.9892203,0.98936444 7.9588651,1.728592 8.4436873,2.098206 8.87487,2.4871554 9.1860846,2.8198641 9.3416919,2.9862187 9.4674574,3.1391576 9.5533279,3.2646158 9.6110999,3.349022 9.6420027,3.4136761 9.6615939,3.4626936 9.6454556,3.4490056 9.0044072,2.905664 8.1237245,2.3498915 7.2319075,1.7870916 6.1078328,1.2120393 5.131031,1.1940289 4.1473169,1.1758906 2.9612196,1.7920058 2.0054654,2.4027939 1.0538204,3.0109559 0.33904437,3.620452 0.3328788,3.6257077 0.34651323,3.579465 0.36916798,3.5202517 0.4048512,3.4534663 0.47652407,3.3193192 0.59077863,3.1540106 0.73826133,2.9730359 1.0332258,2.6110867 1.4596002,2.1861101 1.9445658,1.7858009 2.9144971,0.98518246 4.1342966,0.29381015 4.9575594,0.31498272 Z"
        fill="currentColor" />
    </g>
  </symbol>

  <symbol id="MapPOISymbol_CH_Tribute" viewBox="0 0 10 9.3389883">
    <g>
      <path d="M 4.2027044,6.1030878 C 3.9367664,5.5888202 3.7191807,4.9699422 3.7191807,4.7278031 3.7191807,4.4856641 3.3535432,4.1209549 2.9066526,3.9173379 2.2479465,3.6172114 2.0036705,3.6375794 1.6163215,4.0249287 1.0805611,4.5606891 0.36149948,4.6500853 0.09223655,4.2144083 -0.1941786,3.7509791 0.24110279,2.9582638 0.89614716,2.7503607 1.2306279,2.6442009 1.5007164,2.2697029 1.5007164,1.9120807 1.5007164,1.4824314 1.3490812,1.3238711 1.0485024,1.4392138 0.50895066,1.6462593 -0.22500004,0.8674268 0.06598071,0.39661005 0.17842801,0.2146665 0.72551398,0.06340115 1.2817277,0.06046454 L 2.2930251,0.05512438 1.2630238,-0.60450565 C -0.45054338,-1.7019029 0.13874253,-2.8308538 1.947736,-1.916274 c 0.8195894,0.4143627 1.0403754,0.4100874 1.9807717,-0.038356 0.9680921,-0.461651 1.1486415,-0.461651 2.1167336,0 0.9403963,0.4484437 1.1611823,0.452719 1.9807717,0.038356 1.8089935,-0.9145798 2.398279,0.2143711 0.6847122,1.31176835 L 7.680724,0.05512438 8.7206719,0.06046454 C 9.3781889,0.06383977 9.8322173,0.25238452 9.955316,0.57317445 10.177192,1.1513747 9.5331454,1.6724866 8.8979269,1.4287303 8.625534,1.3242032 8.4730326,1.5053506 8.4730326,1.9334372 c 0,0.3672649 0.1324287,0.6677543 0.294286,0.6677543 0.5387518,0 1.2659554,0.9624513 1.0844966,1.4353268 C 9.6213934,4.6369874 8.9643911,4.6318923 8.3574275,4.0249284 7.9700786,3.6375794 7.7258025,3.6172114 7.0670964,3.9173379 6.6202058,4.1209549 6.2545683,4.4856641 6.2545683,4.7278031 c 0,0.641057 -0.9159395,2.3103167 -1.2676938,2.3103167 -0.1653555,0 -0.518232,-0.4207644 -0.7841701,-0.935032 z"
        style="fill:#000000" />
      <path d="m 9.2991155,-1.7491424 c -0.2957213,-0.2957211 -1.4599298,0.2899014 -1.4599298,0.7343767 0,0.38689861 0.1294341,0.37652602 0.8021992,-0.064287 0.4412098,-0.2890916 0.7371884,-0.5906321 0.6577306,-0.67009 z m -7.5220783,0.1985282 c -0.89633245,-0.56779 -1.39765848,-0.2803665 -0.5932443,0.3401226 0.4733743,0.36513964 0.8397515,0.47512229 0.9101678,0.27322287 C 2.1587829,-1.1231294 2.0161674,-1.3991348 1.7770372,-1.5506142 Z M 9.423803,0.69965069 c 0,-0.17430791 -0.2139233,-0.31692347 -0.4753852,-0.31692347 -0.2614618,0 -0.4753852,0.14261556 -0.4753852,0.31692347 0,0.17430791 0.2139234,0.31692351 0.4753852,0.31692351 0.2614619,0 0.4753852,-0.1426156 0.4753852,-0.31692351 z m -7.9230866,0 c 0,-0.17430791 -0.2139234,-0.31692347 -0.4753852,-0.31692347 -0.26146188,0 -0.47538522,0.14261556 -0.47538522,0.31692347 0,0.17430791 0.21392334,0.31692351 0.47538522,0.31692351 0.2614618,0 0.4753852,-0.1426156 0.4753852,-0.31692351 z M 4.3573279,3.4757266 C 4.8564386,3.1640267 5.1163827,3.1634477 5.6119448,3.4729377 6.887674,4.269644 8.8252287,2.4022805 7.9182755,1.2501578 7.748538,1.0345298 7.5149448,0.46182688 7.3991796,-0.02252251 7.2591986,-0.60818662 6.8199443,-1.0790033 6.0877858,-1.4281453 c -1.024818,-0.4887018 -1.1770047,-0.4887018 -2.2018226,0 -0.7321585,0.349142 -1.1714128,0.81995868 -1.3113935,1.40562279 C 2.4588042,0.46182688 2.225211,1.0345298 2.0554735,1.2501512 1.4235766,2.0528641 2.3120747,3.5053542 3.6442501,3.8474357 3.6901923,3.8592316 4.0110773,3.6919638 4.3573279,3.4757266 Z M 9.423803,3.7104233 c 0,-0.2614618 -0.2139233,-0.4753852 -0.4753852,-0.4753852 -0.82478,0 -0.5574975,0.6245969 0.3961544,0.9257503 0.043577,0.013761 0.079231,-0.1889032 0.079231,-0.4503651 z M 1.5007164,3.5180543 c 0,-0.1556589 -0.2139234,-0.2830162 -0.4753852,-0.2830162 -0.26146188,0 -0.47538522,0.2094475 -0.47538522,0.4654386 0,0.2835175 0.18580875,0.3941371 0.47538522,0.2830161 C 1.286793,3.8831606 1.5007164,3.6737131 1.5007164,3.5180543 Z M 5.5516036,5.5155465 C 5.7805694,4.8587347 5.7473086,4.4707706 5.4241449,4.0288173 c -0.4285338,-0.5860545 -0.4460071,-0.5860545 -0.8745408,0 -0.3231637,0.4419533 -0.3564245,0.8299174 -0.1274587,1.4867292 0.3928314,1.1268766 0.7366268,1.1268766 1.1294582,0 z"
        fill="currentColor" />
      <path d="m 2.609818,1.3336456 c -0.7236884,0 -0.5666544,1.1675008 0.2321217,1.7269854 C 4.1109659,3.9494914 4.8347939,3.0832372 3.7388578,1.9873003 3.3793478,1.6277902 2.8712798,1.3336456 2.609818,1.3336456 Z m 0.4920978,0.6765575 c 0.2696169,0.034256 0.6171343,0.3292622 0.6171343,0.6097062 0,0.1640209 -0.1343331,0.2983537 -0.2983536,0.2983537 -0.3739254,3e-7 -0.7735855,-0.6185253 -0.5465694,-0.8455417 0.056754,-0.056754 0.1379165,-0.073937 0.2277887,-0.062518 z"
        style="fill:#000000" />
      <path d="m 7.3636699,1.3336456 c -0.5050368,3e-7 -1.743079,1.0875641 -1.743079,1.5313844 0,0.1452568 0.09549,0.3591801 0.2116949,0.4753852 C 6.1429859,3.6511155 6.353579,3.6058525 7.1346432,3.0587742 7.9311872,2.5008529 8.0861594,1.3336456 7.3636699,1.3336456 Z M 7.0232248,2.0033943 C 7.1532129,2.0145373 7.2052082,2.1259543 7.145785,2.3042238 7.0695253,2.5330032 6.8199481,2.7825801 6.591169,2.8588398 6.3534764,2.9380707 6.2346301,2.8192244 6.313861,2.5815318 6.3901206,2.3527527 6.6396979,2.1031757 6.868477,2.0269157 6.9279001,2.007108 6.9798954,1.9996793 7.0232248,2.0033937 Z"
        style="fill:#000000" />
    </g>
  </symbol>

  <symbol id="MapPOISymbol_HM_MineEntrance" viewBox="0 0 9.999999 9.1877814">
    <g>
      <path d="M 1.6244147,8.7509736 C 1.6315257,7.9841676 1.6196077,6.9748613 1.6188893,5.9981393 1.6185434,5.6043856 1.6012083,5.1794457 1.0688847,5.3186548 0.70579277,5.4136116 -4.8e-7,4.9422686 -4.8e-7,4.6047578 -4.8e-7,4.5106613 0.61846468,3.7774073 1.3743601,2.9753823 2.1302558,2.1733034 2.8966107,1.2678259 3.0773637,0.96311447 3.5132549,0.22840875 4.0878685,-0.00699389 5.4279865,1.5744866e-4 6.6024671,0.00660978 7.3455152,0.38111398 7.3455152,0.96698588 c 0,0.34105962 1.0676166,1.82988182 2.0155321,2.81063652 0.7635437,0.7900883 0.7683097,0.8038532 0.403109,1.1690553 -0.1978818,0.1979254 -0.2687397,0.6816353 -0.2687397,1.8345598 0,0.3836988 0.022632,1.3188032 0.02354,1.5889947 0.00145,0.3767087 0.00145,0.7624507 -0.5807251,0.7626658 l -3.3143498,0 C 5.1906428,9.1330593 4.9260594,8.8651262 4.9273327,8.7446288 c 0.00382,-0.3651483 -0.00242,-2.1109884 -0.00242,-2.4389283 0,-0.3152503 -0.00145,-0.3152503 -0.7191212,-0.3109487 -0.6226981,-0.00538 -0.6226981,-0.00538 -0.6203822,0.309013 -0.00242,0.6375981 -1.199e-4,1.7207298 -0.0029,2.4481229 -0.00242,0.6527073 -1.9628788,0.5050027 -1.9581703,0 z"
        style="fill:#000000" />
      <path d="m 1.433298,4.6643344 c 0,-0.091946 0.5038854,-0.6791082 1.1197415,-1.3048232 C 3.168896,2.7337961 3.7718327,2.0028005 3.8928935,1.7350824 4.2383622,0.97112612 4.9190759,1.071675 5.368775,1.9531713 5.7175156,2.6367961 6.0303134,3.0295819 7.19714,4.2492342 c 0.4594911,0.4803225 0.6919606,0.5822694 1.3275155,0.5822694 0.8547401,0 1.2025822,-0.284064 0.6142804,-0.5017227 C 8.9302008,4.2525679 8.6629989,4.0219508 8.5451616,3.8172505 8.0746875,3.0002237 7.0280426,1.3395544 6.6869169,1.3342312 3.5406025,1.2847633 4.2354796,1.1239927 6.6263074,1.2119595 6.8751992,1.2211003 6.7549164,0.71744187 6.6890117,0.65152053 6.6231076,0.58559919 6.0157408,0.5317222 5.3393083,0.5317222 c -1.0085347,0 -1.2503445,0.0564041 -1.343635,0.31352965 C 3.8793162,1.1659328 3.6779028,1.3967651 1.7974421,3.3648344 0.63790411,4.5784108 0.51321556,4.8315036 1.074977,4.8315036 c 0.1970792,0 0.358321,-0.075223 0.358321,-0.1671692 z M 6.4204355,4.9425375 C 6.4559395,4.7573017 6.4152736,4.5557201 6.330119,4.494638 6.1617765,4.3739793 5.4863769,3.543564 4.9450637,2.7916521 L 4.6049091,2.3191799 3.8253171,3.1683608 C 3.3965418,3.6353485 3.0253014,4.1966477 3.0253014,4.1966477 3.3206296,4.5072738 4.2521132,4.5205011 4.935339,4.5617423 7.8339106,4.736708 5.7644466,4.7309547 5.1557399,4.7744542 4.8895371,4.7938112 4.1092876,4.8365041 3.4761346,4.7857458 2.8429816,4.7346648 2.280807,4.7647757 2.2268612,4.8519897 1.9688792,5.2694557 2.4529552,5.3781238 4.3565985,5.3299463 6.148924,5.28478 6.3625597,5.2446142 6.4204355,4.942645 Z M 8.9503272,8.3659844 C 8.9546288,8.124936 8.9346158,7.0905731 8.951779,5.9738892 L 8.95807,5.5643811 8.3489068,5.4501211 C 7.1713947,5.2291824 7.0108783,5.0543242 7.029967,6.0102912 c 0.014701,0.734867 -0.00145,2.2323999 -0.00479,2.3741361 -0.00812,0.3625136 1.9185126,0.3625136 1.9251672,-0.018282 z M 6.3577887,7.3374286 C 6.3734518,6.1567054 6.3362164,5.8237649 5.8833121,5.9976016 5.676254,6.0770728 5.652846,6.331241 5.643189,7.1232112 c -0.00913,0.7485782 -0.014367,0.9793567 -0.014555,1.2391706 -1.919e-4,0.3845591 0.7392573,0.3845591 0.7332803,0.00591 -0.0029,-0.177708 -0.012394,-0.4074111 -0.0043,-1.0305452 z M 3.0527066,6.1227768 c -0.00242,-0.3986466 -0.8327881,-0.4657509 -0.8336818,0.00538 -9.678e-4,0.4705902 0.00242,1.5188793 0.00145,2.2391748 -3.458e-4,0.2722347 0.8150158,0.2761599 0.8166541,0.00538 0.0043,-0.714811 0.018163,-1.8494539 0.015663,-2.2480468 z"
        fill="currentColor" />
    </g>
  </symbol>

  <symbol id="MapPOISymbol_HM_UnderworldBoss" viewBox="0 0 10 9.0292654">
    <g>
      <path d="m 4.2934395,1.074e-4 c -1.272982,-0.0121265 -2.3236893,1.0134075 -2.3236893,2.7937435 0,0.633959 0.1611613,1.252051 0.3581363,1.373789 0.196975,0.121737 0.358136,0.374667 0.358136,0.561686 0,0.187019 -0.3230404,0.138031 -0.7176712,-0.10842 C 0.7940217,3.8875249 0,4.6597459 0,6.5346969 c 0,1.558688 0.011865,1.57349 1.3430115,1.683661 1.0256123,0.08488 1.343011,-0.02092 1.343011,-0.44767 0,-0.636448 0.405866,-0.725909 0.927518,-0.20425 0.234139,0.234131 0.775471,0.233454 1.593427,-0.0021 1.116703,-0.321584 1.303823,-0.268169 1.895605,0.540702 0.621249,0.849151 2.156016,1.235681 2.496462,0.628837 0.9803195,-1.747412 0.03477,-3.887764 -1.451432,-3.275688 -0.326442,0.134441 -0.761774,0.206361 -0.963191,0.293084 -0.06973,-1.399569 -0.01909,-2.837112 0.215442,-2.837112 0.549874,0 0.308906,-0.546392 -0.754745,-1.710941 C 5.9007035,0.3882012 5.0572295,0.0073829 4.2934395,1.07e-4 Z"
        style="fill:#000000" />
      <path d="m 4.2857455,0.4072074 c -0.836171,0 -1.332301,0.2163344 -1.587132,0.6924905 -0.484899,0.906042 -0.4749625,2.424607 0.01819,2.729391 0.214136,0.132343 0.305586,0.561938 0.202851,0.954797 -0.102736,0.392859 -0.03282,1.120612 0.155985,1.61721 0.308873,0.812398 0.489176,0.883292 1.796977,0.707878 0.799425,-0.107225 1.498346,-0.248962 1.552857,-0.314768 0.05451,-0.06581 0.204751,-0.603096 0.333655,-1.194021 0.185741,-0.851483 0.154938,-0.944369 -0.146892,-0.44767 -0.270995,0.445954 -0.840569,0.626738 -1.974647,0.626738 -0.8766,0 -1.839853,-0.04344 -1.713738,-0.36653 0.168174,-0.430839 1.035518,-0.289587 1.72493,-0.289587 0.906882,0 1.223899,-0.158537 1.253477,-0.569381 0.03426,-0.475873 0.427386,-1.259772 0.427386,-1.259772 l 0.778523,-0.630936 -0.803009,-1.12757 C 5.6741655,0.6493284 5.2414615,0.4072074 4.2857445,0.4072074 Z m 1.142959,1.0478285 c 0.09104,-0.02077 0.234749,0.0525 0.503629,0.2714 0.257388,0.20955 0.333202,0.676173 0.214742,0.984875 -0.230326,0.600222 -1.155684,0.765644 -1.459126,0.255313 -0.232282,-0.390654 0.148076,-0.468196 0.390313,-0.864564 0.193685,-0.316925 0.198711,-0.61241 0.350442,-0.647024 z m -2.430012,0.216141 c 0.02578,-0.003 0.05318,-0.0021 0.08184,0.0028 0.137557,0.02336 0.307711,0.134341 0.505728,0.29868 0.694203,0.576138 0.736597,0.924377 -0.183965,0.941507 -0.393882,0.0073 -0.728009,-0.215378 -0.716273,-0.477749 0.02342,-0.523592 0.132211,-0.744283 0.31267,-0.765236 z m 1.352805,1.743816 c 0.113858,0.01564 0.219827,0.07972 0.28469,0.184665 0.115312,0.186577 0.271215,0.433784 0.08464,0.549095 -0.186577,0.115311 -0.759045,0.168392 -0.874357,-0.01819 -0.11531,-0.186577 0.05474,-0.545003 0.241323,-0.660314 0.04664,-0.02883 0.09709,-0.04673 0.148291,-0.05456 0.0384,-0.0059 0.07746,-0.0059 0.115415,-6.98e-4 z m -3.0343671,1.347209 c -0.058284,-0.0016 -0.1173774,0.0019 -0.177669,0.01049 -0.6569088,0.09352 -0.7871017,0.439337 -0.8149003,1.718635 -0.00422,0.193928 0.199347,0.357046 0.5763758,0.425987 0,0 -0.3901545,0.04821 -0.5022304,0.139197 -0.083421,0.06772 -0.069145,0.191601 -0.065052,0.237126 0.05304,0.589962 0.2682989,0.634433 0.9687868,0.634433 0.7694188,0 1.0629689,-0.205838 1.2275962,-0.861766 0.287578,-1.145799 -0.3386454,-2.280007 -1.2129072,-2.304104 z m 0.1734727,0.921921 c 0.1684115,0.0077 0.3164948,0.208179 0.4105976,0.542801 0.1080773,0.384313 -0.09979,0.626738 -0.4686551,0.626738 -0.3440713,0 -0.5978127,-0.24856 -0.474251,-0.55609 0.1752057,-0.436066 0.3638959,-0.621155 0.5323085,-0.613449 z m 6.8647464,0.169975 c -0.0626,0.0032 -0.124462,0.0119 -0.186063,0.02588 -0.458427,0.104075 -0.780341,0.132707 -0.970885,0.116115 0.06718,1.108095 0.207333,2.13931 0.401504,2.333482 0.513896,0.513895 2.174465,0.0073 1.696951,-0.389613 -0.440205,-0.365862 -0.286733,-0.566582 0.241323,-0.757543 0.7490425,-0.270875 -0.243762,-1.375696 -1.18283,-1.328322 z m -0.118213,0.641428 c 0.295463,0 0.537205,0.241742 0.537205,0.537205 0,0.295462 -0.241742,0.537204 -0.537205,0.537204 -0.295462,0 -0.537204,-0.241742 -0.537204,-0.537204 0,-0.295463 0.241742,-0.537205 0.537204,-0.537205 z"
        fill="currentColor" />
    </g>
  </symbol>


</svg>
<div class="map-container" (click)="containerClicked($event)" [class.debug-mode]="showDebug">
  <div class="map-bg">
    <div #mapContainerRef style="display: none;"></div>
  </div>
  <div class="region-container" *ngFor="let region of regions; let i = index">

    <svg class="map-area" [attr.viewBox]="region.viewBox"></svg>
    <svg class="map-vector-icons" [attr.viewBox]="region.viewBox">
      <g *ngIf="showDebug">
        <circle *ngFor="let point of region.pointPositions" [attr.cx]="point.x" [attr.cy]="point.y" r="0.5" fill="lime"></circle>
      </g>

      <g [attr.transform]="'translate(0 ' + (region.cropArea.height / -2) + ')'">
        <use *ngFor="let poi of region.poiPositions" class="poi" [ngClass]="[poi.type, 'team' + (poi.team + 1)]" [attr.href]="poiIcon(poi).icon"
          [attr.width]="poiIcon(poi).size" [attr.x]="poi.x" [attr.y]="poi.y" [attr.transform]="'translate(' + (poiIcon(poi).size / -2) + ' 0)'"></use>
      </g>
      <!--
      <g *ngFor="let core of region.corePositions" class="map-symbol core" [class.team1]="core.team === 0" [class.team2]="core.team === 1"
        [attr.transform]="'translate(' + core.x + ' ' + core.y + ') scale(0.06) translate(-110 ' + (region.cropArea.height / -2) +')'">
        <use href="#map-core-symbol"></use>
      </g>
      <g *ngFor="let well of region.wellPositions" class="map-symbol well" [class.team1]="well.team === 0" [class.team2]="well.team === 1"
        [attr.transform]="'translate(' + well.x + ' ' + well.y + ') scale(0.02) translate(-110 ' + (region.cropArea.height / -2) +')'">
        <use href="#map-moon-well-symbol"></use>
      </g>
      <g *ngFor="let tower of region.towerPositions" class="map-symbol tower" [class.team1]="tower.team === 0" [class.team2]="tower.team === 1"
        [attr.transform]="'translate(' + tower.x + ' ' + tower.y + ') scale(0.025) translate(-110 ' + (region.cropArea.height / -2) +')'">
        <use href="#map-tower-symbol"></use>
      </g>
      <g *ngFor="let town of region.townPositions" class="map-symbol town" [class.team1]="town.team === 0" [class.team2]="town.team === 1"
        [attr.transform]="'translate(' + town.x + ' ' + town.y + ') scale(0.045) translate(-110 ' + (region.cropArea.height / -2) +')'">
        <use href="#map-town-symbol"></use>
      </g>
      <g transform="translate(0 -80)">
        <g transform="translate(-5 0)">
          <use href="#coreTest" x="27" y="65" width="10"></use>
        </g>

      </g>
    -->
    </svg>
    <img class="heatmap" [attr.src]="regionHeatMaps[i]" *ngIf="regionHeatMaps[i]" />
  </div>
</div>
<div #heatmapRender class="heatmap-render"></div>
